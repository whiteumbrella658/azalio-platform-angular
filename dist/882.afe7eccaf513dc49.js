"use strict";(self.webpackChunkAzal_FE=self.webpackChunkAzal_FE||[]).push([[882],{5360:function(ie,E,u){u.r(E),u.d(E,{TimesheetsModule:function(){return Hn}});var b=u(3144),A=u(5671),h=u(4202),v=u(4825),q=u(7757),C=u.n(q),k=u(655),P=u(8457),g=u(8279),y=u(6271),x=u(3075),e=u(5e3),M=u(5837),D=u(7243),N=u(7756),J=function(){var i=function(){function s(n){var t=this;(0,A.Z)(this,s),this.http=n,this.addTimeSheetEntry=function(o){return new Promise(function(a,l){t.http.post(D.J.timesheet.post.addTimesheetEntry,o).subscribe(function(r){a(r)},function(r){console.log(r),l(r)})})},this.updateTimeSheetEntry=function(o){return new Promise(function(a,l){t.http.post(D.J.timesheet.post.updateTimesheetEntry,o).subscribe(function(r){a(r)},function(r){console.log(r),l(r)})})},this.deleteTimesheetEntry=function(o){return(0,k.mG)(t,void 0,void 0,C().mark(function a(){var l=this;return C().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise(function(p,_){l.http.post(D.J.timesheet.post.deleteTimesheetEntry,o).subscribe(function(m){p(m)},function(m){console.log(m),_(m)})}));case 1:case"end":return r.stop()}},a)}))},this.exportSummaryReport=function(o){return(0,k.mG)(t,void 0,void 0,C().mark(function a(){var l=this;return C().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise(function(p,_){var c=D.J.timesheet.get.exportSummaryReport;c+="?from_date=".concat(o.startDate,"&to_date=").concat(o.endDate),o.store_group_id&&(c+="&store_group_id=".concat(o.store_group_id)),o.role&&(c+="&role=".concat(o.role)),o.regionId&&(c+="&region_id=".concat(o.regionId)),o.teamId&&(c+="&team_id=".concat(o.teamId)),o.search&&(c+="&search=".concat(o.search)),l.http.get(c).subscribe(function(m){p(m)},function(m){console.log(m),_(m)})}));case 1:case"end":return r.stop()}},a)}))},this.exportDetailedReport=function(o){return(0,k.mG)(t,void 0,void 0,C().mark(function a(){var l=this;return C().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise(function(p,_){var c=D.J.timesheet.get.exportDetailedReport;c+="?from_date=".concat(o.startDate,"&to_date=").concat(o.endDate),o.store_group_id&&(c+="&store_group_id=".concat(o.store_group_id)),o.role&&(c+="&role=".concat(o.role)),o.regionId&&(c+="&region_id=".concat(o.regionId)),o.teamId&&(c+="&team_id=".concat(o.teamId)),o.search&&(c+="&search=".concat(o.search)),l.http.get(c).subscribe(function(m){p(m)},function(m){console.log(m),_(m)})}));case 1:case"end":return r.stop()}},a)}))}}return(0,b.Z)(s,[{key:"getTimesheetTableData",value:function(t){var o=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{pageIndex:0,pageSize:25},l=arguments.length>2?arguments[2]:void 0,d=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:d,p=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return new Promise(function(_,c){var m=D.J.timesheet.get.timesheetSummary+"?from_date="+d+"&to_date="+r+"&page_no="+(a.pageIndex+1)+"&page_size="+a.pageSize;if(t&&(m+="&user_search="+t),(null==l?void 0:l.region_id)?m+="&region_id="+l.region_id:(null==l?void 0:l.team_id)&&(m+="&team_id="+l.team_id),p)for(var T in p)p[T]&&0!==p[T]&&(m+="&"+T+"="+p[T]);d&&r&&o.http.get(m).subscribe(function(Z){_(Z)},function(Z){console.log(Z),c(Z)})})}},{key:"DefaultTimezone",value:function(t,o){var a=this;return new Promise(function(l,d){a.http.get(D.J.organisation.get.DefaultTimezone+"?user_id="+t+"&region_id="+o).subscribe(function(p){l(p)},function(p){console.log(p),d(p)})})}},{key:"getTimesheetDetails",value:function(t,o,a){var l=this;return new Promise(function(d,r){l.http.get(D.J.timesheet.get.timesheetDetails+"?date="+t+"&user_id="+o+"&region_id="+a).subscribe(function(_){d(_)},function(_){console.log(_),r(_)})})}}]),s}();return i.\u0275fac=function(n){return new(n||i)(e.LFG(N.s))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i}(),I=u(6300),w=u(9808),U=u(9489),oe=u(8585),ae=u(8719),se=u(7754),le=u(3434),re=u(9894),pe=u(42),de=u(82),ce=["ngForm"];function _e(i,s){1&i&&(e.TgZ(0,"label"),e.TgZ(1,"b",36),e._uU(2,"New Timesheet Entry"),e.qZA(),e.qZA())}function ue(i,s){if(1&i&&(e.TgZ(0,"span"),e.TgZ(1,"span",37),e._uU(2),e.qZA(),e._UZ(3,"br"),e.TgZ(4,"span",38),e._uU(5),e.qZA(),e._UZ(6,"br"),e.qZA()),2&i){var n=e.oxw();e.xp6(2),e.hij(" ",n.userName," "),e.xp6(3),e.hij(" ",n.userRole," ")}}function me(i,s){if(1&i){var n=e.EpF();e.TgZ(0,"div",11),e.TgZ(1,"div",39),e.TgZ(2,"i",40),e.TgZ(3,"span",14),e._uU(4," *"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(5,"div",15),e.TgZ(6,"span",41),e.TgZ(7,"app-region-dropdown",42),e.NdJ("regionChange",function(l){return e.CHM(n),e.oxw().regionChange(l)}),e.qZA(),e._UZ(8,"app-error-message",17),e.qZA(),e.TgZ(9,"div",43),e._UZ(10,"app-error-message",17),e.qZA(),e.qZA(),e._UZ(11,"div",18),e.qZA()}if(2&i){var t=e.oxw(),o=e.MAs(9);e.xp6(7),e.Q6J("controlName","region_id")("form",t.AddTimesheetEntry)("placeholder","Select "+(null==t.nameConfig?null:t.nameConfig.region))("reloadData",t.reloadRegionData)("isEditMode",t.isEditMode)("isNewEntry",t.isNewAddEntry)("userId",t.userId?t.userId:0)("regionId",t.regionId)("selectedRegionId",t.selectedRegionId)("selectedRegionTitle",t.selectedRegionTitle),e.xp6(1),e.Q6J("key","region_id")("form",t.AddTimesheetEntry)("isSubmitted",o.submitted),e.xp6(2),e.Q6J("key","regionTeams")("form",t.AddTimesheetEntry)("isSubmitted",o.submitted)}}function he(i,s){if(1&i&&e._UZ(0,"app-error-message",17),2&i){var n=e.oxw(2),t=e.MAs(9);e.Q6J("key","user_id")("form",n.AddTimesheetEntry)("isSubmitted",t.submitted)}}function ge(i,s){if(1&i){var n=e.EpF();e.TgZ(0,"div",11),e.TgZ(1,"div",39),e.TgZ(2,"i",44),e.TgZ(3,"span",14),e._uU(4," *"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(5,"div",45),e.TgZ(6,"app-user-autocomplete-input",46),e.NdJ("selectedUser",function(a){return e.CHM(n),e.oxw().onSelectedUser(a)}),e.qZA(),e.YNc(7,he,1,3,"app-error-message",47),e.qZA(),e._UZ(8,"div",18),e.qZA()}if(2&i){var t=e.oxw();e.xp6(6),e.Q6J("region",t.regionId)("isOwnAddEdit",t.isOwnAddEditEntry),e.xp6(1),e.Q6J("ngIf",!t.userId)}}function fe(i,s){if(1&i&&(e.TgZ(0,"div",51),e._uU(1),e.qZA()),2&i){var n=e.oxw(2);e.xp6(1),e.AsE("",null==n.nameConfig?null:n.nameConfig.end," must be greater than ",null==n.nameConfig?null:n.nameConfig.start,"")}}function ve(i,s){1&i&&(e.TgZ(0,"div",51),e._uU(1,"Graveyard shift is not allowed"),e.qZA())}function Te(i,s){1&i&&(e.TgZ(0,"div",51),e._uU(1,"A minimum of 10 minute slot is required"),e.qZA())}function xe(i,s){if(1&i&&(e.TgZ(0,"div",51),e._uU(1),e.qZA()),2&i){var n=e.oxw(2);e.xp6(1),e.hij("Maximum allowed shift time is ",n.maxAllowedSlotTime/60," Hours")}}function ye(i,s){if(1&i&&(e.ynx(0),e.YNc(1,fe,2,2,"div",48),e.YNc(2,ve,2,0,"div",49),e.YNc(3,Te,2,0,"div",49),e.YNc(4,xe,2,1,"div",50),e.BQk()),2&i){var n=e.oxw(),t=e.MAs(9);e.xp6(1),e.Q6J("ngIf",t.touched&&(null==n.AddTimesheetEntry.errors?null:n.AddTimesheetEntry.errors.invalidTime)),e.xp6(1),e.Q6J("ngIf",t.touched&&(null==n.AddTimesheetEntry.errors?null:n.AddTimesheetEntry.errors.invalidThirdShift)),e.xp6(1),e.Q6J("ngIf",t.touched&&(null==n.AddTimesheetEntry.errors?null:n.AddTimesheetEntry.errors.invalidSlot)),e.xp6(1),e.Q6J("ngIf",t.touched&&(null==n.AddTimesheetEntry.errors?null:n.AddTimesheetEntry.errors.invalidMaxSlot))}}function we(i,s){if(1&i&&(e.TgZ(0,"span",52),e._uU(1,"Added by: "),e.TgZ(2,"span",53),e._uU(3),e.qZA(),e._uU(4),e.ALo(5,"date"),e.qZA()),2&i){var n=e.oxw();e.xp6(2),e.hYB("nbTooltip","",n.timesheetData.entry.created_by+" - ","",n.timesheetData.entry.created_by_role,""),e.xp6(1),e.Oqu(n.timesheetData.entry.created_by),e.xp6(1),e.hij(" on ",e.xi3(5,4,n.timesheetData.entry.creation_date,"MM/dd/yyyy")," ")}}function Ce(i,s){if(1&i&&(e.TgZ(0,"span",54),e._uU(1," Last modified by: "),e.TgZ(2,"span",53),e._uU(3),e.qZA(),e._uU(4),e.ALo(5,"date"),e.qZA()),2&i){var n=e.oxw();e.xp6(2),e.hYB("nbTooltip","",n.timesheetData.entry.modified_by+" - ","",n.timesheetData.entry.modified_by_role,""),e.xp6(1),e.Oqu(n.timesheetData.entry.modified_by),e.xp6(1),e.hij(" on ",e.xi3(5,4,n.timesheetData.entry.modification_date,"MM/dd/yyyy")," ")}}var O=function(){var i=function(){function s(n,t,o,a,l,d,r){var p=this;(0,A.Z)(this,s),this.cdRef=n,this.ref=t,this.dataService=o,this.fb=a,this.timeSheetService=l,this.gs=d,this.http=r,this.selectedRegionId=null,this.selectedTimesheetEntryId=null,this.regions=[],this.maxAllowedSlotTime=1440,this.minAllowedSlotTime=0,this.isEditMode=!1,this.userId=null,this.userName=null,this.buttonLabel="Add",this.isOwnAddEditEntry=!0,this.addTimesheetEntryFormValues=function(){p.AddTimesheetEntry=p.fb.group({timezone:["",x.kI.required],clockIn:[null,x.kI.required],clockOut:null,note:["",x.kI.maxLength(500)],user_id:null,region_id:null},{validator:[p.timeValidator]}),p.updateValidations(),p.initData()},this.updateValidations=function(){null==p.userId&&p.AddTimesheetEntry.controls.user_id.setValidators(x.kI.required),null==p.regionId&&p.AddTimesheetEntry.controls.region_id.setValidators(x.kI.required)},this.resetForm=function(){p.addTimesheetEntryFormValues(),p.AddTimesheetEntry.reset(p.AddTimesheetEntry.value),p.selectedRegionId=null,p.selectedRegionTitle=null,p.isEditMode=!1,p.selectedTimesheetEntryId=null,p.ngForm.resetForm()},this.timeValidator=function(_){var c;if(null!=_.get("clockOut").value&&""!=_.get("clockOut").value&&null!=_.get("clockIn").value&&""!=_.get("clockIn").value){var m=new Date(_.get("clockIn").value),T=new Date(_.get("clockOut").value);m.setSeconds(0,0),T.setSeconds(0,0);var f,F,L,z,Z=(T.getTime()-m.getTime())/6e4;m.getTime()>=T.getTime()?f=!0:p.isThirdShiftAllowed?Z<p.minAllowedSlotTime?L=!0:Z>p.maxAllowedSlotTime&&(z=!0):""+m.getDate()+m.getMonth()+m.getFullYear()!=""+T.getDate()+T.getMonth()+T.getFullYear()&&(F=!0);var S={};return f?S={invalidTime:f}:F?S={invalidThirdShift:F}:L?S={invalidSlot:L}:z&&(S={invalidMaxSlot:z}),0===(null===(c=Object.keys(S))||void 0===c?void 0:c.length)&&(m.setHours(0,0,0,0),T.setHours(23,59,0,0),p.userId=p.userId),S==={}?null:S}return null},this.update=function(_){return(0,k.mG)(p,void 0,void 0,C().mark(function c(){var m,T;return C().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return(m=this.createTimeSheetObject()).timesheet_id=this.selectedTimesheetEntryId,f.prev=2,f.next=5,this.timeSheetService.updateTimeSheetEntry(m);case 5:this.gs.showToastSuccess(null==(T=f.sent)?void 0:T.message),this.close(!0),f.next=14;break;case 10:f.prev=10,f.t0=f.catch(2),this.gs.showToastError(f.t0.message),console.log(f.t0);case 14:return f.prev=14,this.loading=!1,f.finish(14);case 17:case"end":return f.stop()}},c,this,[[2,10,14,17]])}))},this.add=function(_){return(0,k.mG)(p,void 0,void 0,C().mark(function c(){var m,T;return C().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return m=this.createTimeSheetObject(),f.prev=1,f.next=4,this.timeSheetService.addTimeSheetEntry(m);case 4:this.gs.showToastSuccess(null==(T=f.sent)?void 0:T.message),this.close(!0),f.next=13;break;case 9:f.prev=9,f.t0=f.catch(1),this.gs.showToastError(f.t0.message),console.log(f.t0);case 13:return f.prev=13,this.loading=!1,f.finish(13);case 16:case"end":return f.stop()}},c,this,[[1,9,13,16]])}))},this.createTimeSheetObject=function(){var _=p.AddTimesheetEntry.get("timezone").value,c=p.timezoneMapping.filter(function(T){return T.key===_})[0].value;return{user_id:p.userId,region_id:p.regionId,start_time:new Date(p.AddTimesheetEntry.get("clockIn").value).getTime()/1e3,note:p.AddTimesheetEntry.get("note").value,end_time:p.AddTimesheetEntry.get("clockOut").value?new Date(p.AddTimesheetEntry.get("clockOut").value).getTime()/1e3:null,time_zone:c}},this.regionChange=function(_){if(p.isNewAddEntry&&(p.userId=null),p.regionId=_?_.store_id?_.store_id:_.region_id:null,null==_?void 0:_.default_timezone){var c=p.timezoneMapping.filter(function(m){return m.value===(null==_?void 0:_.default_timezone)});p.isEditMode||p.AddTimesheetEntry.controls.timezone.setValue(c[0].key?c[0].key:null)}},this.onSelectedUser=function(_){p.userId=_?_.id:null},this.timezoneMapping=y.YL.slice()}return(0,b.Z)(s,[{key:"ngOnInit",value:function(){var t=this;this.disable=!1,this.opacity=y.ZF,this.dataService.getConfigurations(!1).then(function(o){var a,l,d,r;t.nameConfig=null===(a=o.company)||void 0===a?void 0:a.custom_names,t.maxAllowedSlotTime=(null===(l=o.company)||void 0===l?void 0:l.timesheet)?60*o.company.timesheet.shift_hours:1440,t.isThirdShiftAllowed=1===(null===(d=o.company)||void 0===d?void 0:d.timesheet.is_third_shift),t.isOwnAddEditEntry=!(!o.is_partner&&2!==o.role.role_id&&!o.role.role_title.includes("Account Owner"))||1===(null===(r=o.company)||void 0===r?void 0:r.timesheet.is_edit_own)}).finally(function(){}),this.addTimesheetEntryFormValues(),this.isNewAddEntry&&this.getUsers()}},{key:"getDefaultTimezone",value:function(){var o,t=this;this.user&&(this.userRegionDefaultTimeZones=this.timeSheetService.DefaultTimezone(null===(o=this.user)||void 0===o?void 0:o.userId,this.regionId).then(function(a){t.userRegionDefaultTimeZones=a},function(a){console.log("error in  getting defaultTimezone add-timesheetentry.comp.ts 72 :>>",a),console.log("------------------------------------------------")}).finally(function(){var a=t.timezoneMapping.filter(function(l){var d;return l.value===(null===(d=t.userRegionDefaultTimeZones[0])||void 0===d?void 0:d.default_timezone)});!t.timesheetData&&t.AddTimesheetEntry.controls.timezone.setValue(a[0].key?a[0].key:"")}))}},{key:"initData",value:function(){if(this.user=this.user,this.selectedData&&(this.userName=this.selectedData.user_name,this.userId=this.selectedData.user_id,this.regionId=this.selectedData.region_id,this.selectedRegionId=this.selectedData.region_id,this.selectedRegionTitle=this.selectedData.region_title),this.user){this.userName=this.user.userName,this.userId=this.user.userId,this.userColor=this.user.userColor+this.opacity.toString(),this.initialColor=this.user.userColor,this.userRole=this.user.userRole;var t=this.user.date;t&&(t.setHours(0,0,0,0),this.AddTimesheetEntry.controls.clockIn.setValue(this.user.date))}else{var o=this.dataService.getSelectedFilter();o&&(this.regionId=o.id,this.selectedRegionId=o.id,this.selectedRegionTitle=o.name);var a=new Date;a.setHours(0,0,0,0),this.AddTimesheetEntry.controls.clockIn.setValue(a),this.isNewAddEntry=!0}if(this.timesheetData){this.buttonLabel="Update",this.isEditMode=!0;var p,l=this.timesheetData.entry,d=this.timesheetData.store_timezone,r=this.timezoneMapping.filter(function(_){return _.value===l.start_time_zone});(null==r?void 0:r.length)>0&&(p=r[0].key),l.end_time||(this.disable=!0),this.selectedTimesheetEntryId=l.timesheet_id,this.AddTimesheetEntry.controls.timezone.setValue(p),this.AddTimesheetEntry.controls.clockIn.setValue(this.gs.changeTimezone(new Date(this.gs.getDateFromTimestamp(l.start_time)),d)),l.end_time&&this.AddTimesheetEntry.controls.clockOut.setValue(this.gs.changeTimezone(new Date(this.gs.getDateFromTimestamp(l.end_time)),d)),this.AddTimesheetEntry.controls.note.setValue(l.change_note)}this.user&&!this.timesheetData&&(this.isAddEntry=!0,this.getDefaultTimezone())}},{key:"ngAfterViewChecked",value:function(){this.cdRef.detectChanges()}},{key:"ngOnChanges",value:function(t){t&&t.addEntry.currentValue!==t.addEntry.previousValue&&this.AddTimesheetEntry.controls.user.setValue(null)}},{key:"submit",value:function(t){this.AddTimesheetEntry.controls.user_id.setValue(this.userId),this.isAddEntry&&this.AddTimesheetEntry.controls.region_id.setValue(this.regionId),t.valid&&(this.loading=!0,this.isEditMode?this.update(t):this.add(t))}},{key:"getUsers",value:function(){this.users=[]}},{key:"userChange",value:function(t){var a,o=this;""!==this.AddTimesheetEntry.get("user").value?(this.regions=null==t?void 0:t.regions,1===(null===(a=null==t?void 0:t.regions)||void 0===a?void 0:a.length)&&setTimeout(function(){o.AddTimesheetEntry.controls.region.setValue(o.regions[0])},20)):this.AddTimesheetEntry.controls.region.setValue(null)}},{key:"onTagSelectionChange",value:function(t){this.regionId=t}},{key:"close",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.ref.close(t)}}]),s}();return i.\u0275fac=function(n){return new(n||i)(e.Y36(e.sBO),e.Y36(v.X4l),e.Y36(M.s),e.Y36(x.qu),e.Y36(J),e.Y36(I.m),e.Y36(N.s))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-timesheet-entry"]],viewQuery:function(n,t){var o;1&n&&e.Gf(ce,5),2&n&&e.iGM(o=e.CRH())&&(t.ngForm=o.first)},inputs:{user:"user",timesheetData:"timesheetData",selectedData:"selectedData"},features:[e.TTD],decls:56,vars:39,consts:[[1,"modal_wrapper","ts-entry"],[1,"card_header",2,"position","relative"],[4,"ngIf"],["icon","close",1,"cross_icon","hidden",3,"click"],[1,"timesheets-card-body",3,"nbSpinner"],[1,"add_timesheets"],["id","form",3,"formGroup","ngSubmit"],["ngForm","ngForm"],[1,"modal_body_wrapper"],[1,"wrappper"],["class","flex space_between vertical_center ts-details mb_30 relative",4,"ngIf"],[1,"flex","space_between","vertical_center","ts-details","mb_30","relative"],["nbTooltipPlacement","top","nbTooltip","Time Zone",2,"width","7%","padding-right","5px"],[1,"fa","fa-globe","fa-stack","icon-color"],[1,"mandatory"],[1,"name_resp",2,"width","90%","padding-right","5px"],[3,"controlName","form","placeholder"],[3,"key","form","isSubmitted"],[2,"width","3%","padding-right","5px"],["nbTooltipPlacement","top","nbTooltip","ClockIn/ ClockOut",2,"width","7%","padding-right","5px"],[1,"fas","fa-clock","icon-color"],[1,"name_resp",2,"width","42%","padding-right","5px"],[2,"width","7%","padding-right","5px","padding-left","5px"],[1,"fa","fa-arrow-right","icon-color"],[1,"name_resp",2,"width","42%","padding-right","5px","position","relative"],["nbTooltipPlacement","top","nbTooltip","Reason",2,"width","7%","padding-right","5px"],[1,"fa","fa-comment","icon-color"],["aria-label","reason note field","nbInput","","fullWidth","","placeholder","Add note",2,"resize","vertical",3,"formControlName"],["src","../../../../../assets/info-icon.svg","alt","reason icon","nbTooltipPlacement","right","nbTooltip","This reason note will only appear in reports. It will not be visible to the user on the mobile app.",1,"label-info-icon"],[1,"footer_button","modified",2,"padding-left","10px","padding-right","25px","margin-top","0px","padding-bottom","10px"],[1,"footer-details"],["class","modifiedby",4,"ngIf"],["class","modifiedby last-modified",4,"ngIf"],[1,"flex","footer-btns-row"],[3,"onClick"],[3,"form","label"],[1,"title"],[1,"title",2,"font-size","18px","font-weight","400","margin-top","5px"],[1,"role-title"],[2,"width","7%","padding-right","5px"],["nbTooltipPlacement","top","nbTooltip","Store",1,"fas","fa-store","icon-color"],[2,"position","relative"],[3,"controlName","form","placeholder","reloadData","isEditMode","isNewEntry","userId","regionId","selectedRegionId","selectedRegionTitle","regionChange"],[2,"position","absolute","width","100%"],["nbTooltipPlacement","top","nbTooltip","Name",1,"fa","fa-user","icon-color"],[1,"name_resp",2,"width","90%","padding-right","5px","position","relative"],[3,"region","isOwnAddEdit","selectedUser"],[3,"key","form","isSubmitted",4,"ngIf"],["class","red","style","font-size: 11px; position: absolute;margin-top: 3px;",4,"ngIf"],["class","red","style","font-size: 11px;position: absolute;margin-top: 3px;",4,"ngIf"],["class","red","style","font-size: 11px;position: absolute; margin-top: 3px;",4,"ngIf"],[1,"red",2,"font-size","11px","position","absolute","margin-top","3px"],[1,"modifiedby"],["nbTooltipPlacement","top",3,"nbTooltip"],[1,"modifiedby","last-modified"]],template:function(n,t){if(1&n){var o=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"nb-card"),e.TgZ(2,"nb-card-header",1),e.YNc(3,_e,3,0,"label",2),e.YNc(4,ue,7,2,"span",2),e.TgZ(5,"nb-icon",3),e.NdJ("click",function(){return t.close()}),e.qZA(),e.qZA(),e.TgZ(6,"nb-card-body",4),e.TgZ(7,"div",5),e.TgZ(8,"form",6,7),e.NdJ("ngSubmit",function(){e.CHM(o);var d=e.MAs(9);return t.submit(d)}),e.TgZ(10,"div",8),e.TgZ(11,"div",9),e.YNc(12,me,12,16,"div",10),e.YNc(13,ge,9,3,"div",10),e.TgZ(14,"div",11),e.TgZ(15,"div",12),e.TgZ(16,"i",13),e.TgZ(17,"span",14),e._uU(18," *"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div",15),e._UZ(20,"app-timezone-dropdown",16),e._UZ(21,"app-error-message",17),e.qZA(),e._UZ(22,"div",18),e.qZA(),e.TgZ(23,"div",11),e.TgZ(24,"div",19),e.TgZ(25,"i",20),e.TgZ(26,"span",14),e._uU(27," *"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"div",21),e._UZ(29,"app-timer-input",16),e.ALo(30,"lowercase"),e._UZ(31,"app-error-message",17),e.qZA(),e.TgZ(32,"div",22),e._UZ(33,"i",23),e.qZA(),e.TgZ(34,"div",24),e._UZ(35,"app-timer-input",16),e.ALo(36,"lowercase"),e._UZ(37,"app-error-message",17),e.YNc(38,ye,5,4,"ng-container",2),e.qZA(),e._UZ(39,"div",18),e.qZA(),e.TgZ(40,"div",11),e.TgZ(41,"div",25),e._UZ(42,"i",26),e.qZA(),e.TgZ(43,"div",15),e._UZ(44,"textarea",27),e._UZ(45,"app-error-message",17),e.qZA(),e.TgZ(46,"div",18),e._UZ(47,"img",28),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(48,"div",29),e.TgZ(49,"span",30),e.YNc(50,we,6,7,"span",31),e.YNc(51,Ce,6,7,"span",32),e.qZA(),e.TgZ(52,"span",33),e.TgZ(53,"app-button",34),e.NdJ("onClick",function(){return t.close()}),e._uU(54,"Cancel"),e.qZA(),e._UZ(55,"app-submit-button",35),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){var a=e.MAs(9);e.xp6(2),e.Tol(t.isEditMode||!t.isNewAddEntry?"add-ts-entries":""),e.xp6(1),e.Q6J("ngIf",t.isNewAddEntry),e.xp6(1),e.Q6J("ngIf",!t.isNewAddEntry),e.xp6(2),e.Q6J("nbSpinner",t.loading),e.xp6(2),e.Q6J("formGroup",t.AddTimesheetEntry),e.xp6(4),e.Q6J("ngIf",t.isNewAddEntry||t.isEditMode),e.xp6(1),e.Q6J("ngIf",t.isNewAddEntry),e.xp6(7),e.Q6J("controlName","timezone")("form",t.AddTimesheetEntry)("placeholder","Select time zone"),e.xp6(1),e.Q6J("key","timezone")("form",t.AddTimesheetEntry)("isSubmitted",a.submitted),e.xp6(8),e.Q6J("controlName","clockIn")("form",t.AddTimesheetEntry)("placeholder","Enter "+e.lcZ(30,35,null==t.nameConfig?null:t.nameConfig.start)+" time"),e.xp6(2),e.Q6J("key","clockIn")("form",t.AddTimesheetEntry)("isSubmitted",a.submitted),e.xp6(4),e.Q6J("controlName","clockOut")("form",t.AddTimesheetEntry)("placeholder","Enter "+e.lcZ(36,37,null==t.nameConfig?null:t.nameConfig.end)+" time"),e.xp6(2),e.Q6J("key","clockOut")("form",t.AddTimesheetEntry)("isSubmitted",a.submitted),e.xp6(1),e.Q6J("ngIf",!t.AddTimesheetEntry.controls.clockOut.errors),e.xp6(6),e.Q6J("formControlName","note"),e.xp6(1),e.Q6J("key","note")("form",t.AddTimesheetEntry)("isSubmitted",a.submitted),e.xp6(5),e.Q6J("ngIf",t.timesheetData&&(null==t.timesheetData.entry?null:t.timesheetData.entry.created_by)),e.xp6(1),e.Q6J("ngIf",t.timesheetData&&(null==t.timesheetData.entry?null:t.timesheetData.entry.modified_by)),e.xp6(4),e.Q6J("form",t.AddTimesheetEntry)("label",t.buttonLabel)}},directives:[v.Asz,v.ndF,w.O5,v.fMN,v.yKW,v.Q7R,x._Y,x.JL,x.sg,U.w5,v.jNv,oe.d,ae.H,se.s,le.H,re.T,v.h8i,x.Fj,x.JJ,x.u,U.x0,U.bf,pe.r,de.w],pipes:[w.i8,w.uU],styles:[".two_cols[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n}\n.two_cols[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n  margin-right: 0px;\n  width: 100%;\n}\n.footer_button[_ngcontent-%COMP%] {\n  display: flex;\n}\n.add_entry[_ngcontent-%COMP%] {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 37px;\n  \n  \n  text-align: center;\n}\n.title[_ngcontent-%COMP%] {\n  display: contents;\n}\n.modifiedby[_ngcontent-%COMP%] {\n  color: #b3b3b3;\n  font-size: 11px;\n  font-weight: 400;\n  word-break: break-word;\n  line-height: 1;\n}\n.add-prompt[_ngcontent-%COMP%] {\n  color: #222b45;\n  background-color: #ff0000;\n  text-align: center;\n  box-shadow: none;\n  font-size: 0.9375rem;\n  font-weight: 600;\n  line-height: 1.2rem;\n  padding: 0.5rem 0.125rem;\n  color: white;\n  margin: auto;\n}\n.label-info-icon[_ngcontent-%COMP%] {\n  vertical-align: top;\n  width: 13px;\n  cursor: pointer;\n}\n.modal_body_wrapper[_ngcontent-%COMP%] {\n  padding-left: 0px;\n  padding-right: 0px;\n  margin-top: 0px;\n}\n.wrappper[_ngcontent-%COMP%] {\n  border-radius: 3px;\n  margin-top: 0px;\n  overflow: hidden;\n  padding-top: 14px;\n  padding-left: 10px;\n  padding-right: 10px;\n}\n.ts-details[_ngcontent-%COMP%] {\n  width: 100%;\n}\n@media (max-width: 605px) and (min-width: 320px) {\n  .ts-details[_ngcontent-%COMP%]   .name_resp[_ngcontent-%COMP%] {\n    width: 100% !important;\n    padding-bottom: 5px;\n    padding-left: 10px;\n  }\n}\n@media (max-width: 930px) {\n  .footer_button[_ngcontent-%COMP%] {\n    flex-direction: column;\n  }\n  .footer_button[_ngcontent-%COMP%]   .footer-details[_ngcontent-%COMP%] {\n    display: flex;\n    align-items: flex-start !important;\n    flex-direction: column;\n    margin-top: 10px;\n    margin-left: 9px;\n  }\n  .footer_button[_ngcontent-%COMP%]   .footer-details[_ngcontent-%COMP%]   .modifiedby[_ngcontent-%COMP%] {\n    margin-top: 5px;\n  }\n  .footer_button[_ngcontent-%COMP%]   .footer-btns-row[_ngcontent-%COMP%] {\n    justify-content: flex-end;\n    margin-top: 10px;\n  }\n}\n.footer-details[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n}\n.last-modified[_ngcontent-%COMP%] {\n  margin-left: 4px;\n  border-left: 1px solid #b9b9b9;\n  padding-left: 4px;\n}"]}),i}(),Ze=u(6082),Q=u(605),B=u(3863),V=u(3966),W=u(3963),H=u(6664),j=u(6253),R=u(4266),$=u(8517),be=u(2125),Y=function(){var i=function(){function s(){(0,A.Z)(this,s)}return(0,b.Z)(s,[{key:"transform",value:function(t){if(!t)return"";var o=t.split(":");return o[0]+"h "+o[1]+"m"}}]),s}();return i.\u0275fac=function(n){return new(n||i)},i.\u0275pipe=e.Yjl({name:"time",type:i,pure:!0}),i}(),G=u(1062);function Ae(i,s){if(1&i&&(e.TgZ(0,"div",3),e.TgZ(1,"div",4),e.TgZ(2,"span",5),e._UZ(3,"app-user-avatar",6),e.qZA(),e.qZA(),e.qZA()),2&i){var n=e.oxw();e.xp6(3),e.Q6J("name",n.selectedData.user_name)("title",n.selectedData.role_title)("color","white")("initialColor",n.selectedData.user_color)("nbTooltip",n.selectedData.user_name)}}function De(i,s){if(1&i){var n=e.EpF();e.TgZ(0,"span",21),e.TgZ(1,"button",22),e.NdJ("click",function(){return e.CHM(n),e.oxw(2).add()}),e._uU(2,"Add"),e.qZA(),e.qZA()}}function ke(i,s){if(1&i&&(e.TgZ(0,"div",23),e.TgZ(1,"span",13),e.TgZ(2,"span",24),e._UZ(3,"img",25),e.qZA(),e.TgZ(4,"span",15),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"span",13),e.TgZ(7,"span",24),e._UZ(8,"i",26),e.qZA(),e.TgZ(9,"span",15),e._uU(10),e.ALo(11,"date"),e.TgZ(12,"span"),e._uU(13),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){var n=e.oxw(2);e.xp6(5),e.Oqu(n.selectedData.region_title),e.xp6(5),e.hij(" ",e.xi3(11,3,null==n.selectedData?null:n.selectedData.date,n.mediumDate)," "),e.xp6(3),e.hij(" ",n.timezone,"")}}function Oe(i,s){1&i&&(e.TgZ(0,"span"),e._UZ(1,"i",39),e.qZA())}var Me=function(s){return{out_schedule:s}};function Se(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"div",17),e.TgZ(2,"app-user-avatar",38),e.ALo(3,"async"),e.ALo(4,"imageAuth"),e.YNc(5,Oe,2,0,"span",29),e.qZA(),e.qZA(),e.BQk()),2&i){var n=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngClass",e.VKq(11,Me,n.start_time_flag)),e.xp6(1),e.Q6J("name",n.start_time_format_time)("title",n.start_location_address?n.start_location_address:"Loading...")("picture",e.lcZ(3,7,e.lcZ(4,9,n.start_photo)))("showInitials",!1)("nbTooltip",n.start_location_address?n.is_outof_radius_start?"Out of geo-fence.\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 Location: "+n.start_location_address:n.start_location_address:"Loading..."),e.xp6(3),e.Q6J("ngIf",n.is_outof_radius_start)}}var Pe=function(s,n,t){return{out_schedule:s,no_location:n,location_false:t}};function Je(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"div",17),e._UZ(2,"app-user-avatar",40),e.ALo(3,"async"),e.ALo(4,"imageAuth"),e.qZA(),e.BQk()),2&i){var n=e.oxw(2).$implicit,t=e.oxw(2);e.xp6(1),e.Q6J("ngClass",e.kEZ(10,Pe,n.start_time_flag,t.isLocationEnabled&&!n.start_location,!t.isLocationEnabled||!n.start_location)),e.xp6(1),e.Q6J("name",n.start_time_format_time)("title",t.isLocationEnabled?"No location":"")("picture",e.lcZ(3,6,e.lcZ(4,8,n.start_photo)))("showInitials",!1)("outsideRadiusStart",n.is_outside_radius||!0)}}function Ie(i,s){if(1&i&&(e.TgZ(0,"span"),e._UZ(1,"i",41),e.qZA()),2&i){var n=e.oxw(4);e.Tol(n.isLocationEnabled?"flag_loc_enabled":"flag_loc_unenabled"),e.xp6(1),e.Q6J("nbTooltip","Out of schedule")}}function Ee(i,s){1&i&&(e.TgZ(0,"span"),e._UZ(1,"i",43),e.qZA())}function qe(i,s){if(1&i&&(e.TgZ(0,"app-text-popup",42),e.YNc(1,Ee,2,0,"span",29),e.qZA()),2&i){var n=e.oxw(2).$implicit;e.Q6J("image",n.start_photo)("textLabel","details"),e.xp6(1),e.Q6J("ngIf",!(null!=n.start_photo&&n.start_photo.includes("id=null")))}}function Qe(i,s){if(1&i&&(e.TgZ(0,"td",28),e.YNc(1,Se,6,13,"ng-container",29),e.YNc(2,Je,5,14,"ng-container",29),e.YNc(3,Ie,2,3,"span",37),e.YNc(4,qe,2,3,"app-text-popup",31),e.qZA()),2&i){var n=e.oxw().$implicit,t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.isLocationEnabled&&n.start_location),e.xp6(1),e.Q6J("ngIf",!t.isLocationEnabled||!n.start_location),e.xp6(1),e.Q6J("ngIf",n.start_time_flag),e.xp6(1),e.Q6J("ngIf",n.start_photo)}}function Ne(i,s){1&i&&(e.TgZ(0,"span"),e._UZ(1,"i",39),e.qZA())}var Ue=function(s,n){return{out_schedule:s,"clockout-placeholder":n}};function Ve(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"div",17),e.TgZ(2,"app-user-avatar",38),e.ALo(3,"async"),e.ALo(4,"imageAuth"),e.YNc(5,Ne,2,0,"span",29),e.qZA(),e.qZA(),e.BQk()),2&i){var n=e.oxw().$implicit;e.xp6(1),e.Q6J("ngClass",e.WLB(11,Ue,n.end_time_flag,null===n.end_time)),e.xp6(1),e.Q6J("name",n.end_time_format_time?n.end_time_format_time:"-- : --")("title",n.end_location_address?n.end_location_address:"Loading...")("picture",e.lcZ(3,7,e.lcZ(4,9,n.end_photo)))("showInitials",!1)("nbTooltip",n.end_location_address?n.is_outof_radius_end?"Out of geo-fence.\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 Location: "+n.end_location_address:n.end_location_address:"Loading..."),e.xp6(3),e.Q6J("ngIf",n.is_outof_radius_end)}}var Re=function(s,n,t,o){return{out_schedule:s,"clockout-placeholder":n,no_location:t,location_false:o}};function Ye(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"div",17),e._UZ(2,"app-user-avatar",44),e.ALo(3,"async"),e.ALo(4,"imageAuth"),e.qZA(),e.BQk()),2&i){var n=e.oxw().$implicit,t=e.oxw(2);e.xp6(1),e.Q6J("ngClass",e.l5B(10,Re,n.end_time_flag,null===n.end_time,t.isLocationEnabled&&!(null!=n&&n.end_location),!t.isLocationEnabled||!n.end_location)),e.xp6(1),e.Q6J("name",n.end_time_format_time?n.end_time_format_time:"-- : --")("title",t.isLocationEnabled?"No location":"")("picture",e.lcZ(3,6,e.lcZ(4,8,null==n?null:n.end_photo)))("showInitials",!1)("outsideRadiusEnd",n.is_outside_radius||!0)}}function Fe(i,s){if(1&i&&(e.TgZ(0,"span"),e._UZ(1,"i",41),e.qZA()),2&i){var n=e.oxw(3);e.Tol(n.isLocationEnabled?"flag_loc_enabled":"flag_loc_unenabled"),e.xp6(1),e.Q6J("nbTooltip","Out of schedule")}}function Le(i,s){if(1&i&&(e.TgZ(0,"span"),e._UZ(1,"img",45),e.qZA()),2&i){var n=e.oxw().$implicit,t=e.oxw(2);e.xp6(1),e.Tol(t.isLocationEnabled?"graveyard":"graveyard-loc-disabled"),e.Q6J("nbTooltip","Graveyard shift "+n.end_time_format_date+" "+n.end_time_format_time)}}function ze(i,s){1&i&&(e.TgZ(0,"span"),e._UZ(1,"i",43),e.qZA())}function Be(i,s){if(1&i&&(e.TgZ(0,"app-text-popup",42),e.YNc(1,ze,2,0,"span",29),e.qZA()),2&i){var n=e.oxw().$implicit;e.Q6J("image",n.end_photo)("textLabel","details"),e.xp6(1),e.Q6J("ngIf",!(null!=n.end_photo&&n.end_photo.includes("id=null")))}}function We(i,s){if(1&i){var n=e.EpF();e.TgZ(0,"i",46),e.NdJ("click",function(){e.CHM(n);var o=e.oxw().$implicit,a=e.oxw(2);return a.edit({entry:o,store_timezone:a.data.time_zone})}),e.qZA()}}function He(i,s){if(1&i){var n=e.EpF();e.TgZ(0,"tr"),e.YNc(1,Qe,5,4,"td",27),e.TgZ(2,"td",28),e.YNc(3,Ve,6,14,"ng-container",29),e.YNc(4,Ye,5,15,"ng-container",29),e.YNc(5,Fe,2,3,"span",30),e.YNc(6,Le,2,3,"span",29),e.YNc(7,Be,2,3,"app-text-popup",31),e.qZA(),e.TgZ(8,"td",32),e.TgZ(9,"span",33),e.YNc(10,We,1,0,"i",34),e.TgZ(11,"app-confirm-popup",35),e.NdJ("proceedDelete",function(){var d=e.CHM(n).$implicit;return e.oxw(2).delete(d.timesheet_id)}),e.TgZ(12,"i",36),e.NdJ("proceedDelete",function(){var d=e.CHM(n).$implicit;return e.oxw(2).delete(d.timesheet_id)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){var t=s.$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t),e.xp6(2),e.Q6J("ngIf",o.isLocationEnabled&&t&&t.end_location),e.xp6(1),e.Q6J("ngIf",!o.isLocationEnabled||t&&!t.end_location),e.xp6(1),e.Q6J("ngIf",t.end_time_flag),e.xp6(1),e.Q6J("ngIf",t.isThirdShift||t.is_third_shift),e.xp6(1),e.Q6J("ngIf",t.end_photo),e.xp6(3),e.Q6J("ngIf",o.isOwnAddEdit()),e.xp6(1),e.Q6J("title","Timesheet Entry")("textToDisplay","You're about to <b>permanently delete</b> this entry. Are you sure?")}}var je=function(s){return{NoEdit:s}};function $e(i,s){if(1&i&&(e.TgZ(0,"div",7),e.TgZ(1,"div",8),e.YNc(2,De,3,0,"span",9),e.TgZ(3,"div",10),e.TgZ(4,"span",11),e.YNc(5,ke,14,6,"div",12),e.TgZ(6,"div"),e.TgZ(7,"span",13),e.TgZ(8,"span",14),e._uU(9,"Logged Hours"),e.qZA(),e.TgZ(10,"span",15),e._uU(11),e.ALo(12,"time"),e.qZA(),e.qZA(),e.TgZ(13,"span",13),e.TgZ(14,"span",14),e._uU(15,"Break Hours"),e.qZA(),e.TgZ(16,"span",15),e._uU(17),e.ALo(18,"time"),e.qZA(),e.qZA(),e.TgZ(19,"span",13),e.TgZ(20,"span",14),e._uU(21,"Actual Hours"),e.qZA(),e.TgZ(22,"span",15),e._uU(23),e.ALo(24,"time"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"table",16),e.TgZ(26,"thead",17),e.TgZ(27,"tr",18),e.TgZ(28,"th",19),e._uU(29," Clock In "),e.qZA(),e.TgZ(30,"th",19),e._uU(31," Clock Out "),e.qZA(),e._UZ(32,"th"),e.qZA(),e.qZA(),e.TgZ(33,"tbody"),e.YNc(34,He,13,9,"tr",20),e.qZA(),e.qZA(),e.qZA()),2&i){var n=e.oxw();e.xp6(2),e.Q6J("ngIf",n.visibleAddButton&&n.selectedData&&n.isOwnAddEdit()),e.xp6(3),e.Q6J("ngIf",n.data&&n.selectedData),e.xp6(6),e.Oqu(e.lcZ(12,7,n.data.work_hour_format)),e.xp6(6),e.Oqu(e.lcZ(18,9,n.data.break_hour_format)),e.xp6(6),e.Oqu(e.lcZ(24,11,n.data.total_hour_format)),e.xp6(3),e.Q6J("ngClass",e.VKq(13,je,!n.isOwnAddEdit())),e.xp6(8),e.Q6J("ngForOf",null==n.data||null==n.data.jobTaskDetails[0]?null:n.data.jobTaskDetails[0].timesheet)}}var Ge=new google.maps.Geocoder,K=function(){var i=function(){function s(n,t,o,a,l){(0,A.Z)(this,s),this.dataService=n,this.service=t,this.gs=o,this.analytics=a,this.http=l,this.editClick=new e.vpe,this.addClick=new e.vpe,this.refreshData=new e.vpe,this.timezoneMapping=y.YL.slice()}return(0,b.Z)(s,[{key:"ngOnInit",value:function(){var t=this;this.opacity=y.ZF,this.errorCount=0,this.timerId=null,this.dataService.getConfigurations(!1).then(function(o){var a,l;t.configuration=o,t.nameConfig=null===(a=o.company)||void 0===a?void 0:a.custom_names,t.isLocationEnabled=1===(null===(l=o.company)||void 0===l?void 0:l.is_location)}).finally(function(){})}},{key:"isOwnAddEdit",value:function(){var t,o;return(null===(t=this.selectedData)||void 0===t?void 0:t.user_id)!==this.dataService.getLoggedInUserId()||!(!this.configuration.is_partner&&2!==this.configuration.role.role_id&&!this.configuration.role.role_title.includes("Account Owner"))||1===(null===(o=this.configuration.company)||void 0===o?void 0:o.timesheet.is_edit_own)}},{key:"ngOnChanges",value:function(t){t&&t.selectedData.currentValue&&(this.data=null,this.hideShowAddButton(),this.getData())}},{key:"getData",value:function(){var t=this;this.timezone="",this.loading=!0,this.service.getTimesheetDetails(this.selectedData.date,this.selectedData.user_id,this.selectedData.region_id).then(function(o){t.data=o.timesheetDetail;var a=t.timezoneMapping.filter(function(l){return l.value===t.data.time_zone});(null==a?void 0:a.length)>0&&(t.timezone=a[0].key,setTimeout(function(){t.loadAddresses()},100))}).catch(function(o){console.log(o)}).finally(function(){t.loading=!1})}},{key:"getAddress",value:function(t,o,a){return(0,k.mG)(this,void 0,void 0,C().mark(function d(){var p,r=this;return C().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!t[a]){c.next=2;break}return c.abrupt("return",t[a]);case 2:return c.prev=2,c.next=5,Ge.geocode({location:o});case 5:(p=c.sent)&&p.results&&p.results[0]&&(t[a]=p.results[0].formatted_address),c.next=15;break;case 9:c.prev=9,c.t0=c.catch(2),this.errorCount++,setTimeout(function(){r.getAddress(t,o,a,!0)},1100*this.errorCount),this.timerId&&clearInterval(this.timerId),this.timerId=setInterval(this.resetErrorCount,5e3);case 15:return c.prev=15,c.finish(15);case 17:case"end":return c.stop()}},d,this,[[2,9,15,17]])}))}},{key:"resetErrorCount",value:function(){this.errorCount=0}},{key:"edit",value:function(t){this.gs.logEvents("edit_timesheet_entry_popup_opened"),this.gs.showBackDrop(!1),this.editClick.emit(t)}},{key:"add",value:function(){this.gs.showBackDrop(!1),this.editClick.emit()}},{key:"delete",value:function(t){var o=this;this.loading=!0,this.service.deleteTimesheetEntry({timesheet_id:t}).then(function(a){o.gs.showToastSuccess(null==a?void 0:a.message),o.getData(),o.refreshData.emit()}).catch(function(a){o.gs.showToastError(a.message),console.log(a)}).finally(function(){o.loading=!1})}},{key:"loadAddresses",value:function(){var t=this,o=0,a=0;this.isLocationEnabled&&this.data.jobTaskDetails.forEach(function(l){l.timesheet.forEach(function(d){0!==o&&o%5==0&&(a+=1.1),d.start_location&&(setTimeout(function(){t.getAddress(d,d.start_location,"start_location_address")},1e3*a),o++),d.end_location&&(setTimeout(function(){t.getAddress(d,d.end_location,"end_location_address")},1e3*a),o++)})})}},{key:"hideShowAddButton",value:function(){var t=this;new Promise(function(o,a){var l=D.J.organisation.get.StoresByUserId+"?user_id=";t.selectedData.user_id&&(l+=t.selectedData.user_id),t.http.get(l).subscribe(function(d){t.regions=d,t.visibleAddButton=t.regions.some(function(r){return r.store_id==t.selectedData.region_id}),o(d)},function(d){console.log(d),a(d)})})}}]),s}();return i.\u0275fac=function(n){return new(n||i)(e.Y36(M.s),e.Y36(J),e.Y36(I.m),e.Y36(j.C),e.Y36(N.s))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-timesheet-details"]],inputs:{selectedData:"selectedData"},outputs:{editClick:"editClick",addClick:"addClick",refreshData:"refreshData"},features:[e.TTD],decls:3,vars:3,consts:[[1,"for_spinner",3,"loading"],["class","timesheet_details_header",4,"ngIf"],["class","ts-deatils_body",4,"ngIf"],[1,"timesheet_details_header"],[1,"ts-header"],[1,"user-details"],["id","timesheetDetailsAvatar","size","large","nbTooltipPlacement","top",3,"name","title","color","initialColor","nbTooltip"],[1,"ts-deatils_body"],[1,"sticky-header"],["class","add",4,"ngIf"],[1,"ts-details-row"],[1,"ts_header_details_right"],["class","leftside",4,"ngIf"],[1,"container"],[1,"productivity-heading"],[1,"details"],[1,"details_accord",2,"margin-top","10px","border-collapse","collapse"],[3,"ngClass"],[2,"background","none","vertical-align","middle","height","30px","border-bottom","8px solid #f9f7ff"],[2,"color","#6e689b"],[4,"ngFor","ngForOf"],[1,"add"],["size","medium","type","submit","nbButton","","status","primary",3,"click"],[1,"leftside"],[1,"productivity-heading","left-container"],["src","../../../../../assets/store.svg"],[1,"fas","fa-calendar-alt",2,"font-size","16.5px","margin-left","2px","color","#b3aced"],["class","showhim ","style","vertical-align: top;",4,"ngIf"],[1,"showhim",2,"vertical-align","top"],[4,"ngIf"],["style","",3,"class",4,"ngIf"],[3,"image","textLabel",4,"ngIf"],[1,"text-right",2,"width","100px","text-align","center"],[2,"display","inline-flex"],["class","fas fa-pen pointer edit-task","nbTooltip","Edit timesheet","style","",3,"click",4,"ngIf"],[3,"title","textToDisplay","proceedDelete"],["nbTooltip","Delete timesheet",1,"fas","fa-trash","pointer","delete-task",3,"proceedDelete"],[3,"class",4,"ngIf"],["size","large","shape","semi-round","nbTooltipPlacement","left",3,"name","title","picture","showInitials","nbTooltip"],[1,"fas","fa-map-marker-alt","outof-fence"],["size","large","shape","semi-round",3,"name","title","picture","showInitials","outsideRadiusStart"],[1,"fa","fa-flag",3,"nbTooltip"],[3,"image","textLabel"],["aria-hidden","true",1,"fa","fa-search-plus","showme"],["size","large","shape","semi-round",3,"name","title","picture","showInitials","outsideRadiusEnd"],["src","../../../../../assets/graveyard.svg","nbTooltipAdjustment","noop",3,"nbTooltip"],["nbTooltip","Edit timesheet",1,"fas","fa-pen","pointer","edit-task",3,"click"]],template:function(n,t){1&n&&(e._UZ(0,"app-loader",0),e.YNc(1,Ae,4,5,"div",1),e.YNc(2,$e,35,15,"div",2)),2&n&&(e.Q6J("loading",t.loading),e.xp6(1),e.Q6J("ngIf",t.data&&t.selectedData),e.xp6(1),e.Q6J("ngIf",!t.loading&&t.data))},directives:[Q.R,w.O5,R.k,v.jNv,v.DPz,w.mk,w.sg,$.J,be.D],pipes:[w.uU,Y,w.Ov,G.z],styles:[".timesheet_details_header[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  border-bottom: 1px solid #efefef;\n  padding: 15px;\n  background-color: #7F84EA;\n  border-top-left-radius: 10px;\n}\n\n.ts_header_details_right[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n}\n\n.ts_header_details_right[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] {\n  margin-left: 15px;\n  margin-right: 15px;\n  display: flex;\n  flex-direction: column;\n  width: 50%;\n}\n\n.ts_header_details_right[_ngcontent-%COMP%]   .productivity-heading[_ngcontent-%COMP%] {\n  color: #8e8e8e;\n  font-weight: 600;\n  width: 100px;\n}\n\n.ts-deatils_body[_ngcontent-%COMP%] {\n  overflow: auto;\n  background: #f9f7ff;\n  padding: 8px;\n  padding-top: 0px;\n  max-height: 78vh;\n  min-height: 78vh;\n  padding-left: 30px;\n  padding-right: 30px;\n  padding-bottom: 30px;\n}\n\n.flag_loc_enabled[_ngcontent-%COMP%] {\n  position: absolute;\n  left: 115px;\n  top: 12px;\n  color: #f9bf00 !important;\n}\n\n.flag_loc_unenabled[_ngcontent-%COMP%] {\n  position: absolute;\n  left: 115px;\n  top: 12px !important;\n  color: #f9bf00 !important;\n}\n\nnb-user.size-large.shape-semi-round[_ngcontent-%COMP%] {\n  margin-bottom: 0px;\n  margin-top: 0px;\n  height: 10vh;\n  margin-left: 9px;\n  padding-bottom: 10px;\n}\n\ni.fa.fa-info-circle[_ngcontent-%COMP%] {\n  color: orange;\n}\n\n.details_accord[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] {\n  position: relative;\n  padding: 10px;\n  padding-top: 13px;\n  padding-bottom: 12px;\n}\n\n.details_accord[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%] {\n  position: sticky;\n  top: 150px;\n  z-index: 1;\n  background: #f9f7ff;\n}\n\n.graveyard[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 5px;\n  width: 13px;\n  left: 128px;\n  top: 12px;\n}\n\n.graveyard-loc-disabled[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 5px;\n  width: 13px;\n  left: 131px;\n  top: 12px;\n}\n\n@media (max-width: 1198px) and (min-width: 931px) {\n  .graveyard-loc-disabled[_ngcontent-%COMP%] {\n    left: 131px !important;\n    top: 7px !important;\n  }\n}\n\n@media (max-width: 930px) and (min-width: 320px) {\n  .graveyard-loc-disabled[_ngcontent-%COMP%] {\n    left: 138px !important;\n    top: 9px !important;\n  }\n}\n\n.fa-search-plus[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 24px;\n  left: 24px;\n  top: 20px;\n  background: #00000042;\n  border-radius: 40px;\n  width: 17px;\n  height: 18px;\n  text-align: center;\n  color: #fff;\n  vertical-align: middle;\n  line-height: 16px;\n  font-size: 13px;\n  cursor: pointer;\n  padding: 3px;\n}\n\n@media (min-width: 1100px) {\n  .fa-search-plus[_ngcontent-%COMP%] {\n    left: 23px;\n  }\n}\n\n@media (max-width: 1100px) and (min-width: 931px) {\n  .fa-search-plus[_ngcontent-%COMP%] {\n    left: 24px !important;\n    top: 52px !important;\n  }\n}\n\n@media (max-width: 930px) and (min-width: 350px) {\n  .fa-search-plus[_ngcontent-%COMP%] {\n    top: 49px !important;\n    left: 42px !important;\n  }\n}\n\n@media (max-width: 349px) and (min-width: 320px) {\n  .fa-search-plus[_ngcontent-%COMP%] {\n    top: 24.5px !important;\n    left: 42px !important;\n  }\n}\n\n@media (max-width: 930px) and (min-width: 500px) {\n  .flag_loc_unenabled[_ngcontent-%COMP%] {\n    left: 133px !important;\n    top: 43px !important;\n  }\n\n  .flag_loc_enabled[_ngcontent-%COMP%] {\n    left: 133px !important;\n    top: 43px !important;\n  }\n\n  .graveyard[_ngcontent-%COMP%] {\n    left: 145px !important;\n    top: 43px !important;\n  }\n\n  .graveyard-loc-disabled[_ngcontent-%COMP%] {\n    left: 148px !important;\n    top: 43px !important;\n  }\n}\n\n@media (max-width: 499px) and (min-width: 384px) {\n  .flag_loc_unenabled[_ngcontent-%COMP%] {\n    left: 122px !important;\n    top: 5px !important;\n  }\n\n  .flag_loc_enabled[_ngcontent-%COMP%] {\n    left: 122px !important;\n    top: 5px !important;\n  }\n\n  .graveyard[_ngcontent-%COMP%] {\n    left: 140px !important;\n    top: 5px !important;\n  }\n\n  .graveyard-loc-disabled[_ngcontent-%COMP%] {\n    left: 144px !important;\n    top: 5px !important;\n  }\n}\n\n@media (max-width: 380px) and (min-width: 320px) {\n  .graveyard[_ngcontent-%COMP%] {\n    left: 135px !important;\n    top: 4px !important;\n  }\n\n  .graveyard-loc-disabled[_ngcontent-%COMP%] {\n    left: 139px !important;\n    top: 4px !important;\n  }\n\n  .flag_loc_enabled[_ngcontent-%COMP%] {\n    position: absolute;\n    left: 123px !important;\n    top: 4px !important;\n    color: #f9bf00 !important;\n  }\n\n  .flag_loc_unenabled[_ngcontent-%COMP%] {\n    position: absolute;\n    left: 125px !important;\n    top: 4px !important;\n    color: #f9bf00 !important;\n  }\n}\n\n@media (max-width: 1155px) and (min-width: 931px) {\n  .details_accord[_ngcontent-%COMP%] {\n    text-align: initial !important;\n  }\n}\n\n@media (max-width: 1212px) and (min-width: 931px) {\n  .timezone[_ngcontent-%COMP%] {\n    top: 56px !important;\n  }\n}\n\n@media (max-width: 930px) {\n  .ts-deatils_body[_ngcontent-%COMP%] {\n    overflow-x: hidden;\n    overflow-y: auto;\n    background: #f6f6f6;\n    padding: 8px;\n    max-height: 70vh;\n    min-height: 70vh;\n    padding-top: 0px;\n  }\n\n  .user-details[_ngcontent-%COMP%] {\n    padding-left: 0px !important;\n  }\n}\n\n.ts-header[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  height: 50px;\n}\n\n.details_accord[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] {\n  background: white;\n  height: 55px;\n  border-radius: 5px;\n  border-bottom: 5px solid #f9f7ff;\n  text-align: left;\n}\n\n.store-loc[_ngcontent-%COMP%] {\n  padding-right: 30px;\n  padding-top: 22px;\n}\n\n.store-loc[_ngcontent-%COMP%]   .store-loc-img[_ngcontent-%COMP%] {\n  margin-right: 6px;\n  margin-left: 10px;\n  width: 9px;\n}\n\n.user-details[_ngcontent-%COMP%] {\n  padding-left: 30px;\n}\n\n.details[_ngcontent-%COMP%] {\n  color: #7b68ee !important;\n  font-size: 15px !important;\n  font-weight: 700 !important;\n  justify-content: center;\n  padding-left: 30px;\n}\n\n.ts-details-row[_ngcontent-%COMP%] {\n  background: white;\n  padding: 10px;\n  border-radius: 10px;\n  position: sticky;\n  top: 35px;\n  z-index: 1;\n  margin-top: 15px;\n}\n\n.outof-fence[_ngcontent-%COMP%] {\n  margin-right: 5px;\n  color: #ff3384;\n  margin-left: 2px;\n}\n\n@media (max-width: 400px) and (min-width: 320px) {\n  .store-loc[_ngcontent-%COMP%] {\n    padding-left: 41px;\n    margin-top: -4px;\n    padding-top: 0px;\n  }\n\n  .ts-header[_ngcontent-%COMP%] {\n    flex-direction: column;\n  }\n}\n\n.container[_ngcontent-%COMP%] {\n  display: inline-flex;\n  align-items: center;\n  margin-bottom: 8px;\n}\n\n.left-container[_ngcontent-%COMP%] {\n  width: 12px !important;\n  display: flex;\n  align-items: center;\n}\n\n.left-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n  width: 20px;\n}\n\n.leftside[_ngcontent-%COMP%] {\n  border-right: 1px solid #e3e3e3;\n  padding-right: 25px;\n}\n\n.leftside[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%] {\n  color: #6e689b !important;\n  font-size: 13px !important;\n  font-weight: 600 !important;\n}\n\n.add[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: flex-end;\n  padding-top: 15px;\n}\n\n.edit-task[_ngcontent-%COMP%] {\n  padding-right: 15px;\n  color: #ddd5d5;\n  border-right: 1px solid #c9c9c9;\n  margin: auto;\n}\n\n.edit-task[_ngcontent-%COMP%]:hover {\n  color: #90e0c3;\n}\n\n.delete-task[_ngcontent-%COMP%] {\n  color: #ddd5d5;\n  padding-right: 10px;\n  padding-left: 15px;\n}\n\n.delete-task[_ngcontent-%COMP%]:hover {\n  color: #ffbfc6;\n}\n\n@media (max-width: 700px) {\n  .leftside[_ngcontent-%COMP%] {\n    border-right: 0px solid #e3e3e3;\n    padding-right: 0px;\n  }\n\n  .ts_header_details_right[_ngcontent-%COMP%] {\n    flex-direction: column;\n  }\n}\n\n.sticky-header[_ngcontent-%COMP%] {\n  position: sticky;\n  top: 0px;\n  z-index: 1;\n  background: #f9f7ff;\n  padding-bottom: 10px;\n}\n\n.NoEdit[_ngcontent-%COMP%] {\n  top: 125px !important;\n}"]}),i}(),X=u(1201),ee=u(5116);function Ke(i,s){if(1&i){var n=e.EpF();e.TgZ(0,"span",7),e.TgZ(1,"span",8),e.TgZ(2,"app-filter-popup",9),e.NdJ("onClose",function(){return e.CHM(n),e.oxw().closeFilter("role")})("onApply",function(){return e.CHM(n),e.oxw().applyFilterMulti("role")})("onClear",function(){return e.CHM(n),e.oxw().removeFilter("role")})("onOpen",function(){e.CHM(n);var a=e.oxw();return a.defaultOpen=!a.defaultOpen}),e._UZ(3,"app-dropdown-multi",10),e.qZA(),e.qZA(),e.TgZ(4,"span",8),e.TgZ(5,"app-sort",11),e.NdJ("onSort",function(a){return e.CHM(n),e.oxw().onSort(a,"name_sort")}),e.qZA(),e.TgZ(6,"app-sort",12),e.NdJ("onSort",function(a){return e.CHM(n),e.oxw().onSort(a,"checkin_sort")}),e.qZA(),e.qZA(),e.TgZ(7,"span",8),e.TgZ(8,"app-sort",13),e.NdJ("onSort",function(a){return e.CHM(n),e.oxw().onSort(a,"checkout_sort")}),e.qZA(),e.TgZ(9,"app-sort",13),e.NdJ("onSort",function(a){return e.CHM(n),e.oxw().onSort(a,"actual_hours_sort")}),e.qZA(),e.qZA(),e.qZA()}if(2&i){var t=e.oxw();e.xp6(2),e.Q6J("label","Roles")("isFiltered",null==t.isFiltered?null:t.isFiltered.role),e.xp6(1),e.Q6J("label","roles")("defaultOpen",t.defaultOpen)("selected",null==t.filters?null:t.filters.role)("key","role_title")("optionId","role_id")("Data",t.roles)("placeholder","Select one or more roles")("controlName","role")("form",t.form)("show",!1),e.xp6(2),e.Q6J("label","Name")("isSelected",0!==t.filters.name_sort),e.xp6(1),e.Q6J("order",null==t.filters?null:t.filters.checkin_sort)("iconType","number")("label","First C/I")("isSelected",0!==t.filters.checkin_sort),e.xp6(2),e.Q6J("iconType","number")("label","Last C/O")("isSelected",0!==t.filters.checkout_sort),e.xp6(1),e.Q6J("iconType","number")("label","Actual Hrs")("isSelected",0!==t.filters.actual_hours_sort)}}function Xe(i,s){if(1&i){var n=e.EpF();e.TgZ(0,"mat-paginator",14),e.NdJ("page",function(a){e.CHM(n);var l=e.oxw();return l.pageEvent=a,l.getData()}),e.qZA()}if(2&i){var t=e.oxw();e.Q6J("length",t.paginator.total_records)("pageIndex",t.paginator.page_no-1)("pageSize",t.paginator.page_size)("pageSizeOptions",t.pageSizes)}}function et(i,s){if(1&i){var n=e.EpF();e.TgZ(0,"app-sort",42),e.NdJ("onSort",function(a){return e.CHM(n),e.oxw(3).onSort(a,"name_sort")}),e.qZA()}if(2&i){var t=e.oxw(3);e.Q6J("isSelected",0!==t.filters.name_sort)("iconType","alpha")}}function tt(i,s){if(1&i){var n=e.EpF();e.TgZ(0,"app-filter-popup",9),e.NdJ("onClose",function(){return e.CHM(n),e.oxw(3).closeFilter("role")})("onApply",function(){return e.CHM(n),e.oxw(3).applyFilterMulti("role")})("onClear",function(){return e.CHM(n),e.oxw(3).removeFilter("role")})("onOpen",function(){e.CHM(n);var a=e.oxw(3);return a.defaultOpen=!a.defaultOpen}),e._UZ(1,"app-dropdown-multi",10),e.qZA()}if(2&i){var t=e.oxw(3);e.Q6J("label","roles")("isFiltered",null==t.isFiltered?null:t.isFiltered.role),e.xp6(1),e.Q6J("label","roles")("defaultOpen",t.defaultOpen)("selected",null==t.filters?null:t.filters.role)("key","role_title")("optionId","role_id")("Data",t.roles)("placeholder","Select one or more roles")("controlName","role")("form",t.form)("show",!1)}}function nt(i,s){if(1&i&&(e.TgZ(0,"th",39),e._uU(1,"Name "),e.YNc(2,et,1,2,"app-sort",40),e.YNc(3,tt,2,12,"app-filter-popup",41),e.qZA()),2&i){var n=e.oxw(2);e.xp6(2),e.Q6J("ngIf",!(null!=n.gs&&n.gs.isRespMode)),e.xp6(1),e.Q6J("ngIf",!(null!=n.gs&&n.gs.isRespMode))}}function it(i,s){if(1&i){var n=e.EpF();e.TgZ(0,"td",43),e.NdJ("click",function(){var d=e.CHM(n).$implicit;return e.oxw(2).selectRow(d)}),e.TgZ(1,"label",44),e._uU(2,"Name"),e.qZA(),e._UZ(3,"app-user-avatar",45),e.qZA()}if(2&i){var t=s.$implicit,o=e.oxw(2);e.xp6(3),e.Q6J("name",t.user_name)("title",t.role_title)("color",t.user_color+o.opacity)("initialColor",t.user_color)("nbTooltip",t.user_name)}}function ot(i,s){if(1&i){var n=e.EpF();e.TgZ(0,"app-sort",48),e.NdJ("onSort",function(a){return e.CHM(n),e.oxw(3).onSort(a,"checkin_sort")}),e.qZA()}if(2&i){var t=e.oxw(3);e.Q6J("order",null==t.filters?null:t.filters.checkin_sort)("isSelected",0!==t.filters.checkin_sort)("iconType","number")}}function at(i,s){if(1&i&&(e.TgZ(0,"th",46),e._uU(1),e.YNc(2,ot,1,3,"app-sort",47),e.qZA()),2&i){var n=e.oxw(2);e.xp6(1),e.hij("First ",null==n.nameConfig?null:n.nameConfig.start," "),e.xp6(1),e.Q6J("ngIf",!(null!=n.gs&&n.gs.isRespMode))}}function st(i,s){1&i&&(e.TgZ(0,"span"),e._UZ(1,"i",55),e.qZA())}function lt(i,s){if(1&i&&(e.TgZ(0,"app-text-popup",54),e.YNc(1,st,2,0,"span",50),e.qZA()),2&i){var n=e.oxw(2).$implicit;e.Q6J("image",n.first_start_photo),e.xp6(1),e.Q6J("ngIf",!(null!=n.first_start_photo&&n.first_start_photo.includes("id=null")))}}function rt(i,s){if(1&i&&(e._UZ(0,"app-user-avatar",56),e.ALo(1,"async"),e.ALo(2,"imageAuth")),2&i){var n=e.oxw(2).$implicit;e.Q6J("picture",e.lcZ(1,2,e.lcZ(2,4,n.first_start_photo)))("showInitials",!1)}}function pt(i,s){if(1&i){var n=e.EpF();e.ynx(0),e.TgZ(1,"span",57),e.TgZ(2,"span"),e.TgZ(3,"i",58),e.NdJ("mouseenter",function(){e.CHM(n);var a=e.oxw(3).$implicit;return e.oxw(2).getAddress(a,a.first_start_time_location,"formatted_address_clockin")}),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&i){var t=e.oxw(3).$implicit;e.xp6(1),e.Q6J("nbTooltip",t.formatted_address_clockin?t.formatted_address_clockin:"Loading..."),e.xp6(2),e.Q6J("ngClass",t.is_outof_radius_start?"outof-fence":"within-fence")}}function dt(i,s){1&i&&(e.ynx(0),e.TgZ(1,"span",59),e._UZ(2,"i",60),e.qZA(),e.BQk())}function ct(i,s){if(1&i&&(e.ynx(0),e.YNc(1,pt,4,2,"ng-container",50),e.YNc(2,dt,3,0,"ng-container",50),e.BQk()),2&i){var n=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf",n.first_start_time_location),e.xp6(1),e.Q6J("ngIf",!n.first_start_time_location)}}function _t(i,s){if(1&i&&(e.ynx(0),e.YNc(1,lt,2,2,"app-text-popup",51),e.TgZ(2,"span",52),e.TgZ(3,"label",44),e._uU(4),e.qZA(),e.YNc(5,rt,3,6,"app-user-avatar",53),e._uU(6),e.YNc(7,ct,3,2,"ng-container",50),e.qZA(),e.BQk()),2&i){var n=e.oxw().$implicit,t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.first_start_photo),e.xp6(3),e.hij("First ",null==t.nameConfig?null:t.nameConfig.start,""),e.xp6(1),e.Q6J("ngIf",n.first_start_photo),e.xp6(1),e.hij(" ",n.first_start_time_format_time," "),e.xp6(1),e.Q6J("ngIf",t.isLocationEnabled)}}function ut(i,s){if(1&i&&(e.TgZ(0,"td",49),e.YNc(1,_t,8,5,"ng-container",50),e.qZA()),2&i){var n=s.$implicit;e.xp6(1),e.Q6J("ngIf",!n.is_empty)}}function mt(i,s){if(1&i){var n=e.EpF();e.TgZ(0,"app-sort",42),e.NdJ("onSort",function(a){return e.CHM(n),e.oxw(3).onSort(a,"checkout_sort")}),e.qZA()}if(2&i){var t=e.oxw(3);e.Q6J("isSelected",0!==t.filters.checkout_sort)("iconType","number")}}function ht(i,s){if(1&i&&(e.TgZ(0,"th",46),e._uU(1),e.YNc(2,mt,1,2,"app-sort",40),e.qZA()),2&i){var n=e.oxw(2);e.xp6(1),e.hij("Last ",null==n.nameConfig?null:n.nameConfig.end," "),e.xp6(1),e.Q6J("ngIf",!(null!=n.gs&&n.gs.isRespMode))}}function gt(i,s){1&i&&(e.TgZ(0,"span"),e._UZ(1,"i",61),e.qZA())}function ft(i,s){if(1&i&&(e.TgZ(0,"app-text-popup",54),e.YNc(1,gt,2,0,"span",50),e.qZA()),2&i){var n=e.oxw().$implicit;e.Q6J("image",n.last_end_photo),e.xp6(1),e.Q6J("ngIf",!(null!=n.last_end_photo&&n.last_end_photo.includes("id=null")))}}function vt(i,s){if(1&i&&(e._UZ(0,"app-user-avatar",56),e.ALo(1,"async"),e.ALo(2,"imageAuth")),2&i){var n=e.oxw(2).$implicit;e.Q6J("picture",e.lcZ(1,2,e.lcZ(2,4,n.last_end_photo)))("showInitials",!1)}}function Tt(i,s){if(1&i&&(e.TgZ(0,"span"),e._UZ(1,"img",62),e.qZA()),2&i){var n=e.oxw(2).$implicit;e.xp6(1),e.Q6J("nbTooltip","Graveyard shift "+n.last_end_time_format_date+" "+n.last_end_time_format_time)}}function xt(i,s){if(1&i){var n=e.EpF();e.ynx(0),e.TgZ(1,"span",57),e.TgZ(2,"i",63),e.NdJ("mouseover",function(){e.CHM(n);var a=e.oxw(3).$implicit;return e.oxw(2).getAddress(a,a.last_end_time_location,"formatted_address_clockout")}),e.qZA(),e.qZA(),e.BQk()}if(2&i){var t=e.oxw(3).$implicit;e.xp6(1),e.Q6J("nbTooltip",t.formatted_address_clockout?t.formatted_address_clockout:"Loading..."),e.xp6(1),e.Q6J("ngClass",t.is_outof_radius_end?"outof-fence":"within-fence")}}function yt(i,s){1&i&&(e.ynx(0),e.TgZ(1,"span",59),e._UZ(2,"i",60),e.qZA(),e.BQk())}function wt(i,s){if(1&i&&(e.ynx(0),e.YNc(1,xt,3,2,"ng-container",50),e.YNc(2,yt,3,0,"ng-container",50),e.BQk()),2&i){var n=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf",n.last_end_time_location),e.xp6(1),e.Q6J("ngIf",n.last_end_time&&!n.last_end_time_location)}}function Ct(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"span",52),e.TgZ(2,"label",44),e._uU(3),e.qZA(),e.YNc(4,vt,3,6,"app-user-avatar",53),e._uU(5),e.YNc(6,Tt,2,1,"span",50),e.YNc(7,wt,3,2,"ng-container",50),e.qZA(),e.BQk()),2&i){var n=e.oxw().$implicit,t=e.oxw(2);e.xp6(3),e.hij("Last ",null==t.nameConfig?null:t.nameConfig.end,""),e.xp6(1),e.Q6J("ngIf",n.last_end_photo),e.xp6(1),e.hij(" ",n.last_end_time_format_time," "),e.xp6(1),e.Q6J("ngIf",n.is_third_shift),e.xp6(1),e.Q6J("ngIf",t.isLocationEnabled)}}function Zt(i,s){if(1&i&&(e.TgZ(0,"td",49),e.YNc(1,ft,2,2,"app-text-popup",51),e.YNc(2,Ct,8,5,"ng-container",50),e.qZA()),2&i){var n=s.$implicit;e.xp6(1),e.Q6J("ngIf",n.last_end_photo),e.xp6(1),e.Q6J("ngIf",!n.is_empty)}}function bt(i,s){if(1&i&&(e.TgZ(0,"th",64),e._uU(1,"Store"),e.qZA()),2&i){var n=e.oxw(2);e.Q6J("hidden",n.sharedRegion>0)}}function At(i,s){if(1&i&&(e.TgZ(0,"td",65),e.TgZ(1,"label",44),e._uU(2,"Store"),e.qZA(),e.TgZ(3,"span",66),e._uU(4),e.qZA(),e.qZA()),2&i){var n=s.$implicit,t=e.oxw(2);e.Q6J("hidden",t.sharedRegion>0),e.xp6(3),e.Q6J("nbTooltip",n.region_title?n.region_title:""),e.xp6(1),e.Oqu(n.region_title?n.region_title:"")}}function Dt(i,s){if(1&i){var n=e.EpF();e.TgZ(0,"app-sort",69),e.NdJ("onSort",function(a){return e.CHM(n),e.oxw(3).onSort(a,"logged_hours_sort")}),e.qZA()}if(2&i){var t=e.oxw(3);e.Q6J("iconType","number")("isSelected",0!==t.filters.logged_hours_sort)}}function kt(i,s){if(1&i&&(e.TgZ(0,"th",67),e._uU(1,"Logged Hours "),e.YNc(2,Dt,1,2,"app-sort",68),e.qZA()),2&i){var n=e.oxw(2);e.xp6(2),e.Q6J("ngIf",!(null!=n.gs&&n.gs.isRespMode))}}function Ot(i,s){if(1&i&&(e.TgZ(0,"td",70),e.TgZ(1,"label",44),e._uU(2,"Logged Hours"),e.qZA(),e.TgZ(3,"span",71),e._uU(4),e.ALo(5,"time"),e.qZA(),e.qZA()),2&i){var n=s.$implicit;e.xp6(4),e.Oqu(e.lcZ(5,1,n.work_hour_format))}}function Mt(i,s){if(1&i){var n=e.EpF();e.TgZ(0,"app-sort",69),e.NdJ("onSort",function(a){return e.CHM(n),e.oxw(3).onSort(a,"break_hours_sort")}),e.qZA()}if(2&i){var t=e.oxw(3);e.Q6J("iconType","number")("isSelected",0!==t.filters.break_hours_sort)}}function St(i,s){if(1&i&&(e.TgZ(0,"th",72),e._uU(1,"Break Hours "),e.YNc(2,Mt,1,2,"app-sort",68),e.qZA()),2&i){var n=e.oxw(2);e.xp6(2),e.Q6J("ngIf",!(null!=n.gs&&n.gs.isRespMode))}}function Pt(i,s){if(1&i&&(e.TgZ(0,"td",70),e.TgZ(1,"label",44),e._uU(2,"Break Hours"),e.qZA(),e.TgZ(3,"span",71),e._uU(4),e.ALo(5,"time"),e.qZA(),e.qZA()),2&i){var n=s.$implicit;e.xp6(4),e.Oqu(e.lcZ(5,1,n.break_hour_format))}}function Jt(i,s){if(1&i){var n=e.EpF();e.TgZ(0,"app-sort",69),e.NdJ("onSort",function(a){return e.CHM(n),e.oxw(3).onSort(a,"actual_hours_sort")}),e.qZA()}if(2&i){var t=e.oxw(3);e.Q6J("iconType","number")("isSelected",0!==t.filters.actual_hours_sort)}}function It(i,s){if(1&i&&(e.TgZ(0,"th",73),e._uU(1,"Actual Hours "),e.YNc(2,Jt,1,2,"app-sort",68),e.qZA()),2&i){var n=e.oxw(2);e.xp6(2),e.Q6J("ngIf",!(null!=n.gs&&n.gs.isRespMode))}}function Et(i,s){1&i&&e._UZ(0,"i",78),2&i&&e.Q6J("nbTooltip","Overtime")}function qt(i,s){1&i&&e._UZ(0,"i",79),2&i&&e.Q6J("nbTooltip","Out of schedule")}function Qt(i,s){1&i&&e._UZ(0,"img",80),2&i&&e.Q6J("nbTooltip","Out of schedule & overtime")}var Nt=function(s,n,t){return{overtime:s,out_of_schedule:n,double_flags:t}};function Ut(i,s){if(1&i&&(e.TgZ(0,"td",74),e.TgZ(1,"label",44),e._uU(2,"Actual Hours"),e.qZA(),e.TgZ(3,"span",71),e._uU(4),e.ALo(5,"time"),e.qZA(),e.YNc(6,Et,1,1,"i",75),e.YNc(7,qt,1,1,"i",76),e.YNc(8,Qt,1,1,"img",77),e.qZA()),2&i){var n=s.$implicit;e.Q6J("ngClass",e.kEZ(7,Nt,n.is_max_hours_exceed,n.is_out_of_schedule,n.is_out_of_schedule&&n.is_max_hours_exceed)),e.xp6(4),e.Oqu(e.lcZ(5,5,n.total_hour_format)),e.xp6(2),e.Q6J("ngIf",n.is_max_hours_exceed&&!n.is_out_of_schedule),e.xp6(1),e.Q6J("ngIf",n.is_out_of_schedule&&!n.is_max_hours_exceed),e.xp6(1),e.Q6J("ngIf",n.is_out_of_schedule&&n.is_max_hours_exceed)}}function Vt(i,s){1&i&&e._UZ(0,"tr",81)}var Rt=function(s){return{disable_row:s}};function Yt(i,s){1&i&&e._UZ(0,"tr",82),2&i&&e.Q6J("ngClass",e.VKq(1,Rt,s.$implicit.is_empty))}var Ft=function(){return{"class-name":!0}};function Lt(i,s){if(1&i&&(e.TgZ(0,"div",15),e.TgZ(1,"table",16),e.ynx(2,17),e.YNc(3,nt,4,2,"th",18),e.YNc(4,it,4,5,"td",19),e.BQk(),e.ynx(5,20),e.YNc(6,at,3,2,"th",21),e.YNc(7,ut,2,1,"td",22),e.BQk(),e.ynx(8,23),e.YNc(9,ht,3,2,"th",21),e.YNc(10,Zt,3,2,"td",22),e.BQk(),e.ynx(11,24),e.YNc(12,bt,2,1,"th",25),e.YNc(13,At,5,3,"td",26),e.BQk(),e.ynx(14,27),e.YNc(15,kt,3,1,"th",28),e.YNc(16,Ot,6,3,"td",29),e.BQk(),e.ynx(17,30),e.YNc(18,St,3,1,"th",31),e.YNc(19,Pt,6,3,"td",29),e.BQk(),e.ynx(20,32),e.YNc(21,It,3,1,"th",33),e.YNc(22,Ut,9,11,"td",34),e.BQk(),e.YNc(23,Vt,1,0,"tr",35),e.YNc(24,Yt,1,3,"tr",36),e.qZA(),e._UZ(25,"app-no-records",37),e._UZ(26,"app-no-search-records",38),e.qZA()),2&i){var n=e.oxw();e.xp6(1),e.Q6J("dataSource",n.dataSource.data)("ngClass",e.DdM(7,Ft)),e.xp6(22),e.Q6J("matHeaderRowDef",n.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns),e.xp6(1),e.Q6J("display",n.emptyResults)("animation","timesheet"),e.xp6(1),e.Q6J("display",!n.emptyResults&&n.emptySearchResults)}}var zt=new google.maps.Geocoder,te=function(){var i=function(){function s(n,t,o,a,l,d,r,p,_){var c=this;(0,A.Z)(this,s),this.dialogService=n,this.fb=t,this.dataService=o,this.gm=a,this.sidebarService=l,this.cdRef=d,this.service=r,this.gs=p,this.router=_,this.displayedColumns=["username","region_title","firstclockin","lastclockout","worktime","breaktime","totaltime"],this.dataSource=new g.by([]),this.date=new Date,this.selectedDate=new Date,this.filters={role:null,name_sort:0,checkin_sort:0,checkout_sort:0,logged_hours_sort:0,break_hours_sort:0,actual_hours_sort:0},this.defaultOpen=!0,this.closeAddEntrySidebar=function(){c.showSideBarEntry=!1,c.AddTimesheetEntryComponentInstance.resetForm(),c.gs.showBackDrop(!1)},this.pageSizes=y.Wv,this.dataService.getConfigurations(!1).then(function(m){var T,Z;c.nameConfig=null===(T=m.company)||void 0===T?void 0:T.custom_names,c.isLocationEnabled=1===(null===(Z=m.company)||void 0===Z?void 0:Z.is_location)}).finally(function(){}),this.loading=!0,this.subscription=o.SharingRegionData.subscribe(function(m){c.sharedRegion=m,c.closeDetails(),c.getData()}),this.dataService.getRoles(!1).then(function(m){c.roles=m}).finally(function(){}),this.form=this.fb.group({role:[]})}return(0,b.Z)(s,[{key:"closeFilter",value:function(t){var o;this.form.controls[t].setValue(null===(o=this.filters)||void 0===o?void 0:o[t])}},{key:"applyFilterMulti",value:function(t){this.gs.logEvents("daily_timesheet_enteries_filtered_by_"+t);var o=this.form.controls[t].value;o&&o.length>0?(this.isFiltered[t]=!0,this.filters[t]=o):(this.filters[t]=null,this.isFiltered[t]=!1),this.getData()}},{key:"removeFilter",value:function(t){this.filters[t]=null,this.isFiltered[t]=!1,this.getData()}},{key:"ngOnInit",value:function(){this.isFiltered={role:null},this.filtersCopy=JSON.parse(JSON.stringify(this.filters)),this.filters.checkin_sort=-1,this.loading=!0,this.opacity=y.ZF,this.paginator=y.$0,this.selectedDate=new Date,this.selectedUser=null,this.showSideBarEntry=!1,this.showSideBarDetails=!1,this.emptyResults=!1,this.emptySearchResults=!1,this.gs.showBackDrop(!1)}},{key:"onSort",value:function(t,o){this.gs.logEvents("timesheet_daily_"+o);var a=this.filters.role;this.filters=JSON.parse(JSON.stringify(this.filtersCopy)),this.filters[o]=t,this.filters.role=a,this.getData()}},{key:"getAddress",value:function(t,o,a){return(0,k.mG)(this,void 0,void 0,C().mark(function l(){var r,p,d=this;return C().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!t[a]){c.next=2;break}return c.abrupt("return",t[a]);case 2:return c.prev=2,c.next=5,zt.geocode({location:o});case 5:(r=c.sent)&&r.results&&r.results[0]&&(p="",("formatted_address_clockin"===a&&t.is_outof_radius_start||"formatted_address_clockout"===a&&t.is_outof_radius_end)&&(p="Out of geo-fence.\xa0 \xa0 \xa0 \xa0 \xa0 Location: "),t[a]=p+r.results[0].formatted_address),c.next=12;break;case 9:c.prev=9,c.t0=c.catch(2),setTimeout(function(){d.getAddress(t,o,a)},1e3);case 12:return c.prev=12,c.finish(12);case 14:case"end":return c.stop()}},l,null,[[2,9,12,14]])}))}},{key:"ngAfterViewChecked",value:function(){this.cdRef.detectChanges()}},{key:"ngOnChanges",value:function(t){t.searchText&&t.searchText.currentValue!==t.searchText.previousValue?(this.pageEvent&&(this.pageEvent.pageIndex=0),this.getData()):t.filterData&&t.filterData.currentValue!==t.filterData.previousValue?(this.filterInput=t.filterData.currentValue,this.getData()):t.buttonPressed&&1==t.buttonPressed.currentValue&&this.getData(),this.selectedFilter=this.dataService.getSelectedFilter()}},{key:"initAddEntry",value:function(){var t=this;this.dialogService.open(O,{hasBackdrop:!0,closeOnBackdropClick:!1,context:{user:null,selectedData:null,timesheetData:null}}).onClose.subscribe(function(o){o&&t.getData()})}},{key:"toggle",value:function(){this.sidebarService.toggle(!1,"detail")}},{key:"onEditClick",value:function(t){var o=this;this.timesheetData=t;var a=Object.assign({},this.selectedUser);this.selectedUser=null,a.date=this.selectedDate,this.selectedUser=a,this.showSideBarDetails=!1,this.dialogService.open(O,{hasBackdrop:!0,closeOnBackdropClick:!1,context:{user:this.selectedUser,selectedData:this.selectedRowData,timesheetData:this.timesheetData}}).onClose.subscribe(function(l){l&&o.getData()})}},{key:"onAddClick",value:function(){var t=this;this.showSideBarDetails=!1,this.dialogService.open(O,{hasBackdrop:!0,closeOnBackdropClick:!1,context:{user:this.selectedUser,selectedData:this.selectedRowData,timesheetData:this.timesheetData}}).onClose.subscribe(function(o){o&&t.getData()})}},{key:"selectRow",value:function(t){t.is_empty||(this.showSideBarDetails=!0,this.selectedRowData=t,this.selectedUser={userName:t.user_name,userId:t.user_id,userColor:t.user_color,userRole:t.role_title},this.gs.showBackDrop(!0))}},{key:"getData",value:function(){var t=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null!=this.sharedRegion&&(this.filterInput={region_id:this.sharedRegion},o&&(this.selectedDate=o),this.loading=!0,this.service.getTimesheetTableData(this.searchText,this.pageEvent,this.filterInput,this.gs.convertToLocalDateString(this.selectedDate),this.gs.convertToLocalDateString(this.selectedDate),this.filters).then(function(a){var l,d;t.dataSource.data=a.users,t.paginator=a.pagination,t.emptySearchResults=!(0!==(null===(l=a.users)||void 0===l?void 0:l.length)||!t.searchText),t.emptyResults=0===(null===(d=a.users)||void 0===d?void 0:d.length)&&!t.searchText}).catch(function(a){console.log(a)}).finally(function(){t.loading=!1}))}},{key:"onFormSuccess",value:function(){this.getData(),this.showSideBarEntry=!1,this.gs.showBackDrop(!1)}},{key:"closeDetails",value:function(){this.showSideBarDetails=!1,this.selectedRowData=null,this.gs.showBackDrop(!1)}},{key:"ngOnDestroy",value:function(){var t;null===(t=this.subscription)||void 0===t||t.unsubscribe()}}]),s}();return i.\u0275fac=function(n){return new(n||i)(e.Y36(v.Gln),e.Y36(x.qu),e.Y36(M.s),e.Y36(Ze.Q),e.Y36(v.lzT),e.Y36(e.sBO),e.Y36(J),e.Y36(I.m),e.Y36(h.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-timesheet-daily-view"]],viewQuery:function(n,t){var o;1&n&&(e.Gf(O,5),e.Gf(P.NW,5)),2&n&&(e.iGM(o=e.CRH())&&(t.AddTimesheetEntryComponentInstance=o.first),e.iGM(o=e.CRH())&&(t.MatPaginator=o.first))},inputs:{searchText:"searchText",filterData:"filterData",buttonPressed:"buttonPressed"},features:[e.TTD],decls:9,vars:7,consts:[[3,"loading"],["class","filters-wrapper",4,"ngIf"],[3,"showSideBar","tag","closeDetails"],[3,"selectedData","addClick","editClick","refreshData"],[1,"timesheet_page_pagination"],["showFirstLastButtons","",3,"length","pageIndex","pageSize","pageSizeOptions","page",4,"ngIf"],["class","mat-elevation-z8 relative timesheet_table daily_view","style","top: 3px",4,"ngIf"],[1,"filters-wrapper"],[1,"sorting-in-resp"],[3,"label","isFiltered","onClose","onApply","onClear","onOpen"],[3,"label","defaultOpen","selected","key","optionId","Data","placeholder","controlName","form","show"],[1,"sort",3,"label","isSelected","onSort"],[1,"sort",3,"order","iconType","label","isSelected","onSort"],[1,"sort",3,"iconType","label","isSelected","onSort"],["showFirstLastButtons","",3,"length","pageIndex","pageSize","pageSizeOptions","page"],[1,"mat-elevation-z8","relative","timesheet_table","daily_view",2,"top","3px"],["mat-table","",3,"dataSource","ngClass"],["matColumnDef","username"],["mat-header-cell","","style","width: 150px",4,"matHeaderCellDef"],["mat-cell","",3,"click",4,"matCellDef"],["matColumnDef","firstclockin"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","showhim",4,"matCellDef"],["matColumnDef","lastclockout"],["matColumnDef","region_title"],["mat-header-cell","","style","min-width: 80px",3,"hidden",4,"matHeaderCellDef"],["mat-cell","","class","store-col",3,"hidden",4,"matCellDef"],["matColumnDef","worktime"],["mat-header-cell","","style","min-width: 90px",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","breaktime"],["mat-header-cell","","style","min-width: 70px;",4,"matHeaderCellDef"],["matColumnDef","totaltime"],["mat-header-cell","","style","min-width: 70px;padding-right: 15px;",4,"matHeaderCellDef"],["mat-cell","",3,"ngClass",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"ngClass",4,"matRowDef","matRowDefColumns"],[3,"display","animation"],[3,"display"],["mat-header-cell","",2,"width","150px"],["class","sort",3,"isSelected","iconType","onSort",4,"ngIf"],[3,"label","isFiltered","onClose","onApply","onClear","onOpen",4,"ngIf"],[1,"sort",3,"isSelected","iconType","onSort"],["mat-cell","",3,"click"],[1,"show_in_resp"],["size","medium","nbTooltipAdjustment","noop",1,"link_name",3,"name","title","color","initialColor","nbTooltip"],["mat-header-cell",""],["class","sort",3,"order","isSelected","iconType","onSort",4,"ngIf"],[1,"sort",3,"order","isSelected","iconType","onSort"],["mat-cell","",1,"showhim"],[4,"ngIf"],["class","relative",3,"image",4,"ngIf"],[1,"flex","align-center"],["size","medium","onlyPicture","",3,"picture","showInitials",4,"ngIf"],[1,"relative",3,"image"],["alt","search icon","aria-hidden","true",1,"fa","fa-search-plus","showme"],["size","medium","onlyPicture","",3,"picture","showInitials"],[1,"truncate",3,"nbTooltip"],[1,"fas","fa-map-marker-alt",3,"ngClass","mouseenter"],[1,"truncate"],["nbTooltip","No location.",1,"fas","fa-map-marker-alt",2,"margin-right","5px","color","darkgrey"],["aria-hidden","true",1,"fa","fa-search-plus","showme"],["alt","graveyard icon","src","../../../../../assets/graveyard.svg","nbTooltipAdjustment","noop",1,"graveyard",3,"nbTooltip"],[1,"fas","fa-map-marker-alt",3,"ngClass","mouseover"],["mat-header-cell","",2,"min-width","80px",3,"hidden"],["mat-cell","",1,"store-col",3,"hidden"],["nbTooltipAdjustment","noop",2,"color","#4E4E4E",3,"nbTooltip"],["mat-header-cell","",2,"min-width","90px"],["class","sort",3,"iconType","isSelected","onSort",4,"ngIf"],[1,"sort",3,"iconType","isSelected","onSort"],["mat-cell",""],[1,""],["mat-header-cell","",2,"min-width","70px"],["mat-header-cell","",2,"min-width","70px","padding-right","15px"],["mat-cell","",3,"ngClass"],["alt","out of schedule icon","class","fa fa-flag","nbTooltipAdjustment","noop",3,"nbTooltip",4,"ngIf"],["alt","flag icon","class","fa fa-flag","nbTooltipAdjustment","noop",3,"nbTooltip",4,"ngIf"],["alt","out of schedule and overtime flag","src","../../../assets/flags.svg","nbTooltipAdjustment","noop",3,"nbTooltip",4,"ngIf"],["alt","out of schedule icon","nbTooltipAdjustment","noop",1,"fa","fa-flag",3,"nbTooltip"],["alt","flag icon","nbTooltipAdjustment","noop",1,"fa","fa-flag",3,"nbTooltip"],["alt","out of schedule and overtime flag","src","../../../assets/flags.svg","nbTooltipAdjustment","noop",3,"nbTooltip"],["mat-header-row",""],["mat-row","",3,"ngClass"]],template:function(n,t){1&n&&(e._UZ(0,"app-loader",0),e.YNc(1,Ke,10,24,"span",1),e.ynx(2),e.TgZ(3,"app-sidebar",2),e.NdJ("closeDetails",function(){return t.closeDetails()}),e.TgZ(4,"app-timesheet-details",3),e.NdJ("addClick",function(){return t.onAddClick()})("editClick",function(a){return t.onEditClick(a)})("refreshData",function(){return t.getData()}),e.qZA(),e.qZA(),e.ynx(5),e.TgZ(6,"span",4),e.YNc(7,Xe,1,4,"mat-paginator",5),e.qZA(),e.YNc(8,Lt,27,8,"div",6),e.BQk(),e.BQk()),2&n&&(e.Q6J("loading",t.loading),e.xp6(1),e.Q6J("ngIf",null==t.gs?null:t.gs.isRespMode),e.xp6(2),e.Q6J("showSideBar",t.showSideBarDetails)("tag","detail"),e.xp6(1),e.Q6J("selectedData",t.selectedRowData),e.xp6(3),e.Q6J("ngIf",t.paginator),e.xp6(1),e.Q6J("ngIf",t.dataSource&&t.dataSource.data))},directives:[Q.R,w.O5,B.u,V.x,W.x,H.k,K,P.NW,g.BZ,w.mk,g.w1,g.fO,g.ge,g.Dz,g.ev,R.k,v.jNv,$.J,g.as,g.XQ,g.nj,g.Gk,X.k,ee.V],pipes:[w.Ov,G.z,Y],styles:[".truncate[_ngcontent-%COMP%] {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: inline-block;\n  vertical-align: middle;\n  margin-left: 5px;\n}\n\n.fa-flag[_ngcontent-%COMP%] {\n  display: none;\n}\n\n.overtime[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%] {\n  display: inline-block;\n  color: red;\n  margin-left: 5px !important;\n}\n\n.overtime[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n  display: none;\n}\n\n.out_of_schedule[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%] {\n  display: inline-block !important;\n  margin-left: 5px !important;\n  color: #f9bf00 !important;\n}\n\n.out_of_schedule[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n  display: none;\n}\n\n.double_flags[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n  display: inline-block !important;\n  margin-left: 5px;\n  margin-bottom: -3px;\n  color: red;\n}\n\n.double_flags[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  display: none;\n}\n\ni.fa.fa-info-circle[_ngcontent-%COMP%] {\n  color: orange;\n}\n\n.fa-search-plus[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 12px;\n  background: #00000042;\n  border-radius: 40px;\n  width: 17px;\n  height: 18px;\n  text-align: center;\n  color: #fff;\n  vertical-align: middle;\n  line-height: 16px;\n  font-size: 13px;\n  cursor: pointer;\n  padding: 3px;\n  z-index: 1;\n}\n\n.within-fence[_ngcontent-%COMP%] {\n  margin-right: 5px;\n  color: #83c8ff;\n}\n\n.outof-fence[_ngcontent-%COMP%] {\n  margin-right: 5px;\n  color: #ff3384;\n}\n\n@media (min-width: 1100px) {\n  .fa-search-plus[_ngcontent-%COMP%] {\n    left: 12px !important;\n  }\n}\n\n@media (max-width: 1100px) and (min-width: 931px) {\n  .fa-search-plus[_ngcontent-%COMP%] {\n    top: 0px;\n    left: 9px !important;\n  }\n}\n\n@media (max-width: 930px) {\n  .fa-search-plus[_ngcontent-%COMP%] {\n    left: 116px !important;\n  }\n}\n\n.right_border_lastco[_ngcontent-%COMP%] {\n  border-left: 1px solid #ccc;\n  padding-left: 7px;\n}\n\n.disable_row[_ngcontent-%COMP%]   .right_border_lastco[_ngcontent-%COMP%] {\n  border-left: none;\n}\n\n.daily_view[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%] {\n  cursor: aupointerto;\n}\n\n.daily_view[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td.mat-cell[_ngcontent-%COMP%]:last-of-type, .daily_view[_ngcontent-%COMP%]   td.mat-footer-cell[_ngcontent-%COMP%]:last-of-type {\n  cursor: pointer !important;\n}\n\n.daily_view[_ngcontent-%COMP%]   nb-user.size-medium.shape-round[_ngcontent-%COMP%] {\n  cursor: pointer;\n}\n\n.store-col[_ngcontent-%COMP%] {\n  max-width: 120px;\n  white-space: nowrap;\n  overflow: hidden;\n  padding-right: 10px;\n  text-overflow: ellipsis;\n}\n\n.user-count[_ngcontent-%COMP%] {\n  background: #e9e4fd;\n  border-radius: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #7b68ee;\n  font-size: 11px;\n  font-weight: 500;\n}\n\n@media (min-width: 931px) {\n  .filters-wrapper[_ngcontent-%COMP%] {\n    display: none;\n  }\n}\n\n@media (max-width: 930px) and (min-width: 680px) {\n  .filters-wrapper[_ngcontent-%COMP%] {\n    display: flex;\n    margin-top: 0px;\n    color: #6e689b;\n    position: sticky;\n    top: 83px;\n    z-index: 1;\n    background: #f9faff;\n    padding: 10px 10px !important;\n    justify-content: space-between;\n  }\n}\n\n@media (max-width: 679px) and (min-width: 320px) {\n  .filters-wrapper[_ngcontent-%COMP%] {\n    display: flex;\n    margin-top: 0px;\n    color: #6e689b;\n    position: sticky;\n    top: 115px;\n    z-index: 1;\n    background: #f9faff;\n    padding: 10px 10px !important;\n    justify-content: space-between;\n  }\n}\n\n@media (max-width: 930px) and (min-width: 400px) {\n  .sort[_ngcontent-%COMP%] {\n    margin-right: 15px;\n    margin-bottom: 10px;\n  }\n}\n\n@media (max-width: 400px) {\n  .sort[_ngcontent-%COMP%] {\n    margin-right: 5px !important;\n  }\n}\n\n@media (max-width: 600px) {\n  .sorting-in-resp[_ngcontent-%COMP%] {\n    display: flex;\n    flex-direction: column;\n  }\n}"]}),i}(),Bt=u(4902);function Wt(i,s){if(1&i){var n=e.EpF();e.TgZ(0,"span",7),e.TgZ(1,"span",8),e.TgZ(2,"app-filter-popup",9),e.NdJ("onClose",function(){return e.CHM(n),e.oxw().closeFilter("role")})("onApply",function(){return e.CHM(n),e.oxw().applyFilterMulti("role")})("onClear",function(){return e.CHM(n),e.oxw().removeFilter("role")})("onOpen",function(){e.CHM(n);var a=e.oxw();return a.defaultOpen=!a.defaultOpen}),e._UZ(3,"app-dropdown-multi",10),e.qZA(),e.qZA(),e.TgZ(4,"span",8),e.TgZ(5,"app-sort",11),e.NdJ("onSort",function(a){return e.CHM(n),e.oxw().onSort(a,"name_sort")}),e.qZA(),e.TgZ(6,"app-sort",12),e.NdJ("onSort",function(a){return e.CHM(n),e.oxw().onSort(a,"actual_hours_sort")}),e.qZA(),e.qZA(),e.qZA()}if(2&i){var t=e.oxw();e.xp6(2),e.Q6J("label","Roles")("isFiltered",null==t.isFiltered?null:t.isFiltered.role),e.xp6(1),e.Q6J("label","roles")("defaultOpen",t.defaultOpen)("selected",null==t.filters?null:t.filters.role)("key","role_title")("optionId","role_id")("Data",t.roles)("placeholder","Select one or more roles")("controlName","role")("form",t.form)("show",!1),e.xp6(2),e.Q6J("label","Name")("isSelected",0!==t.filters.name_sort),e.xp6(1),e.Q6J("iconType","number")("label","Actual Hrs")("isSelected",0!==t.filters.actual_hours_sort)}}function Ht(i,s){if(1&i){var n=e.EpF();e.TgZ(0,"mat-paginator",13),e.NdJ("page",function(a){e.CHM(n);var l=e.oxw();return l.pageEvent=a,l.getData()}),e.qZA()}if(2&i){var t=e.oxw();e.Q6J("length",t.paginator.total_records)("pageIndex",t.paginator.page_no-1)("pageSize",t.paginator.page_size)("pageSizeOptions",t.pageSizes)}}function jt(i,s){if(1&i){var n=e.EpF();e.TgZ(0,"app-sort",41),e.NdJ("onSort",function(a){return e.CHM(n),e.oxw(3).onSort(a,"name_sort")}),e.qZA()}if(2&i){var t=e.oxw(3);e.Q6J("isSelected",0!==t.filters.name_sort)("iconType","alpha")}}function $t(i,s){if(1&i){var n=e.EpF();e.TgZ(0,"app-filter-popup",9),e.NdJ("onClose",function(){return e.CHM(n),e.oxw(3).closeFilter("role")})("onApply",function(){return e.CHM(n),e.oxw(3).applyFilterMulti("role")})("onClear",function(){return e.CHM(n),e.oxw(3).removeFilter("role")})("onOpen",function(){e.CHM(n);var a=e.oxw(3);return a.defaultOpen=!a.defaultOpen}),e._UZ(1,"app-dropdown-multi",10),e.qZA()}if(2&i){var t=e.oxw(3);e.Q6J("label","roles")("isFiltered",null==t.isFiltered?null:t.isFiltered.role),e.xp6(1),e.Q6J("label","roles")("defaultOpen",t.defaultOpen)("selected",null==t.filters?null:t.filters.role)("key","role_title")("optionId","role_id")("Data",t.roles)("placeholder","Select one or more roles")("controlName","role")("form",t.form)("show",!1)}}function Gt(i,s){if(1&i&&(e.TgZ(0,"th",38),e._uU(1," Name "),e.YNc(2,jt,1,2,"app-sort",39),e.YNc(3,$t,2,12,"app-filter-popup",40),e.qZA()),2&i){var n=e.oxw(2);e.xp6(2),e.Q6J("ngIf",!(null!=n.gs&&n.gs.isRespMode)),e.xp6(1),e.Q6J("ngIf",!(null!=n.gs&&n.gs.isRespMode))}}function Kt(i,s){if(1&i&&(e.TgZ(0,"td",42),e.TgZ(1,"label",43),e._uU(2,"Name"),e.qZA(),e._UZ(3,"app-user-avatar",44),e.qZA()),2&i){var n=s.$implicit,t=e.oxw(2);e.xp6(3),e.s9C("title",n.role_title),e.Q6J("name",n.user_name)("color",n.user_color+t.opacity)("initialColor",n.user_color)("nbTooltip",n.user_name)}}function Xt(i,s){if(1&i&&(e.TgZ(0,"th",45),e._uU(1,"Store"),e.qZA()),2&i){var n=e.oxw(2);e.Q6J("hidden",n.sharedRegion>0)}}function en(i,s){if(1&i&&(e.TgZ(0,"td",46),e.TgZ(1,"label",43),e._uU(2,"Store"),e.qZA(),e.TgZ(3,"span",47),e._uU(4),e.qZA(),e.qZA()),2&i){var n=s.$implicit,t=e.oxw(2);e.Q6J("hidden",t.sharedRegion>0),e.xp6(3),e.Q6J("nbTooltip",n.region_title?n.region_title:""),e.xp6(1),e.Oqu(n.region_title?n.region_title:"")}}function tn(i,s){if(1&i&&(e.TgZ(0,"th",48),e.TgZ(1,"span",49),e._uU(2),e.ALo(3,"date"),e.qZA(),e._UZ(4,"br"),e.TgZ(5,"span",49),e._uU(6,"Sun"),e.qZA(),e.qZA()),2&i){var n=e.oxw(2);e.xp6(2),e.hij(" ",e.xi3(3,1,n.weekDates[n.weeksArr.indexOf("sun")],"d"),"")}}function nn(i,s){1&i&&(e.TgZ(0,"span"),e._UZ(1,"i",54),e.qZA()),2&i&&(e.xp6(1),e.Q6J("nbTooltip","Out of geo-fence"))}function on(i,s){if(1&i){var n=e.EpF();e.TgZ(0,"td",50),e.NdJ("click",function(){var d=e.CHM(n).$implicit;return e.oxw(2).selectItem(d,"sun")}),e.TgZ(1,"label",43),e._uU(2,"Sun"),e.qZA(),e.TgZ(3,"span",51),e._uU(4),e.ALo(5,"time"),e.qZA(),e.YNc(6,nn,2,1,"span",52),e.TgZ(7,"span"),e._UZ(8,"i",53),e.qZA(),e.qZA()}if(2&i){var t=s.$implicit,o=e.oxw(2);e.Tol(null!=t.days.Sunday&&t.days.Sunday.is_out_of_schedule?"out_of_schedule":""),e.xp6(4),e.hij(" ",e.lcZ(5,5,null==t.days.Sunday?null:t.days.Sunday.work_hour_format)," "),e.xp6(2),e.Q6J("ngIf",o.isLocationEnabled&&(null==t.days.Sunday?null:t.days.Sunday.is_outof_radius)),e.xp6(2),e.Q6J("nbTooltip","Out of schedule")}}function an(i,s){if(1&i&&(e.TgZ(0,"th",48),e.TgZ(1,"span",49),e._uU(2),e.ALo(3,"date"),e.qZA(),e._UZ(4,"br"),e.TgZ(5,"span",49),e._uU(6,"Mon"),e.qZA(),e.qZA()),2&i){var n=e.oxw(2);e.xp6(2),e.hij(" ",e.xi3(3,1,n.weekDates[n.weeksArr.indexOf("mon")],"d"),"")}}function sn(i,s){1&i&&(e.TgZ(0,"span"),e._UZ(1,"i",54),e.qZA()),2&i&&(e.xp6(1),e.Q6J("nbTooltip","Out of geo-fence"))}function ln(i,s){if(1&i){var n=e.EpF();e.TgZ(0,"td",50),e.NdJ("click",function(){var d=e.CHM(n).$implicit;return e.oxw(2).selectItem(d,"mon")}),e.TgZ(1,"label",43),e._uU(2,"Mon"),e.qZA(),e._uU(3),e.ALo(4,"time"),e.YNc(5,sn,2,1,"span",52),e.TgZ(6,"span"),e._UZ(7,"i",53),e.qZA(),e.qZA()}if(2&i){var t=s.$implicit,o=e.oxw(2);e.Tol(null!=t.days.Monday&&t.days.Monday.is_out_of_schedule?"out_of_schedule":""),e.xp6(3),e.hij(" ",e.lcZ(4,5,null==t.days.Monday?null:t.days.Monday.work_hour_format)," "),e.xp6(2),e.Q6J("ngIf",o.isLocationEnabled&&(null==t.days.Monday?null:t.days.Monday.is_outof_radius)),e.xp6(2),e.Q6J("nbTooltip","Out of schedule")}}function rn(i,s){if(1&i&&(e.TgZ(0,"th",48),e.TgZ(1,"span",49),e._uU(2),e.ALo(3,"date"),e.qZA(),e._UZ(4,"br"),e.TgZ(5,"span",49),e._uU(6,"Tue"),e.qZA(),e.qZA()),2&i){var n=e.oxw(2);e.xp6(2),e.hij(" ",e.xi3(3,1,n.weekDates[n.weeksArr.indexOf("tues")],"d"),"")}}function pn(i,s){1&i&&(e.TgZ(0,"span"),e._UZ(1,"i",54),e.qZA()),2&i&&(e.xp6(1),e.Q6J("nbTooltip","Out of geo-fence"))}function dn(i,s){if(1&i){var n=e.EpF();e.TgZ(0,"td",50),e.NdJ("click",function(){var d=e.CHM(n).$implicit;return e.oxw(2).selectItem(d,"tues")}),e.TgZ(1,"label",43),e._uU(2,"Tue"),e.qZA(),e._uU(3),e.ALo(4,"time"),e.YNc(5,pn,2,1,"span",52),e.TgZ(6,"span"),e._UZ(7,"i",53),e.qZA(),e.qZA()}if(2&i){var t=s.$implicit,o=e.oxw(2);e.Tol(null!=t.days.Tuesday&&t.days.Tuesday.is_out_of_schedule?"out_of_schedule":""),e.xp6(3),e.hij(" ",e.lcZ(4,5,null==t.days.Tuesday?null:t.days.Tuesday.work_hour_format)," "),e.xp6(2),e.Q6J("ngIf",o.isLocationEnabled&&(null==t.days.Tuesday?null:t.days.Tuesday.is_outof_radius)),e.xp6(2),e.Q6J("nbTooltip","Out of schedule")}}function cn(i,s){if(1&i&&(e.TgZ(0,"th",48),e.TgZ(1,"span",49),e._uU(2),e.ALo(3,"date"),e.qZA(),e._UZ(4,"br"),e.TgZ(5,"span",49),e._uU(6,"Wed"),e.qZA(),e.qZA()),2&i){var n=e.oxw(2);e.xp6(2),e.hij(" ",e.xi3(3,1,n.weekDates[n.weeksArr.indexOf("wed")],"d"),"")}}function _n(i,s){1&i&&(e.TgZ(0,"span"),e._UZ(1,"i",54),e.qZA()),2&i&&(e.xp6(1),e.Q6J("nbTooltip","Out of geo-fence"))}function un(i,s){if(1&i){var n=e.EpF();e.TgZ(0,"td",50),e.NdJ("click",function(){var d=e.CHM(n).$implicit;return e.oxw(2).selectItem(d,"wed")}),e.TgZ(1,"label",43),e._uU(2,"Wed"),e.qZA(),e._uU(3),e.ALo(4,"time"),e.YNc(5,_n,2,1,"span",52),e.TgZ(6,"span"),e._UZ(7,"i",53),e.qZA(),e.qZA()}if(2&i){var t=s.$implicit,o=e.oxw(2);e.Tol(null!=t.days.Wednesday&&t.days.Wednesday.is_out_of_schedule?"out_of_schedule":""),e.xp6(3),e.hij(" ",e.lcZ(4,5,null==t.days.Wednesday?null:t.days.Wednesday.work_hour_format)," "),e.xp6(2),e.Q6J("ngIf",o.isLocationEnabled&&(null==t.days.Wednesday?null:t.days.Wednesday.is_outof_radius)),e.xp6(2),e.Q6J("nbTooltip","Out of schedule")}}function mn(i,s){if(1&i&&(e.TgZ(0,"th",48),e.TgZ(1,"span",49),e._uU(2),e.ALo(3,"date"),e.qZA(),e._UZ(4,"br"),e.TgZ(5,"span",49),e._uU(6,"Thr"),e.qZA(),e.qZA()),2&i){var n=e.oxw(2);e.xp6(2),e.hij(" ",e.xi3(3,1,n.weekDates[n.weeksArr.indexOf("thurs")],"d"),"")}}function hn(i,s){1&i&&(e.TgZ(0,"span"),e._UZ(1,"i",54),e.qZA()),2&i&&(e.xp6(1),e.Q6J("nbTooltip","Out of geo-fence"))}function gn(i,s){if(1&i){var n=e.EpF();e.TgZ(0,"td",50),e.NdJ("click",function(){var d=e.CHM(n).$implicit;return e.oxw(2).selectItem(d,"thurs")}),e.TgZ(1,"label",43),e._uU(2,"Thr"),e.qZA(),e._uU(3),e.ALo(4,"time"),e.YNc(5,hn,2,1,"span",52),e.TgZ(6,"span"),e._UZ(7,"i",53),e.qZA(),e.qZA()}if(2&i){var t=s.$implicit,o=e.oxw(2);e.Tol(null!=t.days.Thursday&&t.days.Thursday.is_out_of_schedule?"out_of_schedule":""),e.xp6(3),e.hij(" ",e.lcZ(4,5,null==t.days.Thursday?null:t.days.Thursday.work_hour_format)," "),e.xp6(2),e.Q6J("ngIf",o.isLocationEnabled&&(null==t.days.Thursday?null:t.days.Thursday.is_outof_radius)),e.xp6(2),e.Q6J("nbTooltip","Out of schedule")}}function fn(i,s){if(1&i&&(e.TgZ(0,"th",48),e.TgZ(1,"span",49),e._uU(2),e.ALo(3,"date"),e.qZA(),e._UZ(4,"br"),e.TgZ(5,"span",49),e._uU(6,"Fri"),e.qZA(),e.qZA()),2&i){var n=e.oxw(2);e.xp6(2),e.hij(" ",e.xi3(3,1,n.weekDates[n.weeksArr.indexOf("fri")],"d"),"")}}function vn(i,s){1&i&&(e.TgZ(0,"span"),e._UZ(1,"i",54),e.qZA()),2&i&&(e.xp6(1),e.Q6J("nbTooltip","Out of geo-fence"))}function Tn(i,s){if(1&i){var n=e.EpF();e.TgZ(0,"td",50),e.NdJ("click",function(){var d=e.CHM(n).$implicit;return e.oxw(2).selectItem(d,"fri")}),e.TgZ(1,"label",43),e._uU(2,"Fri"),e.qZA(),e._uU(3),e.ALo(4,"time"),e.YNc(5,vn,2,1,"span",52),e.TgZ(6,"span"),e._UZ(7,"i",53),e.qZA(),e.qZA()}if(2&i){var t=s.$implicit,o=e.oxw(2);e.Tol(null!=t.days.Friday&&t.days.Friday.is_out_of_schedule?"out_of_schedule":""),e.xp6(3),e.hij(" ",e.lcZ(4,5,null==t.days.Friday?null:t.days.Friday.work_hour_format)," "),e.xp6(2),e.Q6J("ngIf",o.isLocationEnabled&&(null==t.days.Friday?null:t.days.Friday.is_outof_radius)),e.xp6(2),e.Q6J("nbTooltip","Out of schedule")}}function xn(i,s){if(1&i&&(e.TgZ(0,"th",48),e.TgZ(1,"span",49),e._uU(2),e.ALo(3,"date"),e.qZA(),e._UZ(4,"br"),e.TgZ(5,"span",49),e._uU(6,"Sat"),e.qZA(),e.qZA()),2&i){var n=e.oxw(2);e.xp6(2),e.hij(" ",e.xi3(3,1,n.weekDates[n.weeksArr.indexOf("sat")],"d"),"")}}function yn(i,s){1&i&&(e.TgZ(0,"span"),e._UZ(1,"i",54),e.qZA()),2&i&&(e.xp6(1),e.Q6J("nbTooltip","Out of geo-fence"))}function wn(i,s){if(1&i){var n=e.EpF();e.TgZ(0,"td",50),e.NdJ("click",function(){var d=e.CHM(n).$implicit;return e.oxw(2).selectItem(d,"sat")}),e.TgZ(1,"label",43),e._uU(2,"Sat"),e.qZA(),e._uU(3),e.ALo(4,"time"),e.YNc(5,yn,2,1,"span",52),e.TgZ(6,"span"),e._UZ(7,"i",53),e.qZA(),e.qZA()}if(2&i){var t=s.$implicit,o=e.oxw(2);e.Tol(null!=t.days.Saturday&&t.days.Saturday.is_out_of_schedule?"out_of_schedule":""),e.xp6(3),e.hij(" ",e.lcZ(4,5,null==t.days.Saturday?null:t.days.Saturday.work_hour_format)," "),e.xp6(2),e.Q6J("ngIf",o.isLocationEnabled&&(null==t.days.Saturday?null:t.days.Saturday.is_outof_radius)),e.xp6(2),e.Q6J("nbTooltip","Out of schedule")}}function Cn(i,s){if(1&i){var n=e.EpF();e.TgZ(0,"app-sort",57),e.NdJ("onSort",function(a){return e.CHM(n),e.oxw(3).onSort(a,"actual_hours_sort")}),e.qZA()}if(2&i){var t=e.oxw(3);e.Q6J("iconType","number")("isSelected",0!==t.filters.actual_hours_sort)}}function Zn(i,s){if(1&i&&(e.TgZ(0,"th",55),e._uU(1,"Actual Hours "),e.YNc(2,Cn,1,2,"app-sort",56),e.qZA()),2&i){var n=e.oxw(2);e.xp6(2),e.Q6J("ngIf",!(null!=n.gs&&n.gs.isRespMode))}}function bn(i,s){1&i&&e._UZ(0,"i",64)}function An(i,s){1&i&&e._UZ(0,"i",65),2&i&&e.Q6J("nbTooltip","Overtime")}function Dn(i,s){1&i&&e._UZ(0,"i",66),2&i&&e.Q6J("nbTooltip","Out of schedule")}function kn(i,s){1&i&&e._UZ(0,"img",67),2&i&&e.Q6J("nbTooltip","Out of schedule & overtime")}var On=function(s,n,t){return{overtime:s,out_of_schedule:n,double_flags:t}};function Mn(i,s){if(1&i&&(e.TgZ(0,"td",58),e.TgZ(1,"label",43),e._uU(2,"Actual Hours"),e.qZA(),e.TgZ(3,"span",59),e._uU(4),e.ALo(5,"time"),e.qZA(),e.YNc(6,bn,1,0,"i",60),e.YNc(7,An,1,1,"i",61),e.YNc(8,Dn,1,1,"i",62),e.YNc(9,kn,1,1,"img",63),e.qZA()),2&i){var n=s.$implicit;e.Q6J("ngClass",e.kEZ(8,On,n.is_max_hours_exceed,n.is_out_of_schedule,n.is_out_of_schedule&&n.is_max_hours_exceed)),e.xp6(4),e.Oqu(e.lcZ(5,6,n.total_hour_format)),e.xp6(2),e.Q6J("ngIf",n.is_max_hours_exceed&&1==n.is_out_of_schedule),e.xp6(1),e.Q6J("ngIf",n.is_max_hours_exceed&&!n.is_out_of_schedule),e.xp6(1),e.Q6J("ngIf",n.is_out_of_schedule&&!n.is_max_hours_exceed),e.xp6(1),e.Q6J("ngIf",n.is_out_of_schedule&&n.is_max_hours_exceed)}}function Sn(i,s){1&i&&e._UZ(0,"tr",68)}var Pn=function(s){return{disable_row:s}};function Jn(i,s){1&i&&e._UZ(0,"tr",69),2&i&&e.Q6J("ngClass",e.VKq(1,Pn,s.$implicit.is_empty))}function In(i,s){if(1&i&&(e.TgZ(0,"div",14),e.TgZ(1,"table",15),e.ynx(2,16),e.YNc(3,Gt,4,2,"th",17),e.YNc(4,Kt,4,5,"td",18),e.BQk(),e.ynx(5,19),e.YNc(6,Xt,2,1,"th",20),e.YNc(7,en,5,3,"td",21),e.BQk(),e.ynx(8,22),e.YNc(9,tn,7,4,"th",23),e.YNc(10,on,9,7,"td",24),e.BQk(),e.ynx(11,25),e.YNc(12,an,7,4,"th",23),e.YNc(13,ln,8,7,"td",24),e.BQk(),e.ynx(14,26),e.YNc(15,rn,7,4,"th",23),e.YNc(16,dn,8,7,"td",24),e.BQk(),e.ynx(17,27),e.YNc(18,cn,7,4,"th",23),e.YNc(19,un,8,7,"td",24),e.BQk(),e.ynx(20,28),e.YNc(21,mn,7,4,"th",23),e.YNc(22,gn,8,7,"td",24),e.BQk(),e.ynx(23,29),e.YNc(24,fn,7,4,"th",23),e.YNc(25,Tn,8,7,"td",24),e.BQk(),e.ynx(26,30),e.YNc(27,xn,7,4,"th",23),e.YNc(28,wn,8,7,"td",24),e.BQk(),e.ynx(29,31),e.YNc(30,Zn,3,1,"th",32),e.YNc(31,Mn,10,12,"td",33),e.BQk(),e.YNc(32,Sn,1,0,"tr",34),e.YNc(33,Jn,1,3,"tr",35),e.qZA(),e._UZ(34,"app-no-records",36),e._UZ(35,"app-no-search-records",37),e.qZA()),2&i){var n=e.oxw();e.xp6(1),e.Q6J("dataSource",n.dataSource),e.xp6(31),e.Q6J("matHeaderRowDef",n.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns),e.xp6(1),e.Q6J("display",n.emptyResults)("animation","timesheet"),e.xp6(1),e.Q6J("display",!n.emptyResults&&n.emptySearchResults)}}var ne=function(){var i=function(){function s(n,t,o,a,l,d){var r=this;(0,A.Z)(this,s),this.fb=n,this.dialogService=t,this.router=o,this.dataService=a,this.service=l,this.gs=d,this.displayedColumns=["user","region_title","sun","mon","tues","wed","thurs","fri","sat","total"],this.dataSource=new g.by([]),this.selectedDate={start:null,end:null},this.weekStartChanged=new e.vpe,this.userSelectedDate=new Date,this.filters={role:null,name_sort:0,actual_hours_sort:0},this.defaultOpen=!0,this.paginator=y.$0,this.pageSizes=y.Wv,this.dataService.getConfigurations(!1).then(function(p){var _,c,m;r.storeLevelSettings=1==(null===(_=p.company)||void 0===_?void 0:_.store_level_settings),r.isLocationEnabled=1===(null===(c=p.company)||void 0===c?void 0:c.is_location),r.companyWeekStartDay=null===(m=p.company.timesheet)||void 0===m?void 0:m.week_start_day,r.startDay=r.companyWeekStartDay}).finally(function(){r.storeLevelSettings?r.updateConfig(r.sharedRegion):r.setColumns()}),this.subscription=this.dataService.SharingRegionData.subscribe(function(p){r.storeLevelSettings&&r.updateConfig(p),r.sharedRegion=p,r.storeLevelSettings||r.getData(),r.closeDetails()}),this.dataService.getRoles(!1).then(function(p){r.roles=p}).finally(function(){}),this.form=this.fb.group({role:[]})}return(0,b.Z)(s,[{key:"setColumns",value:function(){this.weeksArr=this.gs.getWeeksArray(this.startDay),this.displayedColumns=["user"].concat(["region_title"],(0,Bt.Z)(this.weeksArr),["total"]),this.selectedDate=this.gs.getWeek(new Date,this.startDay),this.weekDates=this.gs.getWeekDates(this.selectedDate.start),this.getData()}},{key:"updateConfig",value:function(t){var o=this;this.loading=!0,this.dataService.getRegionConfig(!0,t).then(function(a){o.startDay=null===a.week_start_day?o.companyWeekStartDay:null==a?void 0:a.week_start_day}).finally(function(){o.setColumns(),o.weekStartChanged.emit({newDate:{start:o.weekDates[0]},newDay:o.startDay}),o.loading=!1})}},{key:"ngOnInit",value:function(){this.isFiltered={role:null},this.filtersCopy=JSON.parse(JSON.stringify(this.filters)),this.filters.name_sort=1,this.opacity=y.ZF,this.showSideBarDetails=!1}},{key:"ngOnChanges",value:function(t){t.searchText&&t.searchText.currentValue!==t.searchText.previousValue?(this.pageEvent&&(this.pageEvent.pageIndex=0),this.getData()):t.filterData&&t.filterData.currentValue!==t.filterData.previousValue?(this.filterInput=t.filterData.currentValue,this.getData()):t.buttonPressed&&1==t.buttonPressed.currentValue&&this.getData()}},{key:"setDateData",value:function(t){this.selectedDate=t,this.weekDates=this.gs.getWeekDates(this.selectedDate.start),this.getData()}},{key:"closeFilter",value:function(t){var o;this.form.controls[t].setValue(null===(o=this.filters)||void 0===o?void 0:o[t])}},{key:"applyFilterMulti",value:function(t){this.gs.logEvents("weekly_timesheet_enteries_filtered_by_"+t);var o=this.form.controls[t].value;o&&o.length>0?(this.isFiltered[t]=!0,this.filters[t]=o):(this.filters[t]=null,this.isFiltered[t]=!1),this.getData()}},{key:"removeFilter",value:function(t){this.filters[t]=null,this.isFiltered[t]=!1,this.getData()}},{key:"onSort",value:function(t,o){this.gs.logEvents("timesheet_weekly_"+o);var a=this.filters.role;this.filters=JSON.parse(JSON.stringify(this.filtersCopy)),this.filters[o]=t,this.filters.role=a,this.getData()}},{key:"onEditClick",value:function(t){var o=this;this.timesheetData=t;var a=Object.assign({},this.selectedUser);this.selectedUser=null,a.date=this.userSelectedDate,this.selectedUser=a,this.showSideBarDetails=!1,this.dialogService.open(O,{hasBackdrop:!0,closeOnBackdropClick:!1,context:{user:this.selectedUser,selectedData:this.selectedRowData,timesheetData:this.timesheetData}}).onClose.subscribe(function(l){o.selectedRowData=null,l&&o.getData()})}},{key:"onAddClick",value:function(){var t=this;this.showSideBarDetails=!1,this.dialogService.open(O,{hasBackdrop:!0,closeOnBackdropClick:!1,context:{user:this.selectedUser,selectedData:this.selectedRowData,timesheetData:this.timesheetData}}).onClose.subscribe(function(o){o&&t.getData()})}},{key:"initAddEntry",value:function(){var t=this;this.dialogService.open(O,{hasBackdrop:!0,closeOnBackdropClick:!1,context:{user:null,selectedData:null,timesheetData:null}}).onClose.subscribe(function(o){o&&t.getData()})}},{key:"selectItem",value:function(t,o){if(t.is_empty=!Object.keys(t.days).some(function(l){return l.toLowerCase().includes(o)}),!t.is_empty){this.showSideBarDetails=!0;var a=this.weekDates[this.weeksArr.indexOf(o)];t.date=this.gs.convertToLocalDateString(a),this.selectedRowData=t,this.userSelectedDate=a,this.selectedUser={userName:t.user_name,userId:t.user_id,userColor:t.user_color,userRole:t.role_title},this.gs.showBackDrop(!0)}}},{key:"closeDetails",value:function(){this.showSideBarDetails=!1,this.selectedRowData=null,this.gs.showBackDrop(!1)}},{key:"getData",value:function(){var t=this;null!=this.sharedRegion&&(this.filterInput={region_id:this.sharedRegion},this.loading=!0,this.service.getTimesheetTableData(this.searchText,this.pageEvent,this.filterInput,this.gs.convertToLocalDateString(this.selectedDate.start),this.gs.convertToLocalDateString(this.selectedDate.end),this.filters).then(function(o){var a,l;t.dataSource=o.users,t.paginator=o.pagination,t.emptySearchResults=!(0!==(null===(a=o.users)||void 0===a?void 0:a.length)||!t.searchText),t.emptyResults=0===(null===(l=o.users)||void 0===l?void 0:l.length)&&!t.searchText}).catch(function(o){console.log(o)}).finally(function(){t.loading=!1}))}},{key:"ngOnDestroy",value:function(){var t;null===(t=this.subscription)||void 0===t||t.unsubscribe()}}]),s}();return i.\u0275fac=function(n){return new(n||i)(e.Y36(x.qu),e.Y36(v.Gln),e.Y36(h.F0),e.Y36(M.s),e.Y36(J),e.Y36(I.m))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-timesheet-weekly-view"]],viewQuery:function(n,t){var o;1&n&&e.Gf(O,5),2&n&&e.iGM(o=e.CRH())&&(t.AddTimesheetEntryComponentInstance=o.first)},inputs:{searchText:"searchText",filterData:"filterData",buttonPressed:"buttonPressed"},outputs:{weekStartChanged:"weekStartChanged"},features:[e.TTD],decls:7,vars:7,consts:[[3,"loading"],["class","filters-wrapper",4,"ngIf"],[3,"showSideBar","tag","closeDetails"],[3,"selectedData","addClick","editClick","refreshData"],[1,"timesheet_page_pagination"],["showFirstLastButtons","",3,"length","pageIndex","pageSize","pageSizeOptions","page",4,"ngIf"],["class","mat-elevation-z8 relative timesheet_table  weekly_view","style","top: 3px;",4,"ngIf"],[1,"filters-wrapper"],[1,"sorting-in-resp"],[3,"label","isFiltered","onClose","onApply","onClear","onOpen"],[3,"label","defaultOpen","selected","key","optionId","Data","placeholder","controlName","form","show"],[1,"sort",3,"label","isSelected","onSort"],[1,"sort",3,"iconType","label","isSelected","onSort"],["showFirstLastButtons","",3,"length","pageIndex","pageSize","pageSizeOptions","page"],[1,"mat-elevation-z8","relative","timesheet_table","weekly_view",2,"top","3px"],["mat-table","","id","weekly-table",3,"dataSource"],["matColumnDef","user"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","style","width: 150px;",4,"matCellDef"],["matColumnDef","region_title"],["mat-header-cell","","style","min-width: 80px",3,"hidden",4,"matHeaderCellDef"],["mat-cell","","class","store-col",3,"hidden",4,"matCellDef"],["matColumnDef","sun"],["style","min-width: 80px;","mat-header-cell","",4,"matHeaderCellDef"],["style","min-width: 60px;","mat-cell","",3,"class","click",4,"matCellDef"],["matColumnDef","mon"],["matColumnDef","tues"],["matColumnDef","wed"],["matColumnDef","thurs"],["matColumnDef","fri"],["matColumnDef","sat"],["matColumnDef","total"],["mat-header-cell","","style","min-width: 70px;padding-right: 15px;",4,"matHeaderCellDef"],["mat-cell","",3,"ngClass",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"ngClass",4,"matRowDef","matRowDefColumns"],[3,"display","animation"],[3,"display"],["mat-header-cell",""],["class","sort",3,"isSelected","iconType","onSort",4,"ngIf"],[3,"label","isFiltered","onClose","onApply","onClear","onOpen",4,"ngIf"],[1,"sort",3,"isSelected","iconType","onSort"],["mat-cell","",2,"width","150px"],[1,"show_in_resp"],["size","medium","nbTooltipAdjustment","noop",1,"link_name",3,"name","title","color","initialColor","nbTooltip"],["mat-header-cell","",2,"min-width","80px",3,"hidden"],["mat-cell","",1,"store-col",3,"hidden"],["nbTooltipAdjustment","noop",1,"store-name",2,"color","#4E4E4E",3,"nbTooltip"],["mat-header-cell","",2,"min-width","80px"],[1,"date-text"],["mat-cell","",2,"min-width","60px",3,"click"],[1,"link"],[4,"ngIf"],[1,"fa","fa-flag",3,"nbTooltip"],[1,"fas","fa-map-marker-alt","outof-fence",3,"nbTooltip"],["mat-header-cell","",2,"min-width","70px","padding-right","15px"],["class","sort",3,"iconType","isSelected","onSort",4,"ngIf"],[1,"sort",3,"iconType","isSelected","onSort"],["mat-cell","",3,"ngClass"],[1,""],["alt","out of schedule icon",4,"ngIf"],["alt","out of schedule icon","class","fa fa-flag","nbTooltipAdjustment","noop",3,"nbTooltip",4,"ngIf"],["alt","flag icon","class","fa fa-flag","nbTooltipAdjustment","noop",3,"nbTooltip",4,"ngIf"],["alt","out of schedule and overtime flag","src","../../../assets/flags.svg","nbTooltipAdjustment","noop",3,"nbTooltip",4,"ngIf"],["alt","out of schedule icon"],["alt","out of schedule icon","nbTooltipAdjustment","noop",1,"fa","fa-flag",3,"nbTooltip"],["alt","flag icon","nbTooltipAdjustment","noop",1,"fa","fa-flag",3,"nbTooltip"],["alt","out of schedule and overtime flag","src","../../../assets/flags.svg","nbTooltipAdjustment","noop",3,"nbTooltip"],["mat-header-row",""],["mat-row","",3,"ngClass"]],template:function(n,t){1&n&&(e._UZ(0,"app-loader",0),e.YNc(1,Wt,7,17,"span",1),e.TgZ(2,"app-sidebar",2),e.NdJ("closeDetails",function(){return t.closeDetails()}),e.TgZ(3,"app-timesheet-details",3),e.NdJ("addClick",function(){return t.onAddClick()})("editClick",function(a){return t.onEditClick(a)})("refreshData",function(){return t.getData()}),e.qZA(),e.qZA(),e.TgZ(4,"span",4),e.YNc(5,Ht,1,4,"mat-paginator",5),e.qZA(),e.YNc(6,In,36,6,"div",6)),2&n&&(e.Q6J("loading",t.loading),e.xp6(1),e.Q6J("ngIf",null==t.gs?null:t.gs.isRespMode),e.xp6(1),e.Q6J("showSideBar",t.showSideBarDetails)("tag","detail"),e.xp6(1),e.Q6J("selectedData",t.selectedRowData),e.xp6(2),e.Q6J("ngIf",t.paginator),e.xp6(1),e.Q6J("ngIf",t.dataSource&&t.weekDates))},directives:[Q.R,w.O5,B.u,V.x,W.x,H.k,K,P.NW,g.BZ,g.w1,g.fO,g.ge,g.Dz,g.ev,R.k,v.jNv,w.mk,g.as,g.XQ,g.nj,g.Gk,X.k,ee.V],pipes:[w.uU,Y],styles:["table[_ngcontent-%COMP%] {\n  width: 100%;\n}\n\ntd.mat-cell[_ngcontent-%COMP%]:last-of-type, td.mat-footer-cell[_ngcontent-%COMP%]:last-of-type {\n  padding-right: 24px;\n  text-align: left;\n  text-decoration: none;\n  font-weight: 700;\n}\n\nth.mat-header-cell[_ngcontent-%COMP%]:last-of-type {\n  text-align: left;\n}\n\n.fa-flag[_ngcontent-%COMP%] {\n  display: none;\n}\n\n.overtime[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%] {\n  display: inline-block;\n  color: red !important;\n  margin-left: 5px !important;\n}\n\n.overtime[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n  display: none;\n}\n\n.out_of_schedule[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%] {\n  display: inline-block !important;\n  margin-left: 5px !important;\n  color: #f9bf00 !important;\n}\n\n.out_of_schedule[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n  display: none;\n}\n\n.bolder[_ngcontent-%COMP%] {\n  font-weight: 800 !important;\n}\n\ntr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%] {\n  color: #7b68ee;\n  text-decoration: underline !important;\n  cursor: pointer;\n}\n\n.weekly_view[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   .th.mat-header-cell[_ngcontent-%COMP%]:first-of-type, .weekly_view[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]:first-of-type, .weekly_view[_ngcontent-%COMP%]   td.mat-footer-cell[_ngcontent-%COMP%]:first-of-type {\n  text-decoration: none !important;\n  cursor: auto !important;\n}\n\ntr[_ngcontent-%COMP%]:hover   td.mat-cell[_ngcontent-%COMP%]:last-of-type, td.mat-footer-cell[_ngcontent-%COMP%]:last-of-type {\n  text-decoration: none !important;\n  cursor: auto !important;\n}\n\n.store-col[_ngcontent-%COMP%] {\n  max-width: 140px;\n  white-space: nowrap;\n  overflow: hidden;\n  padding-right: 10px;\n  text-overflow: ellipsis;\n  padding-right: 10px;\n  padding-left: 10px;\n}\n\n.date-text[_ngcontent-%COMP%] {\n  font-size: 17px;\n  line-height: 1.2;\n}\n\n.double_flags[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n  display: inline-block !important;\n  margin-left: 3px;\n  margin-bottom: -3px;\n}\n\n.outof-fence[_ngcontent-%COMP%] {\n  margin-left: 5px !important;\n  color: #ff3384;\n  margin-left: 2px;\n}\n\n@media (min-width: 931px) {\n  .filters-wrapper[_ngcontent-%COMP%] {\n    display: none;\n  }\n}\n\n@media (max-width: 930px) and (min-width: 680px) {\n  .filters-wrapper[_ngcontent-%COMP%] {\n    display: flex;\n    margin-top: 0px;\n    color: #6e689b;\n    position: sticky;\n    top: 83px;\n    z-index: 1;\n    background: #f9faff;\n    padding: 10px 10px !important;\n    justify-content: space-between;\n  }\n}\n\n@media (max-width: 679px) and (min-width: 320px) {\n  .filters-wrapper[_ngcontent-%COMP%] {\n    display: flex;\n    margin-top: 0px;\n    color: #6e689b;\n    position: sticky;\n    top: 115px;\n    z-index: 1;\n    background: #f9faff;\n    padding: 10px 10px !important;\n    justify-content: space-between;\n  }\n}\n\n@media (max-width: 930px) and (min-width: 400px) {\n  .sort[_ngcontent-%COMP%] {\n    margin-right: 15px;\n    margin-bottom: 10px;\n  }\n}\n\n@media (max-width: 400px) {\n  .sort[_ngcontent-%COMP%] {\n    margin-right: 5px !important;\n  }\n}\n\n@media (max-width: 600px) {\n  .sorting-in-resp[_ngcontent-%COMP%] {\n    display: flex;\n    flex-direction: column;\n  }\n}"]}),i}(),En=u(4605),qn=u(3948);function Qn(i,s){if(1&i){var n=e.EpF();e.TgZ(0,"span",22),e.TgZ(1,"span",23),e.NdJ("click",function(){return e.CHM(n),e.MAs(8).click()}),e._uU(2),e.ALo(3,"date"),e._UZ(4,"i",24),e.qZA(),e.TgZ(5,"nb-datepicker",25,26),e.NdJ("dateChange",function(l){return e.CHM(n),e.oxw().setDate(l)}),e.qZA(),e._UZ(7,"input",27,28),e.qZA()}if(2&i){var t=e.MAs(6),o=e.oxw();e.xp6(2),e.hij("",e.lcZ(3,2,o.selectedDate)," "),e.xp6(5),e.Q6J("nbDatepicker",t)}}function Nn(i,s){if(1&i){var n=e.EpF();e.TgZ(0,"span",22),e.TgZ(1,"span",23),e.NdJ("click",function(){return e.CHM(n),e.MAs(9).click()}),e._uU(2),e.ALo(3,"date"),e.ALo(4,"date"),e._UZ(5,"i",24),e.qZA(),e.TgZ(6,"nb-rangepicker",29,30),e.NdJ("rangeChange",function(l){return e.CHM(n),e.oxw().setDateWeekly(l)}),e.qZA(),e._UZ(8,"input",31,28),e.qZA()}if(2&i){var t=e.MAs(7),o=e.oxw();e.xp6(2),e.AsE("",e.lcZ(3,4,o.selectedDateWeekly.start)," - ",e.lcZ(4,6,o.selectedDateWeekly.end),""),e.xp6(4),e.Q6J("range",o.selectedDateWeekly),e.xp6(2),e.Q6J("nbDatepicker",t)}}function Un(i,s){if(1&i&&(e.TgZ(0,"span",40),e.TgZ(1,"span",41),e._uU(2,"Store group:"),e.qZA(),e._UZ(3,"app-dropdown",42),e.qZA()),2&i){var n=e.oxw(2);e.xp6(3),e.Q6J("Data",n.storeGroupList)("placeholder","Select group (optional)")("display","title")("key","group_id")("controlName","selectedStoreGroup")("form",n.exportForm)("show",!0)}}function Vn(i,s){if(1&i&&(e.TgZ(0,"span",43),e.TgZ(1,"span",41),e._uU(2,"Role:"),e.qZA(),e._UZ(3,"app-dropdown-multi",44),e.qZA()),2&i){var n=e.oxw(2);e.xp6(3),e.Q6J("label","roles")("selected",null==n.exportForm||null==n.exportForm.controls?null:n.exportForm.controls.selectedRole.value)("key","role_title")("key2","role_title")("optionId","role_id")("Data",n.roles)("placeholder","Select role (optional)")("controlName","selectedRole")("form",n.exportForm)("show",!1)}}function Rn(i,s){if(1&i){var n=e.EpF();e.TgZ(0,"div",32),e.TgZ(1,"span",33),e._uU(2,"Choose start and end date to download report"),e.qZA(),e._UZ(3,"br"),e.YNc(4,Un,4,7,"span",34),e.YNc(5,Vn,4,10,"span",35),e.TgZ(6,"nb-calendar-range",36),e.NdJ("rangeChange",function(a){return e.CHM(n),e.oxw().exportRange=a}),e.qZA(),e._UZ(7,"br"),e.TgZ(8,"div",37),e.TgZ(9,"button",38),e.NdJ("click",function(){return e.CHM(n),e.oxw().exportSummaryReport()}),e._uU(10," Summary "),e._UZ(11,"i",39),e.qZA(),e.TgZ(12,"button",38),e.NdJ("click",function(){return e.CHM(n),e.oxw().exportDetailedReport()}),e._uU(13," Detailed "),e._UZ(14,"i",39),e.qZA(),e.qZA(),e.qZA()}if(2&i){var t=e.oxw();e.xp6(4),e.Q6J("ngIf",t.storeGroupList),e.xp6(1),e.Q6J("ngIf",t.roles),e.xp6(1),e.Q6J("range",t.exportRange),e.xp6(3),e.Q6J("disabled",!(null!=t.exportRange&&t.exportRange.start&&null!=t.exportRange&&t.exportRange.end)),e.xp6(3),e.Q6J("disabled",!(null!=t.exportRange&&t.exportRange.start&&null!=t.exportRange&&t.exportRange.end))}}function Yn(i,s){if(1&i&&e._UZ(0,"app-timesheet-daily-view",45),2&i){var n=e.oxw();e.Q6J("searchText",n.searchOn)("filterData",n.filterOn)("showRegion",n.showRegion)("buttonPressed",n.isButtonPressed)}}function Fn(i,s){if(1&i){var n=e.EpF();e.TgZ(0,"app-timesheet-weekly-view",46),e.NdJ("weekStartChanged",function(a){return e.CHM(n),e.oxw().setPickerDate(a.newDate,a.newDay)}),e.qZA()}if(2&i){var t=e.oxw();e.Q6J("searchText",t.searchOn)("filterData",t.filterOn)("totalRegion",t.totalRegion)("buttonPressed",t.isButtonPressed)}}var zn=[{path:"",component:function(){var i=function(){function s(n,t,o,a,l,d,r){var p=this;(0,A.Z)(this,s),this.fb=n,this.router=t,this.gs=o,this.dataService=a,this.service=l,this.analytics=d,this.dialogService=r,this.sidebarOpened=!1,this.isButtonPressed=!1,this.subscription=a.SharingRegionData.subscribe(function(_){p.sharedRegion=_}),this.dataService.getStoreGroups(!1).then(function(_){p.storeGroupList=_}),this.dataService.getRoles(!1).then(function(_){p.roles=_}).finally(function(){})}return(0,b.Z)(s,[{key:"ngOnInit",value:function(){var t=this;this.exportForm=this.fb.group({selectedStoreGroup:[""],selectedRole:[]}),this.selectedDate=new Date,this.exportRange=null,this.showFilterResponsive=!1,this.dataService.getConfigurations(!1).then(function(o){var a,l,d,r;(null===(l=null===(a=o.role.modules)||void 0===a?void 0:a.TimesheetManagement)||void 0===l?void 0:l.enabled)||t.router.navigate(["401"]),t.nameConfig=null===(d=o.company)||void 0===d?void 0:d.custom_names,t.startDay=null===(r=o.company.timesheet)||void 0===r?void 0:r.week_start_day,(null==t.startDay||t.startDay&&t.startDay>6||t.startDay<0)&&(t.startDay=0),t.gs.hideSplashScreen()}).finally(function(){t.selectedTab="daily",t.selectedDateWeekly=t.gs.getWeek(new Date,t.startDay)})}},{key:"setDateWeekly",value:function(t){null!==this.startDay&&(this.selectedDateWeekly=this.gs.getWeek(t.start,this.startDay),this.weeklyComponent.setDateData(this.selectedDateWeekly))}},{key:"setPickerDate",value:function(t,o){this.startDay=o,null!==this.startDay&&(this.selectedDateWeekly=this.gs.getWeek(t.start,this.startDay))}},{key:"initAddEntry",value:function(){var t=this;this.dialogService.open(O,{hasBackdrop:!0,closeOnBackdropClick:!1,context:{user:null,selectedData:null,timesheetData:null}}).onClose.subscribe(function(o){o&&(t.isButtonPressed=!0)})}},{key:"setTab",value:function(t){t!=this.selectedTab&&(this.selectedTab=t,"daily"===t?this.selectedDate=new Date:this.selectedDateWeekly=this.gs.getWeek(new Date,this.startDay))}},{key:"onSearch",value:function(t){this.gs.logEvents("search_timesheet"),this.searchOn=t.trim()}},{key:"onSearchAll",value:function(t){this.searchOn=t.trim()}},{key:"setDate",value:function(t){this.selectedDate=t,this.dailyComponent.getData(t)}},{key:"exportSummaryReport",value:function(){var o,t=this;this.analytics.logEvents("summary_report"),this.loading=!0,this.popover.hide();var a={startDate:this.gs.convertToLocalDateString(this.exportRange.start),endDate:this.gs.convertToLocalDateString(this.exportRange.end),regionId:this.sharedRegion,teamId:null===(o=this.filterOn)||void 0===o?void 0:o.team_id,search:this.searchOn,store_group_id:this.exportForm.controls.selectedStoreGroup.value,role:this.exportForm.controls.selectedRole.value};console.log(a),this.service.exportSummaryReport(a).then(function(l){t.exportRange=null,t.gs.exportAsExcelFile(l.csvData,"Summary Report")}).catch(function(l){t.gs.showToastError(l.message),console.log(l)}).finally(function(){t.loading=!1})}},{key:"exportDetailedReport",value:function(){var o,t=this;this.analytics.logEvents("detailed_report"),this.loading=!0,this.popover.hide();var a={startDate:this.gs.convertToLocalDateString(this.exportRange.start),endDate:this.gs.convertToLocalDateString(this.exportRange.end),regionId:this.sharedRegion,teamId:null===(o=this.filterOn)||void 0===o?void 0:o.team_id,search:this.searchOn,store_group_id:this.exportForm.controls.selectedStoreGroup.value,role:this.exportForm.controls.selectedRole.value};this.service.exportDetailedReport(a).then(function(l){t.exportRange=null,t.gs.exportAsExcelFile(l.csvData,"Detailed Report")}).catch(function(l){t.gs.showToastError(l.message),console.log(l)}).finally(function(){t.loading=!1})}},{key:"ngOnDestroy",value:function(){var t;null===(t=this.subscription)||void 0===t||t.unsubscribe()}}]),s}();return i.\u0275fac=function(n){return new(n||i)(e.Y36(x.qu),e.Y36(h.F0),e.Y36(I.m),e.Y36(M.s),e.Y36(J),e.Y36(j.C),e.Y36(v.Gln))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-timesheet-page"]],viewQuery:function(n,t){var o;1&n&&(e.Gf(v.ydg,5),e.Gf(te,5),e.Gf(ne,5)),2&n&&(e.iGM(o=e.CRH())&&(t.popover=o.first),e.iGM(o=e.CRH())&&(t.dailyComponent=o.first),e.iGM(o=e.CRH())&&(t.weeklyComponent=o.first))},decls:29,vars:11,consts:[[3,"loading"],[1,"flex"],[1,"colored-column-info","timesheets_wrapper","ts-module"],[1,"wrapper_header"],[1,"flex","vertical_center","toggle-btns"],[1,"toggle_buttons","mr_10"],["shape","round","nbButton","","value","daily",1,"button-custom-variable",3,"status","click"],["nbButton","","value","weekly","size","medium",3,"status","click"],[1,"flex","vertical_center","date-picker"],["class","input_datepicker",4,"ngIf"],[1,"vertical_center","left-actions"],[2,"margin-right","10px",3,"placeholder","showHelperButton","searchEvent","searchAll"],["id","test","nbPopoverPlacement","left",1,"export_span","desktopReport","exportReport","mr_10",3,"nbPopover"],["aria-hidden","true","nbPopoverTrigger","noop","nbTooltip","Download report",1,"fa","fa-download"],["nbPopoverTrigger","noop",1,"resp_export","exportReport","mr_10",3,"nbPopover"],["aria-hidden","true",1,"fa","fa-download","ml_10"],["templateExport",""],["size","medium","type","submit","nbButton","","status","primary",3,"click"],[1,"timesheet_grid"],[3,"searchText","filterData","showRegion","buttonPressed",4,"ngIf"],[3,"searchText","filterData","totalRegion","buttonPressed","weekStartChanged",4,"ngIf"],[1,"backdrop"],[1,"input_datepicker"],[1,"datepicker_span","weekday_toggle",3,"click"],["aria-hidden","true",1,"fa","fa-chevron-down","arrow-down"],[3,"dateChange"],["dateTimePicker",""],["aria-label","date picker","nbInput","","placeholder","Pick Date",2,"visibility","hidden",3,"nbDatepicker"],["dateInput",""],[3,"range","rangeChange"],["formpicker",""],["nbInput","","placeholder","Pick Date Range",2,"visibility","hidden",3,"nbDatepicker"],[1,"body-popover"],[1,"export-header"],["class","row-alignment","style","margin-bottom: 10px;",4,"ngIf"],["class","row-alignment",4,"ngIf"],[2,"display","flex","justify-content","center","padding-top","10px",3,"range","rangeChange"],[1,"report_buttons"],["nbButton","","status","primary",1,"mr_10",3,"disabled","click"],[1,"ml_10","fa","fa-download"],[1,"row-alignment",2,"margin-bottom","10px"],[1,"label-ts"],[1,"width-dd",3,"Data","placeholder","display","key","controlName","form","show"],[1,"row-alignment"],[1,"width-dd",3,"label","selected","key","key2","optionId","Data","placeholder","controlName","form","show"],[3,"searchText","filterData","showRegion","buttonPressed"],[3,"searchText","filterData","totalRegion","buttonPressed","weekStartChanged"]],template:function(n,t){if(1&n&&(e._UZ(0,"app-loader",0),e.TgZ(1,"div",1),e.TgZ(2,"nb-layout-column",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"span",5),e.TgZ(6,"nb-button-group"),e.TgZ(7,"button",6),e.NdJ("click",function(){return t.setTab("daily")}),e._uU(8," Daily "),e.qZA(),e.TgZ(9,"button",7),e.NdJ("click",function(){return t.setTab("weekly")}),e._uU(10," Weekly "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",8),e.YNc(12,Qn,9,4,"span",9),e.YNc(13,Nn,10,8,"span",9),e.qZA(),e.TgZ(14,"div",10),e.TgZ(15,"app-search-input",11),e.NdJ("searchEvent",function(l){return t.onSearch(l)})("searchAll",function(l){return t.onSearchAll(l)}),e.qZA(),e.TgZ(16,"span",12),e._UZ(17,"i",13),e.qZA(),e.TgZ(18,"span",14),e._UZ(19,"i",15),e.qZA(),e.YNc(20,Rn,15,5,"ng-template",null,16,e.W1O),e.TgZ(22,"span"),e.TgZ(23,"button",17),e.NdJ("click",function(){return t.initAddEntry()}),e._uU(24,"Add Timesheet"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"div",18),e.YNc(26,Yn,1,4,"app-timesheet-daily-view",19),e.YNc(27,Fn,1,4,"app-timesheet-weekly-view",20),e.qZA(),e.qZA(),e.qZA(),e._UZ(28,"div",21)),2&n){var o=e.MAs(21);e.Q6J("loading",t.loading),e.xp6(7),e.Q6J("status","daily"===t.selectedTab?"primary":""),e.xp6(2),e.Q6J("status","weekly"===t.selectedTab?"primary":""),e.xp6(3),e.Q6J("ngIf","daily"===t.selectedTab),e.xp6(1),e.Q6J("ngIf","weekly"===t.selectedTab),e.xp6(2),e.Q6J("placeholder","Search by name or role")("showHelperButton",t.showHelperButton),e.xp6(1),e.Q6J("nbPopover",o),e.xp6(2),e.Q6J("nbPopover",o),e.xp6(8),e.Q6J("ngIf","daily"===t.selectedTab),e.xp6(1),e.Q6J("ngIf","weekly"===t.selectedTab)}},directives:[Q.R,v.dP_,v.mnu,v.DPz,w.O5,v.B4C,v.h8i,v.$kf,v.MGu,En.J,v.ydg,v.jNv,qn.J,V.x,v.Lan,te,ne],pipes:[w.uU],styles:["nb-button-group.custom-css[_ngcontent-%COMP%] {\n  padding: 0px !important;\n}\n\nnb-button-group.custom-css2[_ngcontent-%COMP%] {\n  padding: 0px !important;\n}\n\n.timesheet_grid[_ngcontent-%COMP%] {\n  position: relative;\n}\n\n.datepicker_span[_ngcontent-%COMP%] {\n  padding: 6px 16px;\n  border-radius: 10px;\n  cursor: pointer;\n  border-radius: 2px;\n  min-width: 96px;\n  border-radius: 14px;\n  color: #6e689b !important;\n  font-weight: 700;\n  font-size: 14px;\n}\n\n.export_span[_ngcontent-%COMP%] {\n  background: #ffffff;\n  padding: 7px 9px;\n  border-radius: 10px;\n  color: #7b68ee !important;\n  cursor: pointer;\n  font-weight: 500;\n  border-radius: 2px;\n  min-width: 30px;\n  border-radius: 52%;\n  width: 32x;\n  height: 32px;\n  box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;\n}\n\n.report_buttons[_ngcontent-%COMP%] {\n  text-align: center;\n  \n  margin-bottom: 14px;\n}\n\n.wrapper_header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] {\n  margin-top: -4.5px;\n}\n\n.weekday_toggle[_ngcontent-%COMP%] {\n  padding: 3px 0px !important;\n  min-width: auto !important;\n}\n\n@media (max-width: 428px) {\n  .resp_export[_ngcontent-%COMP%] {\n    background: #e9e4fd;\n    padding: 3px 1.5px;\n    border-radius: 10px;\n    color: var(--color-primary-100) !important;\n    cursor: pointer;\n    font-weight: 500;\n    border-radius: 2px;\n    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.1);\n    min-width: 35px;\n    border-radius: 10px;\n  }\n\n  .desktopReport[_ngcontent-%COMP%] {\n    display: none;\n  }\n}\n\n@media (min-width: 429px) {\n  .resp_export[_ngcontent-%COMP%] {\n    display: none;\n  }\n}\n\n@media (min-width: 1101px) {\n  .resp_region[_ngcontent-%COMP%] {\n    display: none;\n  }\n\n  .desk_region[_ngcontent-%COMP%] {\n    display: block;\n  }\n}\n\n@media (max-width: 1100px) {\n  .desk_region[_ngcontent-%COMP%] {\n    display: none;\n  }\n\n  .resp_region[_ngcontent-%COMP%] {\n    display: block;\n  }\n\n  .timesheet_grid[_ngcontent-%COMP%] {\n    margin-top: 0px;\n  }\n}\n\n@media (max-width: 930px) {\n  .resp_region[_ngcontent-%COMP%] {\n    top: 61px !important;\n  }\n}\n\n@media (max-width: 1036px) and (min-width: 930px) {\n  .wrapper_header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] {\n    width: 100% !important;\n  }\n}\n\n@media (max-width: 930px) and (min-width: 680px) {\n  .wrapper_header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] {\n    width: 100% !important;\n  }\n\n  .timesheet_grid[_ngcontent-%COMP%] {\n    margin-top: 0px;\n  }\n}\n\n@media (max-width: 680px) and (min-width: 320px) {\n  .wrapper_header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] {\n    width: 100% !important;\n  }\n\n  .timesheet_grid[_ngcontent-%COMP%] {\n    margin-top: 18px;\n  }\n}\n\n@media (max-width: 1230px) and (min-width: 1100px) {\n  .wrapper_header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] {\n    min-width: 350px !important;\n    width: 100%;\n  }\n}\n\n.toggle-btns[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: center;\n}\n\n.date-picker[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: flex-start;\n}\n\n.left-actions[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: flex-end;\n}\n\n.pagination-div[_ngcontent-%COMP%] {\n  width: 234px;\n}\n\n.arrow-down[_ngcontent-%COMP%] {\n  margin-left: 5px;\n  font-size: 14px;\n}\n\n@media (max-width: 679px) and (min-width: 320px) {\n  .left-actions[_ngcontent-%COMP%] {\n    position: fixed;\n    right: 5px;\n    top: 123px;\n    padding-left: 10px;\n    padding-bottom: 10px;\n    margin-bottom: 10px;\n    background: #f9faff;\n  }\n}\n\n  nb-datepicker-container nb-calendar {\n  position: absolute;\n  top: -20px;\n  right: -124px;\n}\n\n  nb-datepicker-container nb-calendar-range {\n  position: absolute;\n  top: -20px;\n  right: -80px;\n}\n\n.export-header[_ngcontent-%COMP%] {\n  color: white;\n  background: #7b68ee;\n  padding: 12px;\n  border-top-left-radius: 10px;\n  border-top-right-radius: 10px;\n  display: block;\n}\n\n.label-ts[_ngcontent-%COMP%] {\n  color: black;\n  margin-right: 5px;\n  font-weight: 600;\n  width: 80px;\n  margin-left: 8px;\n}\n\n.row-alignment[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n}\n\n.width-dd[_ngcontent-%COMP%] {\n  width: 69% !important;\n  margin-right: 10px;\n}\n\n@media (max-width: 800px) {\n  .body-popover[_ngcontent-%COMP%] {\n    height: 60vh;\n    overflow: auto;\n  }\n}"]}),i}()}],Bn=function(){var i=(0,b.Z)(function s(){(0,A.Z)(this,s)});return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[h.Bz.forChild(zn)],h.Bz]}),i}(),Wn=u(5032),Hn=function(){var i=(0,b.Z)(function s(){(0,A.Z)(this,s)});return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[w.ez,Wn.m,Bn]]}),i}()},3963:function(ie,E,u){u.d(E,{x:function(){return P}});var b=u(5671),A=u(3144),h=u(5e3),v=u(9808),q=u(4825);function C(g,y){if(1&g){var x=h.EpF();h.TgZ(0,"span",2),h.NdJ("click",function(){return h.CHM(x),h.oxw().toggleSort()}),h._uU(1),h._UZ(2,"i",3),h.qZA()}if(2&g){var e=h.oxw();h.Tol(e.isSelected?"sort-selected":""),h.xp6(1),h.hij(" ",e.label," "),h.xp6(1),h.Tol(e.isAscending?e.ascendingClass:e.descendingClass)}}function k(g,y){if(1&g){var x=h.EpF();h.TgZ(0,"span"),h.TgZ(1,"button",4),h.NdJ("click",function(){return h.CHM(x),h.oxw().toggleSort()}),h._UZ(2,"i",5),h._uU(3,"Sort"),h.qZA(),h.qZA()}}var P=function(){var g=function(){function y(){(0,b.Z)(this,y),this.onSort=new h.vpe,this.icons={number:{ascending:"fas fa-arrow-down-1-9",descending:"fas fa-arrow-down-9-1"},alpha:{ascending:"fas fa-arrow-down-a-z",descending:"fas fa-arrow-down-z-a"}},this.label=this.label?this.label:"",this.iconType=this.iconType?this.iconType:"alpha",this.isSelected=!!this.isSelected&&this.isSelected}return(0,A.Z)(y,[{key:"ngOnInit",value:function(){this.isAscending=!0,this.order=this.order?this.order:1,this.isAscending=this.order>0,this.ascendingClass=this.icons[this.iconType].ascending,this.descendingClass=this.icons[this.iconType].descending}},{key:"ngOnChanges",value:function(e){e.isSelected&&e.isSelected.currentValue!==e.isSelected.previousValue&&(this.isSelected=e.isSelected.currentValue)}},{key:"toggleSort",value:function(){this.isAscending=!this.isAscending,this.onSort.emit(this.isAscending?1:-1)}}]),y}();return g.\u0275fac=function(x){return new(x||g)},g.\u0275cmp=h.Xpm({type:g,selectors:[["app-sort"]],inputs:{label:"label",isSelected:"isSelected",iconType:"iconType",order:"order",isBtnStyle:"isBtnStyle"},outputs:{onSort:"onSort"},features:[h.TTD],decls:2,vars:2,consts:[["class","sort-icon",3,"class","click",4,"ngIf"],[4,"ngIf"],[1,"sort-icon",3,"click"],["nbTooltip","Sort","aria-hidden","true",2,"margin-right","4px"],["size","medium","type","button","nbButton","","status","secondary",3,"click"],[1,"fa-regular","fa-arrow-down-arrow-up",2,"margin-right","10px"]],template:function(x,e){1&x&&(h.YNc(0,C,3,5,"span",0),h.YNc(1,k,4,0,"span",1)),2&x&&(h.Q6J("ngIf",!e.isBtnStyle),h.xp6(1),h.Q6J("ngIf",e.isBtnStyle))},directives:[v.O5,q.jNv,q.DPz],styles:['.sort-icon[_ngcontent-%COMP%] {\n  position: relative;\n  cursor: pointer;\n  font-weight: 600;\n  color: #bbbbbb;\n}\n.sort-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  font-size: 15px;\n  color: #bbbbbb;\n}\n.sort-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover {\n  color: #6e689b !important;\n}\n.sort-selected[_ngcontent-%COMP%] {\n  color: #6e689b !important;\n}\n.sort-selected[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  color: #6e689b !important;\n}\n@media (max-width: 380px) {\n  .sort-selected[_ngcontent-%COMP%] {\n    display: flex;\n  }\n}\n.status-secondary[_ngcontent-%COMP%] {\n  color: #344054;\n  border: 1px solid #D0D5DD !important;\n  font-weight: 700 !important;\n  font-family: "Inter" !important;\n  border-radius: 6px !important;\n  height: 35px !important;\n  margin-right: 10px;\n}']}),g}()}}]);