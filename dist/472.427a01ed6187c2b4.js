"use strict";(self.webpackChunkAzal_FE=self.webpackChunkAzal_FE||[]).push([[472],{5472:function(B,N,u){u.r(N),u.d(N,{AutomationModule:function(){return Dn}});var P=u(3144),w=u(5671),t=u(9808),Z=u(4202),k=u(4902),D=u(7757),A=u.n(D),x=u(655),C=u(3075),I=u(7243),n=u(5e3),J=u(7756),S=function(){var e=function(){function r(o){var a=this;(0,w.Z)(this,r),this.http=o,this.addAutomation=function(l){return(0,x.mG)(a,void 0,void 0,A().mark(function i(){var m=this;return A().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",new Promise(function(b,U){m.http.post(I.J.automation.post.addAutomation,l).subscribe(function(y){b(y)},function(y){console.log(y),U(y)})}));case 1:case"end":return v.stop()}},i)}))},this.updateAutomationStatus=function(l){return(0,x.mG)(a,void 0,void 0,A().mark(function i(){var m=this;return A().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",new Promise(function(b,U){m.http.patch(I.J.automation.patch.updateAutomationStatus,l).subscribe(function(y){b(y)},function(y){console.log(y),U(y)})}));case 1:case"end":return v.stop()}},i)}))}}return(0,P.Z)(r,[{key:"getAutomationData",value:function(a){var l=this;return new Promise(function(i,m){l.http.get(I.J.automation.get.automation+"?region_id="+a).subscribe(function(v){i(v)},function(v){console.log(v),m(v)})})}}]),r}();return e.\u0275fac=function(o){return new(o||e)(n.LFG(J.s))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),f=u(6300),d=u(4825),h=u(3948),p=u(8719),c=u(8086),_=u(9894),g=u(82);function T(e,r){if(1&e&&n._UZ(0,"app-error-message",37),2&e){n.oxw();var o=n.MAs(5),a=n.oxw();n.Q6J("key","user")("form",a.AutomationForm)("isSubmitted",o.submitted)}}function q(e,r){1&e&&(n.TgZ(0,"div",51),n._UZ(1,"i",52),n.TgZ(2,"span",53),n._uU(3," No users in the store. "),n.qZA(),n.qZA())}function F(e,r){1&e&&(n.TgZ(0,"div",61),n._UZ(1,"i",62),n.TgZ(2,"span",63),n._uU(3,"This is next day."),n.qZA(),n.qZA())}function H(e,r){1&e&&(n.TgZ(0,"span",65),n._uU(1,"A minimum of 1 hour slot is required."),n.qZA())}function V(e,r){1&e&&(n.TgZ(0,"span",65),n._uU(1,"Maximum allowed slot time is 12 hours."),n.qZA())}function W(e,r){if(1&e&&(n.ynx(0),n.TgZ(1,"div",61),n._UZ(2,"i",52),n.YNc(3,H,2,0,"span",64),n.YNc(4,V,2,0,"span",64),n.qZA(),n.BQk()),2&e){var o=n.oxw(3);n.xp6(3),n.Q6J("ngIf",o.AutomationForm.controls.shift.errors.invalidSlot),n.xp6(1),n.Q6J("ngIf",o.AutomationForm.controls.shift.errors.invalidMaxSlot)}}function j(e,r){if(1&e&&(n.ynx(0),n.TgZ(1,"div",54),n._UZ(2,"app-timer-input",55),n._UZ(3,"app-error-message",56),n.qZA(),n.TgZ(4,"div",57),n._UZ(5,"i",58),n.qZA(),n.TgZ(6,"div",59),n._UZ(7,"app-timer-input",55),n._UZ(8,"app-error-message",56),n.YNc(9,F,4,0,"div",60),n.YNc(10,W,5,2,"ng-container",7),n.qZA(),n.BQk()),2&e){n.oxw();var o=n.MAs(20),a=n.oxw();n.xp6(2),n.Q6J("onlyTimePicker",!0)("form",a.AutomationForm.controls.shift)("controlName","start")("placeholder","Enter start time"),n.xp6(1),n.Q6J("key","start")("form",a.AutomationForm.controls.shift)("isSubmitted",o.submitted),n.xp6(4),n.Q6J("onlyTimePicker",!0)("form",a.AutomationForm.controls.shift)("controlName","end")("placeholder","Enter end time"),n.xp6(1),n.Q6J("key","end")("form",a.AutomationForm.controls.shift)("isSubmitted",o.submitted),n.xp6(1),n.Q6J("ngIf",a.isGraveyard),n.xp6(1),n.Q6J("ngIf",o.submitted&&a.AutomationForm.controls.shift.errors)}}function G(e,r){if(1&e){var o=n.EpF();n.ynx(0),n.TgZ(1,"nb-stepper",8,9),n.TgZ(3,"nb-step",10),n.TgZ(4,"form",11,12),n.TgZ(6,"div",13),n.TgZ(7,"span",14),n._UZ(8,"i",15),n.TgZ(9,"span",16),n._uU(10," Send confirmation message to ? "),n.qZA(),n.qZA(),n.qZA(),n.TgZ(11,"div",17),n._UZ(12,"app-dropdown",18),n.YNc(13,T,1,3,"app-error-message",19),n.YNc(14,q,4,0,"div",20),n.qZA(),n.TgZ(15,"div",21),n.TgZ(16,"button",22),n._uU(17,"Next"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(18,"nb-step",23),n.TgZ(19,"form",11,24),n.TgZ(21,"div",25),n.TgZ(22,"span",14),n._UZ(23,"i",26),n.TgZ(24,"span",16),n._uU(25," Do you want to confirm all schedules? "),n.qZA(),n.qZA(),n.qZA(),n.TgZ(26,"div",27),n.TgZ(27,"app-radio",28),n.NdJ("click",function(){return n.CHM(o),n.oxw().updateValidators()}),n.qZA(),n.qZA(),n.TgZ(28,"div",29),n.YNc(29,j,11,16,"ng-container",7),n.qZA(),n.TgZ(30,"div",21),n.TgZ(31,"button",30),n._uU(32,"Previous"),n.qZA(),n.TgZ(33,"button",22),n._uU(34,"Next"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(35,"nb-step",31),n.TgZ(36,"form",11,32),n.TgZ(38,"div",33),n.TgZ(39,"span",14),n._UZ(40,"i",34),n.TgZ(41,"span",16),n._uU(42," Send the message to the employee "),n.qZA(),n.qZA(),n.TgZ(43,"span",35),n.TgZ(44,"app-dropdown",36),n.NdJ("valueChange",function(){return n.CHM(o),n.oxw().setDropdownValidation()}),n.qZA(),n._UZ(45,"app-error-message",37),n.qZA(),n.TgZ(46,"span",38),n._uU(47," before the schedule. "),n.qZA(),n.qZA(),n.TgZ(48,"div",21),n.TgZ(49,"button",30),n._uU(50,"Previous"),n.qZA(),n.TgZ(51,"button",22),n._uU(52,"Next"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(53,"nb-step",39),n.TgZ(54,"form",11,40),n.TgZ(56,"div",33),n.TgZ(57,"span",14),n._UZ(58,"i",34),n.TgZ(59,"span",16),n._uU(60," You will be updated "),n.qZA(),n.qZA(),n.TgZ(61,"span",35),n._UZ(62,"app-dropdown",41),n._UZ(63,"app-error-message",37),n.qZA(),n.TgZ(64,"span",38),n._uU(65," before the schedule. "),n.qZA(),n.qZA(),n.TgZ(66,"div",21),n.TgZ(67,"button",30),n._uU(68,"Previous"),n.qZA(),n.TgZ(69,"button",22),n._uU(70,"Next"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(71,"nb-step",42),n.TgZ(72,"form",11,43),n.TgZ(74,"div",13),n.TgZ(75,"span",14),n._UZ(76,"i",44),n.TgZ(77,"span",16),n._uU(78," Employee(s) will receive message to confirm their schedules till "),n.TgZ(79,"span",45),n._uU(80),n.ALo(81,"date"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(82,"div",46),n.TgZ(83,"app-radio",28),n.NdJ("click",function(){return n.CHM(o),n.oxw().calculateDate()}),n.qZA(),n.qZA(),n.TgZ(84,"div",21),n.TgZ(85,"button",30),n._uU(86,"Previous"),n.qZA(),n.TgZ(87,"button",22),n._uU(88,"Next"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(89,"nb-step",47),n.TgZ(90,"div",11),n.TgZ(91,"div",25),n._UZ(92,"i",48),n.TgZ(93,"span",16),n._uU(94," You're all set. This is how the text message would look like. "),n.qZA(),n.qZA(),n.TgZ(95,"div",49),n.TgZ(96,"span"),n._uU(97," [Username] "),n.qZA(),n.TgZ(98,"span"),n._uU(99," You have a shift coming up today from [X] time to [Y] time. Please confirm that you will show up. "),n.qZA(),n.TgZ(100,"span"),n._uU(101," Send 1 for Yes, i'll come & 2 for No, i cannot come today. "),n.qZA(),n.TgZ(102,"span"),n._uU(103," Azalio App "),n.qZA(),n.qZA(),n.TgZ(104,"div",21),n.TgZ(105,"button",30),n._uU(106,"Previous"),n.qZA(),n.TgZ(107,"app-submit-button",50),n.NdJ("click",function(){return n.CHM(o),n.oxw().submit()}),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.BQk()}if(2&e){var a=n.MAs(37),l=n.MAs(55),i=n.oxw();n.xp6(1),n.Q6J("linear",!0)("orientation",null!=i.gs&&i.gs.isRespMode?"vertical":"horizontal"),n.xp6(2),n.Q6J("stepControl",i.AutomationForm.controls.user),n.xp6(9),n.Q6J("Data",i.usersList)("placeholder","Select employee")("controlName","user")("form",i.AutomationForm)("show",!0)("key","id")("display","name")("display2","role_title"),n.xp6(1),n.Q6J("ngIf",(null==i.usersList?null:i.usersList.length)>1),n.xp6(1),n.Q6J("ngIf",1==(null==i.usersList?null:i.usersList.length)),n.xp6(4),n.Q6J("stepControl",i.AutomationForm.controls.shift),n.xp6(9),n.Q6J("form",i.AutomationForm)("controlName","allSchedules")("items",i.confirmSchedulesList),n.xp6(2),n.Q6J("ngIf",!i.AutomationForm.controls.allSchedules.value),n.xp6(6),n.Q6J("stepControl",i.AutomationForm.controls.scheduleMessage),n.xp6(9),n.Q6J("Data",i.scheduleMessageList)("placeholder","Select hours")("controlName","scheduleMessage")("form",i.AutomationForm)("show",!0)("key","value")("display","display"),n.xp6(1),n.Q6J("key","scheduleMessage")("form",i.AutomationForm)("isSubmitted",a.submitted),n.xp6(8),n.Q6J("stepControl",i.AutomationForm.controls.receiveUpdate),n.xp6(9),n.Q6J("Data",i.receiveUpdateList)("placeholder","Select time")("controlName","receiveUpdate")("form",i.AutomationForm)("show",!0)("key","value")("display","display"),n.xp6(1),n.Q6J("key","receiveUpdate")("form",i.AutomationForm)("isSubmitted",l.submitted),n.xp6(8),n.Q6J("stepControl",i.AutomationForm.controls.runUntil),n.xp6(9),n.Oqu(n.xi3(81,48,i.runUntilDate,"MMM dd, YYYY")),n.xp6(3),n.Q6J("form",i.AutomationForm)("controlName","runUntil")("items",i.runUntilList),n.xp6(6),n.Q6J("hidden",!1),n.xp6(18),n.Q6J("form",i.AutomationForm)("label","Launch")}}var K=function(){var e=function(){function r(o,a,l,i,m){var s=this;(0,w.Z)(this,r),this.service=o,this.gs=a,this.http=l,this.fb=i,this.ref=m,this.scheduleMessageList=[{display:"1 hrs",value:1},{display:"2 hrs",value:2},{display:"4 hrs",value:4},{display:"12 hrs",value:12}],this.receiveUpdateList=[{display:"15 mins",value:.25,disabled:!1},{display:"30 mins",value:.5,disabled:!1},{display:"1 hrs",value:1,disabled:!1},{display:"2 hrs",value:2,disabled:!1}],this.runUntilList=[{value:2,label:"2 weeks"},{value:4,label:"4 weeks"},{value:12,label:"12 weeks"}],this.confirmSchedulesList=[{value:!0,label:"Yes",disabled:!0},{value:!1,label:"No, only schedules where start time falls between"}],this.timeValidator=function(v){var b;if(s.AutomationForm&&1==s.AutomationForm.get("allSchedules").value)return null;if(null!=v.get("start").value&&""!=v.get("end").value&&null!=v.get("start").value&&""!=v.get("start").value){var U=new Date(v.get("start").value),M=new Date(v.get("end").value);U.setSeconds(0,0),M.setSeconds(0,0),s.isGraveyard=!1,U.getTime()>M.getTime()&&(s.isGraveyard=!0,M=s.gs.getNextDate(M,1));var E,Y,y=(M.getTime()-U.getTime())/6e4;y>=0&&(0==y||y<60?E=!0:y>720&&(Y=!0));var Q={};return E?Q={invalidSlot:E}:Y&&(Q={invalidMaxSlot:Y}),0===(null===(b=Object.keys(Q))||void 0===b?void 0:b.length)&&(null==U||U.setHours(0,0,0,0),null==M||M.setHours(23,59,0,0)),Q}return null}}return(0,P.Z)(r,[{key:"ngOnInit",value:function(){this.AutomationForm=this.fb.group({user:["",C.kI.required],shift:this.fb.group({start:[""],end:[""]},{validator:[this.timeValidator]}),allSchedules:[!1,C.kI.required],scheduleMessage:["",C.kI.required],receiveUpdate:["",C.kI.required],runUntil:[4,C.kI.required]}),this.updateValidators(),this.calculateDate(),this.getUsers()}},{key:"setDropdownValidation",value:function(){var a=this,l=this.AutomationForm.get("scheduleMessage").value,i=this.AutomationForm.get("receiveUpdate").value;this.receiveUpdateList.forEach(function(m){m.disabled=!(m.value<l),m.disabled&&i==m.value&&a.AutomationForm.controls.receiveUpdate.setValue("")})}},{key:"submit",value:function(){if(!this.loading){var a=this.AutomationForm.get("user").value,l={region_id:this.regionId,user_id:-1==a?null:a,all_schedules:this.AutomationForm.get("allSchedules").value,request_confirmation_before_hours:this.AutomationForm.get("scheduleMessage").value,send_response_by_hours:this.AutomationForm.get("receiveUpdate").value,run_until:this.runUntilDate.toISOString()};l.all_schedules||Object.assign(l,{schedule_start_time:this.AutomationForm.get("shift").get("start").value.toLocaleTimeString("it-IT"),schedule_end_time:this.AutomationForm.get("shift").get("end").value.toLocaleTimeString("it-IT"),is_graveyard:this.isGraveyard}),console.log(l),this.addAutomation(l)}}},{key:"addAutomation",value:function(a){return(0,x.mG)(this,void 0,void 0,A().mark(function l(){var i;return A().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,this.loading=!0,s.next=4,this.service.addAutomation(a);case 4:this.gs.showToastSuccess(null==(i=s.sent)?void 0:i.message),this.close(!0),s.next=13;break;case 9:s.prev=9,s.t0=s.catch(0),this.gs.showToastError(s.t0.message),console.log(s.t0);case 13:return s.prev=13,this.loading=!1,s.finish(13);case 16:case"end":return s.stop()}},l,this,[[0,9,13,16]])}))}},{key:"updateValidators",value:function(){var a=this;setTimeout(function(){var i=a.AutomationForm.controls.shift;1==a.AutomationForm.controls.allSchedules.value?(i.controls.start.setValidators([]),i.controls.start.updateValueAndValidity(),i.controls.end.setValidators([]),i.controls.end.updateValueAndValidity()):(i.controls.start.setValidators([C.kI.required]),i.controls.start.updateValueAndValidity(),i.controls.end.setValidators([C.kI.required]),i.controls.end.updateValueAndValidity())},200)}},{key:"calculateDate",value:function(){var a=this;setTimeout(function(){var l=a.AutomationForm.get("runUntil").value,i=new Date;i.setHours(0,0,0,0),a.runUntilDate=a.gs.getNextDate(i,7*l)},200)}},{key:"getUsers",value:function(){var a=this;this.regionId&&(this.userLoading=!0,this.http.get(I.J.organisation.get.UsersByRegionTeamIds+"?region_id="+this.regionId).subscribe(function(i){a.usersList=[{id:-1,name:"All employees in the store",disabled:!0}].concat((0,k.Z)(i)),a.userLoading=!1},function(i){console.log(i),a.userLoading=!1}))}},{key:"close",value:function(a){this.ref.close(a)}}]),r}();return e.\u0275fac=function(o){return new(o||e)(n.Y36(S),n.Y36(f.m),n.Y36(J.s),n.Y36(C.qu),n.Y36(d.X4l))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-add-automation"]],inputs:{regionId:"regionId"},decls:12,vars:2,consts:[[1,"modal_wrapper","add-automation"],[1,"card_header"],[1,"header-container"],[1,"title",2,"position","relative","top","4px"],[1,"sub-header"],[1,"fa-solid","fa-xmark","close-modal",3,"click"],[3,"nbSpinner"],[4,"ngIf"],[1,"automate",3,"linear","orientation"],["stepper",""],["label","Select employee",3,"stepControl"],[1,"step-container"],["ngForm","ngForm"],[1,"question-wrapper","mt-20"],[1,"align-element"],[1,"fa","fa-user"],[1,"question-txt"],[1,"inputs-row","mb_30"],[3,"Data","placeholder","controlName","form","show","key","display","display2"],["class","error-input",3,"key","form","isSubmitted",4,"ngIf"],["style","margin-top: 5px;",4,"ngIf"],[1,"footer-row"],["nbButton","","nbStepperNext","","status","primary"],["label","Select shift",3,"stepControl"],["ngForm2A","ngForm"],[1,"question-wrapper"],[1,"fa","fa-calendar-days"],[1,"inputs-row","mb_15"],[1,"runUntil",3,"form","controlName","items","click"],[1,"input-wrapper","mb_30"],["nbButton","","nbStepperPrevious",""],["label","Schedule message",3,"stepControl"],["ngForm2","ngForm"],[1,"question-wrapper","mt-20","res-container"],[1,"fa-solid","fa-circle-question"],[1,"drpdown-input"],[3,"Data","placeholder","controlName","form","show","key","display","valueChange"],[1,"error-input",3,"key","form","isSubmitted"],[1,"question-txt","container"],["label","Receive update",3,"stepControl"],["ngForm2B","ngForm"],[3,"Data","placeholder","controlName","form","show","key","display"],["label","Run until",3,"stepControl"],["ngForm3","ngForm"],[1,"fa","fa-clock"],[2,"color","#7b68ee"],[1,"inputs-row","mb_30","runUntil-container"],["label","Show preview",3,"hidden"],[1,"fa-solid","fa-comment"],[1,"preview-msg","mb_30"],[3,"form","label","click"],[2,"margin-top","5px"],[1,"fas","fa-exclamation-triangle","error-icon"],[1,"red","custom-txt",2,"font-size","12px"],[1,"startdate"],[3,"onlyTimePicker","form","controlName","placeholder"],[3,"key","form","isSubmitted"],[1,"next-icon"],[1,"fa","fa-arrow-right","icon-color"],[1,"enddate"],["class","custom-errors",4,"ngIf"],[1,"custom-errors"],[1,"fas","fa-info-circle","error-icon","orange"],[1,"orange","custom-txt"],["class","red custom-txt",4,"ngIf"],[1,"red","custom-txt"]],template:function(o,a){1&o&&(n.TgZ(0,"div",0),n.TgZ(1,"nb-card"),n.TgZ(2,"nb-card-header",1),n.TgZ(3,"span",2),n.TgZ(4,"label"),n.TgZ(5,"b",3),n._uU(6,"Automate"),n.qZA(),n.qZA(),n.TgZ(7,"span",4),n._uU(8," Confirm if an employee will show up on time "),n.qZA(),n.qZA(),n.TgZ(9,"i",5),n.NdJ("click",function(){return a.close(null)}),n.qZA(),n.qZA(),n.TgZ(10,"nb-card-body",6),n.YNc(11,G,108,51,"ng-container",7),n.qZA(),n.qZA(),n.qZA()),2&o&&(n.xp6(10),n.Q6J("nbSpinner",a.userLoading||a.loading),n.xp6(1),n.Q6J("ngIf",a.AutomationForm))},directives:[d.Asz,d.ndF,d.yKW,d.Q7R,t.O5,d.TLo,d.Sv4,C._Y,C.JL,C.F,h.J,p.H,d.DPz,d.rAx,c.U,_.T,d.HFZ,g.w],pipes:[t.uU],styles:[".add-automation[_ngcontent-%COMP%] {\n  width: 580px;\n}\n\n.title[_ngcontent-%COMP%] {\n  display: contents;\n}\n\n.add-automation[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-header.card_header[_ngcontent-%COMP%] {\n  padding-top: 10px !important;\n  padding-bottom: 10px !important;\n  position: relative;\n}\n\n.add-automation[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%] {\n  min-height: 345px;\n  position: relative;\n}\n\n.sub-header[_ngcontent-%COMP%] {\n  color: #F0E5FF !important;\n  font-weight: 500 !important;\n}\n\n.question-wrapper[_ngcontent-%COMP%] {\n  margin-bottom: 10px;\n  display: flex;\n}\n\n.question-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  color: #AFB2FF;\n  margin-right: 5px;\n  font-size: 14px;\n}\n\n.question-txt[_ngcontent-%COMP%] {\n  color: #62568B;\n  font-size: 14px;\n  font-weight: 600;\n}\n\n.footer-row[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  margin-top: 10px;\n  margin-bottom: 5px;\n  position: absolute;\n  bottom: 12px;\n  right: 20px;\n}\n\n.drpdown-input[_ngcontent-%COMP%] {\n  padding-left: 9px;\n  padding-right: 9px;\n  margin-top: -3px;\n}\n\n.align-element[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: baseline;\n}\n\n.date-disclaimer[_ngcontent-%COMP%] {\n  color: #7b68ee;\n  margin-top: 10px;\n  font-size: 11px;\n  font-weight: 600;\n}\n\n.close-modal[_ngcontent-%COMP%] {\n  position: absolute;\n  right: 20px;\n  top: 13px;\n  color: #e7e7e7;\n  font-size: 13px;\n  cursor: pointer;\n}\n\n.preview-msg[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  line-height: 1.5;\n  width: 508px;\n  border: 1px solid #62568B;\n  border-radius: 5px;\n  padding-left: 10px !important;\n  padding-right: 10px !important;\n  font-size: 13px;\n  padding: 7px;\n}\n\n.input-wrapper[_ngcontent-%COMP%] {\n  display: flex;\n}\n\n.mb_15[_ngcontent-%COMP%] {\n  margin-bottom: 15px;\n}\n\n.startdate[_ngcontent-%COMP%] {\n  width: 46%;\n  padding-right: 10px;\n}\n\n.next-icon[_ngcontent-%COMP%] {\n  width: 7%;\n  padding-right: 5px;\n  padding-left: 7px;\n  margin-top: 12px;\n}\n\n.enddate[_ngcontent-%COMP%] {\n  width: 46%;\n  padding-right: 2px;\n}\n\n.mt-20[_ngcontent-%COMP%] {\n  margin-top: 20px;\n}\n\n@media (max-width: 931px) and (min-width: 500px) {\n  .add-automation[_ngcontent-%COMP%] {\n    width: 400px !important;\n  }\n}\n\n@media (max-width: 931px) {\n  .question-wrapper[_ngcontent-%COMP%] {\n    margin-top: -3px !important;\n  }\n\n  .startdate[_ngcontent-%COMP%], .enddate[_ngcontent-%COMP%] {\n    width: 100%;\n    margin-bottom: 20px;\n    padding-left: 0px;\n    padding-right: 0px;\n  }\n\n  .next-icon[_ngcontent-%COMP%] {\n    display: none;\n  }\n\n  .res-container[_ngcontent-%COMP%], .input-wrapper[_ngcontent-%COMP%] {\n    flex-direction: column;\n  }\n\n  .res-container[_ngcontent-%COMP%] {\n    align-items: flex-start;\n  }\n\n  .align-element[_ngcontent-%COMP%], .drpdown-input[_ngcontent-%COMP%] {\n    margin-bottom: 5px;\n  }\n\n  .add-automation[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%] {\n    min-height: 315px;\n    position: relative;\n    overflow: auto !important;\n  }\n\n  .runUntil-container[_ngcontent-%COMP%], .container[_ngcontent-%COMP%] {\n    margin-left: 20px;\n  }\n\n  .preview-msg[_ngcontent-%COMP%] {\n    width: auto;\n  }\n}\n\n.custom-errors[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n}\n\n.custom-txt[_ngcontent-%COMP%] {\n  font-size: 11px;\n  margin-top: 3px;\n  margin-left: 2px;\n}\n\n.error-icon[_ngcontent-%COMP%] {\n  margin-left: 5px;\n}\n\n.label-info-icon[_ngcontent-%COMP%] {\n  vertical-align: top;\n  width: 13px;\n  cursor: pointer;\n}"]}),e}(),O=u(8279);function $(e,r){1&e&&(n.TgZ(0,"span",15),n._uU(1," (Next day) "),n.qZA())}function X(e,r){if(1&e&&(n.TgZ(0,"div",9),n._uU(1),n.ALo(2,"date"),n.ALo(3,"date"),n.YNc(4,$,2,0,"span",14),n.qZA()),2&e){var o=n.oxw(2);n.xp6(1),n.AsE(" All schedules where start time falls between ",o.data.schedule_start_time?n.xi3(2,3,o.changeTimezone(o.data.schedule_start_time),"hh:mm a"):""," to ",o.data.schedule_end_time?n.xi3(3,6,o.changeTimezone(o.data.schedule_end_time),"hh:mm a"):""," "),n.xp6(3),n.Q6J("ngIf",1==o.data.is_graveyard)}}function nn(e,r){if(1&e){var o=n.EpF();n.TgZ(0,"nb-card-body",5),n.TgZ(1,"div",6),n.TgZ(2,"span",7),n._uU(3),n.qZA(),n.qZA(),n.YNc(4,X,5,9,"div",8),n.TgZ(5,"div",9),n._uU(6," Message will be sent "),n.TgZ(7,"span",10),n._uU(8),n.qZA(),n._uU(9," before the schedule. "),n.qZA(),n.TgZ(10,"div",9),n._uU(11," This will run from "),n.TgZ(12,"span",10),n._uU(13),n.ALo(14,"date"),n.qZA(),n._uU(15," to "),n.TgZ(16,"span",10),n._uU(17),n.ALo(18,"date"),n.qZA(),n.qZA(),n.TgZ(19,"div",9),n.TgZ(20,"span",11),n._uU(21),n.qZA(),n._uU(22," will be informed "),n.TgZ(23,"span",10),n._uU(24),n.qZA(),n._uU(25," before the schedule in case of no response. "),n.qZA(),n.TgZ(26,"div",12),n.TgZ(27,"button",13),n.NdJ("click",function(){return n.CHM(o),n.oxw().close(null)}),n._uU(28,"Okay"),n.qZA(),n.qZA(),n.qZA()}if(2&e){var a=n.oxw();n.xp6(3),n.Oqu(a.data.user?a.data.user.name:"All Employees of Store"),n.xp6(1),n.Q6J("ngIf",a.data.schedule_start_time),n.xp6(4),n.hij("",a.data.request_confirmation_before_minutes/60," hour(s)"),n.xp6(5),n.Oqu(n.xi3(14,8,a.data.creation_date,"MMM dd, yyyy")),n.xp6(4),n.Oqu(n.xi3(18,11,a.data.run_until,"MMM dd, yyyy")),n.xp6(4),n.AsE("",null==a.data.created_by?null:a.data.created_by.name," (",null==a.data.created_by?null:a.data.created_by.role,")"),n.xp6(3),n.hij(" ",a.data.send_response_by_minutes<60?a.data.send_response_by_minutes+" mins":a.data.send_response_by_minutes/60+" hour(s)","")}}var tn=function(){var e=function(){function r(o,a){(0,w.Z)(this,r),this.gs=o,this.ref=a,this.storeTimezone=this.storeTimezone}return(0,P.Z)(r,[{key:"ngOnInit",value:function(){}},{key:"changeTimezone",value:function(a){return this.gs.changeTimezone(new Date(a),this.storeTimezone)}},{key:"close",value:function(a){this.ref.close(a)}}]),r}();return e.\u0275fac=function(o){return new(o||e)(n.Y36(f.m),n.Y36(d.X4l))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-automation-details"]],inputs:{data:"data",storeTimezone:"storeTimezone"},decls:8,vars:1,consts:[[1,"modal_wrapper","view-automation"],[1,"card_header"],[1,"header-container"],[1,"title",2,"position","relative","top","4px"],["class","txt-size",4,"ngIf"],[1,"txt-size"],[1,"colored-txt","mb-10"],[1,"txt-bold"],["class","mb-10",4,"ngIf"],[1,"mb-10"],[1,"colored-txt","txt-bold"],[1,"colored-txt","mb-10","txt-bold"],[1,"footer-row"],["nbButton","","status","primary","type","button",1,"ml_40","okay-btn",3,"click"],["class","small-text",4,"ngIf"],[1,"small-text"]],template:function(o,a){1&o&&(n.TgZ(0,"div",0),n.TgZ(1,"nb-card"),n.TgZ(2,"nb-card-header",1),n.TgZ(3,"span",2),n.TgZ(4,"label"),n.TgZ(5,"b",3),n._uU(6,"View Details"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.YNc(7,nn,29,14,"nb-card-body",4),n.qZA(),n.qZA()),2&o&&(n.xp6(7),n.Q6J("ngIf",a.data))},directives:[d.Asz,d.ndF,t.O5,d.yKW,d.DPz],pipes:[t.uU],styles:[".view-automation[_ngcontent-%COMP%] {\n  width: 550px;\n}\n.view-automation[_ngcontent-%COMP%]   nb-card-header[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\n  margin-bottom: 0px !important;\n}\n.title[_ngcontent-%COMP%] {\n  display: contents;\n}\n.colored-txt[_ngcontent-%COMP%] {\n  color: #6e689b;\n}\n.mb-10[_ngcontent-%COMP%] {\n  margin-bottom: 10px;\n}\n.txt-size[_ngcontent-%COMP%] {\n  font-size: 13.5px;\n}\n.txt-bold[_ngcontent-%COMP%] {\n  font-weight: 600;\n}\n.footer-row[_ngcontent-%COMP%] {\n  margin-bottom: 7px;\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  margin-top: 18px;\n}"]}),e}(),L=u(5837),en=u(605),z=u(2125),on=u(1201);function an(e,r){1&e&&(n.TgZ(0,"th",14),n._uU(1,"Automation"),n.qZA())}function rn(e,r){1&e&&(n.TgZ(0,"span",25),n._uU(1,"(Next day)"),n.qZA())}function sn(e,r){if(1&e&&(n.TgZ(0,"span",20),n._uU(1),n.ALo(2,"date"),n.ALo(3,"date"),n.YNc(4,rn,2,0,"span",24),n.qZA()),2&e){var o=n.oxw().$implicit,a=n.oxw(2);n.xp6(1),n.AsE("that fall between ",o.schedule_start_time?n.xi3(2,3,a.changeTimezone(o.schedule_start_time),"hh:mm a"):""," to ",o.schedule_end_time?n.xi3(3,6,a.changeTimezone(o.schedule_end_time),"hh:mm a"):""," "),n.xp6(3),n.Q6J("ngIf",1==o.is_graveyard)}}var ln=function(r,o){return{running:r,paused:o}};function pn(e,r){if(1&e&&(n.TgZ(0,"span",26),n._uU(1),n.qZA()),2&e){var o=n.oxw().$implicit;n.Q6J("ngClass",n.WLB(2,ln,0==o.is_paused,1==o.is_paused)),n.xp6(1),n.Oqu(o.is_paused?"Paused":"Running")}}function un(e,r){1&e&&(n.TgZ(0,"span",27),n._uU(1,"Expired"),n.qZA())}function mn(e,r){if(1&e){var o=n.EpF();n.TgZ(0,"td",15),n.NdJ("click",function(){var m=n.CHM(o).$implicit;return n.oxw(2).openDetailsModal(m)}),n.TgZ(1,"span",16),n.TgZ(2,"label",17),n._uU(3,"Automation"),n.qZA(),n.TgZ(4,"span",18),n.TgZ(5,"span"),n._UZ(6,"i",19),n._uU(7," Send a message to "),n.TgZ(8,"span",20),n._uU(9),n.qZA(),n._uU(10," before all schedules "),n.YNc(11,sn,5,9,"span",21),n.qZA(),n.YNc(12,pn,2,5,"span",22),n.YNc(13,un,2,0,"span",23),n.qZA(),n.qZA(),n.qZA()}if(2&e){var a=r.$implicit;n.xp6(9),n.hij(" ",a.user?a.user.name:"All employees",""),n.xp6(2),n.Q6J("ngIf",1!==a.all_schedules),n.xp6(1),n.Q6J("ngIf",!a.is_expired),n.xp6(1),n.Q6J("ngIf",a.is_expired)}}function dn(e,r){1&e&&(n.TgZ(0,"th",28),n._uU(1,"Action"),n.qZA())}function cn(e,r){1&e&&n._UZ(0,"i",35)}function gn(e,r){1&e&&n._UZ(0,"i",36)}function _n(e,r){if(1&e){var o=n.EpF();n.TgZ(0,"span",31),n.TgZ(1,"app-confirm-popup",32),n.NdJ("proceedDelete",function(){n.CHM(o);var i=n.oxw().$implicit;return n.oxw(2).proceed(i,!1)}),n.YNc(2,cn,1,0,"i",33),n.qZA(),n.TgZ(3,"app-confirm-popup",32),n.NdJ("proceedDelete",function(){n.CHM(o);var i=n.oxw().$implicit;return n.oxw(2).proceed(i,!0)}),n.YNc(4,gn,1,0,"i",34),n.qZA(),n.qZA()}if(2&e){var a=n.oxw().$implicit;n.xp6(1),n.Q6J("type","Start")("title","Automation")("textToDisplay","Are you sure you want to start this automation?")("status","primary"),n.xp6(1),n.Q6J("ngIf",a.is_paused),n.xp6(1),n.Q6J("type","Pause")("title","Automation")("textToDisplay","Are you sure you want to pause this automation?")("status","danger"),n.xp6(1),n.Q6J("ngIf",!a.is_paused)}}function fn(e,r){if(1&e&&(n.TgZ(0,"td",29),n.TgZ(1,"span",16),n.TgZ(2,"label",17),n._uU(3,"Action"),n.qZA(),n.YNc(4,_n,5,10,"span",30),n.qZA(),n.qZA()),2&e){var o=r.$implicit;n.xp6(4),n.Q6J("ngIf",!o.is_expired)}}function hn(e,r){1&e&&n._UZ(0,"tr",37)}var vn=function(r){return{"expired-row":r}};function bn(e,r){1&e&&n._UZ(0,"tr",38),2&e&&n.Q6J("ngClass",n.VKq(1,vn,1==r.$implicit.is_expired))}function Tn(e,r){if(1&e&&(n.TgZ(0,"div",4),n.TgZ(1,"table",5),n.ynx(2,6),n.YNc(3,an,2,0,"th",7),n.YNc(4,mn,14,4,"td",8),n.BQk(),n.ynx(5,9),n.YNc(6,dn,2,0,"th",10),n.YNc(7,fn,5,1,"td",11),n.BQk(),n.YNc(8,hn,1,0,"tr",12),n.YNc(9,bn,1,3,"tr",13),n.qZA(),n.qZA()),2&e){var o=n.oxw();n.xp6(1),n.Q6J("dataSource",o.dataSource.data),n.xp6(7),n.Q6J("matHeaderRowDef",o.displayedColumns),n.xp6(1),n.Q6J("matRowDefColumns",o.displayedColumns)}}var R=function(){var e=function(){function r(o,a,l,i,m){(0,w.Z)(this,r),this.router=o,this.dataService=a,this.service=l,this.gs=i,this.dialogService=m,this.displayedColumns=["automation","action"],this.dataSource=new O.by([])}return(0,P.Z)(r,[{key:"ngOnInit",value:function(){var a=this;this.dataService.getConfigurations(!1).then(function(l){var i,m;(null===(m=null===(i=l.role.modules)||void 0===i?void 0:i.AutomationManagement)||void 0===m?void 0:m.enabled)||a.router.navigate(["401"])}).finally(function(){a.regionId=a.regionId,a.getData()})}},{key:"ngOnChanges",value:function(a){a.regionId&&a.regionId.currentValue!==a.regionId.previousValue&&(this.regionId=a.regionId.currentValue,this.getData())}},{key:"changeTimezone",value:function(a){return this.gs.changeTimezone(new Date(a),this.storeTimezone)}},{key:"getData",value:function(){var a;return(0,x.mG)(this,void 0,void 0,A().mark(function l(){var i;return A().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(this.regionId&&0!=this.regionId){s.next=2;break}return s.abrupt("return");case 2:return s.prev=2,this.loading=!0,s.next=6,this.service.getAutomationData(this.regionId);case 6:this.dataSource.data=null==(i=s.sent)?void 0:i.automation_data,this.storeTimezone=null==i?void 0:i.store_timezone,this.emptyResults=0===(null===(a=this.dataSource.data)||void 0===a?void 0:a.length),s.next=16;break;case 12:s.prev=12,s.t0=s.catch(2),this.gs.showToastError(s.t0.message),console.log(s.t0);case 16:return s.prev=16,this.loading=!1,s.finish(16);case 19:case"end":return s.stop()}},l,this,[[2,12,16,19]])}))}},{key:"proceed",value:function(a,l){return(0,x.mG)(this,void 0,void 0,A().mark(function i(){var m,s;return A().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return m={is_paused:!!l,id:a.id},b.prev=1,this.loading=!0,b.next=5,this.service.updateAutomationStatus(m);case 5:this.gs.showToastSuccess(null==(s=b.sent)?void 0:s.message),this.getData(),b.next=14;break;case 10:b.prev=10,b.t0=b.catch(1),this.gs.showToastError(b.t0.message),console.log(b.t0);case 14:return b.prev=14,this.loading=!1,b.finish(14);case 17:case"end":return b.stop()}},i,this,[[1,10,14,17]])}))}},{key:"openDetailsModal",value:function(a){this.dialogService.open(tn,{hasBackdrop:!0,closeOnBackdropClick:!1,context:{data:a,storeTimezone:this.storeTimezone}}).onClose.subscribe(function(l){})}}]),r}();return e.\u0275fac=function(o){return new(o||e)(n.Y36(Z.F0),n.Y36(L.s),n.Y36(S),n.Y36(f.m),n.Y36(d.Gln))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-auto-table"]],inputs:{regionId:"regionId"},features:[n.TTD],decls:4,vars:9,consts:[[3,"loading"],["class","user-points-table",4,"ngIf"],[1,"automation-animation",3,"display","isScheduler","animation","animation2"],[1,"automation-animation",3,"display","animation","textMessage"],[1,"user-points-table"],["mat-table","",1,"auto-table",3,"dataSource"],["matColumnDef","automation"],["mat-header-cell","","style","width: 90%; display:none;",4,"matHeaderCellDef"],["mat-cell","","style","width: 90%;",3,"click",4,"matCellDef"],["matColumnDef","action"],["mat-header-cell","","style","width: 5%;text-align: center; display:none;",4,"matHeaderCellDef"],["mat-cell","","class","status_badge","style","width: 5%; text-align: center",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","showhim",3,"ngClass",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",2,"width","90%","display","none"],["mat-cell","",2,"width","90%",3,"click"],[1,"resp-container"],[1,"show_in_resp"],[1,"flex","row-details"],[1,"fa","fa-user-clock","auto-type"],[1,"txt-color"],["class","txt-color",4,"ngIf"],["class","tags ",3,"ngClass",4,"ngIf"],["class","tags expired",4,"ngIf"],["class","small-text",4,"ngIf"],[1,"small-text"],[1,"tags",3,"ngClass"],[1,"tags","expired"],["mat-header-cell","",2,"width","5%","text-align","center","display","none"],["mat-cell","",1,"status_badge",2,"width","5%","text-align","center"],["class","actions",4,"ngIf"],[1,"actions"],[3,"type","title","textToDisplay","status","proceedDelete"],["class","fa-solid fa-circle-play start","nbTooltipPlacement","right","nbTooltip","Start automation",4,"ngIf"],["class","fa-solid fa-circle-pause pause","nbTooltipPlacement","right","nbTooltip","Pause automation",4,"ngIf"],["nbTooltipPlacement","right","nbTooltip","Start automation",1,"fa-solid","fa-circle-play","start"],["nbTooltipPlacement","right","nbTooltip","Pause automation",1,"fa-solid","fa-circle-pause","pause"],["mat-header-row",""],["mat-row","",1,"showhim",3,"ngClass"]],template:function(o,a){1&o&&(n._UZ(0,"app-loader",0),n.YNc(1,Tn,10,3,"div",1),n._UZ(2,"app-no-records",2),n._UZ(3,"app-no-records",3)),2&o&&(n.Q6J("loading",a.loading),n.xp6(1),n.Q6J("ngIf",a.dataSource),n.xp6(1),n.Q6J("display",0==a.regionId)("isScheduler",!1)("animation","selectStoreAutomation")("animation2","arrowTop"),n.xp6(1),n.Q6J("display",a.emptyResults)("animation","automation")("textMessage","You have not automated any task yet."))},directives:[en.R,t.O5,O.BZ,O.w1,O.fO,O.ge,O.Dz,O.ev,t.mk,z.D,d.jNv,O.as,O.XQ,O.nj,O.Gk,on.k],pipes:[t.uU],styles:[".auto-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%] {\n  display: none;\n}\n\n.txt-color[_ngcontent-%COMP%] {\n  color: #6e689b;\n  font-weight: 600;\n}\n\n.auto-table[_ngcontent-%COMP%] {\n  margin-top: 10px;\n}\n\n.actions[_ngcontent-%COMP%] {\n  font-size: 32px;\n  color: #ddd5d5;\n  cursor: pointer;\n}\n\n.start-selected[_ngcontent-%COMP%] {\n  color: #71DBDB !important;\n}\n\n.pause-selected[_ngcontent-%COMP%] {\n  color: #FFBE7D !important;\n}\n\n.start[_ngcontent-%COMP%]:hover {\n  color: #71DBDB !important;\n}\n\n.pause[_ngcontent-%COMP%]:hover {\n  color: #FFBE7D !important;\n}\n\n.auto-type[_ngcontent-%COMP%] {\n  color: #71DBDB;\n  margin-right: 5px;\n}\n\n.tags[_ngcontent-%COMP%] {\n  border-radius: 20px;\n  padding: 2px;\n  padding-left: 15px;\n  padding-right: 15px;\n  display: flex;\n  align-items: baseline;\n  color: #000000;\n  font-size: 12px;\n  margin-left: 12px;\n}\n\n.expired[_ngcontent-%COMP%] {\n  background-color: #C9BFFF;\n}\n\n.running[_ngcontent-%COMP%] {\n  background-color: #9EF2F2;\n}\n\n.paused[_ngcontent-%COMP%] {\n  background-color: #FFC184;\n}\n\n.row-details[_ngcontent-%COMP%] {\n  align-items: center;\n}\n\n.resp-container[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n}\n\n@media (max-width: 499px) {\n  .row-details[_ngcontent-%COMP%] {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n\n  .tags[_ngcontent-%COMP%] {\n    margin-top: 10px;\n    margin-left: 0px;\n  }\n}\n\n.expired-row[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%] {\n  background-color: #f5f3ff !important;\n}"]}),e}();function Zn(e,r){if(1&e){var o=n.EpF();n.TgZ(0,"button",25),n.NdJ("click",function(){return n.CHM(o),n.oxw(3).openAddModal()}),n._UZ(1,"i",21),n._uU(2,"Launch"),n.qZA()}}function An(e,r){if(1&e&&(n.TgZ(0,"span"),n.YNc(1,Zn,3,0,"button",24),n.qZA()),2&e){var o=n.oxw(2);n.xp6(1),n.Q6J("ngIf",o.isSchedulerEnabled)}}function Cn(e,r){1&e&&(n.TgZ(0,"button",26),n._UZ(1,"i",21),n._uU(2,"Launch "),n.qZA())}function xn(e,r){if(1&e&&(n.TgZ(0,"div",4),n.TgZ(1,"div",5),n._uU(2," Automation available out of the box "),n.qZA(),n.TgZ(3,"div",6),n.TgZ(4,"div",7),n.TgZ(5,"span",8),n.TgZ(6,"span",9),n._UZ(7,"i",10),n.TgZ(8,"span",11),n._uU(9," Confirm if an employee will show up for a shift. "),n.qZA(),n.qZA(),n.YNc(10,An,2,1,"span",12),n.TgZ(11,"app-confirm-popup",13),n.YNc(12,Cn,3,0,"button",14),n.qZA(),n.qZA(),n.TgZ(13,"span",15),n._UZ(14,"img",16),n.qZA(),n.qZA(),n.TgZ(15,"div",7),n.TgZ(16,"span",17),n.TgZ(17,"span",18),n._uU(18," +10 more "),n.qZA(),n.TgZ(19,"app-confirm-popup",13),n.TgZ(20,"span",19),n._uU(21,"available in the "),n.TgZ(22,"button",20),n._UZ(23,"i",21),n._uU(24,"Pro Plan"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(25,"span",22),n._UZ(26,"img",23),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e){var o=n.oxw();n.xp6(10),n.Q6J("ngIf",!o.loading),n.xp6(1),n.Q6J("type","")("displayOnly",!0)("title","Pre-requisite missing.")("textToDisplay",o.setText())("status","primary"),n.xp6(1),n.Q6J("ngIf",!o.loading&&!o.isSchedulerEnabled),n.xp6(7),n.Q6J("type","")("displayOnly",!0)("title","Coming soon!")("textToDisplay",o.contactText)("status","primary")}}function yn(e,r){1&e&&(n.TgZ(0,"div",30),n._uU(1," Your automated tasks "),n.qZA())}function Mn(e,r){if(1&e&&(n.TgZ(0,"div",27),n.YNc(1,yn,2,0,"div",28),n._UZ(2,"app-auto-table",29),n.qZA()),2&e){var o=n.oxw();n.xp6(1),n.Q6J("ngIf",o.isStore),n.xp6(1),n.Q6J("regionId",o.singleRegion||o.sharedRegion)}}var wn=[{path:"",component:function(){var e=function(){function r(o,a,l,i){var m=this;(0,w.Z)(this,r),this.router=o,this.dataService=a,this.gs=l,this.dialogService=i,this.contactText="Please contact us on <a href='mailto:customersupport@azal.io'>customersupport@azal.io</a> to get added in the queue for this feature.",this.noSchedulerText="Looks like you don't have <b>Scheduler Module</b> enabled. Please enable <a href='settings/required-features'>here</a> to get access to this feature.",this.noSchedulerRoleText="Looks like you don't have access to <b>Scheduler Module</b>. Please enable <a href='settings/roles-permissions'>here</a> for your role to get access to this feature.",this.subscriptioSingle=this.dataService.SingleRegionId.subscribe(function(s){null!==s&&s>0&&(m.isStore=!0,m.singleRegion=s)}),this.singleRegion?this.isStore=!0:this.subscription=this.dataService.SharingRegionData.subscribe(function(s){m.sharedRegion=s,0!=m.sharedRegion&&(m.isStore=!0)})}return(0,P.Z)(r,[{key:"setText",value:function(){if(this.isSettingsEnabled){if(!this.schedulerEnabled.company)return this.noSchedulerText;if(!this.schedulerEnabled.role)return this.noSchedulerRoleText}return"Looks like you don't have <b>Scheduler Module</b> enabled. Please contact your administrator to get access to this feature."}},{key:"ngOnInit",value:function(){var a=this;this.dataService.getConfigurations(!1).then(function(l){var i,m;(null===(m=null===(i=l.role.modules)||void 0===i?void 0:i.AutomationManagement)||void 0===m?void 0:m.enabled)||a.router.navigate(["401"]),a.isSchedulerEnabled=!(1!==l.company.is_scheduler||!l.role.modules.Schedules.enabled),a.schedulerEnabled={company:1===l.company.is_scheduler,role:!!l.role.modules.Schedules.enabled},a.isSettingsEnabled=!(1!==l.company.is_settings||!l.role.modules.Settings.enabled)}).finally(function(){}),this.gs.hideSplashScreen()}},{key:"openAddModal",value:function(){var a=this;this.dialogService.open(K,{hasBackdrop:!0,closeOnBackdropClick:!1,context:{regionId:this.sharedRegion||this.singleRegion}}).onClose.subscribe(function(i){i&&a.autoTableInst.getData()})}}]),r}();return e.\u0275fac=function(o){return new(o||e)(n.Y36(Z.F0),n.Y36(L.s),n.Y36(f.m),n.Y36(d.Gln))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-automation-page"]],viewQuery:function(o,a){var l;1&o&&n.Gf(R,5),2&o&&n.iGM(l=n.CRH())&&(a.autoTableInst=l.first)},decls:4,vars:2,consts:[[1,"flex"],[1,"colored-column-info","timesheets_wrapper","automation"],["class","page-wrapper",4,"ngIf"],["class","tasks-container",4,"ngIf"],[1,"page-wrapper"],[1,"wrapper_header","heading"],[1,"automation-cards"],[1,"automation-details"],[1,"automation-desc"],[1,"first-row"],[1,"fa","fa-user-clock","auto-type"],[1,"auto-name"],[4,"ngIf"],[3,"type","displayOnly","title","textToDisplay","status"],["class","ml_40 auto-btn","nbButton","","status","primary","type","button",4,"ngIf"],[1,"automation-images"],["src","assets/shift-icon.png"],[1,"pro-automation"],[1,"pro-title"],[1,"second-row"],["nbButton","","status","primary","type","button",1,"ml_40","proplan-btn"],[1,"fa-solid","fa-bolt-lightning","bolt"],[1,"proplan-image"],["src","assets/pro-automation.png"],["class","ml_40 auto-btn","nbButton","","status","primary","type","button",3,"click",4,"ngIf"],["nbButton","","status","primary","type","button",1,"ml_40","auto-btn",3,"click"],["nbButton","","status","primary","type","button",1,"ml_40","auto-btn"],[1,"tasks-container"],["class","heading",4,"ngIf"],[3,"regionId"],[1,"heading"]],template:function(o,a){1&o&&(n.TgZ(0,"div",0),n.TgZ(1,"nb-layout-column",1),n.YNc(2,xn,27,12,"div",2),n.YNc(3,Mn,3,2,"div",3),n.qZA(),n.qZA()),2&o&&(n.xp6(2),n.Q6J("ngIf",a.isStore&&(a.sharedRegion||a.singleRegion)),n.xp6(1),n.Q6J("ngIf",a.isSchedulerEnabled))},directives:[d.dP_,t.O5,d.DPz,z.D,R],styles:[".timesheets_wrapper[_ngcontent-%COMP%]   .wrapper_header[_ngcontent-%COMP%] {\n  padding: 36px 0px;\n  padding-bottom: 13px;\n  background: #f9faff;\n}\n\n.heading[_ngcontent-%COMP%] {\n  font-size: 16px;\n  color: #6e689b;\n  font-weight: 600;\n}\n\n.automation-cards[_ngcontent-%COMP%] {\n  display: flex;\n}\n\n.automation-details[_ngcontent-%COMP%] {\n  width: 349px;\n  display: flex;\n  align-items: center;\n  background: #ffffff;\n  padding-left: 12px;\n  padding-right: 12px;\n  border-bottom-right-radius: 5px;\n  border-top-right-radius: 5px;\n  font-size: 13px;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  margin-right: 10px;\n  border-radius: 3px;\n  box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;\n  border-left: 1.2px solid #6e689b;\n}\n\n.automation-images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n  width: 70px;\n  padding-left: 5px;\n}\n\n.automation-desc[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  justify-content: center;\n  margin-top: 12px;\n  margin-bottom: 12px;\n}\n\n.automation-desc[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  margin-right: 5px;\n}\n\n.automation-desc[_ngcontent-%COMP%]   .auto-name[_ngcontent-%COMP%] {\n  color: #353436;\n  font-size: 14px;\n}\n\n.automation-desc[_ngcontent-%COMP%]   .first-row[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: baseline;\n}\n\n.pro-automation[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  margin-top: 12px;\n  margin-bottom: 12px;\n  align-items: baseline;\n  width: 75%;\n}\n\n.pro-automation[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  margin-right: 5px;\n}\n\n.pro-automation[_ngcontent-%COMP%]   .pro-title[_ngcontent-%COMP%] {\n  color: #FC962F;\n  font-size: 27px;\n  font-weight: 600;\n  margin-bottom: 10px;\n}\n\n.pro-automation[_ngcontent-%COMP%]   .second-row[_ngcontent-%COMP%] {\n  padding-left: 20px;\n  font-size: 14px;\n}\n\n.pro-automation[_ngcontent-%COMP%]   .proplan-btn[_ngcontent-%COMP%] {\n  margin-left: 15px;\n  background: #FC962F;\n}\n\n.proplan-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n  width: 79px;\n  padding-left: 5px;\n}\n\n.ml_40[_ngcontent-%COMP%] {\n  margin-left: 40px;\n}\n\n.auto-btn[_ngcontent-%COMP%] {\n  background: #71DBDB !important;\n  box-shadow: rgba(0, 0, 0, 0.11) 0px 3px 8px;\n}\n\n.tasks-container[_ngcontent-%COMP%] {\n  padding: 21px 0px;\n  padding-bottom: 13px;\n  background: #f9faff;\n}\n\n.bolt[_ngcontent-%COMP%] {\n  color: white !important;\n}\n\n.auto-type[_ngcontent-%COMP%] {\n  color: #71DBDB;\n}\n\n@media (max-width: 710px) and (min-width: 500px) {\n  .proplan-btn[_ngcontent-%COMP%], .auto-btn[_ngcontent-%COMP%] {\n    margin-top: 20px;\n  }\n\n  .timesheets_wrapper[_ngcontent-%COMP%]   .wrapper_header[_ngcontent-%COMP%] {\n    position: initial !important;\n  }\n}\n\n@media (max-width: 499px) {\n  .automation-cards[_ngcontent-%COMP%] {\n    flex-direction: column;\n  }\n\n  .automation-details[_ngcontent-%COMP%] {\n    margin-bottom: 20px;\n    width: auto;\n  }\n\n  .proplan-btn[_ngcontent-%COMP%], .auto-btn[_ngcontent-%COMP%] {\n    margin-top: 20px;\n  }\n\n  .timesheets_wrapper[_ngcontent-%COMP%]   .wrapper_header[_ngcontent-%COMP%] {\n    position: initial !important;\n  }\n}"]}),e}()}],On=function(){var e=(0,P.Z)(function r(){(0,w.Z)(this,r)});return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[Z.Bz.forChild(wn)],Z.Bz]}),e}(),kn=u(5032),Dn=function(){var e=(0,P.Z)(function r(){(0,w.Z)(this,r)});return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[kn.m,t.ez,On]]}),e}()},2125:function(B,N,u){u.d(N,{D:function(){return h}});var P=u(5671),w=u(3144),t=u(5e3),Z=u(4825),k=u(9808),D=u(3075),A=u(9489),x=u(42);function C(p,c){1&p&&t._UZ(0,"br")}function I(p,c){if(1&p){var _=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"nb-checkbox",13),t.NdJ("ngModelChange",function(q){return t.CHM(_),t.oxw(2).isChecked=q})("checkedChange",function(q){return t.CHM(_),t.oxw(2).isChecked=q}),t._uU(2),t.qZA(),t.qZA()}if(2&p){var g=t.oxw(2);t.xp6(1),t.Q6J("ngModel",g.isChecked),t.xp6(1),t.Oqu(g.checkboxLabel)}}function n(p,c){1&p&&t._UZ(0,"br")}function J(p,c){if(1&p){var _=t.EpF();t.TgZ(0,"div",14),t.TgZ(1,"textarea",15),t.NdJ("ngModelChange",function(q){return t.CHM(_),t.oxw(2).reason=q}),t.qZA(),t.qZA()}if(2&p){var g=t.oxw(2);t.xp6(1),t.Q6J("ngModel",g.reason)}}function S(p,c){if(1&p){var _=t.EpF();t.TgZ(0,"app-button",16),t.NdJ("onClick",function(){return t.CHM(_),t.oxw(2).close()}),t._uU(1,"Cancel"),t.qZA()}}function f(p,c){if(1&p){var _=t.EpF();t.TgZ(0,"div",2),t.TgZ(1,"nb-card",3),t.TgZ(2,"nb-card-header"),t.TgZ(3,"label",4),t._uU(4),t.qZA(),t._UZ(5,"span",5),t.qZA(),t.TgZ(6,"nb-card-body",6),t._UZ(7,"span",7),t.YNc(8,C,1,0,"br",8),t.YNc(9,I,3,2,"span",8),t.YNc(10,n,1,0,"br",8),t.YNc(11,J,2,1,"div",9),t.TgZ(12,"div",10),t.YNc(13,S,2,0,"app-button",11),t.TgZ(14,"button",12),t.NdJ("click",function(){return t.CHM(_),t.oxw().proceed()}),t._uU(15),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&p){var g=t.oxw();t.Tol("modal_wrapper resp-confirm "+g.className),t.xp6(4),t.AsE("",g.type," ",g.title,""),t.xp6(3),t.Q6J("innerHtml",g.textToDisplay,t.oJD),t.xp6(1),t.Q6J("ngIf",g.checkboxLabel),t.xp6(1),t.Q6J("ngIf",g.checkboxLabel),t.xp6(1),t.Q6J("ngIf",g.checkboxLabel),t.xp6(1),t.Q6J("ngIf",g.isComment),t.xp6(2),t.Q6J("ngIf",!g.displayOnly),t.xp6(1),t.Q6J("status",g.status),t.xp6(1),t.hij(" ",g.displayOnly?"Okay":g.type," ")}}var d=["*"],h=function(){var p=function(){function c(){(0,P.Z)(this,c),this.proceedDelete=new t.vpe,this.proceedWithComment=new t.vpe,this.proceedSave=new t.vpe,this.proceedCancel=new t.vpe,this.reason="",this.isChecked=!1,this.checkboxLabel=this.checkboxLabel,this.textToDisplay=this.textToDisplay?this.textToDisplay:"Are you sure you want to proceed?",this.type=this.type?this.type:"Delete",this.isComment=!!this.isComment&&this.isComment,this.status=this.status?this.status:"danger",this.displayOnly=!!this.displayOnly&&this.displayOnly}return(0,w.Z)(c,[{key:"ngOnInit",value:function(){this.className=this.className?this.className:""}},{key:"proceed",value:function(){this.proceedSave.emit(),this.isComment&&""!=this.reason?this.proceedWithComment.emit({isChecked:this.isChecked,reason:this.reason}):this.proceedDelete.emit(this.isChecked),this.close()}},{key:"open",value:function(){this.popover.show()}},{key:"close",value:function(){this.popover.hide(),this.proceedCancel.emit()}}]),c}();return p.\u0275fac=function(_){return new(_||p)},p.\u0275cmp=t.Xpm({type:p,selectors:[["app-confirm-popup"]],viewQuery:function(_,g){var T;1&_&&t.Gf(Z.ydg,5),2&_&&t.iGM(T=t.CRH())&&(g.popover=T.first)},inputs:{textToDisplay:"textToDisplay",className:"className",title:"title",type:"type",checkboxLabel:"checkboxLabel",isComment:"isComment",status:"status",displayOnly:"displayOnly"},outputs:{proceedDelete:"proceedDelete",proceedWithComment:"proceedWithComment",proceedSave:"proceedSave",proceedCancel:"proceedCancel"},ngContentSelectors:d,decls:4,vars:1,consts:[["nbPopoverPlacement","bottom",1,"resp-leave","clickable-area",3,"nbPopover"],["templateRef",""],[2,"width","350px"],[1,"popup-card"],[2,"color","white","font-weight","500"],[1,"gray_text","subheading"],[2,"background-color","white"],[2,"font-weight","500",3,"innerHtml"],[4,"ngIf"],["class","manager-comment",4,"ngIf"],[1,"confirm_popup_footer",2,"display","flex","justify-content","flex-end","align-items","center"],[3,"onClick",4,"ngIf"],["nbButton","","type","submit",2,"height","30px","width","70px",3,"status","click"],[1,"checkbox-shifts",3,"ngModel","ngModelChange","checkedChange"],[1,"manager-comment"],["maxlength","500","aria-label","description input","nbInput","","fullWidth","","name","message","placeholder","Add comment (optional)",3,"ngModel","ngModelChange"],[3,"onClick"]],template:function(_,g){if(1&_&&(t.F$t(),t.TgZ(0,"span",0),t.Hsn(1),t.qZA(),t.YNc(2,f,16,12,"ng-template",null,1,t.W1O)),2&_){var T=t.MAs(3);t.Q6J("nbPopover",T)}},directives:[Z.ydg,Z.Asz,Z.ndF,Z.yKW,k.O5,Z.NTf,D.JJ,D.On,A.x0,A.bf,Z.h8i,D.Fj,D.nD,x.r,Z.DPz],styles:['.confirm_popup[_ngcontent-%COMP%] {\n  padding: 15px;\n  text-align: center;\n  margin-top: 2px;\n  width: 394px;\n  font-family: "Nunito";\n  color: #000;\n}\n\n.confirm_popup_footer[_ngcontent-%COMP%] {\n  right: 22px;\n  bottom: 10px;\n  z-index: 1030;\n  -webkit-transform: translate3d(0, 0, 0);\n  -webkit-backface-visibility: hidden;\n  -webkit-transform: translateZ(0);\n}\n\n@media (max-width: 550px) {\n  .confirm_popup[_ngcontent-%COMP%] {\n    width: 254px !important;\n  }\n}\n\n  .askq-popup .popup-card nb-card-header {\n  background: #5390FF !important;\n}\n\n  .popup-card {\n  box-shadow: none !important;\n  margin-left: -1px;\n  margin-top: -1px;\n  margin-right: -1px;\n}\n\n  .popup-card nb-card-header {\n  text-align: center !important;\n  background: #7f84ea !important;\n  border-top-left-radius: 10px !important;\n  border-top-right-radius: 10px !important;\n}\n\n  .modal_wrapper .popup-card nb-card-body {\n  overflow-y: hidden !important;\n}\n\n.manager-comment[_ngcontent-%COMP%] {\n  margin-top: 10px;\n  margin-bottom: 5px;\n}\n\n.clickable-area[_ngcontent-%COMP%] {\n  border-radius: 100px;\n  display: block;\n}']}),p}()},9894:function(B,N,u){u.d(N,{T:function(){return S}});var P=u(5671),w=u(3144),t=u(5e3),Z=u(6300),k=u(3075),D=u(9489),A=u(9808),x=u(4825);function C(f,d){if(1&f&&(t.ynx(0),t._UZ(1,"input",2),t._UZ(2,"nb-date-timepicker",3,4),t.BQk()),2&f){var h=t.MAs(3),p=t.oxw();t.xp6(1),t.Q6J("nbDatepicker",h)("formControlName",p.controlName)("placeholder",p.placeholder),t.xp6(1),t.Q6J("twelveHoursFormat",!0)}}function I(f,d){if(1&f){var h=t.EpF();t.ynx(0),t.TgZ(1,"input",5),t.NdJ("click",function(){return t.CHM(h),t.oxw().setClass()}),t.qZA(),t._UZ(2,"nb-date-timepicker",6,4),t.BQk()}if(2&f){var p=t.MAs(3),c=t.oxw();t.xp6(1),t.Q6J("nbDatepicker",p)("formControlName",c.controlName)("placeholder",c.placeholder),t.xp6(1),t.Q6J("twelveHoursFormat",!0)}}function n(f,d){if(1&f){var h=t.EpF();t.ynx(0),t.TgZ(1,"input",7),t.NdJ("click",function(){return t.CHM(h),t.oxw().hideFooter()}),t.qZA(),t.TgZ(2,"nb-timepicker",8,9),t.NdJ("onSelectTime",function(g){return t.CHM(h),t.oxw().onSelectTime(g)}),t.qZA(),t.BQk()}if(2&f){var p=t.MAs(3),c=t.oxw();t.xp6(1),t.Q6J("nbTimepicker",p)("formControlName",c.controlName)("placeholder",c.placeholder),t.xp6(1),t.Q6J("twelveHoursFormat",!0)}}function J(f,d){if(1&f){var h=t.EpF();t.ynx(0),t.TgZ(1,"input",10),t.NdJ("input",function(g){return t.CHM(h),t.oxw().onValueChange(g)}),t.qZA(),t._UZ(2,"nb-datepicker",11,12),t.BQk()}if(2&f){var p=t.MAs(3),c=t.oxw();t.xp6(1),t.Q6J("nbDatepicker",p)("formControlName",c.controlName)("placeholder",c.placeholder),t.xp6(1),t.Q6J("min",c.minDate)("filter",c.filter)}}var S=function(){var f=function(){function d(h){(0,P.Z)(this,d),this.gs=h,this.appendedTo="body",this.dateType="date",this.placeholder=this.placeholder?this.placeholder:"Select date and time",this.onlyTime=!!this.onlyTime,this.onlyTimePicker=!!this.onlyTimePicker,this.onlyDate=!!this.onlyDate,this.filter=!this.filter||this.filter}return(0,w.Z)(d,[{key:"ngOnInit",value:function(){var p=this.minDate;this.minDate=this.minDate?this.minDate:new Date(1900,0,1),this.maxDate=this.maxDate?this.maxDate:new Date,this.yearRange=this.minDate.getFullYear()+":"+this.maxDate.getFullYear(),this.onlyDate&&(this.minDate=p||this.gs.getPrevDate(new Date,1))}},{key:"setClass",value:function(){setTimeout(function(){var p=document.getElementsByTagName("nb-calendar-with-time");console.log(p),p&&p[0]&&(p[0].className="shift-hrs-picker")},150)}},{key:"hideFooter",value:function(){setTimeout(function(){var p=document.getElementsByTagName("nb-card-footer"),c=document.getElementsByTagName("nb-calendar-actions");p&&p[0]&&(p[0].className="padding-2px"),c&&c[0]&&(p[0].className="d-none")},150)}},{key:"onValueChange",value:function(p){var c=this;this.form.controls[this.controlName.toString()].setValue(this.gs.getPrevDate(new Date,2)),setTimeout(function(){c.form.controls[c.controlName.toString()].setValue(null)})}},{key:"onSelectTime",value:function(p){this.form.controls[this.controlName.toString()].setValue(p.time)}}]),d}();return f.\u0275fac=function(h){return new(h||f)(t.Y36(Z.m))},f.\u0275cmp=t.Xpm({type:f,selectors:[["app-timer-input"]],inputs:{form:"form",controlName:"controlName",minDate:"minDate",maxDate:"maxDate",appendedTo:"appendedTo",dateType:"dateType",onlyTime:"onlyTime",onlyTimePicker:"onlyTimePicker",onlyDate:"onlyDate",filter:"filter",placeholder:"placeholder"},decls:5,vars:5,consts:[[3,"formGroup"],[4,"ngIf"],["aria-label","timer input","nbInput","",3,"nbDatepicker","formControlName","placeholder"],["format","MM/dd/yyyy hh:mm a",3,"twelveHoursFormat"],["dateTimePicker",""],["aria-label","timer input","nbInput","",3,"nbDatepicker","formControlName","placeholder","click"],["format","hh:mm a",2,"display","none",3,"twelveHoursFormat"],["placeholder","Enter time","nbInput","","twelveHoursFormat","",3,"nbTimepicker","formControlName","placeholder","click"],["timeFormat","hh:mm a",3,"twelveHoursFormat","onSelectTime"],["timepicker",""],["aria-label","timer input","nbInput","",3,"nbDatepicker","formControlName","placeholder","input"],["format","MM/dd/yyyy",3,"min","filter"],["datePicker",""]],template:function(h,p){1&h&&(t.TgZ(0,"form",0),t.YNc(1,C,4,4,"ng-container",1),t.YNc(2,I,4,4,"ng-container",1),t.YNc(3,n,4,4,"ng-container",1),t.YNc(4,J,4,5,"ng-container",1),t.qZA()),2&h&&(t.Q6J("formGroup",p.form),t.xp6(1),t.Q6J("ngIf",!p.onlyTime&&!p.onlyDate&&!p.onlyTimePicker),t.xp6(1),t.Q6J("ngIf",p.onlyTime),t.xp6(1),t.Q6J("ngIf",p.onlyTimePicker),t.xp6(1),t.Q6J("ngIf",p.onlyDate))},directives:[k._Y,k.JL,k.sg,D.w5,A.O5,x.h8i,x.$kf,k.Fj,k.JJ,k.u,D.x0,D.bf,x.VW_,x.etF,x.emG,x.B4C],styles:[""]}),f}()}}]);