"use strict";(self.webpackChunkAzal_FE=self.webpackChunkAzal_FE||[]).push([[840],{1840:function(j,G,_){_.r(G),_.d(G,{ConfigurationSettingsModule:function(){return Vt}});var I=_(3144),J=_(5671),d=_(9808),A=_(4202),F=_(4902),Q=_(7757),x=_.n(Q),y=_(655),c=_(3075),N=_(6271),e=_(5e3),R=_(6300),q=_(7243),O=_(7756),U=function(){var o=function(){function s(i){var n=this;(0,J.Z)(this,s),this.http=i,this.updateRules=function(t){return(0,y.mG)(n,void 0,void 0,x().mark(function a(){var r=this;return x().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",new Promise(function(f,g){r.http.post(q.J.configiration_settings.post.updateRules,t).subscribe(function(u){f(u)},function(u){console.log(u),g(u)})}));case 1:case"end":return p.stop()}},a)}))},this.updateCustomizeLabels=function(t){return(0,y.mG)(n,void 0,void 0,x().mark(function a(){var r=this;return x().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",new Promise(function(f,g){r.http.post(q.J.configiration_settings.post.updateCustomizedLabels,t).subscribe(function(u){f(u)},function(u){console.log(u),g(u)})}));case 1:case"end":return p.stop()}},a)}))},this.updateRequiredFeatures=function(t){return(0,y.mG)(n,void 0,void 0,x().mark(function a(){var r=this;return x().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",new Promise(function(f,g){r.http.post(q.J.configiration_settings.post.updateRequiredFeatures,t).subscribe(function(u){f(u)},function(u){console.log(u),g(u)})}));case 1:case"end":return p.stop()}},a)}))},this.updateRolesAndResponsibilities=function(t){return(0,y.mG)(n,void 0,void 0,x().mark(function a(){var r=this;return x().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",new Promise(function(f,g){r.http.post(q.J.configiration_settings.post.updateRolesAndPermissions,t).subscribe(function(u){f(u)},function(u){console.log(u),g(u)})}));case 1:case"end":return p.stop()}},a)}))},this.addNewStore=function(t){return(0,y.mG)(n,void 0,void 0,x().mark(function a(){var r=this;return x().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",new Promise(function(f,g){r.http.post(q.J.configiration_settings.post.addStore,t).subscribe(function(u){f(u)},function(u){console.log(u),g(u)})}));case 1:case"end":return p.stop()}},a)}))},this.addNewShift=function(t){return(0,y.mG)(n,void 0,void 0,x().mark(function a(){var r=this;return x().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",new Promise(function(f,g){r.http.post(q.J.configiration_settings.post.addShift,t).subscribe(function(u){f(u)},function(u){console.log(u),g(u)})}));case 1:case"end":return p.stop()}},a)}))},this.updateShifts=function(t){return(0,y.mG)(n,void 0,void 0,x().mark(function a(){var r=this;return x().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",new Promise(function(f,g){r.http.post(q.J.configiration_settings.post.updateShifts,t).subscribe(function(u){f(u)},function(u){console.log(u),g(u)})}));case 1:case"end":return p.stop()}},a)}))},this.updateStore=function(t){return(0,y.mG)(n,void 0,void 0,x().mark(function a(){var r=this;return x().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",new Promise(function(f,g){r.http.post(q.J.configiration_settings.post.updateStore,t).subscribe(function(u){f(u)},function(u){console.log(u),g(u)})}));case 1:case"end":return p.stop()}},a)}))},this.deleteStore=function(t){return new Promise(function(a,r){n.http.post(q.J.configiration_settings.post.deleteStore,t).subscribe(function(p){a(p)},function(p){console.log(p),r(p)})})},this.updateAdvanced=function(t){return(0,y.mG)(n,void 0,void 0,x().mark(function a(){var r=this;return x().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",new Promise(function(f,g){r.http.post(q.J.configiration_settings.post.updateAdvancedFeatures,t).subscribe(function(u){f(u)},function(u){console.log(u),g(u)})}));case 1:case"end":return p.stop()}},a)}))}}return(0,I.Z)(s,[{key:"getAllStores",value:function(n){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{pageIndex:0,pageSize:25};return new Promise(function(r,l){var p=q.J.configiration_settings.get.getAllStores+"?page_size="+a.pageSize+"&page_no="+(a.pageIndex+1);n&&(p+="&search="+n),t.http.get(p).subscribe(function(f){r(f)},function(f){console.log(f),l(f)})})}},{key:"getRolesPermissionData",value:function(){var n=this;return new Promise(function(t,a){n.http.get(q.J.configiration_settings.get.getRolesAndPermissions).subscribe(function(l){t(l)},function(l){console.log(l),a(l)})})}},{key:"getCustomizedLabels",value:function(){var n=this;return new Promise(function(t,a){n.http.get(q.J.configiration_settings.get.getCustomizedLabels).subscribe(function(l){t(l)},function(l){console.log(l),a(l)})})}},{key:"getRequiredFeatures",value:function(){var n=this;return new Promise(function(t,a){n.http.get(q.J.configiration_settings.get.getRequiredFeatures).subscribe(function(l){t(l)},function(l){console.log(l),a(l)})})}},{key:"getRules",value:function(){var n=this;return new Promise(function(t,a){n.http.get(q.J.configiration_settings.get.getRules).subscribe(function(l){t(l)},function(l){console.log(l),a(l)})})}},{key:"getAdvanced",value:function(){var n=this;return new Promise(function(t,a){n.http.get(q.J.configiration_settings.get.getAdvancedFeatures).subscribe(function(l){t(l)},function(l){console.log(l),a(l)})})}}]),s}();return o.\u0275fac=function(i){return new(i||o)(e.LFG(O.s))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o}(),T=_(5837),h=_(605),m=_(4825),b=_(9489),Z=_(3383),M=_(8719),E=_(3948),L=["ngForm"];function oe(o,s){1&o&&e._UZ(0,"i",40)}function ae(o,s){1&o&&(e.TgZ(0,"span",41),e._uU(1,"**Deleting a tag will permanently remove the tag across all stores."),e.qZA())}var $=function(s){return{"color-selected":s}};function re(o,s){if(1&o){var i=e.EpF();e.TgZ(0,"span",48),e.TgZ(1,"i",49),e.NdJ("click",function(){var l=e.CHM(i).index;return e.oxw(4).selectColor(l)}),e.qZA(),e.qZA()}if(2&o){var n=s.$implicit,t=e.oxw(4);e.xp6(1),e.Udp("color",n),e.Q6J("ngClass",e.VKq(3,$,n===t.selectedColor))}}function se(o,s){if(1&o&&(e.TgZ(0,"nb-card",43),e.TgZ(1,"nb-card-body"),e.TgZ(2,"label",44),e._UZ(3,"i",45),e._uU(4,"Pick a user label color"),e.qZA(),e.TgZ(5,"div",46),e.YNc(6,re,2,5,"span",47),e.qZA(),e.qZA(),e.qZA()),2&o){var i=e.oxw(3);e.xp6(6),e.Q6J("ngForOf",i.userTagColors)}}function le(o,s){if(1&o&&e.YNc(0,se,7,1,"nb-card",42),2&o){var i=e.oxw(2);e.Q6J("ngIf",i.showColorPopup)}}function de(o,s){1&o&&(e.TgZ(0,"span"),e._uU(1,"No labels."),e.qZA())}var K=function(s){return{display:s}};function pe(o,s){if(1&o){var i=e.EpF();e.ynx(0),e.TgZ(1,"span",50),e.TgZ(2,"div",51),e.NdJ("click",function(){var f=e.CHM(i).$implicit;return e.oxw(2).selectRow(f)}),e._UZ(3,"i",52),e.qZA(),e._UZ(4,"app-text-input",53),e.TgZ(5,"i",54),e.NdJ("click",function(){var f=e.CHM(i).index;return e.oxw(2).removeLabel(f)}),e.qZA(),e._UZ(6,"app-error-message",25),e.qZA(),e.BQk()}if(2&o){var n=s.$implicit;e.oxw();var t=e.MAs(41),a=e.oxw(),r=e.MAs(4);e.xp6(2),e.Q6J("ngClass",e.VKq(11,K,null==a.gs?null:a.gs.touchEnabledDevices))("nbPopover",t),e.xp6(1),e.Udp("color",n.value.color),e.xp6(1),e.Q6J("placeholder","Enter user label")("controlName","tag")("fieldSize","small")("form",n),e.xp6(2),e.Q6J("key","tag")("form",n)("isSubmitted",r.submitted)}}function ce(o,s){if(1&o){var i=e.EpF();e.TgZ(0,"div",55),e.NdJ("click",function(){return e.CHM(i),e.oxw(2).addLabel()}),e._UZ(1,"i",56),e._uU(2),e.qZA()}if(2&o){var n=e.oxw(2);e.xp6(2),e.hij(" Add ",(null==n.labelTypes?null:n.labelTypes.length)>0?" another ":" "," label ")}}function ue(o,s){if(1&o&&(e.TgZ(0,"div",16),e.TgZ(1,"span",17),e.TgZ(2,"span",18),e._UZ(3,"i",19),e._uU(4," Timesheet"),e.qZA(),e.TgZ(5,"span",20),e.TgZ(6,"div",21),e.TgZ(7,"label",22),e._uU(8," Max daily hours "),e._UZ(9,"img",23),e.qZA(),e._UZ(10,"app-text-input",24),e._UZ(11,"app-error-message",25),e.qZA(),e.TgZ(12,"div",21),e.TgZ(13,"label",22),e._uU(14," Max weekly hours "),e._UZ(15,"img",26),e.qZA(),e._UZ(16,"app-text-input",24),e._UZ(17,"app-error-message",25),e.qZA(),e.TgZ(18,"div",27),e.TgZ(19,"label",22),e._uU(20," Buffer time before clock in (mins) "),e._UZ(21,"img",26),e.qZA(),e._UZ(22,"app-text-input",24),e._UZ(23,"app-error-message",25),e.qZA(),e.TgZ(24,"div",28),e.TgZ(25,"label",22),e._uU(26," Buffer time after clock out (mins) "),e._UZ(27,"img",26),e.qZA(),e._UZ(28,"app-text-input",24),e._UZ(29,"app-error-message",25),e.qZA(),e.qZA(),e.qZA(),e.TgZ(30,"span",29),e.TgZ(31,"span",30),e.YNc(32,oe,1,0,"i",31),e._uU(33," Organization"),e.qZA(),e.TgZ(34,"span",20),e.TgZ(35,"div",32),e.TgZ(36,"label",22),e._uU(37," User labels "),e._UZ(38,"img",33),e.qZA(),e.YNc(39,ae,2,0,"span",34),e.YNc(40,le,1,1,"ng-template",null,35,e.W1O),e.TgZ(42,"div",36),e.YNc(43,de,2,0,"span",37),e.YNc(44,pe,7,13,"ng-container",38),e.qZA(),e.qZA(),e.YNc(45,ce,3,1,"div",39),e.qZA(),e.qZA(),e.qZA()),2&o){var i=e.oxw(),n=e.MAs(4);e.xp6(10),e.Q6J("placeholder","Enter max daily hours")("controlName","max_daily_hours")("form",i.WorkShiftsForm),e.xp6(1),e.Q6J("key","max_daily_hours")("form",i.WorkShiftsForm)("isSubmitted",n.submitted),e.xp6(5),e.Q6J("placeholder","Enter max weekly hours")("controlName","max_weekly_hours")("form",i.WorkShiftsForm),e.xp6(1),e.Q6J("key","max_weekly_hours")("form",i.WorkShiftsForm)("isSubmitted",n.submitted),e.xp6(5),e.Q6J("placeholder","Enter max weekly hours")("controlName","max_weekly_hours")("form",i.WorkShiftsForm),e.xp6(1),e.Q6J("key","max_weekly_hours")("form",i.WorkShiftsForm)("isSubmitted",n.submitted),e.xp6(5),e.Q6J("placeholder","Enter max weekly hours")("controlName","max_weekly_hours")("form",i.WorkShiftsForm),e.xp6(1),e.Q6J("key","max_weekly_hours")("form",i.WorkShiftsForm)("isSubmitted",n.submitted),e.xp6(3),e.Q6J("ngIf",i.showInput),e.xp6(7),e.Q6J("ngIf",(null==i.labelTypes?null:i.labelTypes.length)>0),e.xp6(4),e.Q6J("ngIf",0==(null==i.labelTypes?null:i.labelTypes.length)),e.xp6(1),e.Q6J("ngForOf",i.labelTypes.controls),e.xp6(1),e.Q6J("ngIf",(null==i.labelTypes?null:i.labelTypes.length)<10)}}function ge(o,s){1&o&&(e.TgZ(0,"span",41),e._uU(1,"**Deleting a tag will permanently remove the tag across all stores."),e.qZA())}function fe(o,s){if(1&o){var i=e.EpF();e.TgZ(0,"span",48),e.TgZ(1,"i",49),e.NdJ("click",function(){var l=e.CHM(i).index;return e.oxw(4).selectColor(l,!0)}),e.qZA(),e.qZA()}if(2&o){var n=s.$implicit,t=e.oxw(4);e.xp6(1),e.Udp("color",n),e.Q6J("ngClass",e.VKq(3,$,n===t.selectedColor))}}function me(o,s){if(1&o&&(e.TgZ(0,"nb-card",43),e.TgZ(1,"nb-card-body"),e.TgZ(2,"label",44),e._UZ(3,"i",45),e._uU(4,"Pick a task label color"),e.qZA(),e.TgZ(5,"div",46),e.YNc(6,fe,2,5,"span",47),e.qZA(),e.qZA(),e.qZA()),2&o){var i=e.oxw(3);e.xp6(6),e.Q6J("ngForOf",i.taskTagColors)}}function he(o,s){if(1&o&&e.YNc(0,me,7,1,"nb-card",42),2&o){var i=e.oxw(2);e.Q6J("ngIf",i.showColorPopup)}}function _e(o,s){1&o&&(e.TgZ(0,"span"),e._uU(1,"No tags."),e.qZA())}function ve(o,s){if(1&o){var i=e.EpF();e.ynx(0),e.TgZ(1,"span",50),e.TgZ(2,"div",51),e.NdJ("click",function(){var f=e.CHM(i).$implicit;return e.oxw(2).selectRow(f)}),e._UZ(3,"i",52),e.qZA(),e._UZ(4,"app-text-input",53),e.TgZ(5,"i",54),e.NdJ("click",function(){var f=e.CHM(i).index;return e.oxw(2).removeTag(f)}),e.qZA(),e._UZ(6,"app-error-message",25),e.qZA(),e.BQk()}if(2&o){var n=s.$implicit;e.oxw();var t=e.MAs(11),a=e.oxw(),r=e.MAs(4);e.xp6(2),e.Q6J("ngClass",e.VKq(11,K,null==a.gs?null:a.gs.touchEnabledDevices))("nbPopover",t),e.xp6(1),e.Udp("color",n.value.color),e.xp6(1),e.Q6J("placeholder","Enter tasks label")("controlName","tag")("fieldSize","small")("form",n),e.xp6(2),e.Q6J("key","tag")("form",n)("isSubmitted",r.submitted)}}function be(o,s){if(1&o){var i=e.EpF();e.TgZ(0,"div",64),e.NdJ("click",function(){return e.CHM(i),e.oxw(2).addTag()}),e._UZ(1,"i",56),e._uU(2),e.qZA()}if(2&o){var n=e.oxw(2);e.xp6(2),e.hij(" Add ",(null==n.taskTags?null:n.taskTags.length)>0?" another ":" "," task label ")}}function xe(o,s){if(1&o&&(e.TgZ(0,"div",57),e.TgZ(1,"span",58),e._UZ(2,"i",59),e._uU(3," Tasks"),e.qZA(),e.TgZ(4,"span",20),e.TgZ(5,"div",60),e.TgZ(6,"label",22),e._uU(7," Tasks tags "),e._UZ(8,"img",61),e.qZA(),e.YNc(9,ge,2,0,"span",34),e.YNc(10,he,1,1,"ng-template",null,35,e.W1O),e.TgZ(12,"div",62),e.YNc(13,_e,2,0,"span",37),e.YNc(14,ve,7,13,"ng-container",38),e.qZA(),e.qZA(),e.YNc(15,be,3,1,"div",63),e.qZA(),e.qZA()),2&o){var i=e.oxw();e.xp6(9),e.Q6J("ngIf",(null==i.labelTypes?null:i.labelTypes.length)>0),e.xp6(4),e.Q6J("ngIf",0==(null==i.taskTags?null:i.taskTags.length)),e.xp6(1),e.Q6J("ngForOf",i.taskTags.controls),e.xp6(1),e.Q6J("ngIf",(null==i.taskTags?null:i.taskTags.length)<30)}}function Ce(o,s){if(1&o){var i=e.EpF();e.TgZ(0,"i",75),e.NdJ("click",function(){e.CHM(i);var t=e.oxw().index;return e.oxw(2).removeLeave(t)}),e.qZA()}}function we(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"span",50),e._UZ(2,"app-text-input",53),e.YNc(3,Ce,1,0,"i",74),e._UZ(4,"app-error-message",25),e.qZA(),e.BQk()),2&o){var i=s.$implicit,n=e.oxw(2),t=e.MAs(4);e.xp6(2),e.Q6J("placeholder","Enter leave type")("controlName","type")("fieldSize","small")("form",i),e.xp6(1),e.Q6J("ngIf",n.leaveTypes.length>1),e.xp6(1),e.Q6J("key","type")("form",i)("isSubmitted",t.submitted)}}function Ze(o,s){if(1&o){var i=e.EpF();e.TgZ(0,"div",65),e.TgZ(1,"span",66),e._UZ(2,"i",67),e._uU(3," Scheduler"),e.qZA(),e.TgZ(4,"span",20),e.TgZ(5,"div",68),e.TgZ(6,"label",22),e._uU(7," First day of the week "),e.TgZ(8,"span",69),e._uU(9,"*"),e.qZA(),e._UZ(10,"img",70),e.qZA(),e._UZ(11,"app-dropdown",71),e._UZ(12,"app-error-message",25),e.qZA(),e.TgZ(13,"div",68),e.TgZ(14,"label",22),e._uU(15," Leave Type "),e._UZ(16,"img",72),e.qZA(),e.TgZ(17,"div",73),e.YNc(18,we,5,8,"ng-container",38),e.qZA(),e.qZA(),e.TgZ(19,"div",64),e.NdJ("click",function(){return e.CHM(i),e.oxw().addLeave()}),e._UZ(20,"i",56),e._uU(21," Add another leave type "),e.qZA(),e.qZA(),e.qZA()}if(2&o){var n=e.oxw(),t=e.MAs(4);e.xp6(11),e.Q6J("Data",n.weekDaysData)("placeholder","Select first day of the week")("controlName","week_start_day")("form",n.WorkShiftsForm)("show",!0),e.xp6(1),e.Q6J("key","week_start_day")("form",n.WorkShiftsForm)("isSubmitted",t.submitted),e.xp6(6),e.Q6J("ngForOf",n.leaveTypes.controls)}}function Te(o,s){if(1&o&&(e.TgZ(0,"div",76),e.TgZ(1,"div",77),e.TgZ(2,"div",78),e.TgZ(3,"label",22),e._uU(4," First day of the week "),e.TgZ(5,"span",79),e._uU(6,"*"),e.qZA(),e.qZA(),e.TgZ(7,"span",8),e._uU(8,"Specify the first day of the week, based on which weekly hours will be calculated. "),e.qZA(),e._UZ(9,"app-dropdown",71),e._UZ(10,"app-error-message",25),e.qZA(),e.qZA(),e.TgZ(11,"div",77),e.TgZ(12,"div",78),e.TgZ(13,"label",22),e._uU(14," Max daily hours "),e._UZ(15,"img",23),e.qZA(),e._UZ(16,"app-text-input",24),e._UZ(17,"app-error-message",25),e.qZA(),e.TgZ(18,"div",80),e.TgZ(19,"label",22),e._uU(20," Max weekly hours "),e._UZ(21,"img",26),e.qZA(),e._UZ(22,"app-text-input",24),e._UZ(23,"app-error-message",25),e.qZA(),e.qZA(),e.qZA()),2&o){var i=e.oxw(),n=e.MAs(4);e.xp6(9),e.Q6J("Data",i.weekDaysData)("placeholder","Select first day of the week")("controlName","week_start_day")("form",i.WorkShiftsForm)("show",!0),e.xp6(1),e.Q6J("key","week_start_day")("form",i.WorkShiftsForm)("isSubmitted",n.submitted),e.xp6(6),e.Q6J("placeholder","Enter max daily hours")("controlName","max_daily_hours")("form",i.WorkShiftsForm),e.xp6(1),e.Q6J("key","max_daily_hours")("form",i.WorkShiftsForm)("isSubmitted",n.submitted),e.xp6(5),e.Q6J("placeholder","Enter max weekly hours")("controlName","max_weekly_hours")("form",i.WorkShiftsForm),e.xp6(1),e.Q6J("key","max_weekly_hours")("form",i.WorkShiftsForm)("isSubmitted",n.submitted)}}var ye=function(){var o=function(){function s(i,n,t,a){var r=this;(0,J.Z)(this,s),this.fb=i,this.gs=n,this.service=t,this.dataService=a,this.weekDaysData=ke,this.exceptionOptions=Ae,this.thirdShiftData=Me,this.isOpenShift=!1,this.submit=function(l){l.valid&&(r.loadingSpinner=!0,r.saveWorkShifts(l))},this.saveWorkShifts=function(l){return(0,y.mG)(r,void 0,void 0,x().mark(function p(){var f,g;return x().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return f={week_start_day:this.WorkShiftsForm.get("week_start_day").value,is_third_shift:this.WorkShiftsForm.get("is_third_shift").value,max_daily_hours:this.WorkShiftsForm.get("max_daily_hours").value,max_weekly_hours:this.WorkShiftsForm.get("max_weekly_hours").value,leave_types:this.deletedAndUpdatedLeaveTypes(),user_label_types:this.deletedAndUpdatedLabelTypes(),task_tags:this.deletedAndUpdatedTaskTags()},u.prev=1,u.next=4,this.service.updateRules(f);case 4:this.gs.showToastSuccess(null==(g=u.sent)?void 0:g.message),this.showInput=!1,this.getDataSource(),this.initForm(),this.disable=!0,this.dataService.setConfigurations(null,!1),u.next=16;break;case 13:u.prev=13,u.t0=u.catch(1),this.gs.showToastError(u.t0.message);case 16:return u.prev=16,this.loadingSpinner=!1,u.finish(16);case 19:case"end":return u.stop()}},p,this,[[1,13,16,19]])}))},this.dataService.getConfigurations(!1).then(function(l){var p;r.isOpenShift=1==(null===(p=l.company)||void 0===p?void 0:p.is_open_shift),setTimeout(function(){r.setWeeklyMaxHourValidators()},20)})}return(0,I.Z)(s,[{key:"ngOnInit",value:function(){this.userTagColors=N.Qr.slice(),this.taskTagColors=N.pG.slice(),this.gs.hideSplashScreen(),this.disable=!0,this.showInput=!1,this.dataSource=[],this.loading=!1,this.loadingSpinner=!1,this.displayPopup=!1,this.getDataSource(),this.initForm()}},{key:"setWeeklyMaxHourValidators",value:function(){var n=this.WorkShiftsForm.controls;this.isOpenShift?(n.max_weekly_hours.setValidators([c.kI.required,c.kI.pattern("^[0-9]*$"),c.kI.maxLength(4)]),n.max_weekly_hours.updateValueAndValidity()):(n.max_weekly_hours.setValidators([c.kI.pattern("^[0-9]*$"),c.kI.maxLength(4)]),n.max_weekly_hours.updateValueAndValidity())}},{key:"selectColor",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.showColorPopup=!1,this.selectedColor=t?this.taskTagColors[n]:this.userTagColors[n],this.selectedLabelRow.controls.color.setValue(this.selectedColor),this.selectedLabelRow.controls.color.markAsDirty()}},{key:"selectRow",value:function(n){this.selectedColor=n.controls.color.value,this.showColorPopup=!0,this.selectedLabelRow=n}},{key:"getDataSource",value:function(){var n=this;this.loading=!0,this.loadingSpinner=!1,this.service.getRules().then(function(t){n.dataSource=t,n.originalTaskTags=n.dataSource.task_tags?JSON.parse(JSON.stringify(n.dataSource.task_tags)):[],n.originalLeaveTypes=n.dataSource.leave_types?JSON.parse(JSON.stringify(n.dataSource.leave_types)):[],n.originalLabelTypes=n.dataSource.user_label_types?JSON.parse(JSON.stringify(n.dataSource.user_label_types)):[];var a=[].concat((0,F.Z)(n.dataSource.task_tags.map(function(r){return r.color})),(0,F.Z)(n.taskTagColors));n.taskTagColors=(0,F.Z)(new Set(a)),n.populateFields(),n.groupFormValueChange(),n.showInput=!0}).catch(function(t){console.log(t)}).finally(function(){n.loading=!1})}},{key:"populateFields",value:function(){var n=this,t=this.WorkShiftsForm.controls;t.week_start_day.setValue(this.dataSource.week_start_day),t.is_third_shift.setValue(this.dataSource.is_third_shift),t.max_daily_hours.setValue(this.dataSource.max_daily_hours),t.max_weekly_hours.setValue(this.dataSource.max_weekly_hours),this.dataSource.leave_types.forEach(function(a){n.leaveTypes.push(n.fb.group({id:[a.id,[c.kI.required,c.kI.maxLength(128)]],type:[a.type,[c.kI.required,c.kI.maxLength(128)]]}))}),this.dataSource.task_tags.forEach(function(a){n.taskTags.push(n.fb.group({id:[a.id,[c.kI.required,c.kI.maxLength(128)]],tag:[a.tag,[c.kI.required,c.kI.maxLength(128)]],color:[a.color]}))}),this.dataSource.user_label_types.forEach(function(a){n.labelTypes.push(n.fb.group({id:[a.id,[c.kI.required,c.kI.maxLength(128)]],tag:[a.tag,[c.kI.required,c.kI.maxLength(128)]],color:[a.color]}))})}},{key:"initForm",value:function(){this.WorkShiftsForm=this.fb.group({week_start_day:[0,[c.kI.required,c.kI.maxLength(20)]],is_third_shift:[1,[c.kI.required,c.kI.maxLength(20)]],max_daily_hours:[null,[c.kI.pattern("^[0-9]*$"),c.kI.maxLength(4)]],max_weekly_hours:[null,[c.kI.pattern("^[0-9]*$"),c.kI.maxLength(4)]],leave_types:new c.Oe([]),task_tags:new c.Oe([]),label_types:new c.Oe([])}),this.setWeeklyMaxHourValidators()}},{key:"initLeave",value:function(){return this.fb.group({id:[null],type:["",[c.kI.required,c.kI.maxLength(128)]],is_deleted:null})}},{key:"initLabel",value:function(){return this.selectedColor=this.userTagColors[0],this.fb.group({id:[null],tag:["",[c.kI.required,c.kI.maxLength(128)]],color:[this.userTagColors[0]],is_deleted:null})}},{key:"addLeave",value:function(){this.WorkShiftsForm.get("leave_types").insert(0,this.initLeave()),this.scrollToTop("leavesWrapper")}},{key:"removeLeave",value:function(n){this.WorkShiftsForm.get("leave_types").removeAt(n)}},{key:"addTag",value:function(){this.WorkShiftsForm.get("task_tags").insert(0,this.initLabel()),this.scrollToTop("tagsWrapper")}},{key:"scrollToTop",value:function(n){var t=document.getElementById(n);t&&(t.scrollTop=0)}},{key:"removeTag",value:function(n){this.WorkShiftsForm.get("task_tags").removeAt(n)}},{key:"addLabel",value:function(){this.WorkShiftsForm.get("label_types").insert(0,this.initLabel()),this.scrollToTop("userWrapper")}},{key:"removeLabel",value:function(n){this.WorkShiftsForm.get("label_types").removeAt(n)}},{key:"form",get:function(){return this.WorkShiftsForm.controls}},{key:"leaveTypes",get:function(){return this.form.leave_types}},{key:"taskTags",get:function(){return this.form.task_tags}},{key:"labelTypes",get:function(){return this.form.label_types}},{key:"groupFormValueChange",value:function(){var n=this,t=this.WorkShiftsForm.value;this.WorkShiftsForm.valueChanges.subscribe(function(a){n.haschange=Object.keys(t).some(function(r){return parseInt(n.ngForm.value[r])!==t[r]}),n.disable=!n.haschange})}},{key:"deletedAndUpdatedTaskTags",value:function(){var n=this,t=this.originalTaskTags.filter(function(r){return!n.taskTags.value.some(function(l){return r.id==l.id})});t.forEach(function(r){r.is_deleted=!0});var a=this.taskTags.controls.filter(function(r){return!(!r.get("tag").dirty&&!r.get("color").dirty)}).map(function(r){return{id:r.get("id").value,tag:r.get("tag").value,color:r.get("color").value,is_deleted:null==r.get("id").value&&null}});return[].concat((0,F.Z)(t),(0,F.Z)(a))}},{key:"deletedAndUpdatedLeaveTypes",value:function(){var n=this,t=this.originalLeaveTypes.filter(function(r){return!n.leaveTypes.value.some(function(l){return r.id==l.id})});t.forEach(function(r){r.is_deleted=!0});var a=this.leaveTypes.controls.filter(function(r){return!!r.get("type").dirty}).map(function(r){return{id:r.get("id").value,type:r.get("type").value,is_deleted:null==r.get("id").value&&null}});return[].concat((0,F.Z)(t),(0,F.Z)(a))}},{key:"deletedAndUpdatedLabelTypes",value:function(){var n=this,t=this.originalLabelTypes.filter(function(r){return!n.labelTypes.value.some(function(l){return r.id==l.id})});t.forEach(function(r){r.is_deleted=!0});var a=this.labelTypes.controls.filter(function(r){return!(!r.get("tag").dirty&&!r.get("color").dirty)}).map(function(r){return{id:r.get("id").value,tag:r.get("tag").value,color:r.get("color").value,is_deleted:null==r.get("id").value&&null}});return[].concat((0,F.Z)(t),(0,F.Z)(a))}},{key:"canDeactivate",value:function(){return!this.disable}}]),s}();return o.\u0275fac=function(i){return new(i||o)(e.Y36(c.qu),e.Y36(R.m),e.Y36(U),e.Y36(T.s))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-work-shifts"]],viewQuery:function(i,n){var t;1&i&&e.Gf(L,5),2&i&&e.iGM(t=e.CRH())&&(n.ngForm=t.first)},decls:19,vars:8,consts:[[3,"loading"],[1,"for_spinner",2,"height","100vh","top","-25px",3,"nbSpinner"],[1,"work-shifts-wrapper"],["id","form",3,"formGroup","ngSubmit"],["ngForm","ngForm"],[1,"work-shifts-header"],[1,"title"],[2,"color","#6e689b"],[1,"sub-title"],[1,"work-shifts-btns"],["size","medium","type","submit","nbButton","","status","primary",3,"disabled"],[1,"two-sections"],["class","container left-section","style","background: none;",4,"ngIf"],["class","container left-section",4,"ngIf"],["class","container",4,"ngIf"],["class","work-shifts-details","style","display: none;",4,"ngIf"],[1,"container","left-section",2,"background","none"],[1,"parent-container"],[1,"first-container","ts"],[1,"fas","fa-clock","timesheet"],[1,"fields-container"],[1,"mb-12","field-alignment"],[1,"label-text"],["src","../../../../../assets/info-icon.svg","alt","picture configuration information","nbTooltipPlacement","right","nbTooltip","If daily clocked in hours of an employee exceed this limit, the timesheet entries for that day will be flagged.",1,"label-info-icon"],[3,"placeholder","controlName","form"],[1,"error-input",3,"key","form","isSubmitted"],["src","../../../../../assets/info-icon.svg","alt","picture configuration information","nbTooltipPlacement","right","nbTooltip","If weekly clocked in hours of an employee exceed this limit, the timesheet entries for that week will be flagged.",1,"label-info-icon"],[1,"mt-15","mb-12",2,"display","none"],[1,"mt-15","mb-25",2,"display","none"],[1,"parent-container","organization-element"],[1,"first-container","org"],["class","fas fa-users organization",4,"ngIf"],[1,"mb-25","field-alignment"],["src","assets/info-icon.svg","alt","Info icon","nbTooltipPlacement","right","nbTooltip","Add labels here that can be assigned to users in stores. This will allow your web users to easily filter users in different modules.",1,"label-info-icon"],["class","disclaimer-msg",4,"ngIf"],["templateRefAssign",""],["id","userWrapper",1,"leaves-wrapper","organization-rules"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","add-leave field-alignment",3,"click",4,"ngIf"],[1,"fas","fa-users","organization"],[1,"disclaimer-msg"],["class","popover-card",4,"ngIf"],[1,"popover-card"],[1,"label-txt"],[1,"fa-solid","fa-user-tag"],[1,"picker-wrapper"],["class","colors",4,"ngFor","ngForOf"],[1,"colors"],["aria-hidden","true",1,"fa","fa-circle","color-label",3,"ngClass","click"],[1,"leave-type"],["nbPopoverTrigger","click","nbPopoverPlacement","right","nbPopoverAdjustment","noop","id","divPopup",1,"small-devices-container",3,"ngClass","nbPopover","click"],[1,"fa-solid","fa-circle"],[1,"leave-input",3,"placeholder","controlName","fieldSize","form"],["nbTooltipPlacement","top","nbTooltip","Delete label and all usage of this label",1,"fa","fa-times-circle","delete-leave",3,"click"],[1,"add-leave","field-alignment",3,"click"],["aria-hidden","true",1,"fa","fa-plus",2,"margin-right","4px"],[1,"container","left-section"],[1,"first-container","tasks"],[1,"fas","fa-tasks",2,"color","#2ead7f"],[1,"mt-15","mb-25","task-container"],["src","assets/info-icon.svg","alt","Info icon","nbTooltipPlacement","right","nbTooltip","Add tags here that can be assigned to tasks in stores. This will allow your web and mobile users to easily filter tasks.",1,"label-info-icon"],["id","tagsWrapper",1,"leaves-wrapper","organization-rules"],["class","add-leave",3,"click",4,"ngIf"],[1,"add-leave",3,"click"],[1,"container"],[1,"first-container","sch"],[1,"fas","fa-calendar-alt","scheduler"],[1,"mt-15","mb-25"],[1,"mandatory"],["src","../../../../../assets/info-icon.svg","alt","picture configuration information","nbTooltipPlacement","right","nbTooltip","Specify the first day of the week, based on which weekly hours will be calculated.",1,"label-info-icon"],[3,"Data","placeholder","controlName","form","show"],["src","../../../../../assets/info-icon.svg","alt","picture configuration information","nbTooltipPlacement","right","nbTooltip","Add / remove leave types based on your organization.",1,"label-info-icon"],["id","leavesWrapper",1,"leaves-wrapper","leaves-scroll"],["class","fa fa-times-circle delete-leave","nbTooltipPlacement","top","nbTooltip","Delete leave type.",3,"click",4,"ngIf"],["nbTooltipPlacement","top","nbTooltip","Delete leave type.",1,"fa","fa-times-circle","delete-leave",3,"click"],[1,"work-shifts-details",2,"display","none"],[1,"flex","space_between","vertical_center","work-shift-item","mb-20","mt-20","relative"],[1,"work-shift-input",2,"padding-right","25px"],[1,"mandatory",2,"font-size","13px"],[1,"work-shift-input"]],template:function(i,n){if(1&i){var t=e.EpF();e._UZ(0,"app-loader",0),e.TgZ(1,"nb-card",1),e.TgZ(2,"div",2),e.TgZ(3,"form",3,4),e.NdJ("ngSubmit",function(){e.CHM(t);var r=e.MAs(4);return n.submit(r)}),e.TgZ(5,"div",5),e.TgZ(6,"span",6),e.TgZ(7,"span",7),e._uU(8," Rules "),e.qZA(),e.TgZ(9,"span",8),e._uU(10," Use this section to add rules for your organization. "),e.qZA(),e.qZA(),e.TgZ(11,"span",9),e.TgZ(12,"button",10),e._uU(13,"Save"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",11),e.YNc(15,ue,46,29,"div",12),e.YNc(16,xe,16,4,"div",13),e.YNc(17,Ze,22,9,"div",14),e.qZA(),e.YNc(18,Te,24,20,"div",15),e.qZA(),e.qZA(),e.qZA()}2&i&&(e.Q6J("loading",n.loading),e.xp6(1),e.Q6J("nbSpinner",n.loadingSpinner),e.xp6(2),e.Q6J("formGroup",n.WorkShiftsForm),e.xp6(9),e.Q6J("disabled",n.disable),e.xp6(3),e.Q6J("ngIf",n.showInput),e.xp6(1),e.Q6J("ngIf",n.showInput),e.xp6(1),e.Q6J("ngIf",n.showInput),e.xp6(1),e.Q6J("ngIf",n.showInput))},directives:[h.R,m.Asz,m.Q7R,c._Y,c.JL,c.sg,b.w5,m.DPz,d.O5,m.jNv,Z.t,M.H,m.yKW,d.sg,d.mk,m.ydg,E.J],styles:[".work-shifts-wrapper[_ngcontent-%COMP%] {\n  width: 100%;\n  padding-top: 10px;\n  padding-bottom: 20px;\n  padding-right: 45px;\n  padding-left: 45px;\n  overflow-y: auto;\n  overflow-x: hidden;\n  max-height: calc(100vh - 68px);\n  margin: 0 auto;\n}\n.work-shifts-wrapper[_ngcontent-%COMP%]   .work-shifts-header[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  margin-top: 10px;\n  margin-bottom: 10px;\n  position: sticky;\n  top: 7px;\n  background: #f9faff;\n  z-index: 1;\n}\n.work-shifts-wrapper[_ngcontent-%COMP%]   .work-shifts-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%] {\n  font-size: 20px;\n  font-weight: bold;\n  margin: 10px 0px 10px 0px;\n  display: flex;\n  flex-direction: column;\n}\n.work-shifts-wrapper[_ngcontent-%COMP%]   .work-shifts-header[_ngcontent-%COMP%]   .sub-title[_ngcontent-%COMP%] {\n  color: #6e698b;\n  font-size: 13px;\n  font-weight: 500;\n  padding-top: 16px;\n  text-align: justify;\n  margin: 0px -60px 0px 0px;\n  line-height: 1.4;\n}\n.work-shifts-wrapper[_ngcontent-%COMP%]   .work-shifts-details[_ngcontent-%COMP%] {\n  background: white;\n  margin: auto;\n  padding: 25px;\n  border-radius: 5px;\n  border: 1px solid #efefef;\n  box-shadow: rgba(110, 105, 139, 0.1) 1px 0px 2px 2px;\n}\n.work-shifts-wrapper[_ngcontent-%COMP%]   .work-shifts-details[_ngcontent-%COMP%]   .work-shift-item[_ngcontent-%COMP%] {\n  width: 100%;\n}\n.work-shifts-wrapper[_ngcontent-%COMP%]   .work-shifts-details[_ngcontent-%COMP%]   .work-shift-input[_ngcontent-%COMP%] {\n  width: 50%;\n}\n.work-shifts-wrapper[_ngcontent-%COMP%]   .work-shifts-details[_ngcontent-%COMP%]   .work-shift-input[_ngcontent-%COMP%]   .label-text[_ngcontent-%COMP%] {\n  font-size: 13px;\n}\n.work-shifts-wrapper[_ngcontent-%COMP%]   .work-shifts-details[_ngcontent-%COMP%]   .work-shift-input[_ngcontent-%COMP%]   .sub-title[_ngcontent-%COMP%] {\n  color: #6e698b;\n  font-size: 11px;\n}\n.mt-20[_ngcontent-%COMP%] {\n  margin-top: 20px !important;\n}\n@media (max-width: 500px) {\n  .work-shifts-wrapper[_ngcontent-%COMP%] {\n    padding-right: 20px;\n    padding-left: 20px;\n  }\n  .work-shifts-wrapper[_ngcontent-%COMP%]   .work-shifts-details[_ngcontent-%COMP%]   .vertical_center[_ngcontent-%COMP%] {\n    flex-direction: column;\n  }\n  .work-shifts-wrapper[_ngcontent-%COMP%]   .work-shifts-details[_ngcontent-%COMP%]   .work-shift-input[_ngcontent-%COMP%] {\n    width: 100%;\n    padding-right: 0px !important;\n    margin-top: 20px !important;\n  }\n\n  .mt-20[_ngcontent-%COMP%] {\n    margin-top: 0px !important;\n  }\n\n  .mb-20[_ngcontent-%COMP%] {\n    margin-bottom: 0px !important;\n  }\n}\n@media (max-width: 1160px) and (min-width: 1051px) {\n  .error-input[_ngcontent-%COMP%] {\n    width: 90%;\n  }\n}\n.error-input[_ngcontent-%COMP%] {\n  position: absolute;\n  width: 100%;\n  font-size: 10px;\n}\n.info-heading-icon[_ngcontent-%COMP%] {\n  margin-left: 0px;\n  font-size: 14px;\n  color: #b9a9fd !important;\n}\n.heading-info-icon[_ngcontent-%COMP%] {\n  vertical-align: bottom;\n  width: 17px;\n}\n.label-info-icon[_ngcontent-%COMP%] {\n  vertical-align: top;\n  width: 13px;\n  cursor: pointer;\n}\n.two-sections[_ngcontent-%COMP%] {\n  display: flex;\n  flex-wrap: nowrap;\n}\n.two-sections[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] {\n  background: white;\n  width: 50%;\n  border-radius: 10px;\n  display: flex;\n  flex-direction: column;\n  height: 69.7vh;\n}\n.left-section[_ngcontent-%COMP%] {\n  margin-right: 10px;\n}\n.mt-15[_ngcontent-%COMP%] {\n  margin-top: 15px;\n}\n.mb-25[_ngcontent-%COMP%] {\n  margin-bottom: 25px;\n}\n.mb-12[_ngcontent-%COMP%] {\n  margin-bottom: 12px;\n}\n.add-leave[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: flex-end;\n  font-size: 13px;\n  color: #6e689b;\n  font-weight: 600;\n  cursor: pointer;\n  margin-bottom: 10px;\n}\n.add-leave[_ngcontent-%COMP%]:hover {\n  text-decoration: underline;\n}\n.leave-type[_ngcontent-%COMP%] {\n  position: relative;\n  display: grid;\n}\n.delete-leave[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 6px;\n  right: 6px;\n  font-size: 13px;\n  color: #ffc2b0;\n  cursor: pointer;\n}\n.mandatory[_ngcontent-%COMP%] {\n  font-size: 14px !important;\n  margin-left: 1px !important;\n  margin-right: 3px !important;\n}\n.first-container[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  font-size: 15px;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  border-top-left-radius: 10px;\n  border-top-right-radius: 10px;\n}\n.first-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  font-size: 12px;\n  margin-right: 4px;\n  margin-left: 20px;\n}\n.ts[_ngcontent-%COMP%] {\n  background: aliceblue;\n  color: #03a9f4;\n}\n.org[_ngcontent-%COMP%] {\n  background: #edffbb;\n  color: #92c110;\n}\n.sch[_ngcontent-%COMP%] {\n  background: #ffebe5;\n  color: #ff8c65;\n}\n.timesheet[_ngcontent-%COMP%] {\n  color: #83c8ff;\n}\n.scheduler[_ngcontent-%COMP%] {\n  color: #ffac90;\n}\n.organization[_ngcontent-%COMP%] {\n  color: #92c110;\n}\n.fields-container[_ngcontent-%COMP%] {\n  padding-top: 0px;\n  padding-bottom: 7px;\n  padding-left: 20px;\n  padding-right: 20px;\n}\n.leaves-wrapper[_ngcontent-%COMP%] {\n  padding: 4px;\n  border-radius: 5px;\n  height: -moz-fit-content;\n  height: fit-content;\n  overflow: auto;\n  border: 1px solid #e4e9f2;\n}\n@media (max-width: 1050px) {\n  .two-sections[_ngcontent-%COMP%] {\n    flex-direction: column;\n  }\n  .two-sections[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] {\n    width: 100%;\n  }\n  .two-sections[_ngcontent-%COMP%]   .left-section[_ngcontent-%COMP%] {\n    margin-bottom: 10px;\n  }\n}\n.leaves-scroll[_ngcontent-%COMP%] {\n  max-height: 30vh;\n}\n.task-container[_ngcontent-%COMP%]   .leaves-wrapper[_ngcontent-%COMP%] {\n  height: 42vh;\n  max-height: 42vh;\n}\n.task-container[_ngcontent-%COMP%]   .leave-type[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n}\n.task-container[_ngcontent-%COMP%]   .fa-circle[_ngcontent-%COMP%] {\n  margin-left: 8px;\n  margin-right: 4px;\n  cursor: pointer;\n}\n.task-container[_ngcontent-%COMP%]   .leave-input[_ngcontent-%COMP%] {\n  width: 100%;\n}\n.colors[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  font-size: 25px;\n  margin-right: 6px;\n  margin-left: 7px;\n  padding: 4px;\n  margin-bottom: 8px;\n  cursor: pointer;\n}\n.colors[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover {\n  border: 2px solid #7b68ee;\n  color: #e6beff;\n  border-radius: 50%;\n  padding: 2px !important;\n}\n.color-selected[_ngcontent-%COMP%] {\n  border: 2px solid #7b68ee;\n  color: #e6beff;\n  border-radius: 50%;\n  padding: 2px !important;\n}\n.picker-wrapper[_ngcontent-%COMP%] {\n  border-top: 1px solid #ececec;\n  padding-top: 8px;\n  margin-bottom: 2px !important;\n}\n.label-txt[_ngcontent-%COMP%] {\n  margin-left: 13px;\n  margin-top: 5px;\n  margin-bottom: 13px;\n  font-size: 13px;\n  color: #6e689b;\n  font-weight: 600;\n}\n.label-txt[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  margin-right: 5px;\n}\n.disclaimer-msg[_ngcontent-%COMP%] {\n  color: #6e689b;\n  font-weight: 500;\n}\n.organization-rules[_ngcontent-%COMP%] {\n  margin-top: 9px;\n  height: -moz-fit-content !important;\n  height: fit-content !important;\n  max-height: 10vh;\n}\n.parent-container[_ngcontent-%COMP%] {\n  background: white;\n  border-radius: 10px;\n  margin-bottom: 10px;\n}\n.field-alignment[_ngcontent-%COMP%] {\n  padding-left: 20px;\n  padding-right: 20px;\n}\n.tasks[_ngcontent-%COMP%] {\n  color: #2ead7f;\n  background: #e1fff4;\n}\n.organization-element[_ngcontent-%COMP%]   .leave-type[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n}"]}),o}(),ke=[{key:1,value:"Monday"},{key:2,value:"Tuesday"},{key:3,value:"Wednesday"},{key:4,value:"Thursday"},{key:5,value:"Friday"},{key:6,value:"Saturday"},{key:0,value:"Sunday"}],Ae=[{key:-1,value:"Remove schedule whose end date intersects with the leave"},{key:1,value:"Remove schedule whose start date intersects with the leave"},{key:2,value:"Remove both schedules"},{key:0,value:"Don't remove any schedule"}],Me=[{key:1,value:"Yes"},{key:0,value:"No"}],X=_(263),Pe=["ngForm"];function Oe(o,s){if(1&o){var i=e.EpF();e.TgZ(0,"span",29),e.NdJ("click",function(){return e.CHM(i),e.oxw(3).setDefaultModule(1)}),e._uU(1," Make as default"),e.qZA()}}function Se(o,s){1&o&&(e.TgZ(0,"span",30),e._uU(1," Default"),e.qZA())}function qe(o,s){if(1&o&&(e.TgZ(0,"div",14),e.TgZ(1,"span",15),e.TgZ(2,"span",16),e._UZ(3,"i",17),e._uU(4," Timesheets "),e.YNc(5,Oe,2,0,"span",18),e.YNc(6,Se,2,0,"span",19),e.qZA(),e.qZA(),e.TgZ(7,"div",20),e.TgZ(8,"div",21),e.TgZ(9,"div",22),e.TgZ(10,"span",23),e._uU(11," Location "),e._UZ(12,"img",24),e._UZ(13,"br"),e.TgZ(14,"span",25),e._uU(15," Do you want to capture location of each timesheet entry? "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"span",26),e._UZ(17,"nb-toggle",27),e.qZA(),e.qZA(),e.TgZ(18,"div",21),e.TgZ(19,"div",22),e.TgZ(20,"span",23),e._uU(21," Picture "),e._UZ(22,"img",28),e._UZ(23,"br"),e.TgZ(24,"span",25),e._uU(25," Do you want to capture photo of employees with each timesheet entry? "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"span",26),e._UZ(27,"nb-toggle",27),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o){var i=e.oxw(2);e.xp6(5),e.Q6J("ngIf",1!==i.landing),e.xp6(1),e.Q6J("ngIf",1==i.landing),e.xp6(11),e.Q6J("formControlName","is_location"),e.xp6(10),e.Q6J("formControlName","is_camera")}}function Fe(o,s){if(1&o){var i=e.EpF();e.TgZ(0,"span",29),e.NdJ("click",function(){return e.CHM(i),e.oxw(3).setDefaultModule(2)}),e._uU(1," Make as default"),e.qZA()}}function Ue(o,s){1&o&&(e.TgZ(0,"span",30),e._uU(1," Default"),e.qZA())}function Ie(o,s){if(1&o){var i=e.EpF();e.TgZ(0,"div",31),e.TgZ(1,"span",15),e.TgZ(2,"span",16),e._UZ(3,"i",32),e._uU(4," Scheduler "),e.YNc(5,Fe,2,0,"span",18),e.YNc(6,Ue,2,0,"span",19),e.qZA(),e.TgZ(7,"span"),e.TgZ(8,"nb-toggle",33),e.NdJ("change",function(){return e.CHM(i),e.oxw(2).onChange("is_scheduler")})("checkedChange",function(a){return e.CHM(i),e.oxw(2).resetDefault(a,2)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",20),e.TgZ(10,"div",34),e.TgZ(11,"span",35),e.TgZ(12,"div",22),e.TgZ(13,"span",23),e._uU(14," Time Offs "),e._UZ(15,"br"),e.TgZ(16,"span",25),e._uU(17," Allow employees to request for time off using the mobile app. "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"span",26),e._UZ(19,"nb-toggle",36),e.qZA(),e.qZA(),e.TgZ(20,"div",34),e.TgZ(21,"span",35),e.TgZ(22,"div",22),e.TgZ(23,"span",23),e._uU(24," Notification "),e._UZ(25,"img",37),e._UZ(26,"br"),e.TgZ(27,"span",25),e._uU(28," Notify your employees of their upcoming schedules. "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(29,"span",26),e.TgZ(30,"nb-toggle",38),e.NdJ("change",function(){return e.CHM(i),e.oxw(2).onChange("is_scheduler_notification")}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(31,"span"),e.TgZ(32,"div",34),e.TgZ(33,"span",35),e.TgZ(34,"div",22),e._UZ(35,"img",39),e.TgZ(36,"span",23),e._uU(37," Notification Time "),e._UZ(38,"br"),e.TgZ(39,"span",25),e._uU(40," Specify the time before which your employees should be notified. "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(41,"span",26),e._UZ(42,"nb-toggle",40),e.qZA(),e.TgZ(43,"span"),e.TgZ(44,"span",41),e._UZ(45,"app-text-input",42),e.TgZ(46,"span",43),e._uU(47," mins "),e.qZA(),e.qZA(),e._UZ(48,"app-error-message",44),e.qZA(),e.qZA(),e.qZA(),e.TgZ(49,"div",34),e.TgZ(50,"span",35),e.TgZ(51,"div",22),e.TgZ(52,"span",23),e._uU(53," Swap Shift "),e._UZ(54,"br"),e.TgZ(55,"span",25),e._uU(56," Allow employees to request swapping of shifts with other employees within a store. "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(57,"span",26),e._UZ(58,"nb-toggle",36),e.qZA(),e.qZA(),e.TgZ(59,"span"),e.TgZ(60,"div",34),e.TgZ(61,"span",35),e.TgZ(62,"div",22),e._UZ(63,"img",45),e.TgZ(64,"span",23),e._uU(65," SMS Notification "),e._UZ(66,"br"),e.TgZ(67,"span",25),e._uU(68," Allow permission to send SMS to employees related to swap shifts. "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(69,"span",26),e._UZ(70,"nb-toggle",27),e.qZA(),e.qZA(),e.qZA(),e.TgZ(71,"span"),e.TgZ(72,"div",34),e.TgZ(73,"span",35),e.TgZ(74,"div",22),e._UZ(75,"img",46),e.TgZ(76,"span",23),e.TgZ(77,"span",47),e._uU(78," Manager Approval "),e.TgZ(79,"span",48),e._uU(80,"New"),e.qZA(),e.qZA(),e.TgZ(81,"span",25),e._uU(82," Allow web user with scheduler access to approve/reject swap shift requests. "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(83,"span",26),e._UZ(84,"nb-toggle",27),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){var n=e.oxw(2);e.xp6(5),e.Q6J("ngIf",2!==n.landing&&(null==n.form||null==n.form.is_scheduler?null:n.form.is_scheduler.value)),e.xp6(1),e.Q6J("ngIf",2==n.landing),e.xp6(2),e.Q6J("formControlName","is_scheduler"),e.xp6(1),e.Tol(n.is_scheduler?"features-child":"hide"),e.xp6(10),e.Q6J("formControlName","is_timeoff"),e.xp6(11),e.Q6J("formControlName","is_scheduler_notification"),e.xp6(1),e.Tol(!1===n.is_scheduler_notification?"hide":""),e.xp6(14),e.Q6J("maxlength",2)("placeholder","e.g., 10")("controlName","scheduling_notification_time")("form",n.requiredFeatureForm),e.xp6(3),e.Q6J("key","scheduling_notification_time")("form",n.requiredFeatureForm)("isSubmitted",!0),e.xp6(10),e.Q6J("formControlName","is_swap_shift"),e.xp6(1),e.Tol(1==(null==n.requiredFeatureForm||null==n.requiredFeatureForm.controls?null:n.requiredFeatureForm.controls.is_swap_shift.value)?"":"hide"),e.xp6(11),e.Q6J("formControlName","is_swap_shift_sms"),e.xp6(1),e.Tol(1==(null==n.requiredFeatureForm||null==n.requiredFeatureForm.controls?null:n.requiredFeatureForm.controls.is_swap_shift.value)?"":"hide"),e.xp6(13),e.Q6J("formControlName","swap_is_manager_approval")}}function Je(o,s){if(1&o){var i=e.EpF();e.TgZ(0,"span",29),e.NdJ("click",function(){return e.CHM(i),e.oxw(3).setDefaultModule(3)}),e._uU(1," Make as default"),e.qZA()}}function Ne(o,s){1&o&&(e.TgZ(0,"span",30),e._uU(1," Default"),e.qZA())}function De(o,s){if(1&o){var i=e.EpF();e.TgZ(0,"div",31),e.TgZ(1,"span",15),e.TgZ(2,"span",16),e._UZ(3,"i",49),e._uU(4," Tasks "),e._UZ(5,"img",50),e.YNc(6,Je,2,0,"span",18),e.YNc(7,Ne,2,0,"span",19),e.qZA(),e.TgZ(8,"span"),e.TgZ(9,"nb-toggle",51),e.NdJ("checkedChange",function(a){return e.CHM(i),e.oxw(2).resetDefault(a,3)}),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){var n=e.oxw(2);e.xp6(6),e.Q6J("ngIf",3!==n.landing&&(null==n.form||null==n.form.is_tasks?null:n.form.is_tasks.value)),e.xp6(1),e.Q6J("ngIf",3==n.landing),e.xp6(2),e.Q6J("formControlName","is_tasks")}}function Re(o,s){if(1&o){var i=e.EpF();e.TgZ(0,"span",29),e.NdJ("click",function(){return e.CHM(i),e.oxw(3).setDefaultModule(4)}),e._uU(1," Make as default"),e.qZA()}}function Qe(o,s){1&o&&(e.TgZ(0,"span",30),e._uU(1," Default"),e.qZA())}function ze(o,s){if(1&o){var i=e.EpF();e.TgZ(0,"div",31),e.TgZ(1,"span",15),e.TgZ(2,"span",16),e._UZ(3,"i",52),e._uU(4," Recognition "),e._UZ(5,"img",53),e.YNc(6,Re,2,0,"span",18),e.YNc(7,Qe,2,0,"span",19),e.qZA(),e.TgZ(8,"span"),e.TgZ(9,"nb-toggle",51),e.NdJ("checkedChange",function(a){return e.CHM(i),e.oxw(2).resetDefault(a,4)}),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){var n=e.oxw(2);e.xp6(6),e.Q6J("ngIf",4!==n.landing&&n.isBoringPlay&&(null==n.form||null==n.form.is_rewards?null:n.form.is_rewards.value)),e.xp6(1),e.Q6J("ngIf",4==n.landing),e.xp6(2),e.Q6J("formControlName","is_rewards")}}function Ee(o,s){if(1&o){var i=e.EpF();e.TgZ(0,"span",29),e.NdJ("click",function(){return e.CHM(i),e.oxw(3).setDefaultModule(5)}),e._uU(1," Make as default"),e.qZA()}}function Le(o,s){1&o&&(e.TgZ(0,"span",30),e._uU(1," Default"),e.qZA())}function Ve(o,s){if(1&o){var i=e.EpF();e.TgZ(0,"div",31),e.TgZ(1,"span",15),e.TgZ(2,"span",16),e._UZ(3,"i",54),e._uU(4," Messaging "),e._UZ(5,"img",55),e.YNc(6,Ee,2,0,"span",18),e.YNc(7,Le,2,0,"span",19),e.qZA(),e.TgZ(8,"span"),e.TgZ(9,"nb-toggle",33),e.NdJ("change",function(){return e.CHM(i),e.oxw(2).onChange("is_communication")})("checkedChange",function(a){return e.CHM(i),e.oxw(2).resetDefault(a,5)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div",20),e.TgZ(11,"div",21),e.TgZ(12,"div",22),e.TgZ(13,"span",23),e._uU(14," Notification "),e._UZ(15,"br"),e.TgZ(16,"span",25),e._uU(17," Notify your employees when they receive a message. "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"span",26),e._UZ(19,"nb-toggle",27),e.qZA(),e.qZA(),e.TgZ(20,"div",21),e.TgZ(21,"div",22),e.TgZ(22,"span",23),e._uU(23," Receipt "),e._UZ(24,"br"),e.TgZ(25,"span",25),e._uU(26," If you turn this setting on, mobile users will be able to see if the message has been read or not. "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"span",26),e._UZ(28,"nb-toggle",27),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){var n=e.oxw(2);e.xp6(6),e.Q6J("ngIf",5!==n.landing&&(null==n.form||null==n.form.is_communication?null:n.form.is_communication.value)),e.xp6(1),e.Q6J("ngIf",5==n.landing),e.xp6(2),e.Q6J("formControlName","is_communication"),e.xp6(1),e.Tol(n.is_communication?"features-child":"hide"),e.xp6(9),e.Q6J("formControlName","is_chat_notification"),e.xp6(9),e.Q6J("formControlName","is_read_receipt")}}function Ye(o,s){if(1&o){var i=e.EpF();e.TgZ(0,"div",3),e.TgZ(1,"form",4,5),e.NdJ("ngSubmit",function(){e.CHM(i);var a=e.MAs(2);return e.oxw().submit(a)}),e.TgZ(3,"div",6),e.TgZ(4,"span",7),e.TgZ(5,"span",8),e._uU(6," Required Features "),e.qZA(),e.TgZ(7,"span",9),e._uU(8,"Switch on the features that are required in your organization. On changing location or picture settings, it will only affect the future timesheets, and will have no impact on the existing entries (if any)."),e.qZA(),e.qZA(),e.TgZ(9,"span",10),e.TgZ(10,"button",11),e._uU(11,"Save"),e.qZA(),e.qZA(),e.qZA(),e.YNc(12,qe,28,4,"div",12),e.YNc(13,Ie,85,23,"div",13),e.YNc(14,De,10,3,"div",13),e.YNc(15,ze,10,3,"div",13),e.YNc(16,Ve,29,7,"div",13),e.qZA(),e.qZA()}if(2&o){var n=e.oxw();e.xp6(1),e.Q6J("formGroup",n.requiredFeatureForm),e.xp6(9),e.Q6J("disabled",n.requiredFeatureForm.invalid||n.disable),e.xp6(2),e.Q6J("ngIf",n.showInput),e.xp6(1),e.Q6J("ngIf",n.showInput),e.xp6(1),e.Q6J("ngIf",n.showInput),e.xp6(1),e.Q6J("ngIf",n.showInput),e.xp6(1),e.Q6J("ngIf",n.showInput)}}var Ge=function(){var o=function(){function s(i,n,t,a,r){var l=this;(0,J.Z)(this,s),this.fb=i,this.gs=n,this.service=t,this.dataService=a,this.authService=r,this.is_scheduler=!1,this.is_scheduler_notification=!1,this.is_timeoff=!1,this.is_communication=!1,this.updateValidations=function(){l.requiredFeatureForm.get("is_scheduler").value&&l.requiredFeatureForm.get("is_scheduler_notification").value?(l.requiredFeatureForm.controls.scheduling_notification_time.setValidators([c.kI.required,c.kI.maxLength(2),c.kI.pattern("^[0-9]*$")]),l.requiredFeatureForm.controls.scheduling_notification_time.updateValueAndValidity()):(l.requiredFeatureForm.controls.scheduling_notification_time.setValidators([]),l.requiredFeatureForm.controls.scheduling_notification_time.updateValueAndValidity())},this.submit=function(p){p.valid&&(l.loadingSpinner=!0,l.saveRequiredFeatures(p))},this.saveRequiredFeatures=function(p){return(0,y.mG)(l,void 0,void 0,x().mark(function f(){var g,v,u,k,D,w,C;return x().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return g="",v=this.requiredFeatureForm.get("is_scheduler").value?1:0,u=1==v&&this.requiredFeatureForm.get("is_scheduler_notification").value?1:0,k=1==v&&this.requiredFeatureForm.get("is_timeoff").value?1:0,D=1==u?this.requiredFeatureForm.get("scheduling_notification_time").value:this.initialNotificationTime,w={is_location:this.requiredFeatureForm.get("is_location").value?1:0,is_camera:this.requiredFeatureForm.get("is_camera").value?1:0,is_scheduler:this.requiredFeatureForm.get("is_scheduler").value?1:0,is_scheduler_notification:u,is_timeoff:k,is_swap_shift:this.requiredFeatureForm.get("is_swap_shift").value?1:0,is_swap_shift_sms:this.requiredFeatureForm.get("is_swap_shift_sms").value?1:0,swap_is_manager_approval:this.requiredFeatureForm.get("swap_is_manager_approval").value?1:0,scheduling_notification_time:D,is_communication:this.requiredFeatureForm.get("is_communication").value?1:0,is_chat_notification:this.requiredFeatureForm.get("is_chat_notification").value?1:0,is_read_receipt:this.requiredFeatureForm.get("is_read_receipt").value?1:0,is_tasks:this.requiredFeatureForm.get("is_tasks").value?1:0,is_rewards:this.requiredFeatureForm.get("is_rewards").value?1:0,landing_module:this.requiredFeatureForm.get("landing_module").value},S.prev=6,S.next=9,this.service.updateRequiredFeatures(w);case 9:C=S.sent,this.showInput=!1,this.getDataSource(),this.setFormValues(),this.disable=!0,this.dataService.setConfigurations(null,!1),g=null==C?void 0:C.firebase_token,this.gs.showToastSuccess(null==C?void 0:C.message),S.next=23;break;case 19:S.prev=19,S.t0=S.catch(6),console.log(S.t0),this.gs.showToastError(null==S.t0?void 0:S.t0.message);case 23:if(S.prev=23,this.loadingSpinner=!1,!g){S.next=28;break}return S.next=28,this.authService.setFirebaseToken(g);case 28:return setTimeout(function(){window.location.reload()},100),S.finish(23);case 30:case"end":return S.stop()}},f,this,[[6,19,23,30]])}))},this.dataService.getConfigurations(!1).then(function(p){var f;l.isBoringPlay=1===(null===(f=p.company)||void 0===f?void 0:f.boring2Fun)})}return(0,I.Z)(s,[{key:"ngOnInit",value:function(){this.gs.hideSplashScreen(),this.disable=!0,this.check=0,this.showInput=!1,this.dataSource=[],this.getDataSource(),this.setFormValues()}},{key:"getDataSource",value:function(){var n=this;this.loading=!0,this.service.getRequiredFeatures().then(function(t){n.dataSource=t,n.dataSource.scheduling_notification_time=n.dataSource.scheduling_notification_time,n.requiredFeatureForm.patchValue(t),n.groupFormValueChange(),1===n.dataSource.is_scheduler&&(n.is_scheduler=!0),1===n.dataSource.is_scheduler_notification&&(n.is_scheduler_notification=!0),1===n.dataSource.is_timeoff&&(n.is_timeoff=!0),1===n.dataSource.is_communication&&(n.is_communication=!0),n.initialNotificationTime=n.dataSource.scheduling_notification_time?n.dataSource.scheduling_notification_time:10,n.showInput=!0}).catch(function(t){console.log(t)}).finally(function(){n.loading=!1})}},{key:"setFormValues",value:function(){this.requiredFeatureForm=this.fb.group({is_location:0,is_camera:1,is_scheduler:1,is_scheduler_notification:1,is_timeoff:1,is_swap_shift:0,is_swap_shift_sms:0,swap_is_manager_approval:0,scheduling_notification_time:10,is_communication:0,is_chat_notification:0,is_read_receipt:0,is_tasks:0,is_rewards:0,landing_module:1}),this.updateValidations()}},{key:"groupFormValueChange",value:function(){var n=this,t=this.requiredFeatureForm.value;this.requiredFeatureForm.valueChanges.subscribe(function(a){n.haschange=Object.keys(t).some(function(r){return parseInt("boolean"==typeof n.ngForm.value[r]?n.ngForm.value[r]?1:0:n.ngForm.value[r])!==t[r]}),n.disable=!n.haschange})}},{key:"onChange",value:function(n){0===n.localeCompare("is_scheduler")?this.is_scheduler=this.requiredFeatureForm.get(n).value:0===n.localeCompare("is_scheduler_notification")?(this.is_scheduler_notification=this.requiredFeatureForm.get(n).value,this.updateValidations()):0===n.localeCompare("is_communication")&&(this.is_communication=this.requiredFeatureForm.get(n).value)}},{key:"landing",get:function(){var n,t,a;return null===(a=null===(t=null===(n=this.requiredFeatureForm)||void 0===n?void 0:n.controls)||void 0===t?void 0:t.landing_module)||void 0===a?void 0:a.value}},{key:"form",get:function(){var n;return null===(n=this.requiredFeatureForm)||void 0===n?void 0:n.controls}},{key:"resetDefault",value:function(n,t){!n&&this.landing==t&&this.setDefaultModule(1)}},{key:"setDefaultModule",value:function(n){this.requiredFeatureForm.controls.landing_module.setValue(n)}},{key:"canDeactivate",value:function(){return!this.disable}}]),s}();return o.\u0275fac=function(i){return new(i||o)(e.Y36(c.qu),e.Y36(R.m),e.Y36(U),e.Y36(T.s),e.Y36(X.e))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-required-features"]],viewQuery:function(i,n){var t;1&i&&e.Gf(Pe,5),2&i&&e.iGM(t=e.CRH())&&(n.ngForm=t.first)},decls:3,vars:3,consts:[[3,"loading"],[1,"for_spinner",2,"height","100vh","top","0px",3,"nbSpinner"],["class","req-features-wrapper",4,"ngIf"],[1,"req-features-wrapper"],["id","form",3,"formGroup","ngSubmit"],["ngForm","ngForm"],[1,"req-features-header"],[1,"title"],[2,"color","#6e689b"],[1,"sub-title"],[1,"req-features-btns"],["size","medium","type","submit","nbButton","","status","primary",3,"disabled"],["class","req-features-details",4,"ngIf"],["class","req-features-details mt-27",4,"ngIf"],[1,"req-features-details"],[1,"features-parent",2,"display","flex","justify-content","space-between"],[1,"heading"],[1,"fas","fa-clock","settings-icon",2,"color","#83C8FF"],["class","default-mod",3,"click",4,"ngIf"],["class","new","nbTooltipPlacement","right","nbTooltip","Default landing module for mobile",4,"ngIf"],[1,"features-child"],[1,"child-container"],[1,"feature-text"],[1,"feature-name"],["src","../../../../../assets/info-icon.svg","alt","location configuration information","nbTooltipPlacement","right","nbTooltip","This location will be captured at the time of clock in or clock out from the mobile app.",1,"label-info-icon"],[1,"feature-helper-text"],[1,"right-items"],["labelPosition","end",1,"feature-toggle",3,"formControlName"],["src","../../../../../assets/info-icon.svg","alt","picture configuration information","nbTooltipPlacement","right","nbTooltip","This photo will be captured at the time of clock in or clock out from the mobile app.",1,"label-info-icon"],[1,"default-mod",3,"click"],["nbTooltipPlacement","right","nbTooltip","Default landing module for mobile",1,"new"],[1,"req-features-details","mt-27"],[1,"fas","fa-calendar-alt","settings-icon",2,"color","#ff9c7b"],["labelPosition","end",1,"feature-toggle",3,"formControlName","change","checkedChange"],[1,"child-container","assignment-child-toggle"],[1,"assignment-toggle"],["aria-label","assignment-toggle","role","switch","labelPosition","end",1,"feature-toggle",3,"formControlName"],["src","../../../../../assets/info-icon.svg","alt","notification configuration information","nbTooltipPlacement","right","nbTooltip","Employees will receive a notification on their devices to view their updated schedule.",1,"label-info-icon"],["aria-label","assignment-toggle","role","switch","labelPosition","end",1,"feature-toggle",3,"formControlName","change"],["src","../../../../../assets/notification.svg","alt","notification",2,"margin-right","5px"],["labelPosition","end",1,"feature-toggle",2,"visibility","hidden"],[1,"input-notify-time"],[3,"maxlength","placeholder","controlName","form"],[2,"margin","8px 8px 8px 8px"],[1,"error-input",3,"key","form","isSubmitted"],["src","../../../../../assets/sms-notification.svg","alt","notification",2,"margin-right","5px"],["src","assets/manager-approval.svg","alt","notification",2,"margin-right","5px"],[1,"container"],[1,"new"],[1,"fas","fa-tasks","settings-icon",2,"color","#59bf9a"],["src","../../../../../assets/info-icon.svg","nbTooltipPlacement","right","nbTooltip","Enable this feature to manage the tasks in your stores and let your employees better manage their work hours.",1,"label-info-icon"],["labelPosition","end",1,"feature-toggle",3,"formControlName","checkedChange"],[1,"fas","fa-trophy","settings-icon",2,"color","#ffbb31"],["src","../../../../../assets/info-icon.svg","nbTooltipPlacement","right","nbTooltip","Enable this feature to appreciate your employees on doing a good job.",1,"label-info-icon"],[1,"fas","fa-comment","settings-icon",2,"color","#eb97fb"],["src","../../../../../assets/info-icon.svg","alt","chats configuration information","nbTooltipPlacement","right","nbTooltip","Enable this feature to communicate with your employees through the Azalio app.",1,"label-info-icon"]],template:function(i,n){1&i&&(e._UZ(0,"app-loader",0),e.TgZ(1,"nb-card",1),e.YNc(2,Ye,17,7,"div",2),e.qZA()),2&i&&(e.Q6J("loading",n.loading),e.xp6(1),e.Q6J("nbSpinner",n.loadingSpinner),e.xp6(1),e.Q6J("ngIf",n.requiredFeatureForm))},directives:[h.R,m.Asz,m.Q7R,d.O5,c._Y,c.JL,c.sg,b.w5,m.DPz,m.jNv,m.BLq,c.JJ,c.u,b.x0,b.bf,Z.t,M.H],styles:[".req-features-wrapper[_ngcontent-%COMP%] {\n  margin: auto;\n  width: 100%;\n  padding-top: 7px;\n  padding-bottom: 30px;\n  padding-right: 45px;\n  padding-left: 45px;\n  overflow: auto;\n  max-height: calc(100vh - 100px);\n  margin: 0 auto;\n}\n.req-features-wrapper[_ngcontent-%COMP%]   .req-features-header[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  margin-bottom: 10px;\n  position: sticky;\n  top: 0px;\n  background: #f9faff;\n  padding-top: 20px;\n  margin-right: -14px;\n  margin-left: -14px;\n  z-index: 1;\n}\n.req-features-wrapper[_ngcontent-%COMP%]   .req-features-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%] {\n  font-size: 20px;\n  font-weight: bold;\n  margin: 10px 0px 10px 0px;\n  display: flex;\n  flex-direction: column;\n}\n.req-features-wrapper[_ngcontent-%COMP%]   .req-features-header[_ngcontent-%COMP%]   .sub-title[_ngcontent-%COMP%] {\n  color: #6e698b;\n  font-size: 13px;\n  font-weight: 500;\n  padding-top: 16px;\n  text-align: justify;\n  margin: 0px -60px 0px 0px;\n  line-height: 1.4;\n}\n.req-features-wrapper[_ngcontent-%COMP%]   .req-features-header[_ngcontent-%COMP%]   .req-features-btns[_ngcontent-%COMP%]   .unsaved-changes[_ngcontent-%COMP%] {\n  margin-right: 10px;\n  font-weight: 600;\n  color: #4caf50;\n}\n.req-features-wrapper[_ngcontent-%COMP%]   .req-features-details[_ngcontent-%COMP%] {\n  margin: auto;\n}\n.req-features-wrapper[_ngcontent-%COMP%]   .req-features-details[_ngcontent-%COMP%]   .work-shift-item[_ngcontent-%COMP%] {\n  width: 100%;\n}\n.req-features-wrapper[_ngcontent-%COMP%]   .req-features-details[_ngcontent-%COMP%]   .features-parent[_ngcontent-%COMP%] {\n  font-size: 15px;\n  font-weight: 600;\n  color: #6e698b;\n  background: #ebeeff !important;\n  padding: 10px;\n  padding-right: 20px;\n  border-radius: 5px;\n  \n  box-shadow: rgba(110, 105, 139, 0.1) 1px 0px 2px 2px;\n}\n.req-features-wrapper[_ngcontent-%COMP%]   .req-features-details[_ngcontent-%COMP%]   .features-parent[_ngcontent-%COMP%]   nb-toggle.status-basic[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%] {\n  font-size: 15px !important;\n  font-weight: 700 !important;\n}\n.req-features-wrapper[_ngcontent-%COMP%]   .req-features-details[_ngcontent-%COMP%]   .features-child[_ngcontent-%COMP%] {\n  background-color: white;\n  box-shadow: rgba(110, 105, 139, 0.1) 1px 0px 2px 2px;\n}\n.req-features-wrapper[_ngcontent-%COMP%]   .req-features-details[_ngcontent-%COMP%]   .features-child[_ngcontent-%COMP%]   .child-container[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: flex-start;\n  padding-top: 13px;\n  padding-bottom: 13px;\n  border-bottom: 1px solid #efefef;\n  justify-content: space-between;\n  margin-right: 20px;\n  margin-left: 28px;\n}\n.req-features-wrapper[_ngcontent-%COMP%]   .req-features-details[_ngcontent-%COMP%]   .features-child[_ngcontent-%COMP%]   .child-container[_ngcontent-%COMP%]   .feature-toggle[_ngcontent-%COMP%] {\n  font-size: 13px;\n  font-weight: 400;\n  position: relative;\n  margin-left: 20px;\n}\n.req-features-wrapper[_ngcontent-%COMP%]   .req-features-details[_ngcontent-%COMP%]   .features-child[_ngcontent-%COMP%]   .child-container[_ngcontent-%COMP%]   .feature-text[_ngcontent-%COMP%] {\n  text-align: initial;\n  display: flex;\n  margin-left: 20px;\n}\n.req-features-wrapper[_ngcontent-%COMP%]   .req-features-details[_ngcontent-%COMP%]   .features-child[_ngcontent-%COMP%]   .child-container[_ngcontent-%COMP%]   .feature-text[_ngcontent-%COMP%]   .feature-name[_ngcontent-%COMP%] {\n  display: inline-block;\n  padding-top: 0px;\n  font-size: 13px;\n}\n.req-features-wrapper[_ngcontent-%COMP%]   .req-features-details[_ngcontent-%COMP%]   .features-child[_ngcontent-%COMP%]   .child-container[_ngcontent-%COMP%]   .feature-text[_ngcontent-%COMP%]   .feature-helper-text[_ngcontent-%COMP%] {\n  color: #575757d1;\n  font-size: 12px;\n  font-weight: normal;\n  display: block ruby;\n}\n.info-icon[_ngcontent-%COMP%] {\n  font-size: 12px;\n  color: #b9a9fd !important;\n}\n.mt-27[_ngcontent-%COMP%] {\n  margin-top: 27px !important;\n}\n.assignment-child-toggle[_ngcontent-%COMP%] {\n  justify-content: space-between;\n  border-bottom: none;\n}\n.assignment-toggle[_ngcontent-%COMP%] {\n  flex: 5;\n  display: inline-flex;\n  margin-right: 15px;\n}\n.hide[_ngcontent-%COMP%] {\n  display: none;\n}\n.heading[_ngcontent-%COMP%] {\n  font-size: 15px;\n  font-weight: 700;\n  color: #565656;\n  margin-top: 1px;\n  margin-left: 10px;\n  display: flex;\n  align-items: center;\n}\n.input-notify-time[_ngcontent-%COMP%] {\n  margin-right: 15px;\n  display: flex;\n}\n@media (max-width: 500px) {\n  .req-features-wrapper[_ngcontent-%COMP%] {\n    padding-right: 20px;\n    padding-left: 20px;\n    padding-bottom: 80px;\n    padding-top: 0px;\n  }\n  .req-features-wrapper[_ngcontent-%COMP%]   .feature-helper-text[_ngcontent-%COMP%] {\n    margin-right: 10px;\n  }\n  .req-features-wrapper[_ngcontent-%COMP%]   .assignment-toggle[_ngcontent-%COMP%] {\n    border-right: none;\n  }\n  .req-features-wrapper[_ngcontent-%COMP%]   .input-notify-time[_ngcontent-%COMP%] {\n    margin-right: 0px;\n    margin-top: 10px;\n  }\n}\n.info-heading-icon[_ngcontent-%COMP%] {\n  margin-left: 0px;\n  font-size: 14px;\n  color: #b9a9fd !important;\n}\n.heading-info-icon[_ngcontent-%COMP%] {\n  vertical-align: bottom;\n  width: 17px;\n}\n.label-info-icon[_ngcontent-%COMP%] {\n  width: 13px;\n  cursor: pointer;\n  margin-left: 5px;\n}\n.settings-icon[_ngcontent-%COMP%] {\n  font-size: 17px;\n  margin-right: 5px;\n}\n.toggle-label-start[_ngcontent-%COMP%]   .toggle-label[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]:not(:empty), .toggle-label-end[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]:not(:empty) {\n  padding: 0px;\n}\n.right-items[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: flex-end;\n}\n.default-mod[_ngcontent-%COMP%] {\n  font-size: 12px;\n  color: #7b68ee;\n  text-decoration: underline;\n  margin-left: 10px;\n  cursor: pointer;\n}\n.new[_ngcontent-%COMP%] {\n  background: #E91E63;\n  border-radius: 5px !important;\n  padding: 1px;\n  padding-right: 4px;\n  padding-left: 4px;\n  color: white;\n  margin-left: 9px;\n  margin-right: 5px;\n  font-weight: 600;\n  font-size: 9px;\n}\n.container[_ngcontent-%COMP%] {\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  width: 150px;\n}"]}),o}(),P=_(8279),H=_(7192),We=["ngForm"],He=["myinput"];function Be(o,s){if(1&o&&(e.TgZ(0,"span",28),e._uU(1," Azalio Play "),e.qZA()),2&o){var i=e.oxw(2);e.Udp("width",i.playWidth,"pt")}}function je(o,s){if(1&o&&(e.TgZ(0,"span",34),e._uU(1),e.qZA()),2&o){var i=e.oxw(4);e.xp6(1),e.hij(" ",i.count," ")}}function $e(o,s){if(1&o&&(e.TgZ(0,"th",32),e._uU(1),e.YNc(2,je,2,1,"span",33),e.qZA()),2&o){var i=e.oxw().$implicit;e.Tol(i.key),e.Q6J("hidden",1!==i.isVisible),e.xp6(1),e.hij(" ",7==i.id?" ":i.heading," "),e.xp6(1),e.Q6J("ngIf",0==i.id)}}function Ke(o,s){1&o&&(e.TgZ(0,"span",43),e._uU(1,"Max characters: 30."),e.qZA())}function Xe(o,s){1&o&&(e.TgZ(0,"span",43),e._uU(1,"Minimum one permission needs to be selected."),e.qZA())}var en=function(s){return{cursor:s}};function nn(o,s){if(1&o){var i=e.EpF();e.ynx(0),e.TgZ(1,"span",38),e.TgZ(2,"span",39),e.TgZ(3,"i",40),e.NdJ("click",function(){e.CHM(i);var p=e.oxw(2),f=p.$implicit,g=p.index,v=e.oxw(3);return 2===f.role_id?"":v.editTitle(g)}),e.qZA(),e.qZA(),e.TgZ(4,"span",41),e._uU(5),e.qZA(),e.qZA(),e._UZ(6,"br"),e.YNc(7,Ke,2,0,"span",42),e.YNc(8,Xe,2,0,"span",42),e.BQk()}if(2&o){var n=e.oxw(2),t=n.$implicit,a=n.index,r=e.oxw(3);e.xp6(2),e.Q6J("ngStyle",e.VKq(6,en,2===t.role_id?"auto":"")),e.xp6(1),e.Tol(2===t.role_id?"fa fa-user":"fas fa-pen"),e.xp6(2),e.hij(" ",t.role_title," "),e.xp6(2),e.Q6J("ngIf",t.role_title.length>30),e.xp6(1),e.Q6J("ngIf",r.rowNumber===a)}}function tn(o,s){if(1&o){var i=e.EpF();e.ynx(0),e.TgZ(1,"input",44,45),e.NdJ("focusout",function(){e.CHM(i);var p=e.oxw(2).index,f=e.oxw(3);return f.addConfigurations.valid?f.onFocusOut(p):""})("keyup.enter",function(p){e.CHM(i);var f=e.oxw(5);return f.addConfigurations.valid?f.keytab(p):""}),e.qZA(),e._UZ(3,"app-error-message",46),e.BQk()}if(2&o){var n=e.oxw(2),t=n.$implicit,a=n.index,r=e.oxw(3);e.xp6(1),e.Q6J("value",t.role_title)("autofocus",!0),e.xp6(2),e.Q6J("key","role_title")("form",r.addConfigurations)("isSubmitted",!0)("index",a)}}function on(o,s){if(1&o&&(e.ynx(0),e.YNc(1,nn,9,8,"ng-container",37),e.YNc(2,tn,4,6,"ng-container",37),e.BQk()),2&o){var i=e.oxw().index,n=e.oxw(3);e.xp6(1),e.Q6J("ngIf",i!==n.editRowId),e.xp6(1),e.Q6J("ngIf",i===n.editRowId)}}function an(o,s){if(1&o&&e._UZ(0,"input",50),2&o){var i=e.oxw(3).$implicit;e.s9C("formControlName",i.key),e.Q6J("value","element[module]")}}function rn(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"span",47),e.YNc(2,an,1,2,"input",48),e._UZ(3,"i",49),e.qZA(),e.BQk()),2&o){var i=e.oxw().$implicit,n=e.oxw().$implicit;e.xp6(2),e.Q6J("ngIf",2!==i.role_id),e.xp6(1),e.Q6J("ngClass",i[n.key]?"permissions-granted":"permissions-revoked")}}function sn(o,s){if(1&o){var i=e.EpF();e.TgZ(0,"span",53),e.TgZ(1,"i",54),e.NdJ("click",function(){e.CHM(i);var t=e.oxw(2).index;return e.oxw(3).deleteRow(t)}),e.qZA(),e.qZA()}}function ln(o,s){1&o&&(e.TgZ(0,"span",55),e._UZ(1,"i",56),e.qZA())}function dn(o,s){if(1&o&&(e.ynx(0),e.YNc(1,sn,2,0,"span",51),e.YNc(2,ln,2,0,"span",52),e.BQk()),2&o){var i=e.oxw().$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("ngIf",n.isNewRow&&null==i.role_id),e.xp6(1),e.Q6J("ngIf",2!==i.role_id&&n.currentRoleId===i.role_id)}}var pn=function(s){return{width:s}};function cn(o,s){if(1&o&&(e.TgZ(0,"td",35),e.TgZ(1,"label",36),e._uU(2),e.qZA(),e.YNc(3,on,3,2,"ng-container",37),e.YNc(4,rn,4,2,"ng-container",37),e.YNc(5,dn,3,2,"ng-container",37),e.qZA()),2&o){var i=s.$implicit,n=s.index,t=e.oxw().$implicit,a=e.oxw(2);e.Gre("",t.key,"_cell"),e.Q6J("hidden",1!==t.isVisible)("ngClass",2===i.role_id?"first-row":!0===a.editRowColor(n,i.role_id)?"edit-row":null)("ngStyle",e.VKq(11,pn,0==t.id?"15%":"10%"))("formGroupName",n),e.xp6(2),e.hij(" ",t.heading," "),e.xp6(1),e.Q6J("ngIf",0==t.id),e.xp6(1),e.Q6J("ngIf",0!==t.id),e.xp6(1),e.Q6J("ngIf",!a.isAzalioPlay&&7==t.id||a.isAzalioPlay&&9==t.id)}}function un(o,s){if(1&o&&(e.ynx(0),e.ynx(1,29),e.YNc(2,$e,3,6,"th",30),e.YNc(3,cn,6,13,"td",31),e.BQk(),e.BQk()),2&o){var i=s.$implicit;e.xp6(1),e.Q6J("matColumnDef",i.key)}}function gn(o,s){1&o&&e._UZ(0,"tr",57)}function fn(o,s){1&o&&e._UZ(0,"tr",58)}var mn=function(s){return{"mobile-roles-play":s}};function hn(o,s){if(1&o){var i=e.EpF();e.TgZ(0,"div",13),e.TgZ(1,"div",14),e._UZ(2,"span",15),e.TgZ(3,"span",16),e._uU(4," Web Access "),e.qZA(),e.TgZ(5,"span",17),e._uU(6," Mobile Access "),e.qZA(),e.YNc(7,Be,2,2,"span",18),e.qZA(),e.TgZ(8,"div",19),e.TgZ(9,"table",20,21),e.YNc(11,un,4,1,"ng-container",22),e.YNc(12,gn,1,0,"tr",23),e.YNc(13,fn,1,0,"tr",24),e.qZA(),e.qZA(),e.TgZ(14,"span",25),e.TgZ(15,"b",26),e.NdJ("click",function(){return e.CHM(i),e.oxw().addRow()}),e._UZ(16,"i",27),e._uU(17," Add New Role "),e.qZA(),e.qZA(),e.qZA()}if(2&o){var n=e.oxw();e.xp6(2),e.Udp("width",n.roleTiltleColWidth,"pt"),e.xp6(1),e.Udp("width",n.webAccessHeaderWidth,"pt"),e.xp6(2),e.Udp("width",n.mobileColWidth,"pt"),e.Q6J("ngClass",e.VKq(12,mn,n.isAzalioPlay)),e.xp6(2),e.Q6J("ngIf",n.isAzalioPlay),e.xp6(2),e.Q6J("dataSource",n.dataSource),e.xp6(2),e.Q6J("ngForOf",n.modules),e.xp6(1),e.Q6J("matHeaderRowDef",n.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns)}}var _n=function(){var o=function(){function s(i,n,t,a,r){var l=this;(0,J.Z)(this,s),this.service=i,this.gs=n,this.fb=t,this.dataService=a,this.dialogService=r,this.displayedColumns=["role_title","Timesheet","Schedules","Tasks","Rewards","Organisation","Settings","Mobile"],this.modules=[{id:0,key:"role_title",heading:"Role(s)",isVisible:1},{id:1,key:"Timesheet",heading:"Timesheets",isVisible:1},{id:2,key:"Schedules",heading:"Scheduler",isVisible:1,configKey:"is_scheduler"},{id:3,key:"Tasks",heading:"Tasks",isVisible:1,configKey:"is_tasks"},{id:4,key:"Rewards",heading:"Recognition",isVisible:1,configKey:"is_rewards"},{id:5,key:"Organisation",heading:"Organisation",isVisible:1},{id:6,key:"Settings",heading:"Settings",isVisible:1},{id:7,key:"Mobile",heading:"Mobile App",isVisible:1},{id:8,key:"AzalioPlayUser",heading:"User",isVisible:1},{id:9,key:"AzalioPlayAdmin",heading:"Admin",isVisible:1}],this.clickedRows=new Set,this.check=!0,this.noAccess=!1,this.rowNumber=-1,this.rowIndexArr=[],this.playWidth=0,this.saveData=function(p){return(0,y.mG)(l,void 0,void 0,x().mark(function f(){var v,u,k,g=this;return x().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return v=[],this.addConfigurations.value.permissions.forEach(function(C,W){if(""!==C.role_title&&JSON.stringify(C)!==JSON.stringify(g.initialFormValues[W])){var S={role_id:C.role_id,role_title:C.role_title,OrganisationManagement:C.Organisation,Schedules:C.Schedules,TimesheetManagement:C.Timesheet,Settings:C.Settings,Mobile:C.Mobile,send_sms:C.send_sms,send_email:C.send_email,Tasks:C.Tasks,Rewards:C.Rewards};g.isAzalioPlay&&Object.assign(S,{AzalioPlayUser:C.AzalioPlayUser,AzalioPlayAdmin:C.AzalioPlayAdmin}),v.push(S)}}),(u=[]).push({permissions:v}),w.prev=4,w.next=7,this.service.updateRolesAndResponsibilities(u[0]);case 7:this.gs.showToastSuccess(null==(k=w.sent)?void 0:k.message),this.showInput=!1,this.editIds=[],this.dataSource=[],this.getDataSource(),this.setForm(),this.dataService.setConfigurations(null,!1),this.disable=!0,w.next=21;break;case 18:w.prev=18,w.t0=w.catch(4),this.gs.showToastError(w.t0.message);case 21:return w.prev=21,this.isNewRow=!1,this.loadingSpinner=!1,w.finish(21);case 25:case"end":return w.stop()}},f,this,[[4,18,21,25]])}))}}return(0,I.Z)(s,[{key:"ngOnInit",value:function(){var n=this;this.editIds=[],this.mobileAccess=[],this.webAccess=[],this.rowIndexArr=[],this.editRowId=-1,this.disable=!0,this.showInput=!1,this.dataSource=[],this.getDataSource(),this.setForm(),this.isNewRow=!1,this.dataService.getConfigurations(!1).then(function(t){var a,r;n.isAzalioPlay=1==(null==t?void 0:t.company.is_azalio_play),n.isAzalioPlay&&(n.displayedColumns.push("AzalioPlayUser"),n.displayedColumns.push("AzalioPlayAdmin"));var l=null==t?void 0:t.company;n.modules.forEach(function(p){p.configKey&&(p.isVisible=l[p.configKey])}),n.is_rewards=null===(a=t.company)||void 0===a?void 0:a.is_rewards,n.currentRoleId=null===(r=null==t?void 0:t.role)||void 0===r?void 0:r.role_id}).finally(function(){})}},{key:"setForm",value:function(){this.addConfigurations=this.fb.group({permissions:this.fb.array([])})}},{key:"getDataSource",value:function(){var n=this;this.loading=!0,this.service.getRolesPermissionData().then(function(t){var a;n.dataSource=t,n.count=n.dataSource.length,n.dataSourceCopy=JSON.parse(JSON.stringify(n.dataSource)),null===(a=n.dataSource)||void 0===a||a.forEach(function(r){n.configurations.push(n.setRolesFormArray(r))}),n.initialFormValues=n.configurations.value,n.groupFormValueChange(),n.showInput=!0}).catch(function(t){console.log(t)}).finally(function(){setTimeout(function(){var t,a,r,l,p;n.roleTableWidth=null===(t=document.getElementsByClassName("roles-table").item(0))||void 0===t?void 0:t.offsetWidth,n.roleTiltleColWidth=null===(a=document.getElementsByClassName("role_title").item(0))||void 0===a?void 0:a.offsetWidth,n.mobileColWidth=(null===(r=document.getElementsByClassName("Mobile").item(0))||void 0===r?void 0:r.offsetWidth)+2,n.isAzalioPlay&&(n.playWidth=(null===(l=document.getElementsByClassName("AzalioPlayUser").item(0))||void 0===l?void 0:l.offsetWidth)+(null===(p=document.getElementsByClassName("AzalioPlayAdmin").item(0))||void 0===p?void 0:p.offsetWidth)),n.webAccessHeaderWidth=n.roleTableWidth-(n.roleTiltleColWidth+(n.mobileColWidth+n.playWidth)),n.loading=!1},5)})}},{key:"setRolesFormArray",value:function(n){var t={role_id:n.role_id,role_title:[n.role_title,[c.kI.required,c.kI.maxLength(30),b.CM.unique()]],Organisation:n.Organisation,Schedules:n.Schedules,Timesheet:n.Timesheet,Settings:n.Settings,Mobile:n.Mobile,Rewards:n.Rewards,Tasks:n.Tasks,AzalioPlayUser:n.AzalioPlayUser,AzalioPlayAdmin:n.AzalioPlayAdmin,send_sms:!1,send_email:!1};return this.fb.group(t)}},{key:"configurations",get:function(){return this.addConfigurations.controls.permissions}},{key:"groupFormValueChange",value:function(){var n=this,t=this.configurations.value;this.configurations.valueChanges.subscribe(function(a){Object.keys(a).some(function(r){if(a[r].role_id&&(t[r].Organisation!==a[r].Organisation||t[r].Schedules!==a[r].Schedules||t[r].Timesheet!==a[r].Timesheet||t[r].Tasks!==a[r].Tasks||t[r].Rewards!==a[r].Rewards||t[r].Settings!==a[r].Settings||t[r].Mobile!==a[r].Mobile||t[r].AzalioPlayUser!==a[r].AzalioPlayUser||t[r].AzalioPlayAdmin!==a[r].AzalioPlayAdmin)||!a[r].role_id)if(0!=a[r].Organisation||0!=a[r].Schedules||0!=a[r].Timesheet||0!=a[r].Tasks||n.is_rewards&&0!=a[r].Rewards||0!=a[r].Settings||0!=a[r].Mobile||n.isAzalioPlay&&(!n.isAzalioPlay||0!=a[r].AzalioPlayUser||0!=a[r].AzalioPlayAdmin)){if(n.rowIndexArr.length>0){var l=n.rowIndexArr.indexOf(parseInt(r));l>-1&&n.rowIndexArr.splice(l,1),n.rowNumber=n.rowIndexArr.length>0?n.rowIndexArr[n.rowIndexArr.length-1]:-1}}else n.rowIndexArr.find(function(u){return u===r})!==r&&(n.rowIndexArr.push(parseInt(r)),n.rowIndexArr=(0,F.Z)(new Set(n.rowIndexArr))),n.rowNumber=parseInt(r);else if(n.rowNumber===parseInt(r)&&n.rowIndexArr.length>0){var p=n.rowIndexArr.indexOf(parseInt(r));p>-1&&n.rowIndexArr.splice(p,1),n.rowNumber=n.rowIndexArr.length>0?n.rowIndexArr[n.rowIndexArr.length-1]:-1}if(n.noAccess=n.rowIndexArr.length>0,a[r].role_id&&t[r].Mobile!==a[r].Mobile&&a[r].Mobile)n.mobileAccess.find(function(u){return u===r})!==r&&(n.mobileAccess.push(r),a[r].send_sms=!0);else if(0==a[r].Mobile&&n.mobileAccess.length>0){var f=n.mobileAccess.indexOf(r);f>-1&&(n.mobileAccess.splice(f,1),a[r].send_sms=!1)}if(a[r].role_id&&(t[r].Organisation!==a[r].Organisation||t[r].Schedules!==a[r].Schedules||t[r].Timesheet!==a[r].Timesheet||t[r].Tasks!==a[r].Tasks||t[r].Rewards!==a[r].Rewards)&&1!=t[r].Organisation&&1!=t[r].Schedules&&1!=t[r].Timesheet&&1!=t[r].Tasks&&1!=t[r].Rewards&&1!=t[r].Settings&&(1==a[r].Organisation&&0==t[r].Schedules&&0==t[r].Timesheet&&0==t[r].Tasks&&0==t[r].Rewards&&0==t[r].Settings||0==t[r].Organisation&&1==a[r].Schedules&&0==t[r].Timesheet&&0==t[r].Tasks&&0==t[r].Rewards&&0==t[r].Settings||0==t[r].Organisation&&0==t[r].Schedules&&1==a[r].Timesheet&&0==t[r].Tasks&&0==t[r].Rewards&&0==t[r].Settings||0==t[r].Organisation&&0==t[r].Schedules&&0==t[r].Timesheet&&1==a[r].Tasks&&0==t[r].Settings||0==t[r].Organisation&&0==t[r].Schedules&&0==t[r].Timesheet&&0==t[r].Tasks&&1==a[r].Rewards&&0==t[r].Settings||0==t[r].Organisation&&0==t[r].Schedules&&0==t[r].Timesheet&&0==t[r].Tasks&&0==t[r].Rewards&&1==a[r].Settings))n.webAccess.find(function(u){return u===r})!==r&&n.webAccess.push(r),a[r].send_email=!0;else if(0==a[r].Organisation&&0==a[r].Schedules&&0==a[r].Timesheet&&0==a[r].Tasks&&0==a[r].Rewards&&0==a[r].Settings){if(n.webAccess.length>0){var g=n.webAccess.indexOf(r);g>-1&&n.webAccess.splice(g,1)}a[r].send_email=!1}if(n.dataSource[r]&&(n.dataSource[r].role_title=a[r].role_title),null===a[r].role_id&&""===a[r].role_title)n.addConfigurations.value.permissions.splice(r,1);else if(JSON.stringify(a[r])!==JSON.stringify(t[r]))n.editIds.find(function(u){return u===r})!==r&&n.editIds.push(r);else if(n.editIds.length>0){var v=n.editIds.indexOf(r);v>-1&&n.editIds.splice(v,1)}n.disable=!(n.editIds.length>0)})})}},{key:"submit",value:function(n){var t=this;n.valid?this.webAccess.length>0||this.mobileAccess.length>0?this.dialogService.open(H.z,{hasBackdrop:!0,closeOnBackdropClick:!1,context:{heading:"Are you sure?",subHeading:"You have updated access settings of one or more roles. Users with new access will receive invitation links via email/text message."}}).onClose.subscribe(function(l){1==l&&(t.loadingSpinner=!0,t.saveData(n),t.webAccess=[],t.mobileAccess=[])}):(this.loadingSpinner=!0,this.saveData(n)):console.log("error")}},{key:"addRow",value:function(){var n=this;this.dataSource.push({role_id:null,role_title:null,Organisation:!0,Schedules:!0,Timesheet:!0,Settings:!1,Mobile:!0,Tasks:!0,Rewards:!0,AzalioPlayUser:!1,AzalioPlayAdmin:!1});var a=this.fb.group({role_id:null,role_title:["",[c.kI.maxLength(30),b.CM.unique()]],Organisation:!0,Schedules:!0,Timesheet:!0,Settings:!1,Mobile:!0,send_sms:!1,send_email:!1,Tasks:!0,Rewards:!0,AzalioPlayUser:!1,AzalioPlayAdmin:!1});this.configurations.push(a),this.table.renderRows(),setTimeout(function(){n.myinput.nativeElement.focus()}),this.editRowId=this.dataSource.length-1,this.isNewRow=!0}},{key:"editTitle",value:function(n){var t=this;this.gs.logEvents("edit_role"),this.editRowId=n,setTimeout(function(){t.myinput.nativeElement.focus()})}},{key:"onFocusOut",value:function(n){if(""===this.addConfigurations.value.permissions[n].role_title&&null===this.addConfigurations.value.permissions[n].role_id)this.configurations.removeAt(n),this.dataSource.splice(n,1),this.removeId(n);else if(this.addConfigurations.invalid)return!1;this.editRowId=-1,this.table.renderRows()}},{key:"editRowColor",value:function(n,t){return null===t||this.editIds.indexOf(n.toString())>-1}},{key:"deleteRow",value:function(n){this.configurations.removeAt(n),this.dataSource.splice(n,1),this.table.renderRows(),this.removeId(n)}},{key:"removeId",value:function(n){if(this.editIds.length>0){var t=this.editIds.indexOf(n.toString());t>-1&&this.editIds.splice(t,1)}this.disable=!(this.editIds.length>0)}},{key:"keytab",value:function(n){n.preventDefault(),this.editRowId=-1,this.table.renderRows()}},{key:"canDeactivate",value:function(){return!this.disable}}]),s}();return o.\u0275fac=function(i){return new(i||o)(e.Y36(U),e.Y36(R.m),e.Y36(c.qu),e.Y36(T.s),e.Y36(m.Gln))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-roles-permissions-table"]],viewQuery:function(i,n){var t;1&i&&(e.Gf(We,5),e.Gf(P.BZ,5),e.Gf(He,5)),2&i&&(e.iGM(t=e.CRH())&&(n.ngForm=t.first),e.iGM(t=e.CRH())&&(n.table=t.first),e.iGM(t=e.CRH())&&(n.myinput=t.first))},decls:18,vars:5,consts:[[3,"loading"],[1,"for_spinner",2,"height","100vh","top","-25px",3,"nbSpinner"],[1,"roles-wrapper"],["id","form",3,"formGroup","keydown.enter","ngSubmit"],["ngForm","ngForm"],[1,"roles-header"],[1,"title"],[2,"color","#6e689b"],[1,"sub-title"],[2,"color","#7b68ee"],[1,"roles-btns"],["size","medium","type","submit","nbButton","","status","primary",3,"disabled"],["class","roles-details",4,"ngIf"],[1,"roles-details"],[1,"roles-header-container"],[1,"title-col"],[1,"web-access"],[1,"mobile-roles",3,"ngClass"],["class","azalio-play-roles",3,"width",4,"ngIf"],[1,"table-height"],["mat-table","",1,"mat-elevation-z8","roles-table",3,"dataSource"],["table",""],[4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["autofocus","",1,"add-role"],[1,"mr_10","mt_10","pointer",3,"click"],[1,"fa","fa-plus-circle",2,"color","#715aed","font-size","14px"],[1,"azalio-play-roles"],["formArrayName","permissions",3,"matColumnDef"],["mat-header-cell","","class","org-module",3,"hidden","class",4,"matHeaderCellDef"],["mat-cell","",3,"hidden","ngClass","class","ngStyle","formGroupName",4,"matCellDef"],["mat-header-cell","",1,"org-module",3,"hidden"],["class","user-count",4,"ngIf"],[1,"user-count"],["mat-cell","",3,"hidden","ngClass","ngStyle","formGroupName"],[1,"show_in_resp"],[4,"ngIf"],[2,"display","flex","align-items","center"],[1,"edit-role",3,"ngStyle"],[3,"click"],[2,"margin-left","14px"],["class","invalid",4,"ngIf"],[1,"invalid"],["nbInput","","type","text","formControlName","role_title",2,"margin-top","3px","margin-bottom","3px",3,"value","autofocus","focusout","keyup.enter"],["myinput",""],[1,"error-input",3,"key","form","isSubmitted","index"],[1,"checkbox"],["type","checkbox","class","ckeckbox-element",3,"value","formControlName",4,"ngIf"],[1,"fas","fa-check-circle",3,"ngClass"],["type","checkbox",1,"ckeckbox-element",3,"value","formControlName"],["class","delete_icon",4,"ngIf"],["class","revoked-access",4,"ngIf"],[1,"delete_icon"],["nbTooltipPlacement","top","nbTooltip","Delete role.",1,"fa","fa-times-circle",3,"click"],[1,"revoked-access"],["nbTooltipPlacement","top","nbTooltip","Changing permissions of this role will also impact your own configurations and if you disable settings, you will no longer be able to access the page.",1,"fa","fa-exclamation-triangle","triangle_info"],["mat-header-row",""],["mat-row",""]],template:function(i,n){if(1&i){var t=e.EpF();e._UZ(0,"app-loader",0),e.TgZ(1,"nb-card",1),e.TgZ(2,"div",2),e.TgZ(3,"form",3,4),e.NdJ("keydown.enter",function(r){return r.preventDefault()})("ngSubmit",function(){e.CHM(t);var r=e.MAs(4);return n.submit(r)}),e.TgZ(5,"div",5),e.TgZ(6,"span",6),e.TgZ(7,"span",7),e._uU(8," User Roles & Permissions "),e.qZA(),e.TgZ(9,"span",8),e._uU(10," Use this section to create custom roles in your organization with access to specific features. "),e._UZ(11,"br"),e.TgZ(12,"span",9),e._uU(13,"*Added role cannot be deleted, but can be modified."),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"span",10),e.TgZ(15,"button",11),e._uU(16,"Save"),e.qZA(),e.qZA(),e.qZA(),e.YNc(17,hn,18,14,"div",12),e.qZA(),e.qZA(),e.qZA()}2&i&&(e.Q6J("loading",n.loading),e.xp6(1),e.Q6J("nbSpinner",n.loadingSpinner),e.xp6(2),e.Q6J("formGroup",n.addConfigurations),e.xp6(12),e.Q6J("disabled",n.addConfigurations.invalid||n.disable||n.noAccess),e.xp6(2),e.Q6J("ngIf",n.showInput))},directives:[h.R,m.Asz,m.Q7R,c._Y,c.JL,c.sg,b.w5,m.DPz,d.O5,d.mk,P.BZ,d.sg,c.CE,P.w1,P.fO,P.ge,P.Dz,P.ev,d.PC,c.x0,m.h8i,c.Fj,c.JJ,c.u,b.x0,b.bf,M.H,c.Wl,m.jNv,P.as,P.XQ,P.nj,P.Gk],styles:[".roles-wrapper[_ngcontent-%COMP%] {\n  width: 100%;\n  padding-top: 10px;\n  padding-bottom: 12px;\n  padding-right: 20px;\n  padding-left: 20px;\n  overflow: auto;\n  max-height: calc(100vh - 25px);\n  margin: 0 auto;\n}\n.roles-wrapper[_ngcontent-%COMP%]   .roles-header[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  padding-top: 20px;\n  margin-bottom: 10px;\n  position: sticky;\n  top: 0px;\n  background: #f9faff;\n}\n.roles-wrapper[_ngcontent-%COMP%]   .roles-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%] {\n  font-size: 20px;\n  font-weight: bold;\n  margin: 10px 0px 10px 0px;\n  display: flex;\n  flex-direction: column;\n}\n.roles-wrapper[_ngcontent-%COMP%]   .roles-header[_ngcontent-%COMP%]   .sub-title[_ngcontent-%COMP%] {\n  color: #6e698b;\n  font-size: 13px;\n  font-weight: 500;\n  padding-top: 16px;\n  text-align: justify;\n  margin: 0px -60px 0px 0px;\n  line-height: 1.4;\n}\n.roles-wrapper[_ngcontent-%COMP%]   .roles-header[_ngcontent-%COMP%]   .roles-btns[_ngcontent-%COMP%]   .unsaved-changes[_ngcontent-%COMP%] {\n  margin-right: 10px;\n  font-weight: 600;\n  color: #6e698b;\n}\n.roles-wrapper[_ngcontent-%COMP%]   .roles-details[_ngcontent-%COMP%] {\n  background: white;\n  margin: auto;\n  border-radius: 5px;\n  border: 1px solid #efefef;\n  box-shadow: rgba(110, 105, 139, 0.1) 1px 0px 2px 2px;\n  padding-top: 5px;\n  padding-bottom: 15px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n.add-role[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: flex-start;\n  color: #715aed;\n  margin-left: 5px;\n  margin-top: 10px;\n  font-size: 13px;\n  text-decoration: underline;\n}\n.permissions-granted[_ngcontent-%COMP%] {\n  font-size: 17px;\n  color: #22be90;\n  cursor: pointer;\n}\n.permissions-revoked[_ngcontent-%COMP%] {\n  font-size: 17px;\n  color: #cccccc;\n  cursor: pointer;\n}\n.edit-role[_ngcontent-%COMP%] {\n  border-right: 0.2px solid #efefef;\n  cursor: pointer;\n  padding-right: 1rem;\n}\n@media (max-width: 500px) {\n  .roles-wrapper[_ngcontent-%COMP%] {\n    padding-right: 20px;\n    padding-left: 20px;\n  }\n}\n.table-height[_ngcontent-%COMP%] {\n  min-height: -moz-fit-content;\n  min-height: fit-content;\n  max-height: 49vh;\n  overflow: auto;\n  padding-bottom: 10px;\n}\n.first-row[_ngcontent-%COMP%] {\n  background-color: #f9f7ff;\n}\n.first-row[_ngcontent-%COMP%]   .permissions-granted[_ngcontent-%COMP%] {\n  cursor: auto;\n}\n.edit-row[_ngcontent-%COMP%] {\n  background-color: #ebe5ff;\n}\n.checkbox[_ngcontent-%COMP%] {\n  border-radius: 2px;\n  position: relative;\n  cursor: pointer;\n  display: flex;\n  justify-content: center;\n}\n.ckeckbox-element[_ngcontent-%COMP%] {\n  display: block;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  opacity: 0;\n  cursor: pointer;\n}\ninput[type=checkbox][_ngcontent-%COMP%]    + i[_ngcontent-%COMP%] {\n  color: #cccccc;\n}\ninput[type=checkbox][_ngcontent-%COMP%]:checked    + i[_ngcontent-%COMP%] {\n  color: #22be90;\n}\n.invalid[_ngcontent-%COMP%] {\n  color: red;\n  margin-left: 39px;\n  display: block;\n  margin-top: 5px;\n  margin-bottom: 5px;\n}\n.info-heading-icon[_ngcontent-%COMP%] {\n  margin-left: 0px;\n  font-size: 14px;\n  color: #b9a9fd !important;\n}\n.heading-info-icon[_ngcontent-%COMP%] {\n  vertical-align: bottom;\n  width: 17px;\n}\n.revoked-access[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 0px;\n  right: 3px;\n}\n@media (max-width: 930px) {\n  .invalid[_ngcontent-%COMP%] {\n    margin-left: 0px;\n  }\n\n  .add-role[_ngcontent-%COMP%] {\n    margin-top: 0px;\n  }\n}\n@media (max-width: 680px) {\n  .table-height[_ngcontent-%COMP%] {\n    height: 43vh;\n    padding-bottom: 20px;\n  }\n}\n.user-count[_ngcontent-%COMP%] {\n  color: #7a7a7a;\n  font-size: 12px;\n  font-weight: 600;\n  background: #eae7ff;\n  border: 5px;\n  border-radius: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  padding-top: 2px;\n  padding-bottom: 1px;\n}\n@supports selector(:nth-child(1 of x)) {\n  .roles-wrapper[_ngcontent-%COMP%]   .table-height[_ngcontent-%COMP%] {\n    overflow: auto;\n    max-height: 50vh;\n    min-height: -moz-fit-content;\n    min-height: fit-content;\n    display: block;\n  }\n}\n@media (max-height: 560px) {\n  @supports selector(:nth-child(1 of x)) {\n    .roles-wrapper[_ngcontent-%COMP%]   .table-height[_ngcontent-%COMP%] {\n      overflow: auto;\n      max-height: 40vh;\n      min-height: -moz-fit-content;\n      min-height: fit-content;\n      display: block;\n    }\n  }\n  .roles-wrapper[_ngcontent-%COMP%]   .roles-header[_ngcontent-%COMP%] {\n    background: #f9faff;\n    z-index: 1;\n  }\n\n  .roles-wrapper[_ngcontent-%COMP%]   .roles-details[_ngcontent-%COMP%] {\n    box-shadow: none;\n  }\n\n  .roles-wrapper[_ngcontent-%COMP%] {\n    max-height: calc(100vh - 75px);\n    padding-bottom: 50px;\n  }\n}\n.roles-header-container[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: center;\n}\n.title-col[_ngcontent-%COMP%] {\n  display: flex;\n  width: 22%;\n  justify-content: center;\n  align-items: center;\n  margin: 0 auto;\n}\n.web-access[_ngcontent-%COMP%] {\n  width: 88%;\n  justify-content: center;\n  align-items: center;\n  margin: 0 auto;\n  display: flex;\n  font-size: 15px;\n  padding: 5px;\n  color: white;\n  background-color: #7b68ee;\n  font-weight: 600;\n  border-top-left-radius: 5px;\n}\n.mobile-roles-play[_ngcontent-%COMP%] {\n  border-top-right-radius: 0px !important;\n}\n.mobile-roles[_ngcontent-%COMP%] {\n  width: 12.7%;\n  background: #6e689b;\n  color: white;\n  font-size: 13px;\n  font-weight: 600;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-top-right-radius: 5px;\n}\n.azalio-play-roles[_ngcontent-%COMP%] {\n  width: 12.7%;\n  background: #52306f;\n  color: white;\n  font-size: 13px;\n  font-weight: 600;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-top-right-radius: 5px;\n}\n.role_title_cell[_ngcontent-%COMP%] {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.Mobile_cell[_ngcontent-%COMP%], .AzalioPlayAdmin_cell[_ngcontent-%COMP%] {\n  position: relative;\n}\n.delete_icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  font-size: 13px;\n  color: #ff3d71;\n  cursor: pointer;\n  z-index: 1000;\n}\n.triangle_info[_ngcontent-%COMP%] {\n  font-size: 13px;\n  color: #ff9800;\n  cursor: pointer;\n}\n.delete_icon[_ngcontent-%COMP%] {\n  position: absolute;\n  top: -5px;\n  right: 3px;\n  z-index: 1000;\n}\n@media (max-width: 930px) {\n  .web-access[_ngcontent-%COMP%] {\n    display: none;\n  }\n\n  .mobile-roles[_ngcontent-%COMP%] {\n    display: none;\n  }\n}"]}),o}(),vn=_(3434),bn=function(s){return{"background-image":s}},xn=function(){var o=function(){function s(i,n){(0,J.Z)(this,s),this.cdRef=i,this.zone=n,this.userAddress="",this.locationValue=new e.vpe,this.geoFencing=new e.vpe}return(0,I.Z)(s,[{key:"ngOnInit",value:function(){this.minValue=N.Mb,this.maxValue=N.bR,this.radius=this.mapRadius?this.mapRadius:this.minValue,this.value=(this.radius-this.minValue)/(this.maxValue-this.minValue)*100,this.initMap()}},{key:"initMap",value:function(){var n=this,t=new google.maps.Map(document.getElementById("map"),{center:{lat:38.9071923,lng:-77.0368707},zoom:20,mapTypeControl:!0});if(this.marker=new google.maps.Marker({map:t,anchorPoint:new google.maps.Point(0,-29)}),this.input=document.getElementById("pac-input"),this.form.get("radius").setValue(this.radius),this.form.get("radius_slider").setValue(this.radius),this.autoInput){this.input.value=this.autoInput,this.selectedAddress=this.input.value,t.setCenter({lat:this.lat,lng:this.lng});var a=new google.maps.LatLng(this.lat,this.lng);this.marker.setPosition(a),this.marker.setVisible(!0),this.areaCircle=new google.maps.Circle({strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,map:t,center:{lat:this.lat,lng:this.lng},radius:this.radius}),this.isRadius=this.radius>4,this.form.get("radius").enable(),this.form.get("radius_slider").enable()}else{var p=new google.maps.LatLng(38.9071923,-77.0368707);this.marker.setPosition(p),this.marker.setVisible(!0),this.form.get("radius").disable(),this.form.get("radius_slider").disable()}this.autocomplete=new google.maps.places.Autocomplete(this.input,{fields:["formatted_address","geometry","name"],strictBounds:!1,types:[]}),this.autocomplete.bindTo("bounds",t),this.autocomplete.addListener("place_changed",function(){n.marker.setVisible(!0);var g=n.autocomplete.getPlace();if(n.selectedAddress=n.selectedInputVal,n.form.get("address").setValue(n.selectedInputVal),n.cdRef.detectChanges(),n.userLatitude=g.geometry.location.lat(),n.userLongitude=g.geometry.location.lng(),g.geometry&&g.geometry.location){t.setCenter(g.geometry.location),t.setZoom(20),n.marker.setPosition(g.geometry.location),n.marker.setVisible(!0),n.autoInput?(n.areaCircle.setCenter({lat:n.userLatitude,lng:n.userLongitude}),n.areaCircle.setRadius(n.radius)):n.areaCircle=new google.maps.Circle({strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,map:t,center:{lat:n.userLatitude,lng:n.userLongitude},radius:Number(n.radius)}),n.userAddress=g.geometry.location,n.form.get("radius").enable(),n.form.get("radius_slider").enable(),n.isRadius=!0;var v={location:n.selectedInputVal,lat:g.geometry.location.lat(),lng:g.geometry.location.lng()};n.locationValue.emit(v)}else window.alert("No details available for input: '"+g.name+"'")})}},{key:"setRadius",value:function(){var n=this.form.get("radius").value;this.input.value&&(this.radius=Number(n),this.radius>this.maxValue?this.radius=this.maxValue:this.radius<this.minValue&&(this.radius=this.minValue),this.form.get("radius").setValue(this.radius),this.form.get("radius_slider").setValue(this.radius),this.areaCircle.setRadius(this.radius>this.minValue-1?this.radius:this.minValue))}},{key:"onChangeSlider",value:function(){var n=this.form.get("radius_slider").value;this.input.value&&(this.radius=Number(n),this.value=(this.radius-this.minValue)/(this.maxValue-this.minValue)*100,document.getElementById("input-radius-slider").style.backgroundImage="linear-gradient(to right, #7b68ee 0%, #7b68ee "+this.value+"%, #fff "+this.value+"%, white 100%)",this.form.get("radius").setValue(this.radius),this.areaCircle.setRadius(this.radius>this.minValue-1?this.radius:this.minValue))}},{key:"setInput",value:function(){this.selectedInputVal=this.input.value,this.input.value&&this.form.get("radius").enabled?(this.form.get("radius").enable(),this.form.get("radius_slider").enable(),this.isRadius=!0):(this.form.get("radius").disable(),this.form.get("radius_slider").disable(),this.isRadius=!1),null==this.selectedAddress?this.form.get("address").setValue(null):this.input.value?this.form.get("address").setValue(this.selectedAddress):this.form.get("address").setValue(null)}},{key:"onChange",value:function(n){this.form.get("radius").setValue(this.radius),this.form.get("radius_slider").setValue(this.radius),this.geoFencing.emit(n)}},{key:"getBackgroundImageURL",value:function(){return this.value=(this.radius-this.minValue)/(this.maxValue-this.minValue)*100,this.isRadius?"linear-gradient(to right, #7b68ee 0%, #7b68ee "+this.value+"%, #fff "+this.value+"%, white 100%)":"linear-gradient(to right, #b0afb5 0%, #b0afb5 "+this.value+"%, #fff "+this.value+"%, white 100%)"}}]),s}();return o.\u0275fac=function(i){return new(i||o)(e.Y36(e.sBO),e.Y36(e.R0b))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-geo-location"]],inputs:{autoInput:"autoInput",ngForm:"ngForm",lat:"lat",lng:"lng",mapRadius:"mapRadius",form:"form",controlName:"controlName"},outputs:{locationValue:"locationValue",geoFencing:"geoFencing"},decls:26,vars:14,consts:[[3,"formGroup"],[1,"flex","vertical_center","context-row","relative"],["nbTooltipPlacement","top","nbTooltip","Location",1,"col1"],[1,"fas","fa-map-marker-alt","icon-color",2,"padding-left","5px","font-size","16px"],[1,"mandatory"],["id","pac-container",1,"col2"],["nbInput","","autocomplete","off","id","pac-input","aria-label","add new region","placeholder","Search location",3,"formControlName","focusout"],[1,"col3"],[2,"padding-left","47px"],[3,"key","form","isSubmitted"],[2,"position","relative"],["id","map"],[1,"flex",2,"position","inherit"],[1,"vertical_center","fence-radius"],[1,"first-child"],[1,"fence-label"],[1,"fence-input"],["id","input-radius-slider","type","range","placeholder","Radius",3,"min","max","formControlName","ngStyle","change"],[1,"info-icon"],[1,"second-child"],[1,"radius-input"],["nbInput","","autocomplete","off","id","pac-input-radius","type","text","placeholder","Radius",3,"formControlName","change"],[1,"radius-label"]],template:function(i,n){1&i&&(e.TgZ(0,"form",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"i",3),e.TgZ(4,"span",4),e._uU(5," *"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",5),e.TgZ(7,"input",6),e.NdJ("focusout",function(){return n.setInput()}),e.qZA(),e.qZA(),e._UZ(8,"div",7),e.qZA(),e.TgZ(9,"div",8),e._UZ(10,"app-error-message",9),e.qZA(),e.TgZ(11,"span",10),e._UZ(12,"div",11),e.TgZ(13,"div",12),e.TgZ(14,"div",13),e.TgZ(15,"span",14),e.TgZ(16,"div",15),e._uU(17," Fence Radius "),e.qZA(),e.TgZ(18,"div",16),e.TgZ(19,"input",17),e.NdJ("change",function(){return n.onChangeSlider()}),e.qZA(),e.qZA(),e._UZ(20,"div",18),e.qZA(),e.TgZ(21,"span",19),e.TgZ(22,"div",20),e.TgZ(23,"input",21),e.NdJ("change",function(){return n.setRadius()}),e.qZA(),e.qZA(),e.TgZ(24,"div",22),e._uU(25," meters "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.Q6J("formGroup",n.form),e.xp6(7),e.Q6J("formControlName","address"),e.xp6(3),e.Q6J("key","address")("form",n.form)("isSubmitted",n.ngForm.submitted),e.xp6(9),e.Tol(n.isRadius?"slider":"disable-slider"),e.s9C("min",n.minValue),e.s9C("max",n.maxValue),e.Q6J("formControlName","radius_slider")("ngStyle",e.VKq(12,bn,n.getBackgroundImageURL())),e.xp6(4),e.Q6J("formControlName","radius"))},directives:[c._Y,c.JL,c.sg,b.w5,m.jNv,m.h8i,c.Fj,c.JJ,c.u,b.x0,b.bf,M.H,c.eT,d.PC],styles:["#map[_ngcontent-%COMP%] {\n  height: 240px;\n  position: relative;\n  overflow: auto;\n  width: 100%;\n  margin-top: 15px;\n  border-radius: 5px;\n  border: 1px solid #80808078;\n}\n\n.slider[_ngcontent-%COMP%]::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  appearance: none;\n  width: 15px;\n  height: 15px;\n  border-radius: 50%;\n  background: #7b68ee;\n  cursor: pointer;\n  color: -internal-light-dark(#101010, white);\n}\n.disable-slider[_ngcontent-%COMP%]::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  appearance: none;\n  width: 15px;\n  height: 15px;\n  border-radius: 50%;\n  background: #b0afb5;\n  cursor: pointer;\n}\ninput[type=range i][_ngcontent-%COMP%] {\n  -webkit-appearance: none !important;\n  appearance: auto;\n  cursor: default;\n  background-color: white;\n  color: #7b68ee !important;\n  padding: initial;\n  border: initial;\n  margin: 2px;\n  height: 8px !important;\n  width: 100%;\n}\n.fence-radius[_ngcontent-%COMP%] {\n  position: absolute;\n  bottom: 0px;\n  width: 100%;\n  display: flex;\n  justify-content: space-around;\n  background: #1e1e1ea8;\n  color: white;\n  font-size: 14px;\n  font-weight: 600;\n  padding: 2px;\n  border-radius: 5px;\n}\n.context-row[_ngcontent-%COMP%] {\n  padding-top: 10px;\n  width: 100%;\n}\n.col1[_ngcontent-%COMP%] {\n  width: 7%;\n  padding-right: 5px;\n}\n.col2[_ngcontent-%COMP%] {\n  width: 100%;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n.col3[_ngcontent-%COMP%] {\n  width: 0%;\n  padding-right: 5px;\n}\n.first-child[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: flex-start;\n  width: 50%;\n}\n.second-child[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: flex-end;\n  width: 50%;\n  align-items: center;\n}\n.fence-label[_ngcontent-%COMP%] {\n  width: 30%;\n  margin-left: 15px;\n}\n.fence-input[_ngcontent-%COMP%] {\n  width: 70%;\n  padding-left: 5px;\n  padding-right: 10px;\n}\n.radius-label[_ngcontent-%COMP%] {\n  width: 25%;\n  padding-right: 10px;\n  padding-left: 5px;\n}\n.radius-input[_ngcontent-%COMP%] {\n  width: 30%;\n  margin-right: 5px;\n}\n.radius-input[_ngcontent-%COMP%]   [nbInput].size-medium[_ngcontent-%COMP%]:not(.input-full-width) {\n  height: 25px;\n  margin-top: 5px;\n  margin-bottom: 5px;\n}\n.info-icon[_ngcontent-%COMP%] {\n  width: 3%;\n  padding-right: 5px;\n}\n@media (max-width: 650px) {\n  .col2[_ngcontent-%COMP%] {\n    padding-left: 15px;\n  }\n\n  .second-child[_ngcontent-%COMP%] {\n    justify-content: center;\n  }\n}"]}),o}(),ee=_(42),Cn=_(2125),wn=["ngForm"];function Zn(o,s){1&o&&(e.TgZ(0,"span",35),e._uU(1,"Go to Required Features > Timesheets, and enable location to use this feature. "),e.qZA())}function Tn(o,s){if(1&o){var i=e.EpF();e.TgZ(0,"app-geo-location",36),e.NdJ("locationValue",function(r){return e.CHM(i),e.oxw(2).onLocationValue(r)})("geoFencing",function(r){return e.CHM(i),e.oxw(2).onGeoFencing(r)}),e.qZA()}if(2&o){e.oxw();var n=e.MAs(2),t=e.oxw();e.Q6J("form",t.addStoreForm)("autoInput",t.storeAddress)("ngForm",n)("lat",t.lat)("lng",t.lng)("mapRadius",t.mapRadius)("showGeoFence",t.showGeoMap)}}function yn(o,s){if(1&o){var i=e.EpF();e.TgZ(0,"span",37),e.TgZ(1,"nb-checkbox",38),e.NdJ("checkedChange",function(a){return e.CHM(i),e.oxw(2).updateCreateAnother(a)}),e.qZA(),e._uU(2," Add another store "),e.qZA()}if(2&o){var n=e.oxw(2);e.xp6(1),e.Q6J("checked",n.isAddAnotherStore)}}function kn(o,s){if(1&o){var i=e.EpF();e.TgZ(0,"app-confirm-popup",39),e.NdJ("proceedDelete",function(){return e.CHM(i),e.oxw(2).deleteRegion()}),e.TgZ(1,"span",40),e._UZ(2,"i",41),e._uU(3," Delete store"),e.qZA(),e.qZA()}2&o&&e.Q6J("title","Store")("textToDisplay","You're about to <b>permanently delete</b> this store. All the timesheet data of this store will also be deleted. Are you sure?")}function An(o,s){if(1&o){var i=e.EpF();e.TgZ(0,"nb-card-body",5),e.TgZ(1,"form",6,7),e.NdJ("ngSubmit",function(){e.CHM(i);var r=e.MAs(2);return e.oxw().submit(r)}),e.TgZ(3,"div",8),e.TgZ(4,"div",9),e.TgZ(5,"div",10),e.TgZ(6,"i",11),e.TgZ(7,"span",12),e._uU(8," *"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",13),e._UZ(10,"app-text-input",14),e._UZ(11,"app-error-message",15),e.qZA(),e.qZA(),e.TgZ(12,"div",16),e.TgZ(13,"div",17),e.TgZ(14,"i",18),e.TgZ(15,"span",12),e._uU(16," *"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",19),e._UZ(18,"app-timezone-dropdown",20),e._UZ(19,"app-error-message",15),e.qZA(),e.qZA(),e.TgZ(20,"div",21),e.TgZ(21,"div",22),e._UZ(22,"i",23),e.qZA(),e.TgZ(23,"div",24),e._uU(24,"Enable Geo-Fencing "),e.qZA(),e._UZ(25,"div"),e.TgZ(26,"div",25),e.TgZ(27,"nb-toggle",26),e.NdJ("checkedChange",function(r){return e.CHM(i),e.oxw().onChange(r)}),e.qZA(),e.YNc(28,Zn,2,0,"span",27),e.qZA(),e.qZA(),e.TgZ(29,"div"),e.YNc(30,Tn,1,7,"app-geo-location",28),e.qZA(),e.qZA(),e.TgZ(31,"div",29),e.YNc(32,yn,3,1,"span",30),e.TgZ(33,"span",31),e.TgZ(34,"app-button",32),e.NdJ("onClick",function(){e.CHM(i);var r=e.oxw();return r.close({refresh:r.isCreateAnother,createAnother:r.isCreateAnother})}),e._uU(35,"Cancel"),e.qZA(),e.TgZ(36,"button",33),e._uU(37),e.qZA(),e.qZA(),e.qZA(),e.YNc(38,kn,4,2,"app-confirm-popup",34),e.qZA(),e.qZA()}if(2&o){var n=e.MAs(2),t=e.oxw();e.Q6J("nbSpinner",t.loading),e.xp6(1),e.Q6J("formGroup",t.addStoreForm),e.xp6(9),e.Q6J("autofocus",!0)("placeholder","Enter store name")("controlName","store_title")("form",t.addStoreForm),e.xp6(1),e.Q6J("key","store_title")("form",t.addStoreForm)("isSubmitted",n.submitted),e.xp6(7),e.Q6J("controlName","timezone")("form",t.addStoreForm)("showName",!0)("placeholder","Select time zone"),e.xp6(1),e.Q6J("key","timezone")("form",t.addStoreForm)("isSubmitted",n.submitted),e.xp6(4),e.Udp("color",t.isLocationEnabled?"":"#ababab"),e.xp6(4),e.Q6J("disabled",!t.isLocationEnabled)("formControlName","is_geofencing")("checked",t.showGeoMap),e.xp6(1),e.Q6J("ngIf",!t.isLocationEnabled),e.xp6(2),e.Q6J("ngIf",t.showGeoMap&&t.isLocationEnabled),e.xp6(2),e.Q6J("ngIf",t.addNewStore&&null===t.regionId),e.xp6(5),e.Oqu(t.buttonLabel),e.xp6(1),e.Q6J("ngIf",t.editStore)}}var ne=function(){var o=function(){function s(i,n,t,a,r){var l=this;(0,J.Z)(this,s),this.fb=i,this.ref=n,this.service=t,this.gs=a,this.dataService=r,this.reloadRegionData=!1,this.updateValidations=function(){l.addStoreForm.get("is_geofencing").value?(l.addStoreForm.controls.address.setValidators([c.kI.required]),l.addStoreForm.controls.address.updateValueAndValidity(),l.addStoreForm.controls.radius.setValidators([c.kI.min(N.Mb),c.kI.max(N.bR)]),l.addStoreForm.controls.radius.updateValueAndValidity()):(l.addStoreForm.controls.address.setValidators([]),l.addStoreForm.controls.address.updateValueAndValidity(),l.addStoreForm.controls.radius.setValidators([]),l.addStoreForm.controls.radius.updateValueAndValidity())},this.add=function(p){return(0,y.mG)(l,void 0,void 0,x().mark(function f(){var g,v,u,k;return x().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return g=this.addStoreForm.get("timezone").value,v=this.timezoneMapping.filter(function(C){return C.key===g})[0].value,u=this.formData(v),w.prev=3,w.next=6,this.service.addNewStore(u);case 6:if(this.gs.showToastSuccess(null==(k=w.sent)?void 0:k.message),this.reloadRegionData=!this.reloadRegionData,!this.isAddAnotherStore){w.next=12;break}return this.close({lastStore:null,refresh:!1,createAnother:!0,timezone:g,showGeoMap:this.showGeoMap,geoFenceData:this.geoFenceData}),w.abrupt("return");case 12:this.close({lastStore:null==k?void 0:k.last_store,refresh:!0,createAnother:!1,timezone:"",showGeoMap:this.showGeoMap,geoFenceData:null}),w.next=19;break;case 15:w.prev=15,w.t0=w.catch(3),this.gs.showToastError(w.t0.message),console.log(w.t0);case 19:return w.prev=19,this.dataService.updateRegion(!0),this.loading=!1,w.finish(19);case 23:case"end":return w.stop()}},f,this,[[3,15,19,23]])}))},this.update=function(p){return(0,y.mG)(l,void 0,void 0,x().mark(function f(){var v,u,k,D,g=this;return x().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return v=this.addStoreForm.get("timezone").value,u=this.timezoneMapping.filter(function(W){return W.key===v})[0].value,k=this.formData(u),C.prev=3,C.next=6,this.service.updateStore(k);case 6:this.gs.showToastSuccess(null==(D=C.sent)?void 0:D.message),this.close({lastStore:null,refresh:!0,createAnother:!1,timezone:v,showGeoMap:this.showGeoMap,geoFenceData:null}),setTimeout(function(){g.reloadRegionData=!g.reloadRegionData},1e3),C.next=16;break;case 12:C.prev=12,C.t0=C.catch(3),this.gs.showToastError(C.t0.message),console.log(C.t0);case 16:return C.prev=16,this.dataService.updateRegion(!0),this.loading=!1,C.finish(16);case 20:case"end":return C.stop()}},f,this,[[3,12,16,20]])}))},this.deleteRegion=function(){return(0,y.mG)(l,void 0,void 0,x().mark(function p(){var f,g;return x().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this.loading=!0,f={region_id:this.regionId},u.prev=2,u.next=5,this.service.deleteStore(f);case 5:this.gs.showToastSuccess(null==(g=u.sent)?void 0:g.message),this.close({lastStore:null,refresh:!0,createAnother:!1,timezone:"",showGeoMap:!1,geoFenceData:null}),this.reloadRegionData=!this.reloadRegionData,u.next=15;break;case 11:u.prev=11,u.t0=u.catch(2),this.gs.showToastError(u.t0.message),console.log(u.t0);case 15:return u.prev=15,this.dataService.updateRegion(!0),this.loading=!1,u.finish(15);case 19:case"end":return u.stop()}},p,this,[[2,11,15,19]])}))},this.timezoneMapping=N.YL.slice()}return(0,I.Z)(s,[{key:"ngOnInit",value:function(){var t,a,r,l,p,f,g,v,u,k,n=this;if(this.regionId=null,this.onAddStoreForm(),this.storeData){this.editStore=!0,this.addNewStore=!1,this.title="Edit Store",this.regionId=null===(t=this.storeData)||void 0===t?void 0:t.id;var w,D=this.timezoneMapping.filter(function(C){return C.value===n.storeData.default_timezone});(null==D?void 0:D.length)>0&&(w=D[0].key),this.mapRadius=null===(a=this.storeData)||void 0===a?void 0:a.radius,this.lat=null===(r=this.storeData)||void 0===r?void 0:r.lat,this.lng=null===(l=this.storeData)||void 0===l?void 0:l.lng,this.storeAddress=null===(p=this.storeData)||void 0===p?void 0:p.address,this.showGeoMap=1===(null===(f=this.storeData)||void 0===f?void 0:f.is_geofencing),this.addStoreForm.get("store_title").setValue(null===(g=this.storeData)||void 0===g?void 0:g.title),this.addStoreForm.get("timezone").setValue(w),this.addStoreForm.get("is_geofencing").setValue(this.showGeoMap),this.addStoreForm.get("address").setValue(null===(v=this.storeData)||void 0===v?void 0:v.address),this.addStoreForm.get("latitude").setValue(null===(u=this.storeData)||void 0===u?void 0:u.lat),this.addStoreForm.get("longitude").setValue(null===(k=this.storeData)||void 0===k?void 0:k.lng),this.addStoreForm.get("radius").setValue(this.mapRadius),this.addStoreForm.get("radius_slider").setValue(this.mapRadius),this.buttonLabel="Update",this.showGeoMap&&this.updateValidations()}else this.title="New Store",this.addNewStore=!0,this.editStore=!1,this.addStoreForm.get("timezone").setValue(this.sameTimezone),this.buttonLabel="Add",this.showGeoMap&&(this.addStoreForm.get("is_geofencing").setValue(this.showGeoMap),this.mapRadius=this.geoFenceData?this.geoFenceData:null,this.updateValidations())}},{key:"onAddStoreForm",value:function(){this.addStoreForm=this.fb.group({store:[""],store_title:["",[c.kI.required,c.kI.maxLength(50),c.kI.pattern(/^[-.\/#&+,'()\w\s]*$/)]],timezone:["",c.kI.required],is_geofencing:!1,address:"",latitude:null,longitude:null,radius:N.Mb,radius_slider:N.bR,teamsArray:new c.Oe([])}),this.updateValidations()}},{key:"submit",value:function(n){n.valid?(this.loading=!0,this.addNewStore?this.add(n):this.update(n)):console.log("Invalid Form: ")}},{key:"formData",value:function(n){var t=!this.isLocationEnabled&&this.editStore?this.showGeoMap:this.addStoreForm.get("is_geofencing").value;this.geoFenceData=t?this.addStoreForm.get("radius").value:null;var a={region_title:this.addStoreForm.get("store_title").value,default_timezone:n,is_geofencing:t,address:t?this.addStoreForm.get("address").value:null,lat:t?this.addStoreForm.get("latitude").value:null,lng:t?this.addStoreForm.get("longitude").value:null,radius:t?this.addStoreForm.get("radius").value:null,teams:this.teams.controls.map(function(r){return{team_title:r.get("teamName").value}})};return this.editStore&&(a.region_id=this.regionId),a}},{key:"close",value:function(n){this.ref.close(n)}},{key:"updateCreateAnother",value:function(n){this.isAddAnotherStore=n}},{key:"onChange",value:function(n){this.showGeoMap=n,this.addStoreForm.get("is_geofencing").setValue(this.showGeoMap),this.addNewStore&&(this.addStoreForm.get("address").setValue(null),this.addStoreForm.get("latitude").setValue(null),this.addStoreForm.get("longitude").setValue(null)),this.updateValidations()}},{key:"onLocationValue",value:function(n){this.addStoreForm.get("address").setValue(null==n?void 0:n.location),this.addStoreForm.get("latitude").setValue(null==n?void 0:n.lat),this.addStoreForm.get("longitude").setValue(null==n?void 0:n.lng)}},{key:"form",get:function(){return this.addStoreForm.controls}},{key:"teams",get:function(){return this.form.teamsArray}}]),s}();return o.\u0275fac=function(i){return new(i||o)(e.Y36(c.qu),e.Y36(m.X4l),e.Y36(U),e.Y36(R.m),e.Y36(T.s))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-add-store"]],viewQuery:function(i,n){var t;1&i&&e.Gf(wn,5),2&i&&e.iGM(t=e.CRH())&&(n.ngForm=t.first)},inputs:{storeData:"storeData",isAddAnotherStore:"isAddAnotherStore",sameTimezone:"sameTimezone",showGeoMap:"showGeoMap",geoFenceData:"geoFenceData",isLocationEnabled:"isLocationEnabled"},decls:8,vars:2,consts:[[1,"modal_wrapper","add-store"],[1,"card_header"],[1,"title"],["icon","close",1,"cross_icon","hidden",3,"click"],["class","for_spinner modal_sidepanel add_timesheets",3,"nbSpinner",4,"ngIf"],[1,"for_spinner","modal_sidepanel","add_timesheets",3,"nbSpinner"],["id","form",3,"formGroup","ngSubmit"],["ngForm","ngForm"],[1,"mb-20"],[1,"flex","vertical_center","row-container","relative"],["nbTooltipPlacement","top","nbTooltip","Store",1,"sname-label"],[1,"fas","fa-store","icon-color"],[1,"mandatory"],[1,"store"],[3,"autofocus","placeholder","controlName","form"],[2,"position","absolute","width","100%",3,"key","form","isSubmitted"],[1,"flex","vertical_center","relative","row2-container"],["bTooltipPlacement","top","nbTooltip","Time Zone",1,"timezone-label"],[1,"fa","fa-globe","fa-stack","icon-color"],[1,"timezone-input"],[1,"name_resp",3,"controlName","form","showName","placeholder"],[1,"flex","vertical_center","row2-container","relative"],["nbTooltipPlacement","top","nbTooltip","Geo-fence",1,"geofence-label"],[1,"fas","fa-crosshairs","icon-color"],[1,"geofence-input"],[1,"child-container"],["labelPosition","end",1,"feature-toggle",3,"disabled","formControlName","checked","checkedChange"],["class","geofence-disabled",4,"ngIf"],[3,"form","autoInput","ngForm","lat","lng","mapRadius","showGeoFence","locationValue","geoFencing",4,"ngIf"],[1,"footer_button"],["class","create-another",4,"ngIf"],[1,"flex"],[3,"onClick"],["size","medium","type","submit","nbButton","","status","primary"],[3,"title","textToDisplay","proceedDelete",4,"ngIf"],[1,"geofence-disabled"],[3,"form","autoInput","ngForm","lat","lng","mapRadius","showGeoFence","locationValue","geoFencing"],[1,"create-another"],[2,"position","relative","top","3px",3,"checked","checkedChange"],[3,"title","textToDisplay","proceedDelete"],[1,"red-color","pointer",2,"position","relative","top","-22px"],[1,"fas","fa-trash","pointer"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0),e.TgZ(1,"nb-card"),e.TgZ(2,"nb-card-header",1),e.TgZ(3,"label"),e.TgZ(4,"b",2),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"nb-icon",3),e.NdJ("click",function(){return n.close({refresh:n.isAddAnotherStore,createAnother:n.isAddAnotherStore})}),e.qZA(),e.qZA(),e.YNc(7,An,39,26,"nb-card-body",4),e.qZA(),e.qZA()),2&i&&(e.xp6(5),e.hij("",n.title," "),e.xp6(2),e.Q6J("ngIf",n.addStoreForm))},directives:[m.Asz,m.ndF,m.fMN,d.O5,m.yKW,m.Q7R,c._Y,c.JL,c.sg,b.w5,m.jNv,Z.t,M.H,vn.H,m.BLq,c.JJ,c.u,b.x0,b.bf,xn,c.F,m.NTf,ee.r,m.DPz,Cn.D],styles:[".flex[_ngcontent-%COMP%]   .input_field[_ngcontent-%COMP%] {\n  width: 100%;\n}\n\n.add_another[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: flex-start;\n}\n\n.footer_button[_ngcontent-%COMP%] {\n  justify-content: flex-end;\n  margin-top: 30px;\n  margin-right: 9px;\n}\n\n.title[_ngcontent-%COMP%] {\n  display: contents;\n}\n\n.create-another[_ngcontent-%COMP%] {\n  position: absolute;\n  left: 18px;\n  max-width: 250px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n@media (max-width: 605px) and (min-width: 320px) {\n  .name_resp[_ngcontent-%COMP%] {\n    width: 100% !important;\n  }\n}\n\n.fa-stack[_ngcontent-%COMP%] {\n  width: 1.65em !important;\n}\n\n.row-container[_ngcontent-%COMP%] {\n  margin-bottom: 10px;\n  padding-top: 10px;\n  width: 100%;\n}\n\n.sname-label[_ngcontent-%COMP%] {\n  padding-right: 10px;\n  width: 7%;\n  display: inline-flex;\n}\n\n.store[_ngcontent-%COMP%] {\n  width: 100%;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n.info-icon[_ngcontent-%COMP%] {\n  width: 3%;\n  padding-right: 5px;\n}\n\n.row2-container[_ngcontent-%COMP%] {\n  padding-top: 15px;\n  width: 100%;\n  margin-bottom: 10px;\n}\n\n.timezone-label[_ngcontent-%COMP%] {\n  padding-right: 10px;\n  width: 7%;\n}\n\n.timezone-input[_ngcontent-%COMP%] {\n  width: 100%;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n.geofence-label[_ngcontent-%COMP%] {\n  padding-right: 10px;\n  width: 7%;\n}\n\n.geofence-input[_ngcontent-%COMP%] {\n  padding-right: 5px;\n  margin-left: 5px;\n  width: 18%;\n}\n\n.row2-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  padding-left: 3px;\n  font-size: 16px;\n}\n\n.child-container[_ngcontent-%COMP%] {\n  margin-left: 3px;\n  display: flex;\n  align-items: center;\n}\n\n.add-store[_ngcontent-%COMP%] {\n  width: 700px;\n}\n\n.geofence-disabled[_ngcontent-%COMP%] {\n  width: 48%;\n  margin-left: 15px;\n  background-color: #fafad2;\n  box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;\n  border-radius: 8px;\n  padding-left: 8px;\n  \n  font-weight: 700;\n  color: #686e9b;\n  padding: 8px;\n}\n\n@media (max-width: 650px) {\n  .store[_ngcontent-%COMP%] {\n    padding-left: 15px;\n  }\n\n  .timezone-input[_ngcontent-%COMP%] {\n    padding-left: 15px;\n  }\n\n  .geofence-input[_ngcontent-%COMP%] {\n    padding-right: 5px;\n    margin-left: 12px;\n    width: 46%;\n  }\n\n  .geofence-label[_ngcontent-%COMP%] {\n    width: 10%;\n  }\n}"]}),o}(),te=_(8457),Mn=_(9894),B=_(1201),Pn=_(82),On=["ngForm"],Sn=function(s){return{selected:s}};function qn(o,s){if(1&o){var i=e.EpF();e.ynx(0),e.TgZ(1,"span",40),e.TgZ(2,"i",41),e.NdJ("click",function(){var l=e.CHM(i).$implicit,p=e.oxw(2).$implicit;return e.oxw(2).setIcon(p,l.value)}),e.qZA(),e.qZA(),e.BQk()}if(2&o){var n=s.$implicit,t=e.oxw(2).$implicit;e.xp6(2),e.Tol(n.value),e.Q6J("ngClass",e.VKq(3,Sn,t.controls.icon.value.includes(n.key)))}}function Fn(o,s){1&o&&(e.TgZ(0,"div",43),e._uU(1," A minimum of 1 hour slot is required "),e.qZA())}function Un(o,s){if(1&o&&(e.ynx(0),e.YNc(1,Fn,2,0,"div",42),e.BQk()),2&o){var i=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf",1==(null==i.errors?null:i.errors.invalidSlot))}}var In=function(){return{standalone:!0}};function Jn(o,s){if(1&o){var i=e.EpF();e.TgZ(0,"div",44),e._uU(1," Add shift to: "),e.TgZ(2,"nb-radio-group",45),e.NdJ("ngModelChange",function(a){return e.CHM(i),e.oxw(4).isAllChecked=a}),e.TgZ(3,"nb-radio",46),e._uU(4,"All stores"),e.qZA(),e.TgZ(5,"nb-radio",47),e._uU(6,"Current store"),e.qZA(),e.qZA(),e.qZA()}if(2&o){var n=e.oxw(4);e.xp6(2),e.Q6J("ngModel",n.isAllChecked)("ngModelOptions",e.DdM(2,In))}}function Nn(o,s){if(1&o){var i=e.EpF();e.TgZ(0,"span",48),e.NdJ("click",function(){e.CHM(i);var t=e.oxw(2),a=t.$implicit,r=t.index;return e.oxw(2).deleteShift(a,r)}),e._UZ(1,"i",49),e.qZA()}}var Dn=function(s){return{"edit-tiles":s}};function Rn(o,s){if(1&o&&(e.TgZ(0,"div",19),e.TgZ(1,"div",20),e.YNc(2,qn,3,5,"ng-container",11),e.qZA(),e.TgZ(3,"div",20),e.TgZ(4,"div",21),e.TgZ(5,"i",22),e.TgZ(6,"span",23),e._uU(7," *"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"div",24),e._UZ(9,"app-text-input",25),e._UZ(10,"app-error-message",26),e.qZA(),e.qZA(),e.TgZ(11,"div",27),e.TgZ(12,"span",28),e.TgZ(13,"div",29),e.TgZ(14,"i",30),e.TgZ(15,"span",23),e._uU(16," *"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",31),e._UZ(18,"app-timer-input",32),e._UZ(19,"app-error-message",33),e.qZA(),e.qZA(),e.TgZ(20,"span",28),e.TgZ(21,"div",34),e._UZ(22,"i",35),e.qZA(),e.TgZ(23,"div",31),e._UZ(24,"app-timer-input",32),e._UZ(25,"app-error-message",33),e.YNc(26,Un,2,1,"ng-container",7),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"div",36),e._UZ(28,"div",37),e.YNc(29,Jn,7,3,"div",38),e.qZA(),e.YNc(30,Nn,2,0,"span",39),e.qZA()),2&o){var i=e.oxw(),n=i.$implicit,t=i.index;e.oxw();var a=e.MAs(2),r=e.oxw();e.Q6J("ngClass",e.VKq(25,Dn,r.isEdit)),e.xp6(2),e.Q6J("ngForOf",r.shiftIcons),e.xp6(7),e.Q6J("placeholder","Enter shift name")("controlName","name")("form",n),e.xp6(1),e.Q6J("key","name")("form",n)("isSubmitted",a.submitted),e.xp6(8),e.Q6J("onlyTime",!0)("form",n)("controlName","shiftStartTime")("placeholder","Enter shift start time"),e.xp6(1),e.Q6J("key","shiftStartTime")("form",n)("isSubmitted",a.submitted),e.xp6(5),e.Q6J("onlyTime",!0)("form",n)("controlName","shiftEndTime")("placeholder","Enter shift end time"),e.xp6(1),e.Q6J("key","shiftEndTime")("form",n)("isSubmitted",a.submitted),e.xp6(1),e.Q6J("ngIf",!n.controls.shiftEndTime.errors),e.xp6(3),e.Q6J("ngIf",!r.isEdit),e.xp6(1),e.Q6J("ngIf",r.isEdit&&0==r.store.shifts[t].has_tasks)}}function Qn(o,s){if(1&o&&(e.ynx(0),e.YNc(1,Rn,31,27,"div",18),e.BQk()),2&o){var i=s.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!n.isEdit||0==i.controls.is_deleted.value)}}function zn(o,s){1&o&&(e.TgZ(0,"div",50),e._UZ(1,"app-no-records",51),e.qZA()),2&o&&(e.xp6(1),e.Q6J("display",!0)("animation","taskcomment")("textMessage","No shifts."))}function En(o,s){if(1&o){var i=e.EpF();e.TgZ(0,"span",52),e.TgZ(1,"nb-checkbox",53),e.NdJ("checkedChange",function(a){return e.CHM(i),e.oxw(2).isAddAnother=a}),e._uU(2," Add another shift "),e.qZA(),e.qZA()}if(2&o){var n=e.oxw(2);e.xp6(1),e.Q6J("checked",n.isAddAnother)}}function Ln(o,s){if(1&o){var i=e.EpF();e.ynx(0),e.TgZ(1,"form",8,9),e.NdJ("ngSubmit",function(){e.CHM(i);var a=e.MAs(2);return e.oxw().submit(a)}),e.TgZ(3,"div",10),e.YNc(4,Qn,2,1,"ng-container",11),e.YNc(5,zn,2,3,"div",12),e.qZA(),e.TgZ(6,"div",13),e.YNc(7,En,3,1,"span",14),e.TgZ(8,"span",15),e.TgZ(9,"app-button",16),e.NdJ("onClick",function(){return e.CHM(i),e.oxw().close()}),e._uU(10,"Cancel"),e.qZA(),e._UZ(11,"app-submit-button",17),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&o){var n=e.oxw();e.xp6(1),e.Q6J("formGroup",n.AddShiftForm),e.xp6(3),e.Q6J("ngForOf",n.shifts.controls),e.xp6(1),e.Q6J("ngIf",n.isEdit&&n.hasAllDeletedShifts()),e.xp6(2),e.Q6J("ngIf",!n.isEdit&&(null==n.store||null==n.store.shifts?null:n.store.shifts.length)<5),e.xp6(4),e.Q6J("form",n.AddShiftForm)("label",n.isEdit?"Update":"Add")}}var ie=function(){var o=function(){function s(i,n,t,a){var r=this;(0,J.Z)(this,s),this.fb=i,this.ref=n,this.service=t,this.gs=a,this.shiftIcons=[{value:"fas fa-mountain-sun blue",key:"fa-mountain-sun"},{value:"fas fa-sun orange",key:"fa-sun"},{value:"fas fa-moon dark-blue",key:"fa-moon"},{value:"fas fa-utensils teal",key:"fa-utensils"},{value:"fas fa-person-walking-luggage greyish-blue",key:"fa-person-walking-luggage"},{value:"fas fa-mug-hot  brown",key:"fa-mug-hot"},{value:"fas fa-people-arrows  purple",key:"fa-people-arrows"},{value:"fas fa-plane greyish-blue",key:"fa-plane greyish-blue"},{value:"fas fa-calendar-xmark dark-blue",key:"fa-calendar-xmark dark-blue"},{value:"fas fa-person-walking-arrow-loop-left teal",key:"fa-person-walking-arrow-loop-left"}],this.AddShiftFormValues=function(){r.AddShiftForm=r.fb.group({shiftsArray:new c.Oe([r.fb.group({id:[null],name:["",[c.kI.required,c.kI.maxLength(50)]],icon:[r.shiftIcons[0].value,[c.kI.required]],shiftStartTime:["",[c.kI.required]],shiftEndTime:["",[c.kI.required]]},{validator:[r.timeValidator]})])})},this.EditShiftFormValues=function(){r.AddShiftForm=r.fb.group({shiftsArray:r.populateShifts()})},this.timeValidator=function(l){var p;if(null!=l.get("shiftStartTime").value&&""!=l.get("shiftEndTime").value&&null!=l.get("shiftStartTime").value&&""!=l.get("shiftStartTime").value){var f=new Date(l.get("shiftStartTime").value),g=new Date(l.get("shiftEndTime").value);f.setSeconds(0,0),g.setSeconds(0,0);var u,v=(g.getTime()-f.getTime())/6e4;v>0&&v<60&&(u=!0);var k={};return u&&(k={invalidSlot:u}),0===(null===(p=Object.keys(k))||void 0===p?void 0:p.length)&&(null==f||f.setHours(0,0,0,0),null==g||g.setHours(23,59,0,0)),k}return null},this.store=this.store,this.isAddAnother=!1,this.isAllChecked="0"}return(0,I.Z)(s,[{key:"ngOnInit",value:function(){this.isEdit?this.EditShiftFormValues():this.AddShiftFormValues()}},{key:"close",value:function(n){this.ref.close(n)}},{key:"setIcon",value:function(n,t){n.controls.icon.setValue(t)}},{key:"deleteShift",value:function(n){n.controls.is_deleted.setValue(1)}},{key:"hasAllDeletedShifts",value:function(){var n=this.shifts.controls.filter(function(t){return 1!==t.value.is_deleted});return!(n&&n.length>0)}},{key:"populateShifts",value:function(){var n=this,t=new c.Oe([]);return this.store.shifts.forEach(function(a){a.start_time&&t.push(n.fb.group({id:[a.id],name:[a.name,[c.kI.required,c.kI.maxLength(50)]],icon:[a.icon,[c.kI.required]],shiftStartTime:[n.gs.changeTimezone(new Date(a.start_time),n.store.default_timezone),[c.kI.required]],shiftEndTime:[n.gs.changeTimezone(new Date(a.end_time),n.store.default_timezone),[c.kI.required]],is_deleted:0},{validator:[n.timeValidator]}))}),t}},{key:"form",get:function(){return this.AddShiftForm.controls}},{key:"shifts",get:function(){return this.form.shiftsArray}},{key:"submit",value:function(n){n.valid&&(this.loading=!0,this.isEdit?this.editShift():this.addShift())}},{key:"getShifts",value:function(){var n=this,t=[];return this.shifts.controls.forEach(function(a){t.push({id:n.isEdit?a.get("id").value:null,name:a.get("name").value,start_time:a.get("shiftStartTime").value.toLocaleTimeString("it-IT"),end_time:a.get("shiftEndTime").value.toLocaleTimeString("it-IT"),icon:a.get("icon").value,is_deleted:n.isEdit?a.get("is_deleted").value:0})}),t}},{key:"editShift",value:function(){return(0,y.mG)(this,void 0,void 0,x().mark(function n(){var t,a;return x().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return t={region_id:this.store.id,shifts:this.getShifts()},l.prev=1,l.next=4,this.service.updateShifts(t);case 4:this.gs.showToastSuccess(null==(a=l.sent)?void 0:a.message),this.close(!0),l.next=13;break;case 9:l.prev=9,l.t0=l.catch(1),this.gs.showToastError(l.t0.message),console.log(l.t0);case 13:return l.prev=13,this.loading=!1,l.finish(13);case 16:case"end":return l.stop()}},n,this,[[1,9,13,16]])}))}},{key:"addShift",value:function(){return(0,y.mG)(this,void 0,void 0,x().mark(function n(){var t,a;return x().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return t={region_id:"1"===this.isAllChecked?null:this.store.id,shift:this.getShifts()[0]},l.prev=1,l.next=4,this.service.addNewShift(t);case 4:this.gs.showToastSuccess(null==(a=l.sent)?void 0:a.message),this.close(!this.isAddAnother),this.isAddAnother&&(this.store.shifts?this.store.shifts.push(t.shift):this.store.shifts=[t.shift]),l.next=14;break;case 10:l.prev=10,l.t0=l.catch(1),this.gs.showToastError(l.t0.message),console.log(l.t0);case 14:return l.prev=14,this.loading=!1,l.finish(14);case 17:case"end":return l.stop()}},n,this,[[1,10,14,17]])}))}}]),s}();return o.\u0275fac=function(i){return new(i||o)(e.Y36(c.qu),e.Y36(m.X4l),e.Y36(U),e.Y36(R.m))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-add-shift"]],viewQuery:function(i,n){var t;1&i&&e.Gf(On,5),2&i&&e.iGM(t=e.CRH())&&(n.ngForm=t.first)},inputs:{store:"store",isEdit:"isEdit"},decls:11,vars:5,consts:[[1,"modal_wrapper","add-shift"],[1,"card_header"],[1,"header-container"],[1,"title",2,"text-align","center"],[1,"store-name"],[1,"fas","fa-store"],[3,"nbSpinner"],[4,"ngIf"],["id","form",1,"reward-form",3,"formGroup","ngSubmit"],["ngForm","ngForm"],[1,"wrapper"],[4,"ngFor","ngForOf"],["class","delete-shifts",4,"ngIf"],[1,"footer_button"],["class","create-another",4,"ngIf"],[1,"flex"],[3,"onClick"],[3,"form","label"],["class","mb-10 ",3,"ngClass",4,"ngIf"],[1,"mb-10",3,"ngClass"],[1,"flex","vertical_center","row-container","relative"],["bTooltipPlacement","top","nbTooltip","Shift name",1,"sname-label"],[1,"fas","fa-user-clock","icon-color"],[1,"mandatory"],[1,"store"],[3,"placeholder","controlName","form"],[2,"position","absolute","width","100%",3,"key","form","isSubmitted"],[1,"flex","vertical_center","row-container","resp-container","relative"],[1,"fields-wrapper"],["nbTooltipPlacement","top","nbTooltip","Shift start/end time",1,"sname-label"],[1,"fas","fa-clock","icon-color"],[1,"shift-time"],[3,"onlyTime","form","controlName","placeholder"],[3,"key","form","isSubmitted"],["nbTooltipPlacement","top","nbTooltip","Shift end",1,"sname-label"],[1,"fa","fa-arrow-right","icon-color","next-icon"],[1,"flex","vertical_center","row-container","relative","assign-shift"],[1,"sname-label",2,"width","8%"],["class","option-items",4,"ngIf"],["class","delete_icon",3,"click",4,"ngIf"],[2,"padding","0px"],["aria-hidden","true",1,"shift-icon",2,"font-size","18px !important",3,"ngClass","click"],["class","red","style","font-size: 11px;position: absolute;margin-top: 3px;",4,"ngIf"],[1,"red",2,"font-size","11px","position","absolute","margin-top","3px"],[1,"option-items"],[1,"add-shift-option",3,"ngModel","ngModelOptions","ngModelChange"],["value","1",1,"option-txt"],["value","0",1,"option-txt"],[1,"delete_icon",3,"click"],["nbTooltipPlacement","top","nbTooltip","Delete shift.",1,"fa","fa-times-circle"],[1,"delete-shifts"],[3,"display","animation","textMessage"],[1,"create-another"],[2,"position","relative","top","3px",3,"checked","checkedChange"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0),e.TgZ(1,"nb-card"),e.TgZ(2,"nb-card-header",1),e.TgZ(3,"span",2),e.TgZ(4,"label",3),e._uU(5),e.qZA(),e.TgZ(6,"span",4),e._UZ(7,"i",5),e._uU(8),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"nb-card-body",6),e.YNc(10,Ln,12,6,"ng-container",7),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.xp6(5),e.AsE("",n.isEdit?"Edit ":"Add "," shift",(null==n.store.shifts?null:n.store.shifts.length)>1?"s":"",""),e.xp6(3),e.Oqu(null==n.store?null:n.store.title),e.xp6(1),e.Q6J("nbSpinner",n.loading),e.xp6(1),e.Q6J("ngIf",n.AddShiftForm))},directives:[m.Asz,m.ndF,m.yKW,m.Q7R,d.O5,c._Y,c.JL,c.sg,b.w5,d.sg,d.mk,m.jNv,Z.t,M.H,Mn.T,m.MFI,c.JJ,c.On,b.x0,b.bf,m.r3g,B.k,m.NTf,ee.r,Pn.w],styles:[".selected[_ngcontent-%COMP%] {\n  border: 2px solid #7b68ee;\n  color: #e6beff;\n  border-radius: 50%;\n  padding: 2px;\n}\n\n.add-shift[_ngcontent-%COMP%] {\n  width: 550px;\n}\n\n.add-shift[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-header.card_header[_ngcontent-%COMP%] {\n  padding-top: 10px !important;\n  padding-bottom: 8px !important;\n}\n\n.add-shift[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-header.card_header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%] {\n  margin: 0;\n  font-size: 20px;\n  margin-bottom: 5px;\n}\n\n.store-name[_ngcontent-%COMP%] {\n  background: white !important;\n  color: #7b68ee !important;\n  border-radius: 20px;\n  padding: 1px;\n  display: inline-block;\n  text-align: center;\n  min-width: 54px;\n  padding-right: 10px;\n  padding-left: 10px;\n}\n\n.store-name[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  margin-right: 5px;\n  color: #7b68ee;\n}\n\n.row-container[_ngcontent-%COMP%] {\n  margin-bottom: 10px;\n  padding-top: 17px;\n  width: 100%;\n  display: flex;\n  align-items: baseline;\n  justify-content: center;\n}\n\n.sname-label[_ngcontent-%COMP%] {\n  padding-left: 5px;\n  padding-right: 5px;\n  display: inline-flex;\n}\n\n.store[_ngcontent-%COMP%] {\n  width: 100%;\n  padding-right: 5px;\n}\n\n.shift-time[_ngcontent-%COMP%] {\n  width: 100%;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n.footer_button[_ngcontent-%COMP%] {\n  justify-content: flex-end;\n  margin-top: 30px;\n  margin-right: 9px;\n  align-items: center;\n}\n\n.create-another[_ngcontent-%COMP%] {\n  position: absolute;\n  left: 25px;\n  max-width: 250px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.shift-icon[_ngcontent-%COMP%] {\n  background: white;\n  width: 35px;\n  height: 35px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;\n  cursor: pointer;\n  margin-left: 8px;\n  margin-right: 8px;\n}\n\n.edit-tiles[_ngcontent-%COMP%] {\n  background: white;\n  padding: 10px;\n  border-radius: 10px;\n  padding-top: 10px;\n  padding-bottom: 15px;\n  position: relative;\n}\n\n.wrapper[_ngcontent-%COMP%] {\n  min-height: 32vh;\n  max-height: 60vh;\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n\n.delete_icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  font-size: 15px;\n  color: #ff3d71;\n  cursor: pointer;\n  z-index: 1000;\n}\n\n.delete_icon[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 0;\n  right: 0;\n}\n\n@media (max-width: 600px) {\n  .row-container[_ngcontent-%COMP%] {\n    max-height: calc(73vh - 55px);\n    overflow: auto;\n    padding: 10px;\n  }\n}\n\n@media (max-width: 930px) {\n  .resp-container[_ngcontent-%COMP%] {\n    flex-direction: column;\n  }\n\n  .fields-wrapper[_ngcontent-%COMP%] {\n    display: flex !important;\n    width: 100% !important;\n    margin-bottom: 20px;\n  }\n\n  .shift-time[_ngcontent-%COMP%] {\n    width: 100% !important;\n  }\n\n  .next-icon[_ngcontent-%COMP%] {\n    width: 24px !important;\n  }\n}\n\n.fields-wrapper[_ngcontent-%COMP%] {\n  display: flex !important;\n  width: 100% !important;\n  align-items: baseline;\n}\n\n.assign-shift[_ngcontent-%COMP%] {\n  padding-top: 10px !important;\n}\n\n.option-items[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  width: 94%;\n}\n\n.add-shift-option[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  margin-left: 10px;\n}\n\n.option-txt[_ngcontent-%COMP%] {\n  margin-right: 15px;\n  z-index: 40;\n}"]}),o}(),Vn=_(4605),Yn=_(5116);function Gn(o,s){if(1&o){var i=e.EpF();e.TgZ(0,"span",10),e.TgZ(1,"button",43),e.NdJ("click",function(){return e.CHM(i),e.oxw().onAddStore()}),e._uU(2,"Add Store"),e.qZA(),e.qZA()}}function Wn(o,s){if(1&o){var i=e.EpF();e.TgZ(0,"mat-paginator",44),e.NdJ("page",function(a){e.CHM(i);var r=e.oxw();return r.pageEvent=a,r.getData()}),e.qZA()}if(2&o){var n=e.oxw();e.Q6J("length",n.paginator.total_records)("pageIndex",n.paginator.page_no-1)("pageSize",n.paginator.page_size)("pageSizeOptions",n.pageSizes)}}function Hn(o,s){1&o&&(e.TgZ(0,"th",45),e._uU(1,"Store Name"),e.qZA())}function Bn(o,s){if(1&o){var i=e.EpF();e.TgZ(0,"span",51),e.NdJ("click",function(t){e.CHM(i);var a=e.oxw(2);return t.stopPropagation(),a.goToSettings()}),e._UZ(1,"img",52),e._uU(2," Add to open shift group"),e.qZA()}}function jn(o,s){if(1&o&&(e.TgZ(0,"td",46),e.TgZ(1,"span",47),e.TgZ(2,"span",48),e.TgZ(3,"label",49),e._uU(4,"Store Name"),e.qZA(),e.TgZ(5,"span"),e._uU(6),e.qZA(),e.qZA(),e.YNc(7,Bn,3,0,"span",50),e.qZA(),e.qZA()),2&o){var i=s.$implicit;e.xp6(6),e.Oqu(null==i?null:i.title),e.xp6(1),e.Q6J("ngIf",1==i.group_missing)}}function $n(o,s){1&o&&(e.TgZ(0,"th",53),e._uU(1,"Shifts"),e.qZA())}function Kn(o,s){if(1&o&&(e.TgZ(0,"span",59),e.TgZ(1,"div",60),e._UZ(2,"i",61),e.qZA(),e.TgZ(3,"div",62),e._uU(4),e.ALo(5,"date"),e.ALo(6,"date"),e.qZA(),e.qZA()),2&o){var i=e.oxw().$implicit,n=e.oxw(2).$implicit,t=e.oxw();e.xp6(2),e.Tol(i.icon),e.Q6J("nbTooltip",i.name),e.xp6(2),e.AsE(" ",e.xi3(5,5,t.changeTimezone(n,i.start_time),"hh:mm a")," - ",e.xi3(6,8,t.changeTimezone(n,i.end_time),"hh:mm a")," ")}}function Xn(o,s){if(1&o&&(e.TgZ(0,"div",57),e.YNc(1,Kn,7,11,"span",58),e.qZA()),2&o){var i=s.$implicit;e.xp6(1),e.Q6J("ngIf",i.start_time)}}function et(o,s){if(1&o&&(e.ynx(0),e.YNc(1,Xn,2,1,"div",56),e.BQk()),2&o){var i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",i.shifts)}}function nt(o,s){if(1&o&&(e.TgZ(0,"td",54),e.TgZ(1,"span",47),e.TgZ(2,"label",49),e._uU(3,"Shifts"),e.qZA(),e.YNc(4,et,2,1,"ng-container",55),e.qZA(),e.qZA()),2&o){var i=s.$implicit;e.xp6(4),e.Q6J("ngIf",i.shifts)}}function tt(o,s){1&o&&(e.TgZ(0,"th",63),e._uU(1,"Store Pin"),e.qZA())}function it(o,s){1&o&&(e.TgZ(0,"span",69),e._uU(1,"****"),e.qZA())}function ot(o,s){if(1&o&&(e.TgZ(0,"span",70),e._uU(1),e.qZA()),2&o){var i=e.oxw().$implicit;e.xp6(1),e.hij(" ",i.pin," ")}}var at=function(s,i){return{"fa-eye show-pin":s,"fa-eye-slash hide-pin":i}};function rt(o,s){if(1&o){var i=e.EpF();e.TgZ(0,"td",64),e.TgZ(1,"span",47),e.TgZ(2,"span",65),e.TgZ(3,"label",49),e._uU(4,"Store Pin"),e.qZA(),e.YNc(5,it,2,0,"span",66),e.YNc(6,ot,2,1,"span",67),e.TgZ(7,"i",68),e.NdJ("click",function(a){var l=e.CHM(i).$implicit;return e.oxw().togglePin(a,l)}),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){var n=s.$implicit;e.xp6(5),e.Q6J("ngIf",!n.showPin),e.xp6(1),e.Q6J("ngIf",n.showPin),e.xp6(1),e.Q6J("ngClass",e.WLB(3,at,!n.showPin,n.showPin))}}function st(o,s){1&o&&(e.TgZ(0,"th",71),e._uU(1," Time Zone "),e.qZA())}function lt(o,s){if(1&o&&(e.TgZ(0,"td",72),e.TgZ(1,"span",47),e.TgZ(2,"label",49),e._uU(3,"Time Zone"),e.qZA(),e.TgZ(4,"span"),e._uU(5),e.qZA(),e.qZA(),e.qZA()),2&o){var i=s.$implicit;e.xp6(5),e.Oqu(null==i?null:i.timezone)}}function dt(o,s){if(1&o&&(e.TgZ(0,"th",73),e._uU(1," Location "),e.qZA()),2&o){var i=e.oxw();e.Q6J("hidden",!i.isLocationEnabled)}}function pt(o,s){if(1&o&&(e.TgZ(0,"td",74),e.TgZ(1,"span",47),e.TgZ(2,"label",49),e._uU(3,"Location"),e.qZA(),e.TgZ(4,"span"),e._uU(5),e.qZA(),e.qZA(),e.qZA()),2&o){var i=s.$implicit,n=e.oxw();e.Q6J("hidden",!n.isLocationEnabled),e.xp6(5),e.Oqu(null==i?null:i.address)}}function ct(o,s){if(1&o&&(e.TgZ(0,"th",75),e._uU(1," Fence Radius "),e._UZ(2,"br"),e.TgZ(3,"span",76),e._uU(4,"(meters) "),e.qZA(),e.qZA()),2&o){var i=e.oxw();e.Q6J("hidden",!i.isLocationEnabled)}}function ut(o,s){if(1&o&&(e.TgZ(0,"td",77),e.TgZ(1,"label",49),e._uU(2,"Geo Fence"),e.qZA(),e._uU(3),e.qZA()),2&o){var i=s.$implicit,n=e.oxw();e.Q6J("hidden",!n.isLocationEnabled),e.xp6(3),e.hij(" ",null==i?null:i.radius," ")}}function gt(o,s){1&o&&(e.TgZ(0,"th",78),e._uU(1,"Actions"),e.qZA())}function ft(o,s){if(1&o){var i=e.EpF();e.TgZ(0,"td",79),e.NdJ("click",function(a){return a.stopPropagation()}),e.TgZ(1,"label",49),e._uU(2,"Actions"),e.qZA(),e.TgZ(3,"span",80),e.TgZ(4,"span",81),e.NdJ("click",function(){var r=e.CHM(i).$implicit;return e.oxw().onAddShift(r)}),e.qZA(),e.TgZ(5,"i",82),e.NdJ("click",function(){var r=e.CHM(i).$implicit;return e.oxw().onEditShift(r)}),e.qZA(),e.qZA(),e.qZA()}if(2&o){var n=s.$implicit;e.xp6(4),e.Udp("visibility",(null==n.shifts?null:n.shifts.length)<6?"":"hidden"),e.xp6(1),e.Udp("visibility",(null==n.shifts?null:n.shifts.length)>0?"":"hidden")}}function mt(o,s){1&o&&e._UZ(0,"tr",83)}var ht=function(s){return{disable_row:s}};function _t(o,s){if(1&o){var i=e.EpF();e.TgZ(0,"tr",84),e.NdJ("click",function(){var r=e.CHM(i).$implicit;return e.oxw().editStore(r)}),e.qZA()}2&o&&e.Q6J("ngClass",e.VKq(1,ht,s.$implicit.is_empty))}var vt=function(){var o=function(){function s(i,n,t,a,r){var l=this;(0,J.Z)(this,s),this.dialogService=i,this.router=n,this.gs=t,this.service=a,this.dataService=r,this.displayedColumns=["name","shifts","timezone","location","geo_fence","action"],this.dataSource=new P.by([]),this.showGeoMap=!1,this.timezoneMapping=N.YL.slice(),this.dataService.getConfigurations(!1).then(function(p){var f,g;l.isLocationEnabled=1===(null===(f=p.company)||void 0===f?void 0:f.is_location),l.isAzalioPlay=1===(null===(g=p.company)||void 0===g?void 0:g.is_azalio_play)}).finally(function(){l.isAzalioPlay&&(l.displayedColumns=["name","shifts","pin","timezone","location","geo_fence","action"])})}return(0,I.Z)(s,[{key:"ngOnInit",value:function(){this.disable=!0,this.openAddView=!0,this.getData(),this.geoFenceData=null}},{key:"changeTimezone",value:function(n,t){return this.gs.changeTimezone(new Date(t),n.default_timezone)}},{key:"getZone",value:function(n){var t=this.timezoneMapping.filter(function(a){return a.value==n.default_timezone});return t&&t[0]?t[0].key:""}},{key:"onAddShift",value:function(n){var t=this;this.dialogService.open(ie,{hasBackdrop:!0,closeOnBackdropClick:!1,context:{store:n,isEdit:!1}}).onClose.subscribe(function(a){a?t.getData():0==a&&(t.onAddShift(n),t.getData())})}},{key:"onEditShift",value:function(n){var t=this;this.dialogService.open(ie,{hasBackdrop:!0,closeOnBackdropClick:!1,context:{store:n,isEdit:!0}}).onClose.subscribe(function(a){a&&t.getData()})}},{key:"onAddStore",value:function(){var n=this;this.storeData=null,this.dialogService.open(ne,{hasBackdrop:!0,closeOnBackdropClick:!1,context:{storeData:this.storeData,isAddAnotherStore:this.isAddAnotherStore,sameTimezone:this.timezone,showGeoMap:this.showGeoMap,geoFenceData:this.geoFenceData,isLocationEnabled:this.isLocationEnabled}}).onClose.subscribe(function(t){t.refresh?(n.getData(t.lastStore),n.storeData=null,n.openAddView=!1,n.isAddAnotherStore=!1,n.timezone=null,n.showGeoMap=!1,n.geoFenceData=null):!t.refresh&&t.createAnother?(n.storeData=null,n.openAddView=!0,n.isAddAnotherStore=t.createAnother,n.timezone=t.timezone,n.showGeoMap=t.showGeoMap,n.geoFenceData=t.geoFenceData,n.getData(),n.onAddStore()):(n.storeData=null,n.openAddView=!1,n.isAddAnotherStore=!1,n.timezone=null,n.showGeoMap=!1,n.geoFenceData=null)})}},{key:"editStore",value:function(n){var t=this;this.gs.logEvents("edit_store"),this.storeData=n,this.dialogService.open(ne,{hasBackdrop:!0,closeOnBackdropClick:!1,context:{storeData:this.storeData,isAddAnotherStore:this.isAddAnotherStore,isLocationEnabled:this.isLocationEnabled}}).onClose.subscribe(function(a){a.refresh?(t.getData(),t.storeData=null,t.openAddView=!1,t.isAddAnotherStore=!1):(t.openAddView=!1,t.isAddAnotherStore=!1)})}},{key:"getData",value:function(){var n=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.dataSource=null,this.loading=!0,this.service.getAllStores(this.searchText,this.pageEvent).then(function(a){var r,l,p;t&&(null===(r=a.stores)||void 0===r?void 0:r.length)>1&&(a.stores=a.stores.filter(function(f){return f.id!==t.id}),a.stores.unshift(t)),n.dataSource=null==a?void 0:a.stores.map(function(f){var g,v=n.timezoneMapping.filter(function(u){return u.value===f.default_timezone});return Object.assign(Object.assign({},f),{timezone:null===(g=v[0])||void 0===g?void 0:g.name})}),n.paginator=null==a?void 0:a.pagination,n.emptySearchResults=!(0!==(null===(l=null==a?void 0:a.stores)||void 0===l?void 0:l.length)||!n.searchText),n.emptyResults=0===(null===(p=null==a?void 0:a.stores)||void 0===p?void 0:p.length)&&!n.searchText}).catch(function(a){console.log(a)}).finally(function(){n.loading=!1})}},{key:"goToSettings",value:function(){this.router.navigate(["settings/advanced-settings"])}},{key:"onSearch",value:function(n){this.gs.logEvents("search_store"),this.searchText=n.trim(),this.pageEvent&&(this.pageEvent.pageIndex=0),this.getData()}},{key:"onSearchAll",value:function(n){this.gs.logEvents("search_store"),this.searchText=n.trim(),this.getData()}},{key:"canDeactivate",value:function(){return!this.disable}},{key:"togglePin",value:function(n,t){n.stopPropagation(),t.showPin=null==t.showPin||!t.showPin}}]),s}();return o.\u0275fac=function(i){return new(i||o)(e.Y36(m.Gln),e.Y36(A.F0),e.Y36(R.m),e.Y36(U),e.Y36(T.s))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-stores-details"]],viewQuery:function(i,n){var t;1&i&&e.Gf(te.NW,5),2&i&&e.iGM(t=e.CRH())&&(n.MatPaginator=t.first)},decls:47,vars:13,consts:[[3,"loading"],[1,"for_spinner",2,"height","100vh","top","-25px"],[1,"stores-wrapper"],[1,"title"],[2,"color","#6e689b"],[1,"stores-header"],[1,"sub-title"],[2,"color","#7b68ee"],[1,"child2"],[1,"resp-container"],[1,"resp-search"],[3,"placeholder","showHelperButton","searchEvent","searchAll"],["class","resp-search",4,"ngIf"],[1,"stores-pagination"],["showFirstLastButtons","",3,"length","pageIndex","pageSize","pageSizeOptions","page",4,"ngIf"],[1,"table-height"],["mat-table","",1,"mat-elevation-z8","stores-table",3,"dataSource"],["table",""],["matColumnDef","name"],["mat-header-cell","","style","width: 12%;",4,"matHeaderCellDef"],["mat-cell","","style","width: 12%",4,"matCellDef"],["matColumnDef","shifts"],["mat-header-cell","","style","width: 20%;",4,"matHeaderCellDef"],["mat-cell","","style","width: 20%",4,"matCellDef"],["matColumnDef","pin"],["mat-header-cell","","style","width: 10%;",4,"matHeaderCellDef"],["mat-cell","","style","width: 10%",4,"matCellDef"],["matColumnDef","timezone"],["mat-header-cell","","style","width: 13%;",4,"matHeaderCellDef"],["mat-cell","","style","width: 13%;",4,"matCellDef"],["matColumnDef","location"],["mat-header-cell","","style","width: 25%;",3,"hidden",4,"matHeaderCellDef"],["mat-cell","","style","width: 25%;",3,"hidden",4,"matCellDef"],["matColumnDef","geo_fence"],["mat-header-cell","","style","width: 12%;",3,"hidden",4,"matHeaderCellDef"],["mat-cell","","style","width: 12%;",3,"hidden",4,"matCellDef"],["matColumnDef","action"],["mat-header-cell","","style","width: 8%;","class","actions",4,"matHeaderCellDef"],["mat-cell","","style","width: 8%;","class","actions",3,"click",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","showhim",3,"ngClass","click",4,"matRowDef","matRowDefColumns"],[3,"display","animation","animation2","textMessage"],[3,"display"],["size","medium","type","submit","nbButton","","status","primary",3,"click"],["showFirstLastButtons","",3,"length","pageIndex","pageSize","pageSizeOptions","page"],["mat-header-cell","",2,"width","12%"],["mat-cell","",2,"width","12%"],[1,"resp-view"],[1,"truncate-name"],[1,"show_in_resp"],["class","group-setting",3,"click",4,"ngIf"],[1,"group-setting",3,"click"],["src","assets/open-shift.png"],["mat-header-cell","",2,"width","20%"],["mat-cell","",2,"width","20%"],[4,"ngIf"],["class","shift-info",4,"ngFor","ngForOf"],[1,"shift-info"],["style","display: flex;",4,"ngIf"],[2,"display","flex"],[2,"width","25px"],[1,"mr-7",2,"font-size","13px",3,"nbTooltip"],[1,"shiftname"],["mat-header-cell","",2,"width","10%"],["mat-cell","",2,"width","10%"],[1,"store-pin"],["class","pin asterik",4,"ngIf"],["class","pin",4,"ngIf"],[1,"fas",3,"ngClass","click"],[1,"pin","asterik"],[1,"pin"],["mat-header-cell","",2,"width","13%"],["mat-cell","",2,"width","13%"],["mat-header-cell","",2,"width","25%",3,"hidden"],["mat-cell","",2,"width","25%",3,"hidden"],["mat-header-cell","",2,"width","12%",3,"hidden"],[2,"text-transform","lowercase"],["mat-cell","",2,"width","12%",3,"hidden"],["mat-header-cell","",1,"actions",2,"width","8%"],["mat-cell","",1,"actions",2,"width","8%",3,"click"],[1,"action"],["nbTooltip","Add shift",1,"add-shift-image",3,"click"],["nbTooltip","Edit shift",1,"fas","fa-pen","edit-shift","pointer",3,"click"],["mat-header-row",""],["mat-row","",1,"showhim",3,"ngClass","click"]],template:function(i,n){1&i&&(e._UZ(0,"app-loader",0),e.TgZ(1,"nb-card",1),e.TgZ(2,"div",2),e.TgZ(3,"span",3),e.TgZ(4,"span",4),e._uU(5," Stores "),e.qZA(),e.qZA(),e.TgZ(6,"div",5),e.TgZ(7,"span",6),e._uU(8," Use this section to manage stores in your organization. "),e._UZ(9,"br"),e.TgZ(10,"span",7),e._uU(11,"Note: You need at least one store to begin using Azalio."),e.qZA(),e.qZA(),e.TgZ(12,"span",8),e.TgZ(13,"span",9),e.TgZ(14,"span",10),e.TgZ(15,"app-search-input",11),e.NdJ("searchEvent",function(a){return n.onSearch(a)})("searchAll",function(a){return n.onSearchAll(a)}),e.qZA(),e.qZA(),e.YNc(16,Gn,3,0,"span",12),e.qZA(),e.TgZ(17,"span",13),e.YNc(18,Wn,1,4,"mat-paginator",14),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div",15),e.TgZ(20,"table",16,17),e.ynx(22,18),e.YNc(23,Hn,2,0,"th",19),e.YNc(24,jn,8,2,"td",20),e.BQk(),e.ynx(25,21),e.YNc(26,$n,2,0,"th",22),e.YNc(27,nt,5,1,"td",23),e.BQk(),e.ynx(28,24),e.YNc(29,tt,2,0,"th",25),e.YNc(30,rt,8,6,"td",26),e.BQk(),e.ynx(31,27),e.YNc(32,st,2,0,"th",28),e.YNc(33,lt,6,1,"td",29),e.BQk(),e.ynx(34,30),e.YNc(35,dt,2,1,"th",31),e.YNc(36,pt,6,2,"td",32),e.BQk(),e.ynx(37,33),e.YNc(38,ct,5,1,"th",34),e.YNc(39,ut,4,2,"td",35),e.BQk(),e.ynx(40,36),e.YNc(41,gt,2,0,"th",37),e.YNc(42,ft,6,4,"td",38),e.BQk(),e.YNc(43,mt,1,0,"tr",39),e.YNc(44,_t,1,3,"tr",40),e.qZA(),e._UZ(45,"app-no-records",41),e._UZ(46,"app-no-search-records",42),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.Q6J("loading",n.loading),e.xp6(15),e.Q6J("placeholder","Search by store name")("showHelperButton",!0),e.xp6(1),e.Q6J("ngIf",n.paginator),e.xp6(2),e.Q6J("ngIf",n.paginator),e.xp6(2),e.Q6J("dataSource",n.dataSource),e.xp6(23),e.Q6J("matHeaderRowDef",n.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns),e.xp6(1),e.Q6J("display",n.emptyResults)("animation","organization")("animation2","arrowBottom")("textMessage","Get started by adding stores."),e.xp6(1),e.Q6J("display",!n.emptyResults&&n.emptySearchResults))},directives:[h.R,m.Asz,Vn.J,d.O5,m.DPz,te.NW,P.BZ,P.w1,P.fO,P.ge,P.Dz,P.ev,d.sg,m.jNv,d.mk,P.as,P.XQ,P.nj,P.Gk,B.k,Yn.V],pipes:[d.uU],styles:[".stores-wrapper[_ngcontent-%COMP%] {\n  width: 100%;\n  padding-top: 10px;\n  padding-bottom: 4px;\n  padding-right: 45px;\n  padding-left: 45px;\n  overflow: auto;\n  max-height: calc(100vh - 100px);\n  margin: 0 auto;\n}\n.stores-wrapper[_ngcontent-%COMP%]   .stores-header[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n  margin-bottom: 10px;\n}\n.stores-wrapper[_ngcontent-%COMP%]   .stores-header[_ngcontent-%COMP%]   .sub-title[_ngcontent-%COMP%] {\n  color: #6e698b;\n  font-size: 13px;\n  font-weight: 500;\n  padding-top: 10px;\n  text-align: justify;\n  line-height: 1.4;\n}\n.stores-wrapper[_ngcontent-%COMP%]   .stores-header[_ngcontent-%COMP%]   .child2[_ngcontent-%COMP%] {\n  display: flex;\n  width: 60%;\n  justify-content: flex-end;\n}\n.stores-wrapper[_ngcontent-%COMP%]   .table-details[_ngcontent-%COMP%] {\n  background: white;\n  margin: auto;\n  border-radius: 5px;\n  border: 1px solid #efefef;\n  box-shadow: rgba(110, 105, 139, 0.1) 1px 0px 2px 2px;\n  padding-top: 25px;\n  padding-bottom: 25px;\n  padding-left: 23px;\n}\n.title[_ngcontent-%COMP%] {\n  font-size: 20px;\n  font-weight: bold;\n  margin: 10px 0px 0px 0px;\n  display: flex;\n}\n@media (max-width: 650px) {\n  .stores-wrapper[_ngcontent-%COMP%] {\n    padding-right: 20px;\n    padding-left: 20px;\n  }\n}\n.table-height[_ngcontent-%COMP%] {\n  min-height: -moz-fit-content;\n  min-height: fit-content;\n  max-height: 70vh;\n  overflow: auto;\n  padding-bottom: 10px;\n}\n@media (max-width: 680px) {\n  .table-height[_ngcontent-%COMP%] {\n    height: 63vh;\n    padding-bottom: 20px;\n  }\n}\n.stores-table[_ngcontent-%COMP%] {\n  width: 99.8%;\n}\n.fa-stack[_ngcontent-%COMP%] {\n  width: 1.3em !important;\n}\n.truncate-name[_ngcontent-%COMP%] {\n  width: 190px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: inline-block;\n}\n.resp-search[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  margin-right: 15px;\n}\n@supports selector(:nth-child(1 of x)) {\n  .stores-wrapper[_ngcontent-%COMP%]   .table-height[_ngcontent-%COMP%] {\n    overflow: auto;\n    max-height: 70vh;\n    min-height: 70vh;\n    display: block;\n  }\n}\n@media (max-width: 650px) {\n  .stores-wrapper[_ngcontent-%COMP%]   .stores-header[_ngcontent-%COMP%] {\n    flex-direction: column;\n  }\n  .stores-wrapper[_ngcontent-%COMP%]   .stores-header[_ngcontent-%COMP%]   .child2[_ngcontent-%COMP%] {\n    width: 100%;\n    flex-direction: column;\n    padding-top: 10px;\n  }\n\n  .child-container[_ngcontent-%COMP%] {\n    width: 50%;\n  }\n}\n.fa-stack[_ngcontent-%COMP%] {\n  width: 1.3em !important;\n}\n.resp-container[_ngcontent-%COMP%] {\n  display: inline-flex;\n  justify-content: flex-end;\n}\n@media (max-width: 1150px) and (min-width: 650px) {\n  .stores-header[_ngcontent-%COMP%] {\n    flex-direction: column;\n  }\n\n  .child2[_ngcontent-%COMP%] {\n    justify-content: flex-end !important;\n    width: 100% !important;\n    padding-top: 10px;\n  }\n}\n@media (max-width: 930px) {\n  .resp-view[_ngcontent-%COMP%] {\n    display: flex;\n    align-items: center;\n  }\n\n  .show_in_resp[_ngcontent-%COMP%] {\n    padding-right: 75px;\n    margin-right: 0px;\n  }\n\n  .shift-info[_ngcontent-%COMP%] {\n    display: flex;\n    flex-direction: column;\n    width: 160px;\n  }\n}\n.hide-pin[_ngcontent-%COMP%] {\n  color: #6e689b;\n  margin-left: 5px;\n  padding: 5px;\n}\n.pin[_ngcontent-%COMP%] {\n  margin-left: 5px;\n}\n.asterik[_ngcontent-%COMP%] {\n  margin-top: 7px;\n}\n.store-pin[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n}\n.show-pin[_ngcontent-%COMP%] {\n  color: #6e689b;\n  margin-left: 13px;\n  font-size: 14px;\n  padding: 5px;\n}\n.show-pin[_ngcontent-%COMP%]:hover, .hide-pin[_ngcontent-%COMP%]:hover {\n  background: #d1caf9;\n  border-radius: 50px;\n  padding: 5px;\n}\n.action[_ngcontent-%COMP%] {\n  display: inline-flex;\n  align-items: center;\n}\n.edit-shift[_ngcontent-%COMP%] {\n  color: #ddd5d5;\n}\n.edit-shift[_ngcontent-%COMP%]:hover {\n  color: #90e0c3;\n}\n.add-shift-image[_ngcontent-%COMP%] {\n  width: 30px;\n  height: 30px;\n  cursor: pointer;\n  background: url('shifts.0f9fe07b57bc1e3c.png') no-repeat;\n  margin-right: 10px;\n  background-size: cover;\n}\n.add-shift-image[_ngcontent-%COMP%]:hover {\n  background: url('shifts-comment.246e6f40e686f824.png') no-repeat;\n  background-size: cover;\n}\n.shiftname[_ngcontent-%COMP%] {\n  margin-left: 5px;\n  font-size: 12px;\n}\n.group-setting[_ngcontent-%COMP%] {\n  color: #8085FF;\n  display: flex;\n  align-items: flex-start;\n}\n.group-setting[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n  width: 15px;\n  margin-right: 4px;\n}\n.group-setting[_ngcontent-%COMP%]:hover {\n  text-decoration: underline;\n  font-weight: 600;\n}"]}),o}(),bt=function(){var o=function(){function s(){(0,J.Z)(this,s)}return(0,I.Z)(s,[{key:"ngOnInit",value:function(){}}]),s}();return o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-general-page"]],decls:2,vars:0,template:function(i,n){1&i&&(e.TgZ(0,"p"),e._uU(1,"general-page works!"),e.qZA())},styles:[""]}),o}(),z=function(s){return[s]};function xt(o,s){if(1&o){var i=e.EpF();e.TgZ(0,"span",4),e.NdJ("click",function(){return e.CHM(i),e.oxw().onChangeMenu(!0,"advanced_settings")}),e.TgZ(1,"span",5),e._uU(2," Advanced Settings "),e.qZA(),e.qZA()}if(2&o){var n=e.oxw();e.Q6J("routerLink",e.VKq(2,z,n.baseUrl+"advanced-settings"))("routerLinkActive","active")}}function Ct(o,s){if(1&o){var i=e.EpF();e.TgZ(0,"span",19),e.TgZ(1,"span"),e._uU(2," After reviewing settings, "),e.TgZ(3,"a",20),e.NdJ("click",function(){return e.CHM(i),e.oxw(3).navigateToManageStore()}),e._uU(4," click here "),e.qZA(),e._uU(5," to add your first store to begin Azalio. "),e.qZA(),e.qZA()}2&o&&(e.xp6(3),e.Udp("font-size","15px"))}function wt(o,s){1&o&&(e.TgZ(0,"span"),e._uU(1," These settings will apply across all your stores. "),e.qZA())}function Zt(o,s){if(1&o&&(e.TgZ(0,"span",19),e.YNc(1,wt,2,0,"span",7),e.qZA()),2&o){var i=e.oxw(3);e.xp6(1),e.Q6J("ngIf",!i.isAccountOwner||!i.noRegions)}}function Tt(o,s){if(1&o&&(e.TgZ(0,"span",17),e.YNc(1,Ct,6,2,"span",18),e.YNc(2,Zt,2,1,"span",18),e.qZA()),2&o){var i=e.oxw(2);e.Udp("visibility",i.showBanner?"":"hidden"),e.xp6(1),e.Q6J("ngIf",i.isAccountOwner&&i.noRegions),e.xp6(1),e.Q6J("ngIf",!i.isAccountOwner||!i.noRegions)}}function yt(o,s){if(1&o&&(e.TgZ(0,"div"),e.TgZ(1,"div",15),e.YNc(2,Tt,3,4,"span",16),e.qZA(),e._UZ(3,"router-outlet"),e.qZA()),2&o){var i=e.oxw();e.xp6(2),e.Q6J("ngIf",null!==i.noRegions)}}function kt(o,s){if(1&o){var i=e.EpF();e.TgZ(0,"span"),e._uU(1,"Get started by adding stores from "),e.TgZ(2,"a",20),e.NdJ("click",function(){return e.CHM(i),e.oxw(3).navigateToManageStore()}),e._uU(3,"here"),e.qZA(),e._uU(4,". "),e.qZA()}}function At(o,s){if(1&o&&(e.TgZ(0,"div",22),e.YNc(1,kt,5,0,"span",7),e.qZA()),2&o){var i=e.oxw(2);e.Udp("visibility",i.showBanner?"":"hidden"),e.xp6(1),e.Q6J("ngIf",i.isAccountOwner&&i.noRegions)}}function Mt(o,s){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,At,2,3,"div",21),e._UZ(2,"router-outlet"),e.qZA()),2&o){var i=e.oxw();e.xp6(1),e.Q6J("ngIf",null!==i.noRegions)}}var Pt=function(){var o=function(){function s(i,n,t,a){var r=this;(0,J.Z)(this,s),this.dataService=i,this.gs=n,this.router=t,this.route=a,this.noRegions=null,a.url.subscribe(function(){var l;null===a.snapshot.firstChild||(r.activatedRoutePath=null===(l=a.snapshot.firstChild.routeConfig)||void 0===l?void 0:l.path),r.getActivtedRoute()})}return(0,I.Z)(s,[{key:"ngOnInit",value:function(){var n=this;this.gs.logEvents("required_features_page"),this.showBanner="/settings/stores-details"!==this.router.url,this.dataService.allRegions.subscribe(function(t){var a;null!==t&&(n.noRegions=0==(null===(a=null==Object?void 0:Object.keys(t))||void 0===a?void 0:a.length))}),this.dataService.getConfigurations(!1).then(function(t){var a;n.isAccountOwner=2===(null===(a=t.role)||void 0===a?void 0:a.role_id),n.isSchedulerEnabled=1==t.company.is_scheduler}).finally(function(){}),this.selectedMenu="Required Features",this.baseUrl="/settings/",this.gs.hideSplashScreen(),document.body.clientWidth<670?(this.responsivenessView=!0,this.desktopView=!1):(this.responsivenessView=!1,this.desktopView=!0)}},{key:"getActivtedRoute",value:function(){switch(this.activatedRoutePath){case"advanced-settings":this.selectedMenu="Open Shifts";break;case"stores-details":this.selectedMenu="Stores";break;case"roles-permissions":this.selectedMenu="Roles & Permissions";break;case"rules":this.selectedMenu="Rules";break;default:this.selectedMenu="Required Features"}}},{key:"navigateToRoles",value:function(n){this.router.navigate([n])}},{key:"navigateToManageStore",value:function(){this.showBanner=!1,this.router.navigate(["settings/stores-details"])}},{key:"onChangeMenu",value:function(n,t){this.showBanner=n,this.gs.logEvents(t+"_page")}}]),s}();return o.\u0275fac=function(i){return new(i||o)(e.Y36(T.s),e.Y36(R.m),e.Y36(A.F0),e.Y36(A.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-settings-page"]],decls:37,vars:39,consts:[[1,"settings-container"],[2,"border-top","0.2px solid #efefef","border-right","1px solid #efefef"],[1,"settings-list"],[2,"font-size","18px","font-weight","bold","margin-left","12px","display","none"],["queryParamsHandling","merge",1,"all_reg",3,"routerLink","routerLinkActive","click"],["aria-hidden","true",1,"reg_name"],["class","flex all_reg","class","all_reg","queryParamsHandling","merge",3,"routerLink","routerLinkActive","click",4,"ngIf"],[4,"ngIf"],[1,"resp"],[1,"navbar-resp"],[1,"dropdown"],[1,"dropbtn"],[1,"fa","fa-caret-down"],[1,"dropdown-content"],["queryParamsHandling","merge",3,"routerLink","routerLinkActive"],[1,"banner-wrapper"],["class","banner",3,"visibility",4,"ngIf"],[1,"banner"],["class","banner-details",4,"ngIf"],[1,"banner-details"],[3,"click"],["class","link-store",3,"visibility",4,"ngIf"],[1,"link-store"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"span",3),e._uU(4,"Settings"),e.qZA(),e.TgZ(5,"span",4),e.NdJ("click",function(){return n.onChangeMenu(!0,"required_features")}),e.TgZ(6,"span",5),e._uU(7," Required Features "),e.qZA(),e.qZA(),e.TgZ(8,"span",4),e.NdJ("click",function(){return n.onChangeMenu(!0,"roles_permissions")}),e.TgZ(9,"span",5),e._uU(10," Roles & Permissions "),e.qZA(),e.qZA(),e.TgZ(11,"span",4),e.NdJ("click",function(){return n.onChangeMenu(!0,"rules")}),e.TgZ(12,"span",5),e._uU(13," Rules "),e.qZA(),e.qZA(),e.TgZ(14,"span",4),e.NdJ("click",function(){return n.onChangeMenu(!1,"stores_details")}),e.TgZ(15,"span",5),e._uU(16," Stores "),e.qZA(),e.qZA(),e.YNc(17,xt,3,4,"span",6),e.qZA(),e.qZA(),e.YNc(18,yt,4,1,"div",7),e.qZA(),e.TgZ(19,"div",8),e.TgZ(20,"div",9),e.TgZ(21,"div",10),e.TgZ(22,"button",11),e._uU(23," Settings "),e._UZ(24,"i",12),e.qZA(),e.TgZ(25,"div",13),e.TgZ(26,"a",14),e._uU(27,"Required Features"),e.qZA(),e.TgZ(28,"a",14),e._uU(29,"User Roles & Permissions"),e.qZA(),e.TgZ(30,"a",14),e._uU(31,"Rules"),e.qZA(),e.TgZ(32,"a",14),e._uU(33,"Stores"),e.qZA(),e.TgZ(34,"a",14),e._uU(35,"Advanced Features"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(36,Mt,3,1,"div",7),e.qZA()),2&i&&(e.xp6(5),e.Q6J("routerLink",e.VKq(21,z,n.baseUrl+"required-features"))("routerLinkActive","active"),e.xp6(3),e.Q6J("routerLink",e.VKq(23,z,n.baseUrl+"roles-permissions"))("routerLinkActive","active"),e.xp6(3),e.Q6J("routerLink",e.VKq(25,z,n.baseUrl+"rules"))("routerLinkActive","active"),e.xp6(3),e.Q6J("routerLink",e.VKq(27,z,n.baseUrl+"stores-details"))("routerLinkActive","active"),e.xp6(3),e.Q6J("ngIf",n.isSchedulerEnabled),e.xp6(1),e.Q6J("ngIf",n.desktopView),e.xp6(8),e.Q6J("routerLink",e.VKq(29,z,n.baseUrl+"required-features"))("routerLinkActive","active"),e.xp6(2),e.Q6J("routerLink",e.VKq(31,z,n.baseUrl+"roles-permissions"))("routerLinkActive","active"),e.xp6(2),e.Q6J("routerLink",e.VKq(33,z,n.baseUrl+"rules"))("routerLinkActive","active"),e.xp6(2),e.Q6J("routerLink",e.VKq(35,z,n.baseUrl+"stores-details"))("routerLinkActive","active"),e.xp6(2),e.Q6J("routerLink",e.VKq(37,z,n.baseUrl+"advanced-settings"))("routerLinkActive","active"),e.xp6(2),e.Q6J("ngIf",n.responsivenessView))},directives:[A.rH,A.Od,d.O5,A.lC,A.yS],styles:['.settings-container[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: nowrap;\n  overflow: hidden;\n}\n\n.settings-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-of-type(1) {\n  flex: 0.9;\n  background-color: white;\n  height: calc(100vh - 45.75px);\n  border-right: 1px solid #efefef;\n}\n\n.settings-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-of-type(2) {\n  flex: 5;\n  overflow: hidden;\n  max-height: calc(100vh - 47px);\n}\n\n.configurations-list[_ngcontent-%COMP%] {\n  font-size: 15px;\n  font-weight: 400;\n  height: 31px;\n  color: #707070a8;\n  border-bottom: 1px solid #efefef;\n  margin: 10px 0px 12px 0px;\n  cursor: pointer;\n  position: relative;\n}\n\n.child[_ngcontent-%COMP%] {\n  list-style-type: none;\n}\n\n.settings-list[_ngcontent-%COMP%] {\n  margin-top: -5px !important;\n}\n\n.all_reg[_ngcontent-%COMP%] {\n  position: relative;\n  outline-style: none;\n  top: 25px;\n  left: 0px;\n  font-size: 13px;\n  font-weight: 500;\n  cursor: pointer;\n  padding: 9px;\n  padding-left: 24px;\n  padding-top: 13px;\n  padding-bottom: 13px;\n  border-bottom: 0.2px solid #efefef;\n  display: flex;\n  color: #707070a8;\n}\n\n.active[_ngcontent-%COMP%] {\n  background-color: white;\n  color: #4c30e8c9;\n  border-left: 5px solid;\n  cursor: pointer;\n  font-size: 13px;\n  font-weight: 700;\n}\n\n.navbar-resp[_ngcontent-%COMP%] {\n  overflow: hidden;\n  background-color: #715aed;\n  border: 1px solid #715aed;\n  border-radius: 4px 4px 0 0;\n  margin-top: 10px;\n}\n\n.navbar-resp[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\n  float: left;\n  font-size: 13px;\n  color: white;\n  text-align: center;\n  padding: 14px 16px;\n  text-decoration: none;\n}\n\n.dropdown[_ngcontent-%COMP%] {\n  float: left;\n  overflow: hidden;\n}\n\n.dropdown[_ngcontent-%COMP%]   .dropbtn[_ngcontent-%COMP%] {\n  font-size: 16px;\n  border: none;\n  outline: none;\n  color: white;\n  padding: 7px 13px;\n  background-color: inherit;\n  font-family: inherit;\n  margin: 0;\n}\n\n.dropdown-content[_ngcontent-%COMP%] {\n  display: none;\n  position: absolute;\n  background-color: #ffffff;\n  min-width: 160px;\n  box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);\n  z-index: 2;\n}\n\n.dropdown-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\n  float: none;\n  color: #715aed;\n  padding: 12px 16px;\n  text-decoration: none;\n  display: block;\n  text-align: left;\n}\n\n.dropdown-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover {\n  background-color: #ddd;\n}\n\n.dropdown[_ngcontent-%COMP%]:hover   .dropdown-content[_ngcontent-%COMP%] {\n  display: block;\n}\n\n@media (max-width: 670px) {\n  .resp[_ngcontent-%COMP%] {\n    display: block;\n    overflow: hidden;\n    height: calc(100vh - 45.75px);\n  }\n\n  .settings-container[_ngcontent-%COMP%] {\n    display: none;\n  }\n}\n\n@media (min-width: 670px) {\n  .resp[_ngcontent-%COMP%] {\n    display: none;\n  }\n\n  .settings-container[_ngcontent-%COMP%] {\n    display: flex;\n  }\n}\n\n.banner-wrapper[_ngcontent-%COMP%] {\n  position: sticky;\n  top: 7px;\n  z-index: 2;\n  background-color: #f9faff !important;\n  height: 36px !important;\n}\n\n.banner[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: flex-end;\n}\n\n.banner[_ngcontent-%COMP%]::after {\n  position: absolute;\n  content: "";\n  right: calc(6% - 10px);\n  top: 35px;\n  border-style: solid;\n  border-width: 0 10px 10px 10px;\n  border-color: transparent transparent #ffac90 transparent;\n  transition-duration: 0.3s;\n  transition-property: transform;\n  transform: rotate(180deg);\n}\n\n.banner[_ngcontent-%COMP%]   .banner-details[_ngcontent-%COMP%] {\n  background: #ffac90;\n  padding: 8px;\n  box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;\n  border-bottom-left-radius: 8px;\n  border-bottom-right-radius: 8px;\n  padding-left: 20px;\n  padding-right: 20px;\n  font-weight: 700;\n  color: white;\n  margin-top: 3px;\n}\n\n.banner[_ngcontent-%COMP%]   .banner-details[_ngcontent-%COMP%]   .banner-switch[_ngcontent-%COMP%] {\n  text-decoration: underline;\n  cursor: pointer;\n}\n\n.link-store[_ngcontent-%COMP%] {\n  background: #ffcab9;\n  padding-left: 17px;\n  font-size: 14px;\n  margin-top: 2px;\n  margin-bottom: 2px;\n}\n\n@media (min-width: 670px) {\n  .link-store[_ngcontent-%COMP%] {\n    display: none;\n  }\n}']}),o}(),V=function(){var o=function(){function s(i,n,t,a){(0,J.Z)(this,s),this.router=i,this.authService=n,this.storageService=t,this.dialogService=a}return(0,I.Z)(s,[{key:"waitForOneSecond",value:function(){var n=this;return this.dialogService.open(H.z,{context:""}).onClose.subscribe(function(a){return(0,y.mG)(n,void 0,void 0,x().mark(function r(){return x().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:setTimeout(function(){},1e3);case 1:case"end":return p.stop()}},r)}))})}},{key:"canDeactivate",value:function(n,t,a,r){return!0!==n.canDeactivate()||this.dialogService.open(H.z,{context:{proceedButtonText:"Discard Changes",cancelButtonText:"Keep Editing"}}).onClose.toPromise()}}]),s}();return o.\u0275fac=function(i){return new(i||o)(e.LFG(A.F0),e.LFG(X.e),e.LFG(R.m),e.LFG(m.Gln))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o}(),Y=_(4409),Ot=["ngForm"];function St(o,s){1&o&&(e.TgZ(0,"span",43),e._UZ(1,"i",44),e._uU(2," Please add atleast one store to a group to save custom grouping. "),e.qZA())}function qt(o,s){if(1&o){var i=e.EpF();e.TgZ(0,"span"),e.TgZ(1,"span",37),e.TgZ(2,"span",38),e._uU(3," Drag & drop store names in groups. "),e.qZA(),e.TgZ(4,"span",39),e.TgZ(5,"button",40),e.NdJ("click",function(){return e.CHM(i),e.oxw(3).addGroup()}),e._UZ(6,"i",41),e._uU(7," Add another group"),e.qZA(),e.YNc(8,St,3,0,"span",42),e.qZA(),e.qZA(),e.qZA()}if(2&o){var n=e.oxw(3);e.xp6(5),e.Q6J("disabled",(null==n.groups?null:n.groups.length)>19),e.xp6(3),e.Q6J("ngIf",!n.disable&&!n.noChangeGroups&&n.disableDueToEmptyGroups)}}function Ft(o,s){if(1&o&&(e.TgZ(0,"div",55),e._uU(1),e.qZA()),2&o){var i=s.$implicit;e.xp6(1),e.hij(" ",i.name," ")}}function Ut(o,s){if(1&o){var i=e.EpF();e.TgZ(0,"i",60),e.NdJ("click",function(){e.CHM(i);var t=e.oxw().index;return e.oxw(4).removeGroup(t)}),e.qZA()}}function It(o,s){if(1&o&&(e.TgZ(0,"div",55),e.TgZ(1,"span",61),e._uU(2),e.qZA(),e.qZA()),2&o){var i=s.$implicit;e.xp6(2),e.Oqu(i.name)}}function Jt(o,s){if(1&o){var i=e.EpF();e.TgZ(0,"span",56),e.TgZ(1,"nb-card",57),e.TgZ(2,"nb-card-header"),e._uU(3),e.TgZ(4,"span",48),e._uU(5),e.qZA(),e.YNc(6,Ut,1,0,"i",58),e.qZA(),e.TgZ(7,"nb-card-body"),e.TgZ(8,"div",59),e.NdJ("cdkDropListDropped",function(l){return e.CHM(i),e.oxw(4).drop(l)}),e.YNc(9,It,3,1,"div",50),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){var n=s.$implicit,t=s.index,a=e.oxw(4);e.xp6(3),e.hij("Group ",t+1," "),e.xp6(2),e.hij("",null==n.stores?null:n.stores.length," stores"),e.xp6(1),e.Q6J("ngIf",(null==a.groups?null:a.groups.length)>1),e.xp6(2),e.s9C("id",n.groupId),e.Q6J("cdkDropListData",n.stores),e.xp6(1),e.Q6J("ngForOf",n.stores)}}function Nt(o,s){if(1&o){var i=e.EpF();e.TgZ(0,"div",45),e.TgZ(1,"div",46),e.TgZ(2,"nb-card",47),e.TgZ(3,"nb-card-header"),e._uU(4,"Stores "),e.TgZ(5,"span",48),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"nb-card-body"),e.TgZ(8,"div",49),e.NdJ("cdkDropListDropped",function(a){return e.CHM(i),e.oxw(3).drop(a)}),e.YNc(9,Ft,2,1,"div",50),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(10,"i",51),e.TgZ(11,"div",52),e.TgZ(12,"div",53),e.YNc(13,Jt,10,6,"span",54),e.qZA(),e.qZA(),e.qZA()}if(2&o){var n=e.oxw(3);e.xp6(6),e.hij("",null==n.stores?null:n.stores.length," stores"),e.xp6(2),e.Q6J("cdkDropListData",n.stores),e.xp6(1),e.Q6J("ngForOf",n.stores),e.xp6(4),e.Q6J("ngForOf",n.groups)}}function Dt(o,s){if(1&o){var i=e.EpF();e.TgZ(0,"div",19),e.TgZ(1,"div",20),e.TgZ(2,"span",21),e.TgZ(3,"div",22),e.TgZ(4,"span",23),e._uU(5," Max. Weekly Hours "),e._UZ(6,"br"),e.TgZ(7,"span",24),e._uU(8," If weekly clocked in hours of an employee exceeds this limit, a warning will be shown while accepting an open shift. "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"span"),e.TgZ(10,"span",25),e._UZ(11,"app-text-input",26),e.TgZ(12,"span",27),e._uU(13," Hrs. "),e.qZA(),e.qZA(),e._UZ(14,"app-error-message",28),e.qZA(),e.qZA(),e.TgZ(15,"div",20),e.TgZ(16,"span",21),e.TgZ(17,"div",29),e.TgZ(18,"span",23),e._uU(19," Block Users "),e._UZ(20,"br"),e.TgZ(21,"span",24),e._uU(22," Block users from accepting open shifts if picking up a particular shift will lead them to exceed their max weekly hours. "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"span",30),e._UZ(24,"nb-toggle",31),e.qZA(),e.qZA(),e.TgZ(25,"div",20),e.TgZ(26,"span",21),e.TgZ(27,"div",29),e.TgZ(28,"span",23),e._uU(29," SMS Notification "),e._UZ(30,"br"),e.TgZ(31,"span",24),e._uU(32," Allow permission to send SMS to employees related to open shift availability. "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(33,"span",30),e._UZ(34,"nb-toggle",31),e.qZA(),e.qZA(),e.TgZ(35,"div",20),e.TgZ(36,"span",21),e.TgZ(37,"div",29),e.TgZ(38,"span",23),e.TgZ(39,"span",32),e._uU(40," Manager Approval "),e.TgZ(41,"span",33),e._uU(42,"New"),e.qZA(),e.qZA(),e.TgZ(43,"span",24),e._uU(44," Enable this feature to allow web user with scheduler access to accept/reject open shift requests. "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(45,"span",30),e._UZ(46,"nb-toggle",31),e.qZA(),e.qZA(),e.TgZ(47,"div",20),e.TgZ(48,"span",21),e.TgZ(49,"div",29),e.TgZ(50,"span",23),e._uU(51," Custom Grouping "),e._UZ(52,"br"),e.TgZ(53,"span",24),e._uU(54," Create custom groups for stores. By default open shifts will be available within each store only. "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(55,"span",30),e.TgZ(56,"nb-toggle",34),e.NdJ("change",function(){return e.CHM(i),e.oxw(2).onCustomGroup()}),e.qZA(),e.qZA(),e.qZA(),e.YNc(57,qt,9,2,"span",35),e.YNc(58,Nt,14,4,"div",36),e.qZA()}if(2&o){var n=e.oxw(2);e.xp6(11),e.Q6J("controlName","max_weekly_hours")("form",n.advancedForm)("maxlength",2)("placeholder","e.g., 10"),e.xp6(3),e.Q6J("key","max_weekly_hours")("form",n.advancedForm)("isSubmitted",!0),e.xp6(10),e.Q6J("formControlName","block_open_shifts"),e.xp6(10),e.Q6J("formControlName","is_open_shift_sms"),e.xp6(12),e.Q6J("formControlName","open_is_manager_approval"),e.xp6(10),e.Q6J("formControlName","custom_groups"),e.xp6(1),e.Q6J("ngIf",null==n.advancedForm||null==n.advancedForm.controls.custom_groups?null:n.advancedForm.controls.custom_groups.value),e.xp6(1),e.Q6J("ngIf",null==n.advancedForm||null==n.advancedForm.controls.custom_groups?null:n.advancedForm.controls.custom_groups.value)}}function Rt(o,s){if(1&o){var i=e.EpF();e.TgZ(0,"form",3,4),e.NdJ("ngSubmit",function(){e.CHM(i);var a=e.MAs(1);return e.oxw().submit(a)}),e.TgZ(2,"div",5),e.TgZ(3,"div",6),e.TgZ(4,"span",7),e.TgZ(5,"span",8),e._uU(6," Open Shifts "),e.qZA(),e.TgZ(7,"span",9),e._uU(8," Enable this feature to allow mobile users to post their shifts to reduce manager intervention in finding substitutes. "),e._UZ(9,"br"),e._uU(10,"Their schedule will automatically be updated once someone else picks their shift. "),e.qZA(),e.qZA(),e.TgZ(11,"span",10),e.TgZ(12,"button",11),e._uU(13,"Save"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",12),e.TgZ(15,"span",13),e.TgZ(16,"span",14),e._UZ(17,"img",15),e._uU(18," Advertise Open Shifts "),e.qZA(),e.TgZ(19,"span"),e.TgZ(20,"nb-toggle",16),e.NdJ("change",function(){return e.CHM(i),e.oxw().resetForm()}),e.qZA(),e.qZA(),e.qZA(),e._UZ(21,"app-no-records",17),e.YNc(22,Dt,59,13,"div",18),e.qZA(),e.qZA(),e.qZA()}if(2&o){var n=e.oxw();e.Q6J("formGroup",n.advancedForm),e.xp6(12),e.Q6J("disabled",n.disableDueToEmptyGroups||n.disable&&n.noChangeGroups),e.xp6(8),e.Q6J("formControlName","is_open_shift"),e.xp6(1),e.Q6J("display",!(null!=n.advancedForm&&null!=n.advancedForm.controls&&n.advancedForm.controls.is_open_shift.value))("animation","openshift")("animation2","arrowTop"),e.xp6(1),e.Q6J("ngIf",1==(null==n.advancedForm||null==n.advancedForm.controls?null:n.advancedForm.controls.is_open_shift.value))}}var zt=[{path:"",component:Pt,children:[{path:"",redirectTo:"required-features"},{path:"general-page",canDeactivate:[V],component:bt},{path:"roles-permissions",canDeactivate:[V],component:_n},{path:"rules",canDeactivate:[V],component:ye},{path:"required-features",canDeactivate:[V],component:Ge},{path:"stores-details",canDeactivate:[V],component:vt},{path:"advanced-settings",canDeactivate:[V],component:function(){var o=function(){function s(i,n,t,a,r){var l=this;(0,J.Z)(this,s),this.router=i,this.dataService=n,this.gs=t,this.fb=a,this.service=r,this.stores=[],this.dataService.getConfigurations(!1).then(function(p){p.company.is_scheduler||l.router.navigate(["401"])}).finally(function(){})}return(0,I.Z)(s,[{key:"drop",value:function(n){this.gs.logEvents("custom_group_dragged_and_dropped"),n.previousContainer===n.container?(0,Y.bA)(n.container.data,n.previousIndex,n.currentIndex):(0,Y.EA)(n.previousContainer.data,n.container.data,n.previousIndex,n.currentIndex),this.isEquals()}},{key:"ngOnInit",value:function(){this.disable=!0,this.noChangeGroups=!0,this.getData()}},{key:"isEquals",value:function(){var n=this;setTimeout(function(){var t,a,r=n.groups.filter(function(l){return 0==l.stores.length});n.disableDueToEmptyGroups=0==(null===(t=n.data.groups)||void 0===t?void 0:t.length)&&(null===(a=n.groups)||void 0===a?void 0:a.length)==r.length,console.log(n.disableDueToEmptyGroups),n.noChangeGroups=JSON.stringify(n.groups)===JSON.stringify(n.data.groups)})}},{key:"groupFormValueChange",value:function(){var n=this,t=this.advancedForm.value;this.advancedForm.valueChanges.subscribe(function(a){n.haschange=Object.keys(t).some(function(r){return parseInt("boolean"==typeof n.ngForm.value[r]?n.ngForm.value[r]?1:0:n.ngForm.value[r])!==t[r]}),n.disable=!n.haschange})}},{key:"getData",value:function(){var n=this;this.loading=!0,this.service.getAdvanced().then(function(t){var a;n.data=t,n.stores=n.data.stores_without_groups,n.groups=JSON.parse(JSON.stringify(n.data.groups)),n.data.custom_groups=0==(null===(a=n.groups)||void 0===a?void 0:a.length)?0:1,n.setForm()}).catch(function(t){console.log(t)}).finally(function(){n.loading=!1})}},{key:"onCustomGroup",value:function(){var n,t=this.advancedForm.controls.custom_groups.value;this.groups=JSON.parse(JSON.stringify(this.data.groups)),0==(null===(n=this.groups)||void 0===n?void 0:n.length)&&1==t?this.addGroup():0==t&&(this.groups=[]),this.isEquals()}},{key:"setForm",value:function(){var n=this;this.advancedForm=this.fb.group({is_open_shift:[this.data.is_open_shift,[]],max_weekly_hours:[this.data.max_weekly_hours,[c.kI.required,c.kI.maxLength(2)]],is_open_shift_sms:[this.data.is_open_shift_sms,[]],open_is_manager_approval:[this.data.open_is_manager_approval,[]],block_open_shifts:[this.data.block_open_shifts],custom_groups:[this.data.custom_groups]}),setTimeout(function(){var t,a;null==(null===(a=null===(t=n.advancedForm)||void 0===t?void 0:t.controls)||void 0===a?void 0:a.max_weekly_hours.value)&&n.advancedForm.controls.max_weekly_hours.setValue(40),n.groupFormValueChange()})}},{key:"resetForm",value:function(){var n=this.advancedForm.controls.is_open_shift.value;!n&&n==this.data.is_open_shift&&(this.disable=!0,this.noChangeGroups=!0,this.setForm(),this.groups=[])}},{key:"addGroup",value:function(){this.groups.push({groupId:"group"+this.groups.length,stores:[]}),this.isEquals()}},{key:"removeGroup",value:function(n){this.stores=this.stores.concat(this.groups[n].stores),this.groups.splice(n,1),this.isEquals()}},{key:"submit",value:function(n){if(n.valid){var t=this.advancedForm.controls,a={is_open_shift:t.is_open_shift.value?1:0,max_weekly_hours:Number(t.max_weekly_hours.value),is_open_shift_sms:t.is_open_shift_sms.value?1:0,open_is_manager_approval:t.open_is_manager_approval.value?1:0,block_open_shifts:t.block_open_shifts.value?1:0,custom_groups:t.custom_groups.value?1:0,groups:this.groups.map(function(r){return{groupId:r.groupId,stores:r.stores.map(function(l){return l.id})}})};this.saveData(a)}}},{key:"saveData",value:function(n){return(0,y.mG)(this,void 0,void 0,x().mark(function t(){var a;return x().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this.loadingSpinner=!0,l.prev=1,l.next=4,this.service.updateAdvanced(n);case 4:this.gs.showToastSuccess(null==(a=l.sent)?void 0:a.message),this.getData(),this.disable=!0,this.noChangeGroups=!0,l.next=14;break;case 11:l.prev=11,l.t0=l.catch(1),this.gs.showToastError(l.t0.message);case 14:return l.prev=14,this.loadingSpinner=!1,l.finish(14);case 17:case"end":return l.stop()}},t,this,[[1,11,14,17]])}))}},{key:"canDeactivate",value:function(){return!(this.disable&&this.noChangeGroups)}}]),s}();return o.\u0275fac=function(i){return new(i||o)(e.Y36(A.F0),e.Y36(T.s),e.Y36(R.m),e.Y36(c.qu),e.Y36(U))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-advanced"]],viewQuery:function(i,n){var t;1&i&&(e.Gf(Ot,5),e.Gf(Y.Zt,5),e.Gf(Y.Wj,5)),2&i&&(e.iGM(t=e.CRH())&&(n.ngForm=t.first),e.iGM(t=e.CRH())&&(n.CdkDrag=t.first),e.iGM(t=e.CRH())&&(n.CdkDropList=t.first))},decls:3,vars:3,consts:[[3,"loading"],[1,"for_spinner",2,"height","100vh","top","-25px",3,"nbSpinner"],["id","form",3,"formGroup","ngSubmit",4,"ngIf"],["id","form",3,"formGroup","ngSubmit"],["ngForm","ngForm"],[1,"advanced-features-wrapper"],[1,"header"],[1,"title"],[2,"color","#6e689b"],[1,"sub-title"],[1,"save-btn"],["size","medium","type","submit","nbButton","","status","primary",3,"disabled"],[1,"feature-details"],[1,"parent-wrapper",2,"display","flex","justify-content","space-between"],[1,"heading"],["src","assets/open-shift.png",2,"width","22px","margin-right","8px"],["labelPosition","end",1,"feature-toggle",3,"formControlName","change"],[3,"display","animation","animation2"],["class","child-wrapper",4,"ngIf"],[1,"child-wrapper"],[1,"child-container","assignment-child-toggle"],[1,"assignment-toggle"],[1,"feature-text","weekly-hrs"],[1,"feature-name"],[1,"feature-helper-text"],[1,"input-notify-time"],[3,"controlName","form","maxlength","placeholder"],[2,"margin","8px 8px 8px 8px"],[1,"error-input",3,"key","form","isSubmitted"],[1,"feature-text"],[1,"right-items"],["aria-label","assignment-toggle","role","switch","labelPosition","end",1,"feature-toggle",3,"formControlName"],[1,"container"],[1,"new"],["aria-label","assignment-toggle","role","switch","labelPosition","end",1,"feature-toggle",3,"formControlName","change"],[4,"ngIf"],["class","card-row mt-10","cdkDropListGroup","",4,"ngIf"],[1,"no-background"],[1,"txt-dragdrop"],[1,"right-elements"],["nbButton","","type","button",1,"add-group",3,"disabled","click"],["aria-hidden","true",1,"fa","fa-plus",2,"margin-right","4px"],["class","helper-txt",4,"ngIf"],[1,"helper-txt"],[1,"fa","fa-exclamation-triangle",2,"color","#fe7e21"],["cdkDropListGroup","",1,"card-row","mt-10"],[1,"card-col","store-wrapper"],["accent","primary","size","medium",1,"store-container"],[1,"store-count"],["cdkDropList","","id","stores",1,"store-list",3,"cdkDropListData","cdkDropListDropped"],["class","store-box","cdkDrag","",4,"ngFor","ngForOf"],[1,"fa-solid","fa-arrow-right-arrow-left","swap-arrows"],[1,"group-container"],[1,"groups"],["class","groups-list-wrapper",4,"ngFor","ngForOf"],["cdkDrag","",1,"store-box"],[1,"groups-list-wrapper"],["size","tiny",1,"store-container"],["class","fa-solid fa-circle-xmark right delete-groups",3,"click",4,"ngIf"],["cdkDropList","",1,"store-list",3,"id","cdkDropListData","cdkDropListDropped"],[1,"fa-solid","fa-circle-xmark","right","delete-groups",3,"click"],[1,"store-tags"]],template:function(i,n){1&i&&(e._UZ(0,"app-loader",0),e.TgZ(1,"nb-card",1),e.YNc(2,Rt,23,7,"form",2),e.qZA()),2&i&&(e.Q6J("loading",n.loading),e.xp6(1),e.Q6J("nbSpinner",n.loadingSpinner),e.xp6(1),e.Q6J("ngIf",n.advancedForm))},directives:[h.R,m.Asz,m.Q7R,d.O5,c._Y,c.JL,c.sg,b.w5,m.DPz,m.BLq,c.JJ,c.u,b.x0,b.bf,B.k,Z.t,M.H,Y.Fd,m.ndF,m.yKW,Y.Wj,d.sg,Y.Zt],styles:[".advanced-features-wrapper[_ngcontent-%COMP%] {\n  margin: auto;\n  width: 100%;\n  padding-top: 7px;\n  padding-bottom: 55px;\n  padding-right: 30px;\n  padding-left: 30px;\n  overflow: auto;\n  max-height: calc(100vh - 100px);\n  margin: 0 auto;\n}\n.advanced-features-wrapper[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  margin-bottom: 10px;\n  position: sticky;\n  top: 0px;\n  background: #f9faff;\n  padding-top: 20px;\n  margin-right: -14px;\n  margin-left: -14px;\n  z-index: 1;\n  padding-left: 17px;\n  padding-right: 15px;\n}\n.advanced-features-wrapper[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%] {\n  font-size: 20px;\n  font-weight: bold;\n  margin: 10px 0px 10px 0px;\n  display: flex;\n  flex-direction: column;\n}\n.advanced-features-wrapper[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .sub-title[_ngcontent-%COMP%] {\n  color: #6e698b;\n  font-size: 13px;\n  font-weight: 500;\n  padding-top: 16px;\n  text-align: justify;\n  margin: 0px -60px 0px 0px;\n  line-height: 1.4;\n}\n.advanced-features-wrapper[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]   .unsaved-changes[_ngcontent-%COMP%] {\n  margin-right: 10px;\n  font-weight: 600;\n  color: #4caf50;\n}\n.advanced-features-wrapper[_ngcontent-%COMP%]   .weekly-hrs[_ngcontent-%COMP%] {\n  padding-bottom: 14px;\n  padding-top: 14px;\n}\n.advanced-features-wrapper[_ngcontent-%COMP%]   .feature-details[_ngcontent-%COMP%] {\n  margin: auto;\n}\n.advanced-features-wrapper[_ngcontent-%COMP%]   .feature-details[_ngcontent-%COMP%]   .parent-wrapper[_ngcontent-%COMP%] {\n  font-size: 15px;\n  font-weight: 600;\n  color: #6e698b;\n  background: #ebeeff !important;\n  padding: 10px;\n  padding-right: 20px;\n  border-radius: 5px;\n  box-shadow: rgba(110, 105, 139, 0.1) 1px 0px 2px 2px;\n}\n.advanced-features-wrapper[_ngcontent-%COMP%]   .feature-details[_ngcontent-%COMP%]   .parent-wrapper[_ngcontent-%COMP%]   nb-toggle.status-basic[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%] {\n  font-size: 15px !important;\n  font-weight: 700 !important;\n}\n.advanced-features-wrapper[_ngcontent-%COMP%]   .feature-details[_ngcontent-%COMP%]   .parent-wrapper[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%] {\n  font-size: 15px;\n  font-weight: 700;\n  color: #565656;\n  margin-top: 1px;\n  margin-left: 10px;\n  display: flex;\n  align-items: center;\n}\n.advanced-features-wrapper[_ngcontent-%COMP%]   .feature-details[_ngcontent-%COMP%]   .child-wrapper[_ngcontent-%COMP%] {\n  background-color: white;\n  box-shadow: rgba(110, 105, 139, 0.1) 1px 0px 2px 2px;\n}\n.advanced-features-wrapper[_ngcontent-%COMP%]   .feature-details[_ngcontent-%COMP%]   .child-wrapper[_ngcontent-%COMP%]   .child-container[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  padding-top: 10px;\n  padding-bottom: 10px;\n  border-bottom: 1px solid #efefef;\n  justify-content: space-between;\n  margin-right: 20px;\n  margin-left: 20px;\n}\n.advanced-features-wrapper[_ngcontent-%COMP%]   .feature-details[_ngcontent-%COMP%]   .child-wrapper[_ngcontent-%COMP%]   .child-container[_ngcontent-%COMP%]   .feature-toggle[_ngcontent-%COMP%] {\n  font-size: 13px;\n  font-weight: 400;\n  position: relative;\n  margin-left: 20px;\n}\n.advanced-features-wrapper[_ngcontent-%COMP%]   .feature-details[_ngcontent-%COMP%]   .child-wrapper[_ngcontent-%COMP%]   .child-container[_ngcontent-%COMP%]   .feature-text[_ngcontent-%COMP%] {\n  text-align: initial;\n  display: flex;\n  margin-left: 20px;\n}\n.advanced-features-wrapper[_ngcontent-%COMP%]   .feature-details[_ngcontent-%COMP%]   .child-wrapper[_ngcontent-%COMP%]   .child-container[_ngcontent-%COMP%]   .feature-text[_ngcontent-%COMP%]   .feature-name[_ngcontent-%COMP%] {\n  display: inline-block;\n  padding-top: 0px;\n  font-size: 13px;\n}\n.advanced-features-wrapper[_ngcontent-%COMP%]   .feature-details[_ngcontent-%COMP%]   .child-wrapper[_ngcontent-%COMP%]   .child-container[_ngcontent-%COMP%]   .feature-text[_ngcontent-%COMP%]   .feature-helper-text[_ngcontent-%COMP%] {\n  color: #575757d1;\n  font-size: 12px;\n  font-weight: normal;\n}\n.mt-10[_ngcontent-%COMP%] {\n  margin-top: 10px !important;\n}\n.store-list[_ngcontent-%COMP%] {\n  min-height: 60px;\n  border-radius: 4px;\n  display: block;\n  overflow: auto;\n}\n.store-box[_ngcontent-%COMP%] {\n  padding: 8px 10px;\n  border-bottom: solid 1px #f6f2f2;\n  color: rgba(0, 0, 0, 0.87);\n  align-items: center;\n  justify-content: space-between;\n  box-sizing: border-box;\n  cursor: move;\n  font-size: 12px;\n}\n.cdk-drag-preview[_ngcontent-%COMP%] {\n  box-sizing: border-box;\n  border-radius: 4px;\n  box-shadow: 0 5px 5px -3px rgba(0, 0, 0, 0.2), 0 8px 10px 1px rgba(0, 0, 0, 0.14), 0 3px 14px 2px rgba(0, 0, 0, 0.12);\n}\n.cdk-drag-placeholder[_ngcontent-%COMP%] {\n  opacity: 0;\n}\n.cdk-drag-animating[_ngcontent-%COMP%] {\n  transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);\n}\n.example-box[_ngcontent-%COMP%]:last-child {\n  border: none;\n}\n.example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder) {\n  transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);\n}\n.card-row[_ngcontent-%COMP%] {\n  display: flex;\n  margin: 0 -0.5rem;\n  width: 100%;\n}\n.card-row[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%] {\n  padding: 0px;\n}\n.store-wrapper[_ngcontent-%COMP%]   nb-card.size-medium[_ngcontent-%COMP%] {\n  \n  overflow: auto;\n  margin-bottom: 10px !important;\n  height: auto;\n  max-height: 50vh;\n}\n.card-col[_ngcontent-%COMP%] {\n  flex: 1 0 calc(50% - 27rem);\n  margin: 0 0.5rem;\n  margin-left: 15px;\n}\n.groups[_ngcontent-%COMP%] {\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  background: #ffffff;\n  overflow: auto;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  box-shadow: rgba(110, 105, 139, 0.1) 1px 0px 2px 2px;\n  border-radius: 2px;\n  margin-bottom: 10px;\n  box-shadow: rgba(0, 0, 0, 0.05) 0px 0px 0px 1px;\n  height: 49.7vh;\n}\n.groups[_ngcontent-%COMP%]   .card-col[_ngcontent-%COMP%] {\n  flex: 1 0 calc(50% - 18rem);\n  margin: 0 0.5rem;\n}\n.groups[_ngcontent-%COMP%]   .groups-list-wrapper[_ngcontent-%COMP%] {\n  width: 25%;\n  padding-left: 5px;\n  padding-right: 4px;\n  padding-bottom: 5px;\n}\n.groups[_ngcontent-%COMP%]   .store-container[_ngcontent-%COMP%] {\n  background: #f9faff;\n}\n.groups[_ngcontent-%COMP%]   nb-card-header[_ngcontent-%COMP%] {\n  padding-left: 11px;\n  color: #7b68ee;\n  font-size: 14px;\n  font-weight: 600;\n  position: relative;\n}\n.groups[_ngcontent-%COMP%]   .store-box[_ngcontent-%COMP%] {\n  padding: 8px;\n  border-bottom: solid 1px #f6f2f2;\n  color: rgba(0, 0, 0, 0.87);\n  align-items: center;\n  justify-content: space-between;\n  box-sizing: border-box;\n  cursor: move;\n  font-size: 12px;\n}\n.groups[_ngcontent-%COMP%]   .store-list[_ngcontent-%COMP%] {\n  min-height: 130px;\n  max-height: 130px;\n  overflow: auto;\n}\n.groups[_ngcontent-%COMP%]   nb-card.size-tiny[_ngcontent-%COMP%] {\n  \n  height: auto;\n  max-height: 400px;\n  overflow: auto;\n  margin-bottom: 0px;\n}\n.store-wrapper[_ngcontent-%COMP%]   nb-card-header[_ngcontent-%COMP%] {\n  font-size: 14px;\n  padding-left: 11px;\n}\n.swap-arrows[_ngcontent-%COMP%] {\n  display: flex;\n  margin-right: 15px;\n  margin-left: 10px;\n  font-size: 19px;\n  color: #6e689b;\n  align-items: center;\n}\n.store-tags[_ngcontent-%COMP%] {\n  padding: 3px;\n  border-radius: 4px;\n  padding-right: 10px;\n  padding-left: 10px;\n  background: #ded9ff;\n  display: inline-flex;\n  align-items: flex-start;\n}\n.no-background[_ngcontent-%COMP%] {\n  margin-top: 10px;\n  margin-right: 10px;\n  margin-left: 10px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 10px;\n}\n.no-background[_ngcontent-%COMP%]   .appearance-filled.status-basic[_ngcontent-%COMP%] {\n  background-color: white !important;\n}\n.txt-dragdrop[_ngcontent-%COMP%] {\n  color: #222b45;\n  font-size: 14px;\n  font-weight: 500;\n  padding-bottom: 10px;\n}\n.add-group[_ngcontent-%COMP%] {\n  color: #6e689b !important;\n  font-weight: 600 !important;\n  font-size: 13px;\n  background-color: white !important;\n  cursor: pointer;\n  text-transform: inherit;\n  display: block;\n  float: right;\n}\n.add-group[_ngcontent-%COMP%]:hover {\n  text-decoration: underline !important;\n}\n.input-notify-time[_ngcontent-%COMP%] {\n  display: flex;\n}\n.delete-groups[_ngcontent-%COMP%] {\n  position: absolute;\n  font-size: 16px;\n  right: 0px;\n  top: 0px;\n  color: #ff7474;\n  cursor: pointer;\n}\n.store-count[_ngcontent-%COMP%] {\n  font-size: 11px;\n  padding-right: 5px;\n  padding-left: 5px;\n  border-radius: 5px;\n  font-weight: 500;\n  \n  float: right;\n  background: #ffe6c2;\n  color: #3d3d3d;\n}\n@media (max-width: 930px) {\n  .card-row[_ngcontent-%COMP%] {\n    flex-direction: column;\n  }\n\n  .groups[_ngcontent-%COMP%] {\n    margin-left: 11px;\n    flex-direction: column;\n    width: 97%;\n  }\n\n  .groups[_ngcontent-%COMP%]   .groups-list-wrapper[_ngcontent-%COMP%] {\n    width: 100%;\n    padding-right: 5px;\n  }\n\n  .swap-arrows[_ngcontent-%COMP%] {\n    margin-top: -8px;\n    margin-bottom: 15px;\n    align-items: center;\n    justify-content: center;\n    transform: rotate(90deg);\n  }\n\n  .advanced-features-wrapper[_ngcontent-%COMP%] {\n    padding-top: 0px;\n  }\n\n  .feature-text[_ngcontent-%COMP%] {\n    width: 155px;\n    margin-right: 14px;\n  }\n}\n.group-container[_ngcontent-%COMP%] {\n  width: 100%;\n}\n.helper-txt[_ngcontent-%COMP%] {\n  color: #ff8e3d;\n  font-size: 12px;\n  display: block;\n  padding-top: 20px;\n}\n.right-elements[_ngcontent-%COMP%] {\n  width: 77%;\n}\n.new[_ngcontent-%COMP%] {\n  background: #E91E63;\n  border-radius: 5px !important;\n  padding: 1px;\n  padding-right: 4px;\n  padding-left: 4px;\n  color: white;\n  position: absolute;\n  right: 0px;\n  margin-right: 5px;\n  font-weight: 600;\n  font-size: 9px;\n  top: -2px;\n}\n.container[_ngcontent-%COMP%] {\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  width: 150px;\n}"]}),o}()}]}],Et=function(){var o=(0,I.Z)(function s(){(0,J.Z)(this,s)});return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[A.Bz.forChild(zt)],A.Bz]}),o}(),Lt=_(5032),Vt=function(){var o=(0,I.Z)(function s(){(0,J.Z)(this,s)});return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[V],imports:[[d.ez,Et,Lt.m]]}),o}()},2125:function(j,G,_){_.d(G,{D:function(){return T}});var I=_(5671),J=_(3144),d=_(5e3),A=_(4825),F=_(9808),Q=_(3075),x=_(9489),y=_(42);function c(h,m){1&h&&d._UZ(0,"br")}function N(h,m){if(1&h){var b=d.EpF();d.TgZ(0,"span"),d.TgZ(1,"nb-checkbox",13),d.NdJ("ngModelChange",function(E){return d.CHM(b),d.oxw(2).isChecked=E})("checkedChange",function(E){return d.CHM(b),d.oxw(2).isChecked=E}),d._uU(2),d.qZA(),d.qZA()}if(2&h){var Z=d.oxw(2);d.xp6(1),d.Q6J("ngModel",Z.isChecked),d.xp6(1),d.Oqu(Z.checkboxLabel)}}function e(h,m){1&h&&d._UZ(0,"br")}function R(h,m){if(1&h){var b=d.EpF();d.TgZ(0,"div",14),d.TgZ(1,"textarea",15),d.NdJ("ngModelChange",function(E){return d.CHM(b),d.oxw(2).reason=E}),d.qZA(),d.qZA()}if(2&h){var Z=d.oxw(2);d.xp6(1),d.Q6J("ngModel",Z.reason)}}function q(h,m){if(1&h){var b=d.EpF();d.TgZ(0,"app-button",16),d.NdJ("onClick",function(){return d.CHM(b),d.oxw(2).close()}),d._uU(1,"Cancel"),d.qZA()}}function O(h,m){if(1&h){var b=d.EpF();d.TgZ(0,"div",2),d.TgZ(1,"nb-card",3),d.TgZ(2,"nb-card-header"),d.TgZ(3,"label",4),d._uU(4),d.qZA(),d._UZ(5,"span",5),d.qZA(),d.TgZ(6,"nb-card-body",6),d._UZ(7,"span",7),d.YNc(8,c,1,0,"br",8),d.YNc(9,N,3,2,"span",8),d.YNc(10,e,1,0,"br",8),d.YNc(11,R,2,1,"div",9),d.TgZ(12,"div",10),d.YNc(13,q,2,0,"app-button",11),d.TgZ(14,"button",12),d.NdJ("click",function(){return d.CHM(b),d.oxw().proceed()}),d._uU(15),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&h){var Z=d.oxw();d.Tol("modal_wrapper resp-confirm "+Z.className),d.xp6(4),d.AsE("",Z.type," ",Z.title,""),d.xp6(3),d.Q6J("innerHtml",Z.textToDisplay,d.oJD),d.xp6(1),d.Q6J("ngIf",Z.checkboxLabel),d.xp6(1),d.Q6J("ngIf",Z.checkboxLabel),d.xp6(1),d.Q6J("ngIf",Z.checkboxLabel),d.xp6(1),d.Q6J("ngIf",Z.isComment),d.xp6(2),d.Q6J("ngIf",!Z.displayOnly),d.xp6(1),d.Q6J("status",Z.status),d.xp6(1),d.hij(" ",Z.displayOnly?"Okay":Z.type," ")}}var U=["*"],T=function(){var h=function(){function m(){(0,I.Z)(this,m),this.proceedDelete=new d.vpe,this.proceedWithComment=new d.vpe,this.proceedSave=new d.vpe,this.proceedCancel=new d.vpe,this.reason="",this.isChecked=!1,this.checkboxLabel=this.checkboxLabel,this.textToDisplay=this.textToDisplay?this.textToDisplay:"Are you sure you want to proceed?",this.type=this.type?this.type:"Delete",this.isComment=!!this.isComment&&this.isComment,this.status=this.status?this.status:"danger",this.displayOnly=!!this.displayOnly&&this.displayOnly}return(0,J.Z)(m,[{key:"ngOnInit",value:function(){this.className=this.className?this.className:""}},{key:"proceed",value:function(){this.proceedSave.emit(),this.isComment&&""!=this.reason?this.proceedWithComment.emit({isChecked:this.isChecked,reason:this.reason}):this.proceedDelete.emit(this.isChecked),this.close()}},{key:"open",value:function(){this.popover.show()}},{key:"close",value:function(){this.popover.hide(),this.proceedCancel.emit()}}]),m}();return h.\u0275fac=function(b){return new(b||h)},h.\u0275cmp=d.Xpm({type:h,selectors:[["app-confirm-popup"]],viewQuery:function(b,Z){var M;1&b&&d.Gf(A.ydg,5),2&b&&d.iGM(M=d.CRH())&&(Z.popover=M.first)},inputs:{textToDisplay:"textToDisplay",className:"className",title:"title",type:"type",checkboxLabel:"checkboxLabel",isComment:"isComment",status:"status",displayOnly:"displayOnly"},outputs:{proceedDelete:"proceedDelete",proceedWithComment:"proceedWithComment",proceedSave:"proceedSave",proceedCancel:"proceedCancel"},ngContentSelectors:U,decls:4,vars:1,consts:[["nbPopoverPlacement","bottom",1,"resp-leave","clickable-area",3,"nbPopover"],["templateRef",""],[2,"width","350px"],[1,"popup-card"],[2,"color","white","font-weight","500"],[1,"gray_text","subheading"],[2,"background-color","white"],[2,"font-weight","500",3,"innerHtml"],[4,"ngIf"],["class","manager-comment",4,"ngIf"],[1,"confirm_popup_footer",2,"display","flex","justify-content","flex-end","align-items","center"],[3,"onClick",4,"ngIf"],["nbButton","","type","submit",2,"height","30px","width","70px",3,"status","click"],[1,"checkbox-shifts",3,"ngModel","ngModelChange","checkedChange"],[1,"manager-comment"],["maxlength","500","aria-label","description input","nbInput","","fullWidth","","name","message","placeholder","Add comment (optional)",3,"ngModel","ngModelChange"],[3,"onClick"]],template:function(b,Z){if(1&b&&(d.F$t(),d.TgZ(0,"span",0),d.Hsn(1),d.qZA(),d.YNc(2,O,16,12,"ng-template",null,1,d.W1O)),2&b){var M=d.MAs(3);d.Q6J("nbPopover",M)}},directives:[A.ydg,A.Asz,A.ndF,A.yKW,F.O5,A.NTf,Q.JJ,Q.On,x.x0,x.bf,A.h8i,Q.Fj,Q.nD,y.r,A.DPz],styles:['.confirm_popup[_ngcontent-%COMP%] {\n  padding: 15px;\n  text-align: center;\n  margin-top: 2px;\n  width: 394px;\n  font-family: "Nunito";\n  color: #000;\n}\n\n.confirm_popup_footer[_ngcontent-%COMP%] {\n  right: 22px;\n  bottom: 10px;\n  z-index: 1030;\n  -webkit-transform: translate3d(0, 0, 0);\n  -webkit-backface-visibility: hidden;\n  -webkit-transform: translateZ(0);\n}\n\n@media (max-width: 550px) {\n  .confirm_popup[_ngcontent-%COMP%] {\n    width: 254px !important;\n  }\n}\n\n  .askq-popup .popup-card nb-card-header {\n  background: #5390FF !important;\n}\n\n  .popup-card {\n  box-shadow: none !important;\n  margin-left: -1px;\n  margin-top: -1px;\n  margin-right: -1px;\n}\n\n  .popup-card nb-card-header {\n  text-align: center !important;\n  background: #7f84ea !important;\n  border-top-left-radius: 10px !important;\n  border-top-right-radius: 10px !important;\n}\n\n  .modal_wrapper .popup-card nb-card-body {\n  overflow-y: hidden !important;\n}\n\n.manager-comment[_ngcontent-%COMP%] {\n  margin-top: 10px;\n  margin-bottom: 5px;\n}\n\n.clickable-area[_ngcontent-%COMP%] {\n  border-radius: 100px;\n  display: block;\n}']}),h}()},9894:function(j,G,_){_.d(G,{T:function(){return q}});var I=_(5671),J=_(3144),d=_(5e3),A=_(6300),F=_(3075),Q=_(9489),x=_(9808),y=_(4825);function c(O,U){if(1&O&&(d.ynx(0),d._UZ(1,"input",2),d._UZ(2,"nb-date-timepicker",3,4),d.BQk()),2&O){var T=d.MAs(3),h=d.oxw();d.xp6(1),d.Q6J("nbDatepicker",T)("formControlName",h.controlName)("placeholder",h.placeholder),d.xp6(1),d.Q6J("twelveHoursFormat",!0)}}function N(O,U){if(1&O){var T=d.EpF();d.ynx(0),d.TgZ(1,"input",5),d.NdJ("click",function(){return d.CHM(T),d.oxw().setClass()}),d.qZA(),d._UZ(2,"nb-date-timepicker",6,4),d.BQk()}if(2&O){var h=d.MAs(3),m=d.oxw();d.xp6(1),d.Q6J("nbDatepicker",h)("formControlName",m.controlName)("placeholder",m.placeholder),d.xp6(1),d.Q6J("twelveHoursFormat",!0)}}function e(O,U){if(1&O){var T=d.EpF();d.ynx(0),d.TgZ(1,"input",7),d.NdJ("click",function(){return d.CHM(T),d.oxw().hideFooter()}),d.qZA(),d.TgZ(2,"nb-timepicker",8,9),d.NdJ("onSelectTime",function(Z){return d.CHM(T),d.oxw().onSelectTime(Z)}),d.qZA(),d.BQk()}if(2&O){var h=d.MAs(3),m=d.oxw();d.xp6(1),d.Q6J("nbTimepicker",h)("formControlName",m.controlName)("placeholder",m.placeholder),d.xp6(1),d.Q6J("twelveHoursFormat",!0)}}function R(O,U){if(1&O){var T=d.EpF();d.ynx(0),d.TgZ(1,"input",10),d.NdJ("input",function(Z){return d.CHM(T),d.oxw().onValueChange(Z)}),d.qZA(),d._UZ(2,"nb-datepicker",11,12),d.BQk()}if(2&O){var h=d.MAs(3),m=d.oxw();d.xp6(1),d.Q6J("nbDatepicker",h)("formControlName",m.controlName)("placeholder",m.placeholder),d.xp6(1),d.Q6J("min",m.minDate)("filter",m.filter)}}var q=function(){var O=function(){function U(T){(0,I.Z)(this,U),this.gs=T,this.appendedTo="body",this.dateType="date",this.placeholder=this.placeholder?this.placeholder:"Select date and time",this.onlyTime=!!this.onlyTime,this.onlyTimePicker=!!this.onlyTimePicker,this.onlyDate=!!this.onlyDate,this.filter=!this.filter||this.filter}return(0,J.Z)(U,[{key:"ngOnInit",value:function(){var h=this.minDate;this.minDate=this.minDate?this.minDate:new Date(1900,0,1),this.maxDate=this.maxDate?this.maxDate:new Date,this.yearRange=this.minDate.getFullYear()+":"+this.maxDate.getFullYear(),this.onlyDate&&(this.minDate=h||this.gs.getPrevDate(new Date,1))}},{key:"setClass",value:function(){setTimeout(function(){var h=document.getElementsByTagName("nb-calendar-with-time");console.log(h),h&&h[0]&&(h[0].className="shift-hrs-picker")},150)}},{key:"hideFooter",value:function(){setTimeout(function(){var h=document.getElementsByTagName("nb-card-footer"),m=document.getElementsByTagName("nb-calendar-actions");h&&h[0]&&(h[0].className="padding-2px"),m&&m[0]&&(h[0].className="d-none")},150)}},{key:"onValueChange",value:function(h){var m=this;this.form.controls[this.controlName.toString()].setValue(this.gs.getPrevDate(new Date,2)),setTimeout(function(){m.form.controls[m.controlName.toString()].setValue(null)})}},{key:"onSelectTime",value:function(h){this.form.controls[this.controlName.toString()].setValue(h.time)}}]),U}();return O.\u0275fac=function(T){return new(T||O)(d.Y36(A.m))},O.\u0275cmp=d.Xpm({type:O,selectors:[["app-timer-input"]],inputs:{form:"form",controlName:"controlName",minDate:"minDate",maxDate:"maxDate",appendedTo:"appendedTo",dateType:"dateType",onlyTime:"onlyTime",onlyTimePicker:"onlyTimePicker",onlyDate:"onlyDate",filter:"filter",placeholder:"placeholder"},decls:5,vars:5,consts:[[3,"formGroup"],[4,"ngIf"],["aria-label","timer input","nbInput","",3,"nbDatepicker","formControlName","placeholder"],["format","MM/dd/yyyy hh:mm a",3,"twelveHoursFormat"],["dateTimePicker",""],["aria-label","timer input","nbInput","",3,"nbDatepicker","formControlName","placeholder","click"],["format","hh:mm a",2,"display","none",3,"twelveHoursFormat"],["placeholder","Enter time","nbInput","","twelveHoursFormat","",3,"nbTimepicker","formControlName","placeholder","click"],["timeFormat","hh:mm a",3,"twelveHoursFormat","onSelectTime"],["timepicker",""],["aria-label","timer input","nbInput","",3,"nbDatepicker","formControlName","placeholder","input"],["format","MM/dd/yyyy",3,"min","filter"],["datePicker",""]],template:function(T,h){1&T&&(d.TgZ(0,"form",0),d.YNc(1,c,4,4,"ng-container",1),d.YNc(2,N,4,4,"ng-container",1),d.YNc(3,e,4,4,"ng-container",1),d.YNc(4,R,4,5,"ng-container",1),d.qZA()),2&T&&(d.Q6J("formGroup",h.form),d.xp6(1),d.Q6J("ngIf",!h.onlyTime&&!h.onlyDate&&!h.onlyTimePicker),d.xp6(1),d.Q6J("ngIf",h.onlyTime),d.xp6(1),d.Q6J("ngIf",h.onlyTimePicker),d.xp6(1),d.Q6J("ngIf",h.onlyDate))},directives:[F._Y,F.JL,F.sg,Q.w5,x.O5,y.h8i,y.$kf,F.Fj,F.JJ,F.u,Q.x0,Q.bf,y.VW_,y.etF,y.emG,y.B4C],styles:[""]}),O}()}}]);