"use strict";(self.webpackChunkAzal_FE=self.webpackChunkAzal_FE||[]).push([[690],{7690:function(Ei,z,m){m.r(z),m.d(z,{TasksModule:function(){return Ri}});var Z=m(3144),P=m(5671),b=m(9808),D=m(4202),v=m(8279),y=m(7243),M=m(6271),n=m(5e3),tn=m(7757),h=m.n(tn),w=m(655),en=m(7756),q=function(){var i=function(){function o(e){var t=this;(0,P.Z)(this,o),this.http=e,this.addTaskComment=function(a){return(0,w.mG)(t,void 0,void 0,h().mark(function s(){var l=this;return h().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",new Promise(function(c,d){l.http.post(y.J.tasks.post.addTaskComment,a).subscribe(function(u){c(u)},function(u){console.log(u),d(u)})}));case 1:case"end":return p.stop()}},s)}))},this.addNewTask=function(a){return(0,w.mG)(t,void 0,void 0,h().mark(function s(){var l=this;return h().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",new Promise(function(c,d){l.http.post(y.J.tasks.post.addTask,a).subscribe(function(u){c(u)},function(u){console.log(u),d(u)})}));case 1:case"end":return p.stop()}},s)}))},this.editTask=function(a){return(0,w.mG)(t,void 0,void 0,h().mark(function s(){var l=this;return h().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",new Promise(function(c,d){l.http.patch(y.J.tasks.patch.editTask,a).subscribe(function(u){c(u)},function(u){console.log(u),d(u)})}));case 1:case"end":return p.stop()}},s)}))},this.addUpdateTaskTags=function(a){return(0,w.mG)(t,void 0,void 0,h().mark(function s(){var l=this;return h().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",new Promise(function(c,d){l.http.post(y.J.tasks.post.addUpdateTags,a).subscribe(function(u){c(u)},function(u){console.log(u),d(u)})}));case 1:case"end":return p.stop()}},s)}))},this.updateTaskPriority=function(a){return(0,w.mG)(t,void 0,void 0,h().mark(function s(){var l=this;return h().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",new Promise(function(c,d){l.http.patch(y.J.tasks.patch.updateTaskPriority,a).subscribe(function(u){c(u)},function(u){console.log(u),d(u)})}));case 1:case"end":return p.stop()}},s)}))},this.getFilters=function(){return(0,w.mG)(t,void 0,void 0,h().mark(function a(){var s=this;return h().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise(function(p,c){s.http.get(y.J.tasks.get.filters).subscribe(function(_){p(_)},function(_){console.log(_),c(_)})}));case 1:case"end":return r.stop()}},a)}))},this.assignTaskToUser=function(a){return(0,w.mG)(t,void 0,void 0,h().mark(function s(){var l=this;return h().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",new Promise(function(c,d){l.http.patch(y.J.tasks.post.assignTaskToUser,a).subscribe(function(u){c(u)},function(u){console.log(u),d(u)})}));case 1:case"end":return p.stop()}},s)}))},this.revokePoints=function(a){return(0,w.mG)(t,void 0,void 0,h().mark(function s(){var l=this;return h().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",new Promise(function(c,d){l.http.patch(y.J.tasks.patch.revokePoints+"?points_id="+a.points_id+"&is_revoked="+a.is_revoked+"&is_undone="+a.is_undone,a.reason?{reason:a.reason}:{}).subscribe(function(g){c(g)},function(g){console.log(g),d(g)})}));case 1:case"end":return p.stop()}},s)}))},this.deleteTask=function(a){return(0,w.mG)(t,void 0,void 0,h().mark(function s(){var l=this;return h().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",new Promise(function(c,d){l.http.delete(y.J.tasks.delete.deleteTask+"?task_id="+a.task_id).subscribe(function(u){c(u)},function(u){console.log(u),d(u)})}));case 1:case"end":return p.stop()}},s)}))}}return(0,Z.Z)(o,[{key:"getPdf",value:function(t){return this.http.getPdfFile(t)}},{key:"getShiftNames",value:function(t){return t.map(function(a){return a.name+(a.task_repetition&&a.task_repetition>1?"("+a.task_repetition+")":"")}).join(", ")}},{key:"isMultiTask",value:function(t){var a=!1;return t.some(function(s){s.task_repetition>1&&(a=!0)}),a}},{key:"getTaskHistory",value:function(t){var a=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{pageIndex:0,pageSize:10};return new Promise(function(l,r){a.http.get(y.J.tasks.get.taskHistory+"?task_id="+t+"&page_no="+(s.pageIndex+1)+"&page_size="+s.pageSize).subscribe(function(c){l(c)},function(c){console.log(c),r(c)})})}},{key:"getReportsTableData",value:function(t){var a=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{pageIndex:0,pageSize:25},l=arguments.length>2?arguments[2]:void 0;return new Promise(function(r,p){var c=y.J.tasks.get.logs+"?page_no="+(s.pageIndex+1)+"&page_size="+s.pageSize;t&&(c+="&search="+t),(null==l?void 0:l.region_id)&&(c+="&region_id="+l.region_id),a.http.get(c).subscribe(function(d){r(d)},function(d){console.log(d),p(d)})})}},{key:"getDailyReportsTableData",value:function(t,a,s){var l=this;return new Promise(function(r,p){var c=y.J.tasks.get.dailyReport+"?date="+a;t&&(c+="&search="+t),(null==s?void 0:s.region_id)&&(c+="&region_id="+s.region_id),(null==s?void 0:s.shift_id)&&(c+="&shift_id="+s.shift_id),(null==s?void 0:s.all_shifts)&&(c+="&all_shifts="+(null==s?void 0:s.all_shifts)),l.http.get(c).subscribe(function(d){r(d)},function(d){console.log(d),p(d)})})}},{key:"getTasksTableData",value:function(t){var a=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{pageIndex:0,pageSize:25},l=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new Promise(function(p,c){var d=y.J.tasks.get.tasks+"?page_no="+(s.pageIndex+1)+"&page_size="+s.pageSize;if(t&&(d+="&search="+t),(null==l?void 0:l.filter_id)&&(d+="&filter_id="+l.filter_id),(null==l?void 0:l.shift_id)&&(d+="&shift_id="+l.shift_id),(null==l?void 0:l.region_id)&&(d+="&region_id="+l.region_id),r)for(var _ in r)r[_]&&(d+="&"+_+"="+r[_]);a.http.get(d).subscribe(function(u){p(u)},function(u){console.log(u),c(u)})})}}]),o}();return i.\u0275fac=function(e){return new(e||i)(n.LFG(en.s))},i.\u0275prov=n.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i}(),O=m(6300),J=m(5837),S=m(605),x=m(4825),I=m(4605),N=m(4266),F=m(8517),U=m(1201),R=m(5116),V=m(1062);function an(i,o){1&i&&n._UZ(0,"img",33)}var Y=function(o){return{active:o}},H=function(o){return{notVisible:o}};function on(i,o){if(1&i){var e=n.EpF();n.TgZ(0,"li",29),n.NdJ("click",function(){var r=n.CHM(e).$implicit;return n.oxw().selectShift(r)}),n._UZ(1,"i",30),n.YNc(2,an,1,0,"img",31),n.TgZ(3,"span",32),n._uU(4),n.qZA(),n.qZA()}if(2&i){var t=o.$implicit,a=n.oxw();n.Q6J("ngClass",n.VKq(6,Y,(null==a.selectedShift?null:a.selectedShift.id)==(null==t?null:t.id))),n.xp6(1),n.Tol(t.icon),n.Q6J("ngClass",n.VKq(8,H,null==t.id)),n.xp6(1),n.Q6J("ngIf",null==t.id),n.xp6(2),n.hij(" ",t.shift_name," ")}}function sn(i,o){1&i&&n._UZ(0,"img",33)}function ln(i,o){if(1&i){var e=n.EpF();n.TgZ(0,"li",29),n.NdJ("click",function(){var r=n.CHM(e).$implicit;return n.oxw(2).selectShift(r)}),n._UZ(1,"i",30),n.YNc(2,sn,1,0,"img",31),n.TgZ(3,"span",32),n._uU(4),n.qZA(),n.qZA()}if(2&i){var t=o.$implicit,a=n.oxw(2);n.Q6J("ngClass",n.VKq(6,Y,(null==a.selectedShift?null:a.selectedShift.id)==(null==t?null:t.id))),n.xp6(1),n.Tol(t.icon),n.Q6J("ngClass",n.VKq(8,H,null==t.id)),n.xp6(1),n.Q6J("ngIf",null==t.id),n.xp6(2),n.hij(" ",t.shift_name," ")}}function rn(i,o){if(1&i&&(n.TgZ(0,"div",34),n.TgZ(1,"ul",7),n.YNc(2,ln,5,10,"li",8),n.qZA(),n.qZA()),2&i){var e=n.oxw();n.xp6(2),n.Q6J("ngForOf",e.shifts)}}function pn(i,o){1&i&&(n.TgZ(0,"div",40),n.TgZ(1,"span",41),n.TgZ(2,"span",42),n._uU(3," Please wait while the file is being prepared for download... "),n.qZA(),n.qZA(),n.qZA())}function cn(i,o){if(1&i){var e=n.EpF();n.TgZ(0,"span",35),n.YNc(1,pn,4,0,"div",36),n.TgZ(2,"app-search-input",37),n.NdJ("searchEvent",function(s){return n.CHM(e),n.oxw().onSearch(s)})("searchAll",function(s){return n.CHM(e),n.oxw().onSearchAll(s)}),n.qZA(),n.TgZ(3,"span",38),n.NdJ("click",function(){return n.CHM(e),n.oxw().downloadDailyReport()}),n._UZ(4,"i",39),n.qZA(),n.qZA()}if(2&i){var t=n.oxw();n.xp6(1),n.Q6J("ngIf",t.fileDownloading),n.xp6(1),n.Q6J("placeholder","Search by task or user")("showHelperButton",!1),n.xp6(1),n.Q6J("nbSpinner",!!t.fileDownloading)}}function dn(i,o){1&i&&(n.TgZ(0,"th",62),n._uU(1,"Task"),n.qZA())}function gn(i,o){if(1&i&&(n.TgZ(0,"span",70),n.TgZ(1,"span",71),n._uU(2),n.qZA(),n.qZA()),2&i){var e=n.oxw().$implicit;n.xp6(2),n.hij(" ",e.assigned_to_user_name," ")}}var un=function(o){return{"enable-priority":o}};function _n(i,o){if(1&i&&(n.TgZ(0,"td",63),n.TgZ(1,"span",64),n.TgZ(2,"label",65),n._uU(3,"Task"),n.qZA(),n.TgZ(4,"span",66),n.TgZ(5,"span",67),n._UZ(6,"i",68),n._uU(7),n.qZA(),n.YNc(8,gn,3,1,"span",69),n.qZA(),n.qZA(),n.qZA()),2&i){var e=o.$implicit;n.xp6(6),n.Q6J("ngClass",n.VKq(3,un,"HIGH"===e.priority)),n.xp6(1),n.hij(" ",e.task_name," "),n.xp6(1),n.Q6J("ngIf",e.assigned_to_user_name)}}function fn(i,o){1&i&&(n.TgZ(0,"th",72),n._uU(1,"Action by"),n.qZA())}function mn(i,o){if(1&i&&(n.ynx(0),n.TgZ(1,"span",77),n._UZ(2,"img",78),n.TgZ(3,"span",79),n._uU(4),n.qZA(),n.qZA(),n.BQk()),2&i){var e=n.oxw(2).$implicit;n.xp6(4),n.hij(" ",e.points_earned," pts earned ")}}function hn(i,o){if(1&i&&(n.ynx(0),n.TgZ(1,"span",66),n.TgZ(2,"span",74),n._UZ(3,"app-user-avatar",75),n.TgZ(4,"span",76),n._uU(5),n.ALo(6,"date"),n.qZA(),n.YNc(7,mn,5,1,"ng-container",25),n.qZA(),n.qZA(),n.BQk()),2&i){var e=n.oxw().$implicit,t=n.oxw(2);n.xp6(3),n.Tol(t.getStatusClass(e)),n.Q6J("name",e.modified_by)("color",e.user_color+t.opacity)("initialColor",e.user_color)("nbTooltip",e.modified_by),n.xp6(2),n.hij("",n.xi3(6,8,e.modified_on,"hh:mm aa")," "),n.xp6(2),n.Q6J("ngIf",e.points_earned)}}function vn(i,o){if(1&i&&(n.TgZ(0,"td",73),n.TgZ(1,"span",64),n.TgZ(2,"label",65),n._uU(3,"Action by"),n.qZA(),n.YNc(4,hn,8,11,"ng-container",25),n.qZA(),n.qZA()),2&i){var e=o.$implicit;n.xp6(4),n.Q6J("ngIf",null!==e.modification&&!(null!=e.modification&&e.modification.includes("Created")))}}function xn(i,o){1&i&&(n.TgZ(0,"th",80),n._uU(1,"Shift"),n.qZA())}function Tn(i,o){if(1&i&&(n.TgZ(0,"td",81),n.ynx(1),n.TgZ(2,"label",65),n._uU(3,"Shift"),n.qZA(),n._uU(4),n.BQk(),n.qZA()),2&i){var e=o.$implicit;n.xp6(4),n.hij(" ",e.shift_name," ")}}function kn(i,o){1&i&&(n.TgZ(0,"th",62),n._uU(1,"Comment"),n.qZA())}function Cn(i,o){if(1&i&&(n.ynx(0),n.TgZ(1,"label",65),n._uU(2,"Comment"),n.qZA(),n._uU(3),n.BQk()),2&i){var e=n.oxw().$implicit;n.xp6(3),n.hij(" ",e.comment," ")}}function bn(i,o){if(1&i&&(n.TgZ(0,"td",63),n.YNc(1,Cn,4,1,"ng-container",25),n.qZA()),2&i){var e=o.$implicit;n.xp6(1),n.Q6J("ngIf",!(null!=e.modification&&e.modification.includes("Created")))}}function wn(i,o){1&i&&(n.TgZ(0,"th",82),n._uU(1,"Time"),n.qZA())}function yn(i,o){if(1&i&&(n.ynx(0),n.TgZ(1,"label",84),n._uU(2,"Time"),n.qZA(),n._uU(3),n.ALo(4,"date"),n.BQk()),2&i){var e=n.oxw().$implicit;n.xp6(3),n.hij(" ",n.xi3(4,1,e.modified_on,"MMM d, hh:mm aa")," ")}}function Zn(i,o){if(1&i&&(n.TgZ(0,"td",83),n.YNc(1,yn,5,4,"ng-container",25),n.qZA()),2&i){var e=o.$implicit;n.xp6(1),n.Q6J("ngIf",!(null!=e.modification&&e.modification.includes("Created")))}}function Pn(i,o){1&i&&(n.TgZ(0,"th",85),n._uU(1,"Picture"),n.qZA())}function Mn(i,o){if(1&i&&(n.TgZ(0,"span",88),n._UZ(1,"app-user-avatar",89),n.ALo(2,"async"),n.ALo(3,"imageAuth"),n.TgZ(4,"app-text-popup",90),n.TgZ(5,"span",91),n._UZ(6,"i",92),n.qZA(),n.qZA(),n.qZA()),2&i){var e=n.oxw().$implicit;n.xp6(1),n.Q6J("picture",n.lcZ(2,5,n.lcZ(3,7,null==e?null:e.image_url)))("task",!0)("showInitials",!1),n.xp6(3),n.Q6J("imageClass","reports-azalio-play")("image",e.image_url?e.image_url:"black")}}function On(i,o){if(1&i&&(n.TgZ(0,"td",86),n.TgZ(1,"span",64),n.TgZ(2,"label",65),n._uU(3,"Picture"),n.qZA(),n.YNc(4,Mn,7,9,"span",87),n.qZA(),n.qZA()),2&i){var e=o.$implicit;n.xp6(4),n.Q6J("ngIf",null!=e.image_url&&!(null!=e.image_url&&e.image_url.includes("id=null")))}}function An(i,o){1&i&&n._UZ(0,"tr",93)}var Dn=function(o){return{"large-row":o}};function qn(i,o){if(1&i&&n._UZ(0,"tr",94),2&i){var e=o.$implicit,t=n.oxw(2);n.Tol(t.getStatusClass(e)),n.Q6J("ngClass",n.VKq(3,Dn,(null==e.image_url?null:e.image_url.includes("id"))&&!e.image_url.includes("id=null")))}}function Jn(i,o){if(1&i&&(n.ynx(0),n.TgZ(1,"table",43),n.ynx(2,44),n.YNc(3,dn,2,0,"th",45),n.YNc(4,_n,9,5,"td",46),n.BQk(),n.ynx(5,47),n.YNc(6,fn,2,0,"th",48),n.YNc(7,vn,5,1,"td",49),n.BQk(),n.ynx(8,50),n.YNc(9,xn,2,0,"th",51),n.YNc(10,Tn,5,1,"td",52),n.BQk(),n.ynx(11,53),n.YNc(12,kn,2,0,"th",45),n.YNc(13,bn,2,1,"td",46),n.BQk(),n.ynx(14,54),n.YNc(15,wn,2,0,"th",55),n.YNc(16,Zn,2,1,"td",56),n.BQk(),n.ynx(17,57),n.YNc(18,Pn,2,0,"th",58),n.YNc(19,On,5,1,"td",59),n.BQk(),n.YNc(20,An,1,0,"tr",60),n.YNc(21,qn,1,5,"tr",61),n.qZA(),n.BQk()),2&i){var e=n.oxw();n.xp6(1),n.Q6J("dataSource",e.data),n.xp6(19),n.Q6J("matHeaderRowDef",e.displayedColumns),n.xp6(1),n.Q6J("matRowDefColumns",e.displayedColumns)}}var Sn=function(){var i=function(){function o(e,t,a,s){var l=this;(0,P.Z)(this,o),this.service=e,this.gs=t,this.router=a,this.dataService=s,this.displayedColumns=["task","status","comment","picture"],this.dataSource=new v.by([]),this.selectedDate=new Date,this.allShift={id:null,shift_name:"All shifts",icon:null},this.pageLoading=!0,this.loading=!1,this.dataService.getConfigurations(!1).then(function(r){var p,c;(null===(c=null===(p=r.role.modules)||void 0===p?void 0:p.Tasks)||void 0===c?void 0:c.enabled)||l.router.navigate(["401"])}),this.singleRegion||(this.subscription=this.dataService.SharingRegionData.subscribe(function(r){l.sharedRegion=r,l.selectedShift=null,l.getData()}))}return(0,Z.Z)(o,[{key:"ngOnInit",value:function(){this.opacity=M.ZF,this.gs.hideSplashScreen()}},{key:"getData",value:function(){var t=this;this.pageLoading=!1,this.loading=!0,this.selectedDate&&this.sharedRegion&&(this.filterInput={region_id:this.sharedRegion?this.sharedRegion:null,shift_id:this.selectedShift?this.selectedShift.id:null,all_shifts:!(!this.selectedShift||null!=this.selectedShift.id)},this.loading=!0,this.service.getDailyReportsTableData(this.searchText,this.gs.convertToLocalDateString(this.selectedDate),this.filterInput).then(function(a){var s,l;t.shifts=a.shifts,t.shifts.unshift(t.allShift),t.selectedShift||(t.selectedShift=t.shifts[1]),t.data=a.tasks,t.emptySearchResults=!(0!==(null===(s=a.tasks)||void 0===s?void 0:s.length)||!t.searchText),t.emptyResults=0===(null===(l=a.tasks)||void 0===l?void 0:l.length)&&!t.searchText}).catch(function(a){console.log(a)}).finally(function(){t.scrollToTop(),t.pageLoading=!1,t.loading=!1}))}},{key:"onSearch",value:function(t){this.gs.logEvents("search_from_daily_report"),this.searchOn=t.trim(),this.searchText=this.searchOn,this.getData()}},{key:"onSearchAll",value:function(t){this.gs.logEvents("search_from_daily_report"),this.searchOn=t.trim()}},{key:"setDate",value:function(t){this.selectedDate=t,this.getData()}},{key:"getStatusClass",value:function(t){if(t.modification)return t.modification.includes("undone")?"undone":t.modification.includes("done")?"done":"comment"}},{key:"selectShift",value:function(t){this.selectedShift=t,this.getData(),this.displayedColumns=null==t.id?["task","shift","status","comment","picture"]:["task","status","comment","picture"]}},{key:"navigateTo",value:function(t){this.router.navigate([t])}},{key:"scrollToTop",value:function(){var t=document.getElementById("daily-report");t&&(t.scrollTop=0)}},{key:"downloadDailyReport",value:function(){var t=this,a=y.J.tasks.get.downloadTaskReport+"?date="+this.gs.convertToLocalDateString(this.selectedDate)+"&region_id=";a+=this.sharedRegion?this.sharedRegion:null,this.fileDownloading||(this.fileDownloading=!0,this.service.getPdf(a).toPromise().then(function(s){var l=new Uint8Array(atob(s).split("").map(function(r){return r.charCodeAt(0)}));t.gs.saveAsPdf(new Blob([l],{type:"application/pdf"}),"DailyReport")}).catch(function(s){t.gs.showToastError(s)}).finally(function(){t.fileDownloading=!1}))}},{key:"ngOnDestroy",value:function(){var t,a;null===(t=this.subscription)||void 0===t||t.unsubscribe(),null===(a=this.subscriptioSingle)||void 0===a||a.unsubscribe()}}]),o}();return i.\u0275fac=function(e){return new(e||i)(n.Y36(q),n.Y36(O.m),n.Y36(D.F0),n.Y36(J.s))},i.\u0275cmp=n.Xpm({type:i,selectors:[["app-daily-report"]],decls:34,vars:17,consts:[[3,"loading"],[1,"resp"],[1,"navbar-resp"],[1,"dropdown"],[1,"dropbtn"],[1,"fa","fa-caret-down"],[1,"dropdown-content"],[1,"shifts-list"],["class","shift-info ",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"daily-report-wrapper"],["class","reports-container","style","border-top: 0.2px solid #efefef; border-right: 1px solid #efefef",4,"ngIf"],["id","daily-report",1,"colored-column-info","timesheets_wrapper","dailyreports"],[1,"wrapper_header","first-row"],[1,"left-elements"],["size","medium","type","button","nbButton","","status","primary",1,"back-btn",3,"click"],["aria-hidden","true",1,"fa","fa-angle-left",2,"margin-right","7px"],[1,"input_datepicker"],[1,"datepicker_span","weekday_toggle",3,"click"],["aria-hidden","true",1,"fa","fa-chevron-down","arrow-down"],[3,"dateChange"],["dateTimePicker",""],["aria-label","date picker","nbInput","","placeholder","Pick Date",2,"visibility","hidden",3,"nbDatepicker"],["dateInput",""],["class","flex input-row","style","justify-content: flex-end;",4,"ngIf"],[1,"dailyreport-table",2,"padding","0px !important"],[4,"ngIf"],[1,"selecttask",3,"display","isScheduler","animation","animation2"],[1,"tasksanimation",3,"display","animation","textMessage"],[3,"display"],[1,"shift-info",3,"ngClass","click"],[3,"ngClass"],["src","assets/shifts-comment.png","class","default-icon",4,"ngIf"],[1,"sname"],["src","assets/shifts-comment.png",1,"default-icon"],[1,"reports-container",2,"border-top","0.2px solid #efefef","border-right","1px solid #efefef"],[1,"flex","input-row",2,"justify-content","flex-end"],["class","banner-wrapper",4,"ngIf"],[1,"search-task",3,"placeholder","showHelperButton","searchEvent","searchAll"],["nbSpinnerStatus","primary","nbTooltip","Download daily task report","nbTooltipPlacement","top",1,"print_span",3,"nbSpinner","click"],["aria-hidden","true",1,"fa","fa-file-arrow-down"],[1,"banner-wrapper"],[1,"banner"],[1,"banner-details"],["mat-table","",1,"daily-reports-tbl",3,"dataSource"],["matColumnDef","task"],["mat-header-cell","","style","width: 25%;",4,"matHeaderCellDef"],["mat-cell","","style","width: 25%;",4,"matCellDef"],["matColumnDef","status"],["mat-header-cell","","style","width: 15%;",4,"matHeaderCellDef"],["mat-cell","","style","width: 15%;",4,"matCellDef"],["matColumnDef","shift"],["mat-header-cell","","style","width: 10%;",4,"matHeaderCellDef"],["mat-cell","","style","width: 10%;",4,"matCellDef"],["matColumnDef","comment"],["matColumnDef","datetime"],["mat-header-cell","","style","width: 13%;",4,"matHeaderCellDef"],["mat-cell","","style","width: 13%;","class","comment-field",4,"matCellDef"],["matColumnDef","picture"],["mat-header-cell","","style","width: 20%;",4,"matHeaderCellDef"],["mat-cell","","style","width: 20%;",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"class","ngClass",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",2,"width","25%"],["mat-cell","",2,"width","25%"],[1,"column-wrapper"],[1,"show_in_resp"],[1,"resp-container"],[1,"taskname"],[1,"fa","fa-angle-double-up","priority",3,"ngClass"],["class","task-details",4,"ngIf"],[1,"task-details"],[1,"assigned-user"],["mat-header-cell","",2,"width","15%"],["mat-cell","",2,"width","15%"],[1,"align-col"],["size","small","nbTooltipPlacement","top",3,"name","color","initialColor","nbTooltip"],[1,"time"],[1,"pts"],["src","assets/coin.png"],[1,"points"],["mat-header-cell","",2,"width","10%"],["mat-cell","",2,"width","10%"],["mat-header-cell","",2,"width","13%"],["mat-cell","",1,"comment-field",2,"width","13%"],[1,"show_in_resp","label-txt"],["mat-header-cell","",2,"width","20%"],["mat-cell","",2,"width","20%"],["class","resp-container picture reports-azalio-play showhim",4,"ngIf"],[1,"resp-container","picture","reports-azalio-play","showhim"],["size","medium","onlyPicture","",1,"dailyreports-picture",3,"picture","task","showInitials"],[1,"relative",3,"imageClass","image"],[1,"image-preview"],["alt","preview image","aria-hidden","true",1,"fa","fa-search-plus","showme","image"],["mat-header-row",""],["mat-row","",3,"ngClass"]],template:function(e,t){if(1&e){var a=n.EpF();n._UZ(0,"app-loader",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"div",3),n.TgZ(4,"button",4),n._uU(5," Shifts "),n._UZ(6,"i",5),n.qZA(),n.TgZ(7,"div",6),n.TgZ(8,"ul",7),n.YNc(9,on,5,10,"li",8),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(10,"div",9),n.YNc(11,rn,3,1,"div",10),n.TgZ(12,"nb-layout-column",11),n.TgZ(13,"div",12),n.TgZ(14,"span",13),n.TgZ(15,"span"),n.TgZ(16,"button",14),n.NdJ("click",function(){return t.navigateTo("tasks/report")}),n._UZ(17,"i",15),n._uU(18," Back to reports"),n.qZA(),n.qZA(),n.TgZ(19,"span",16),n.TgZ(20,"span",17),n.NdJ("click",function(){return n.CHM(a),n.MAs(27).click()}),n._uU(21),n.ALo(22,"date"),n._UZ(23,"i",18),n.qZA(),n.TgZ(24,"nb-datepicker",19,20),n.NdJ("dateChange",function(r){return t.setDate(r)}),n.qZA(),n._UZ(26,"input",21,22),n.qZA(),n.qZA(),n.YNc(28,cn,5,4,"span",23),n.qZA(),n.TgZ(29,"div",24),n.YNc(30,Jn,22,3,"ng-container",25),n._UZ(31,"app-no-records",26),n._UZ(32,"app-no-records",27),n._UZ(33,"app-no-search-records",28),n.qZA(),n.qZA(),n.qZA()}if(2&e){var s=n.MAs(25);n.Q6J("loading",t.loading||t.fileDownloading),n.xp6(9),n.Q6J("ngForOf",t.shifts),n.xp6(2),n.Q6J("ngIf",t.shifts),n.xp6(10),n.hij("",n.lcZ(22,15,t.selectedDate)," "),n.xp6(5),n.Q6J("nbDatepicker",s),n.xp6(2),n.Q6J("ngIf",0!==t.sharedRegion),n.xp6(2),n.Q6J("ngIf",!t.pageLoading&&0!==t.sharedRegion),n.xp6(1),n.Q6J("display",0==t.sharedRegion&&!t.singleRegion)("isScheduler",!0)("animation","selectStoreForTask")("animation2","arrowTop"),n.xp6(1),n.Q6J("display",t.emptyResults)("animation","timesheet")("textMessage","No tasks"),n.xp6(1),n.Q6J("display",!t.emptyResults&&t.emptySearchResults)}},directives:[S.R,b.sg,b.mk,b.O5,x.dP_,x.DPz,x.B4C,x.h8i,x.$kf,I.J,x.jNv,x.Q7R,v.BZ,v.w1,v.fO,v.ge,v.Dz,v.ev,N.k,F.J,v.as,v.XQ,v.nj,v.Gk,U.k,R.V],pipes:[b.uU,b.Ov,V.z],styles:['.daily-report-wrapper[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: nowrap;\n  overflow: hidden;\n}\n\n.daily-report-wrapper[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-of-type(1) {\n  flex: 0.9;\n  background-color: white;\n  height: calc(100vh - 45.75px);\n  border-right: 1px solid #efefef;\n}\n\n.daily-report-wrapper[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-of-type(2) {\n  flex: 5;\n  overflow: hidden;\n  max-height: calc(100vh - 47px);\n  padding: 25px 20px !important;\n}\n\n.shifts-list[_ngcontent-%COMP%] {\n  margin-top: -5px !important;\n  display: initial;\n  padding-inline-start: inherit;\n  width: -webkit-fill-available;\n  width: -moz-available;\n}\n\n.default-icon[_ngcontent-%COMP%] {\n  width: 20px;\n  height: 20px;\n  display: flex;\n  justify-content: center;\n  margin-right: 8px !important;\n}\n\n.shift-info[_ngcontent-%COMP%] {\n  position: relative;\n  outline-style: none;\n  top: 15px;\n  left: 0px;\n  font-size: 13px;\n  font-weight: 500;\n  cursor: pointer;\n  padding: 9px;\n  padding-left: 15px;\n  padding-top: 13px;\n  padding-bottom: 13px;\n  border-bottom: 0.2px solid #efefef;\n  display: flex;\n  color: #707070a8;\n  align-items: center;\n}\n\n.shift-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  margin-right: 5px;\n  width: 20px;\n  display: flex;\n  justify-content: center;\n}\n\n.active[_ngcontent-%COMP%] {\n  background-color: #f0ecff;\n  color: #4c30e8c9;\n  border-left: 5px solid;\n  cursor: pointer;\n  font-size: 13px;\n  font-weight: 700;\n  padding-left: 10px !important;\n}\n\n.back-btn[_ngcontent-%COMP%] {\n  color: #7b68ee !important;\n  background-color: white !important;\n  border: 1px solid #7b68ee !important;\n  margin-right: 10px;\n}\n\n.task-details[_ngcontent-%COMP%] {\n  display: flex;\n  margin-top: 4px;\n  margin-left: 16px;\n}\n\n.pts[_ngcontent-%COMP%] {\n  color: #fabe2c;\n  display: flex;\n  align-items: center;\n  margin-top: 2px;\n}\n\n.pts[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n  margin-right: 5px;\n  margin-left: 15px;\n  margin-top: -7px;\n}\n\n.assigned-user[_ngcontent-%COMP%] {\n  background: #ece9ff;\n  border-radius: 15px;\n  padding: 1px;\n  padding-left: 6px;\n  padding-right: 6px;\n  display: flex;\n  margin-bottom: 3px;\n  font-size: 12px;\n}\n\n.done[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]:first-of-type, .done[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]:first-of-type, .done[_ngcontent-%COMP%]   td.mat-footer-cell[_ngcontent-%COMP%]:first-of-type {\n  border-left: 4px solid #8bc34a;\n}\n\n.done[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%] {\n  padding-left: 10px !important;\n  border-bottom: 1px solid #8bc34a !important;\n  border-top: 1px solid #8bc34a !important;\n}\n\n.done[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]:first-of-type, .done[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]:first-of-type, .done[_ngcontent-%COMP%]   td.mat-footer-cell[_ngcontent-%COMP%]:first-of-type {\n  border-top-left-radius: 0px;\n  border-top-right-radius: 0px;\n}\n\n.done[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]:last-of-type, .done[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]:last-of-type, .done[_ngcontent-%COMP%]   td.mat-footer-cell[_ngcontent-%COMP%]:last-of-type {\n  border-right: 1px solid #8bc34a !important;\n}\n\n.first-row[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  background-color: #f9faff !important;\n  height: auto !important;\n  justify-content: space-between;\n  top: 0px;\n  z-index: 2;\n  border-right: none !important;\n  padding: 0px !important;\n  padding-top: 20px !important;\n  padding-bottom: 12px !important;\n}\n\n.left-elements[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n}\n\n.datepicker_span[_ngcontent-%COMP%] {\n  padding: 6px 16px;\n  border-radius: 10px;\n  cursor: pointer;\n  border-radius: 2px;\n  min-width: 96px;\n  border-radius: 14px;\n  color: #6e689b !important;\n  font-weight: 700;\n  font-size: 14px;\n}\n\n  nb-datepicker-container nb-calendar {\n  position: absolute;\n  top: -28px;\n  left: -140px;\n}\n\n@media (max-width: 670px) {\n    nb-datepicker-container nb-calendar {\n    position: absolute;\n    top: -15px;\n    left: -177px;\n  }\n}\n\n.dailyreport-table[_ngcontent-%COMP%] {\n  background-color: #f9faff !important;\n  position: relative;\n  top: 0px;\n  border-right: none !important;\n  padding: 0px !important;\n  overflow: initial !important;\n}\n\n@media (max-width: 670px) {\n  .resp[_ngcontent-%COMP%] {\n    display: block;\n    overflow: hidden;\n  }\n\n  .reports-container[_ngcontent-%COMP%] {\n    display: none;\n  }\n\n  .tasks-azalio-play[_ngcontent-%COMP%] {\n    width: 150px;\n    height: 100px;\n  }\n}\n\n@media (min-width: 670px) {\n  .resp[_ngcontent-%COMP%] {\n    display: none;\n  }\n\n  .reports-container[_ngcontent-%COMP%] {\n    display: flex;\n  }\n}\n\n.navbar-resp[_ngcontent-%COMP%] {\n  overflow: hidden;\n  background-color: #715aed;\n  border: 1px solid #715aed;\n  border-radius: 4px 4px 0 0;\n  margin-top: 10px;\n}\n\n.dropdown[_ngcontent-%COMP%] {\n  float: left;\n  overflow: hidden;\n}\n\n.dropdown[_ngcontent-%COMP%]   .dropbtn[_ngcontent-%COMP%] {\n  font-size: 16px;\n  border: none;\n  outline: none;\n  color: white;\n  padding: 7px 13px;\n  background-color: inherit;\n  font-family: inherit;\n  margin: 0;\n}\n\n.dropdown-content[_ngcontent-%COMP%] {\n  display: none;\n  position: absolute;\n  background-color: #ffffff;\n  min-width: 175px;\n  box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);\n  z-index: 3;\n}\n\n.dropdown[_ngcontent-%COMP%]:hover   .dropdown-content[_ngcontent-%COMP%] {\n  display: block;\n}\n\n.resp[_ngcontent-%COMP%]   .shift-info[_ngcontent-%COMP%] {\n  top: -15px;\n  padding-top: 6px;\n  padding-bottom: 6px;\n}\n\n.resp[_ngcontent-%COMP%]   .shifts-list[_ngcontent-%COMP%] {\n  margin-top: 16px !important;\n  display: inherit;\n  width: -moz-available;\n}\n\n.resp-container[_ngcontent-%COMP%] {\n  display: grid;\n}\n\n.column-wrapper[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n}\n\n.tasks-azalio-play[_ngcontent-%COMP%] {\n  width: 230px;\n  height: 160px;\n  border-radius: 5px;\n}\n\n.notVisible[_ngcontent-%COMP%] {\n  display: none !important;\n}\n\n@media (max-width: 550px) {\n  .first-row[_ngcontent-%COMP%] {\n    align-items: initial !important;\n    flex-direction: column;\n  }\n\n  .input-row[_ngcontent-%COMP%] {\n    justify-content: flex-end !important;\n    align-items: center;\n  }\n}\n\n@media (max-width: 724px) and (min-width: 431px) {\n  .dailyreports[_ngcontent-%COMP%]   .input_datepicker[_ngcontent-%COMP%] {\n    top: 15px !important;\n    margin: 0px 0px auto !important;\n    right: auto !important;\n  }\n}\n\n@media (max-width: 430px) {\n  .dailyreports[_ngcontent-%COMP%]   .input_datepicker[_ngcontent-%COMP%] {\n    top: 16px !important;\n  }\n}\n\n.time[_ngcontent-%COMP%] {\n  margin-left: 34px;\n  padding-right: 6px;\n  margin-bottom: 3px;\n  font-size: 11px;\n  color: #878787;\n}\n\n.comment[_ngcontent-%COMP%] {\n  margin-bottom: -5px;\n}\n\n.points[_ngcontent-%COMP%] {\n  padding-right: 6px;\n  margin-bottom: 3px;\n  font-size: 11px;\n  color: #878787;\n  margin-left: 1px;\n  margin-top: -2px;\n}\n\n.print_span[_ngcontent-%COMP%] {\n  background: #ffffff;\n  padding: 8px 11px;\n  border-radius: 10px;\n  color: #7b68ee !important;\n  cursor: pointer;\n  font-weight: 500;\n  border-radius: 2px;\n  min-width: 30px;\n  border-radius: 52%;\n  width: 32px;\n  height: 32px;\n  box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;\n  margin-left: 10px;\n}\n\n.print_span[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  font-size: 16px;\n}\n\n.priority[_ngcontent-%COMP%] {\n  padding-right: 5px;\n  color: #ddd5d5;\n}\n\n.enable-priority[_ngcontent-%COMP%] {\n  color: #fb014c;\n  margin-top: 1px;\n  font-size: 11px;\n}\n\n.taskname[_ngcontent-%COMP%] {\n  display: flex;\n}\n\n.showhim[_ngcontent-%COMP%] {\n  position: relative;\n  border-radius: 5px;\n  max-width: 100%;\n  max-height: 100%;\n  background-color: #eeeeee;\n}\n\n.image-preview[_ngcontent-%COMP%] {\n  position: absolute;\n  right: 8px;\n  bottom: 10px;\n  color: white;\n  cursor: pointer !important;\n}\n\n.image[_ngcontent-%COMP%] {\n  font-size: 16px;\n  color: #000000;\n  background: #f0f0f0d4;\n  border-radius: 10px;\n  padding: 2px;\n}\n\n.large-row[_ngcontent-%COMP%] {\n  height: 100px !important;\n}\n\n@media (max-width: 930px) {\n  .done[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%] {\n    border-left: 4px solid #8bc34a;\n    border-bottom: 0px !important;\n    border-top: 0px !important;\n  }\n  .done[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]:last-of-type, .done[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]:last-of-type, .done[_ngcontent-%COMP%]   td.mat-footer-cell[_ngcontent-%COMP%]:last-of-type {\n    border-right: 0px !important;\n    border-bottom: 4px solid #e4e4e4 !important;\n  }\n}\n\n.banner-wrapper[_ngcontent-%COMP%] {\n  position: sticky;\n  top: 5px;\n  z-index: 3;\n  background-color: #f9faff !important;\n  height: 0px !important;\n}\n\n.banner[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: flex-end;\n  width: 120%;\n}\n\n.banner[_ngcontent-%COMP%]::after {\n  position: absolute;\n  content: "";\n  right: calc(6% - 72px);\n  top: 7px;\n  border-style: solid;\n  border-width: 0 8px 8px 8px;\n  border-color: transparent transparent #ffac90 transparent;\n  transition-duration: 0.3s;\n  transition-property: transform;\n  transform: rotate(90deg);\n  z-index: 4;\n}\n\n.banner[_ngcontent-%COMP%]   .banner-details[_ngcontent-%COMP%] {\n  background: #ffac90;\n  padding: 10px;\n  box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;\n  border-bottom-left-radius: 15px;\n  border-bottom-right-radius: 15px;\n  border-top-left-radius: 15px;\n  padding-left: 20px;\n  padding-right: 20px;\n  font-weight: 500;\n  color: black;\n  margin-top: 3px;\n  margin-right: 36px;\n  margin-top: -1px;\n}\n\n.banner[_ngcontent-%COMP%]   .banner-details[_ngcontent-%COMP%]   .banner-switch[_ngcontent-%COMP%] {\n  text-decoration: underline;\n  cursor: pointer;\n}\n\n@media (max-width: 1100px) {\n  .banner-wrapper[_ngcontent-%COMP%] {\n    display: none;\n  }\n}\n\n@media (max-width: 1220px) and (min-width: 1100px) {\n  .banner[_ngcontent-%COMP%]::after {\n    display: none;\n  }\n}']}),i}(),B=m(8457),j=m(2125);function Nn(i,o){if(1&i){var e=n.EpF();n.TgZ(0,"button",8),n.NdJ("click",function(){return n.CHM(e),n.oxw(3).navigateTo("tasks/dailyReport")}),n._uU(1,"View Daily Report"),n.qZA()}}function Un(i,o){if(1&i){var e=n.EpF();n.TgZ(0,"mat-paginator",14),n.NdJ("page",function(s){n.CHM(e);var l=n.oxw(3);return l.pageEvent=s,l.getData()}),n.qZA()}if(2&i){var t=n.oxw(3);n.Q6J("length",t.paginator.total_records)("pageIndex",t.paginator.page_no-1)("pageSize",t.paginator.page_size)("pageSizeOptions",t.pageSizes)}}function In(i,o){if(1&i){var e=n.EpF();n.TgZ(0,"div",6),n.TgZ(1,"span",7),n.TgZ(2,"span"),n.TgZ(3,"button",8),n.NdJ("click",function(){return n.CHM(e),n.oxw(2).navigateTo("tasks")}),n._UZ(4,"i",9),n._uU(5," Tasks"),n.qZA(),n.qZA(),n.TgZ(6,"span"),n.YNc(7,Nn,2,0,"button",10),n.qZA(),n.qZA(),n.TgZ(8,"span",11),n.TgZ(9,"app-search-input",12),n.NdJ("searchEvent",function(s){return n.CHM(e),n.oxw(2).onSearch(s)}),n.qZA(),n.YNc(10,Un,1,4,"mat-paginator",13),n.qZA(),n.qZA()}if(2&i){var t=n.oxw(2);n.xp6(7),n.Q6J("ngIf",t.isAzalioPlay),n.xp6(2),n.Q6J("placeholder","Search by task, user, shift"),n.xp6(1),n.Q6J("ngIf",t.paginator)}}function Rn(i,o){if(1&i&&(n.ynx(0),n.YNc(1,In,11,3,"div",5),n.BQk()),2&i){var e=n.oxw();n.xp6(1),n.Q6J("ngIf",!e.pageLoading)}}function Qn(i,o){1&i&&(n.TgZ(0,"th",40),n._uU(1,"Name"),n.qZA())}function En(i,o){if(1&i&&(n.TgZ(0,"td",41),n.TgZ(1,"span",42),n.TgZ(2,"label",43),n._uU(3,"Name"),n.qZA(),n._UZ(4,"app-user-avatar",44),n.qZA(),n.qZA()),2&i){var e=o.$implicit,t=n.oxw(3);n.xp6(4),n.Q6J("name",e.user_name)("color",e.user_color+t.opacity)("initialColor",e.user_color)}}function zn(i,o){1&i&&(n.TgZ(0,"th",45),n._uU(1,"Task Name"),n.qZA())}function Fn(i,o){if(1&i&&(n.TgZ(0,"td",46),n.TgZ(1,"span",42),n.TgZ(2,"label",43),n._uU(3,"Task Name"),n.qZA(),n._uU(4),n.qZA(),n.qZA()),2&i){var e=o.$implicit;n.xp6(4),n.hij(" ",e.task_name," ")}}function Vn(i,o){1&i&&(n.TgZ(0,"th",47),n._uU(1,"Done at"),n.qZA())}function Yn(i,o){if(1&i&&(n.TgZ(0,"td",48),n.TgZ(1,"span",42),n.TgZ(2,"label",49),n._uU(3,"Done at"),n.qZA(),n.TgZ(4,"span"),n._uU(5),n.ALo(6,"date"),n.qZA(),n.qZA(),n.qZA()),2&i){var e=o.$implicit;n.xp6(5),n.Oqu(n.xi3(6,1,e.created_on,"MMM d, y, h:mm a"))}}function Hn(i,o){1&i&&(n.TgZ(0,"th",47),n._uU(1,"Shift"),n.qZA())}function Bn(i,o){if(1&i&&(n.TgZ(0,"td",50),n.TgZ(1,"span",42),n.TgZ(2,"label",43),n._uU(3,"Shift"),n.qZA(),n.TgZ(4,"span"),n._uU(5),n.qZA(),n.qZA(),n.qZA()),2&i){var e=o.$implicit;n.xp6(5),n.Oqu(e.shift_name)}}function jn(i,o){1&i&&(n.TgZ(0,"th",51),n._uU(1,"Store"),n.qZA())}function $n(i,o){if(1&i&&(n.TgZ(0,"td",52),n.TgZ(1,"span",42),n.TgZ(2,"label",43),n._uU(3,"Store"),n.qZA(),n.TgZ(4,"span"),n._uU(5),n.qZA(),n.qZA(),n.qZA()),2&i){var e=o.$implicit;n.xp6(5),n.Oqu(e.region_title)}}function Ln(i,o){1&i&&(n.TgZ(0,"th",47),n._uU(1,"Points earned"),n.qZA())}function Gn(i,o){1&i&&n._UZ(0,"img",59)}function Kn(i,o){1&i&&n._UZ(0,"img",60)}function Wn(i,o){1&i&&(n.TgZ(0,"span",61),n._uU(1," revoked "),n.qZA())}function Xn(i,o){if(1&i&&(n.TgZ(0,"span",54),n.YNc(1,Gn,1,0,"img",55),n.YNc(2,Kn,1,0,"img",56),n.TgZ(3,"span",57),n._uU(4),n.YNc(5,Wn,2,0,"span",58),n.qZA(),n.qZA()),2&i){var e=n.oxw().$implicit;n.xp6(1),n.Q6J("ngIf",!e.is_revoked),n.xp6(1),n.Q6J("ngIf",e.is_revoked),n.xp6(2),n.hij(" ",e.points," "),n.xp6(1),n.Q6J("ngIf",e.is_revoked)}}function nt(i,o){if(1&i&&(n.TgZ(0,"td",50),n.TgZ(1,"span",42),n.TgZ(2,"label",43),n._uU(3,"Points"),n.qZA(),n.YNc(4,Xn,6,4,"span",53),n.qZA(),n.qZA()),2&i){var e=o.$implicit;n.xp6(4),n.Q6J("ngIf",null!==e.points)}}function tt(i,o){1&i&&(n.TgZ(0,"th",62),n._uU(1,"Actions"),n.qZA())}function et(i,o){if(1&i){var e=n.EpF();n.TgZ(0,"img",67),n.NdJ("mouseenter",function(){n.CHM(e);var l=n.oxw().$implicit;return n.oxw(3).hoveredRow=l})("mouseleave",function(){return n.CHM(e),n.oxw(4).hoveredRow=null})("click",function(){n.CHM(e);var l=n.oxw().$implicit;return n.oxw(3).setRevokeData(l)}),n.qZA()}if(2&i){var t=n.oxw().$implicit,a=n.oxw(3);n.Q6J("src",(null==a.selectedRow?null:a.selectedRow.id)==t.id||(null==a.hoveredRow?null:a.hoveredRow.id)==t.id?"assets/revoked.png":"assets/revoke-points.png",n.LSH)}}function it(i,o){if(1&i){var e=n.EpF();n.TgZ(0,"td",63),n.TgZ(1,"span",42),n.TgZ(2,"label",43),n._uU(3,"Actions"),n.qZA(),n.TgZ(4,"span",64),n.TgZ(5,"app-confirm-popup",65),n.NdJ("proceedDelete",function(l){var p=n.CHM(e).$implicit;return n.oxw(3).revokePoints(l,p.id)})("proceedCancel",function(){return n.CHM(e),n.oxw(3).selectedRow=null})("proceedWithComment",function(l){var p=n.CHM(e).$implicit;return n.oxw(3).revokePointsWithComment(l,p.id)}),n.YNc(6,et,1,1,"img",66),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&i){var t=o.$implicit,a=n.oxw(3);n.xp6(5),n.Q6J("isComment",!0)("checkboxLabel","Mark task as undone.")("type","Revoke")("title","Points")("textToDisplay",a.revokeText),n.xp6(1),n.Q6J("ngIf",t.points&&!t.is_revoked)}}function at(i,o){1&i&&n._UZ(0,"tr",68)}var ot=function(o,e){return{revoked:o,"revoked-row":e}};function st(i,o){if(1&i&&n._UZ(0,"tr",69),2&i){var e=o.$implicit,t=n.oxw(3);n.Q6J("ngClass",n.WLB(1,ot,1==e.is_revoked,(null==t.selectedRow?null:t.selectedRow.id)==e.id))}}function lt(i,o){if(1&i&&(n.TgZ(0,"table",19),n.ynx(1,20),n.YNc(2,Qn,2,0,"th",21),n.YNc(3,En,5,3,"td",22),n.BQk(),n.ynx(4,23),n.YNc(5,zn,2,0,"th",24),n.YNc(6,Fn,5,1,"td",25),n.BQk(),n.ynx(7,26),n.YNc(8,Vn,2,0,"th",27),n.YNc(9,Yn,7,4,"td",28),n.BQk(),n.ynx(10,29),n.YNc(11,Hn,2,0,"th",27),n.YNc(12,Bn,6,1,"td",30),n.BQk(),n.ynx(13,31),n.YNc(14,jn,2,0,"th",32),n.YNc(15,$n,6,1,"td",33),n.BQk(),n.ynx(16,34),n.YNc(17,Ln,2,0,"th",27),n.YNc(18,nt,5,1,"td",30),n.BQk(),n.ynx(19,35),n.YNc(20,tt,2,0,"th",36),n.YNc(21,it,7,6,"td",37),n.BQk(),n.YNc(22,at,1,0,"tr",38),n.YNc(23,st,1,4,"tr",39),n.qZA()),2&i){var e=n.oxw(2);n.Q6J("dataSource",e.dataSource.data),n.xp6(22),n.Q6J("matHeaderRowDef",e.displayedColumns),n.xp6(1),n.Q6J("matRowDefColumns",e.displayedColumns)}}function rt(i,o){if(1&i&&(n.TgZ(0,"div",15),n.YNc(1,lt,24,3,"table",16),n._UZ(2,"app-no-records",17),n._UZ(3,"app-no-search-records",18),n.qZA()),2&i){var e=n.oxw();n.xp6(1),n.Q6J("ngIf",!e.pageLoading),n.xp6(1),n.Q6J("display",e.emptyResults)("animation","timesheet")("animation2",e.animation2)("textMessage","No logs."),n.xp6(1),n.Q6J("display",!e.emptyResults&&e.emptySearchResults)}}var pt=function(){var i=function(){function o(e,t,a,s){var l=this;(0,P.Z)(this,o),this.service=e,this.router=t,this.dataService=a,this.gs=s,this.dataSource=new v.by([]),this.displayedColumns=["user","name","datetime","points","shift","store","action"],this.reason=null,this.revokePoints=function(r,p){return(0,w.mG)(l,void 0,void 0,h().mark(function c(){var d,_;return h().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.loading=!0,d={points_id:p,is_undone:r?1:0,is_revoked:1},this.reason&&Object.assign(d,{reason:this.reason}),g.prev=3,g.next=6,this.service.revokePoints(d);case 6:this.gs.showToastSuccess(null==(_=g.sent)?void 0:_.message),this.reason=null,this.getData(),g.next=16;break;case 12:g.prev=12,g.t0=g.catch(3),this.gs.showToastError(g.t0.message),console.log(g.t0);case 16:return g.prev=16,this.selectedRow=null,this.loading=!1,g.finish(16);case 20:case"end":return g.stop()}},c,this,[[3,12,16,20]])}))},this.pageLoading=!0,this.loading=!1,this.dataService.getConfigurations(!1).then(function(r){var p,c;(null===(c=null===(p=r.role.modules)||void 0===p?void 0:p.Tasks)||void 0===c?void 0:c.enabled)||l.router.navigate(["401"]),l.isAzalioPlay=1==(null==r?void 0:r.company.is_azalio_play)}),this.singleRegion||(this.subscription=this.dataService.SharingRegionData.subscribe(function(r){l.sharedRegion=r,l.getData()}))}return(0,Z.Z)(o,[{key:"onClick",value:function(t){var a=this;setTimeout(function(){var s=document.getElementsByClassName("popup-card");(!s||!s[0])&&a.selectedRow&&(a.selectedRow=null)})}},{key:"getData",value:function(){var t=this;this.filterInput={region_id:this.sharedRegion?this.sharedRegion:null},this.loading=!0,this.service.getReportsTableData(this.searchText,this.pageEvent,this.filterInput).then(function(a){var s,l;t.dataSource.data=a.points,t.paginator=a.pagination,t.emptySearchResults=!(0!==(null===(s=a.points)||void 0===s?void 0:s.length)||!t.searchText),t.emptyResults=0===(null===(l=a.points)||void 0===l?void 0:l.length)&&!t.searchText}).catch(function(a){console.log(a)}).finally(function(){t.pageLoading=!1,t.loading=!1})}},{key:"setRevokeData",value:function(t){this.selectedRow=t,this.revokeText="You're about to <span class='point-details'>revoke <img src='assets/coin.png'> "+t.points+" points </span> earned by <b>"+t.user_name+"</b>. Are you sure?"}},{key:"revokePointsWithComment",value:function(t,a){this.reason=t.reason&&""!==t.reason?t.reason:null,this.revokePoints(t.isChecked,a)}},{key:"onSearch",value:function(t){this.gs.logEvents("search_from_tasks_report"),this.searchOn=t.trim(),this.searchText=this.searchOn,this.pageEvent&&(this.pageEvent.pageIndex=0),this.getData()}},{key:"navigateTo",value:function(t){this.router.navigate([t])}},{key:"ngOnInit",value:function(){this.opacity=M.ZF,this.gs.hideSplashScreen()}},{key:"ngOnDestroy",value:function(){var t,a;null===(t=this.subscription)||void 0===t||t.unsubscribe(),null===(a=this.subscriptioSingle)||void 0===a||a.unsubscribe()}}]),o}();return i.\u0275fac=function(e){return new(e||i)(n.Y36(q),n.Y36(D.F0),n.Y36(J.s),n.Y36(O.m))},i.\u0275cmp=n.Xpm({type:i,selectors:[["app-tasks-report"]],hostBindings:function(e,t){1&e&&n.NdJ("click",function(){return t.onClick()},!1,n.evT)},decls:5,vars:3,consts:[[3,"loading"],[1,"colored-column-info","timesheets_wrapper","reports"],[1,"page-wrapper"],[4,"ngIf"],["class","mat-elevation-z8 relative","class","logs",4,"ngIf"],["class","wrapper_header",4,"ngIf"],[1,"wrapper_header"],[1,"left-items"],["size","medium","type","button","nbButton","","status","primary",1,"back-btn",3,"click"],["aria-hidden","true",1,"fa","fa-angle-left",2,"margin-right","7px"],["class","back-btn","size","medium","type","button","nbButton","","status","primary",3,"click",4,"ngIf"],[1,"right-items"],[1,"search-task",2,"margin-right","10px",3,"placeholder","searchEvent"],["showFirstLastButtons","",3,"length","pageIndex","pageSize","pageSizeOptions","page",4,"ngIf"],["showFirstLastButtons","",3,"length","pageIndex","pageSize","pageSizeOptions","page"],[1,"logs"],["mat-table","",3,"dataSource",4,"ngIf"],[1,"tasksanimation",3,"display","animation","animation2","textMessage"],[3,"display"],["mat-table","",3,"dataSource"],["matColumnDef","user"],["mat-header-cell","","style","width: 15%;",4,"matHeaderCellDef"],["mat-cell","","style","width: 15%;",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","","style","width: 27;",4,"matHeaderCellDef"],["mat-cell","","style","width: 27%;",4,"matCellDef"],["matColumnDef","datetime"],["mat-header-cell","","style","width: 13%;",4,"matHeaderCellDef"],["mat-cell","","style","width: 13%;","class","comment-field",4,"matCellDef"],["matColumnDef","shift"],["mat-cell","","style","width: 13%;",4,"matCellDef"],["matColumnDef","store"],["mat-header-cell","","style","width: 14%;",4,"matHeaderCellDef"],["mat-cell","","style","width: 14%;",4,"matCellDef"],["matColumnDef","points"],["matColumnDef","action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","style","width: 5%;",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"ngClass",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",2,"width","15%"],["mat-cell","",2,"width","15%"],[1,"resp-container"],[1,"show_in_resp"],["size","small",3,"name","color","initialColor"],["mat-header-cell","",2,"width","27"],["mat-cell","",2,"width","27%"],["mat-header-cell","",2,"width","13%"],["mat-cell","",1,"comment-field",2,"width","13%"],[1,"show_in_resp","label-txt"],["mat-cell","",2,"width","13%"],["mat-header-cell","",2,"width","14%"],["mat-cell","",2,"width","14%"],["class","points",4,"ngIf"],[1,"points"],["src","assets/coin.png",4,"ngIf"],["src","assets/revoked-coin.png",4,"ngIf"],[1,"points-label"],["class","revoked-tag",4,"ngIf"],["src","assets/coin.png"],["src","assets/revoked-coin.png"],[1,"revoked-tag"],["mat-header-cell",""],["mat-cell","",2,"width","5%"],[1,"action"],[3,"isComment","checkboxLabel","type","title","textToDisplay","proceedDelete","proceedCancel","proceedWithComment"],["nbTooltip","Revoke points",3,"src","mouseenter","mouseleave","click",4,"ngIf"],["nbTooltip","Revoke points",3,"src","mouseenter","mouseleave","click"],["mat-header-row",""],["mat-row","",3,"ngClass"]],template:function(e,t){1&e&&(n._UZ(0,"app-loader",0),n.TgZ(1,"nb-layout-column",1),n.TgZ(2,"div",2),n.YNc(3,Rn,2,1,"ng-container",3),n.YNc(4,rt,4,6,"div",4),n.qZA(),n.qZA()),2&e&&(n.Q6J("loading",t.loading),n.xp6(3),n.Q6J("ngIf",!t.pageLoading),n.xp6(1),n.Q6J("ngIf",t.dataSource&&t.dataSource.data))},directives:[S.R,x.dP_,b.O5,x.DPz,I.J,B.NW,v.BZ,v.w1,v.fO,v.ge,v.Dz,v.ev,N.k,j.D,x.jNv,v.as,v.XQ,v.nj,v.Gk,b.mk,U.k,R.V],pipes:[b.uU],styles:[".right-items[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n}\n\n.back-btn[_ngcontent-%COMP%] {\n  color: #7b68ee !important;\n  background-color: white !important;\n  border: 1px solid #7b68ee !important;\n  margin-right: 10px;\n}\n\n.points[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n}\n\n.points[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n  height: -moz-fit-content;\n  height: fit-content;\n  margin-right: 5px;\n}\n\n.action[_ngcontent-%COMP%] {\n  cursor: pointer;\n  display: block;\n  margin: 0 auto;\n}\n\n.action[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n  width: 16px;\n}\n\n.delete-task[_ngcontent-%COMP%] {\n  color: #ddd5d5;\n  padding-right: 10px;\n  padding-left: 15px;\n}\n\n.delete-task[_ngcontent-%COMP%]:hover {\n  color: #ff3384;\n}\n\n.logs[_ngcontent-%COMP%] {\n  margin-top: 10px;\n  margin-top: 10px;\n  padding-bottom: 10px;\n  min-height: -moz-fit-content;\n  min-height: fit-content;\n  max-height: 70vh;\n  overflow: scroll;\n}\n\n.revoked[_ngcontent-%COMP%]   .revoked-tag[_ngcontent-%COMP%] {\n  background-color: #d9d9d9;\n  padding: 9px;\n  border-radius: 5px;\n  padding-bottom: 1px;\n  padding-top: 1px;\n  color: #666666;\n  margin-left: 5px;\n}\n\n.revoked[_ngcontent-%COMP%]   .points-label[_ngcontent-%COMP%] {\n  color: #b7b7b7;\n  display: flex;\n  align-items: center;\n}\n\n.logs[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%] {\n  cursor: auto !important;\n  background-color: white;\n}\n\n.resp-container[_ngcontent-%COMP%] {\n  display: flex;\n  margin-top: 10px;\n}\n\n@media (max-width: 930px) {\n  .delete-task[_ngcontent-%COMP%] {\n    padding-left: 0px;\n  }\n\n  .page-wrapper[_ngcontent-%COMP%] {\n    padding-left: 10px !important;\n    padding-right: 10px !important;\n  }\n\n  .action[_ngcontent-%COMP%] {\n    margin: initial !important;\n  }\n}\n\n@media (max-width: 600px) {\n  .right-items[_ngcontent-%COMP%] {\n    justify-content: flex-end;\n  }\n}\n\n.page-wrapper[_ngcontent-%COMP%] {\n  padding-left: 40px;\n  padding-right: 40px;\n}\n\n.revoked-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] {\n  background-color: #ece8fb;\n}"]}),i}(),$=m(4902),k=m(3075),A=m(9489),L=m(3966),ct=m(8719),dt=m(3948),gt=m(9894),ut=m(42),_t=m(82);function ft(i,o){1&i&&(n.TgZ(0,"span"),n._uU(1," Enhance task organization by adding tags; this will help categorize them effectively on the mobile app. "),n.qZA())}function mt(i,o){if(1&i){var e=n.EpF();n.TgZ(0,"span",38),n.NdJ("click",function(){n.CHM(e);var a=n.oxw().index;return n.oxw(4).removeRow(a)}),n._UZ(1,"i",39),n.qZA()}}function ht(i,o){if(1&i&&(n.TgZ(0,"div",35),n.TgZ(1,"div",11),n._UZ(2,"app-timer-input",36),n._UZ(3,"app-error-message",20),n.YNc(4,mt,2,0,"span",37),n.qZA(),n.qZA()),2&i){var e=o.$implicit,t=o.index;n.oxw(3);var a=n.MAs(1),s=n.oxw();n.xp6(2),n.Q6J("onlyDate",!0)("controlName","value")("form",e)("placeholder","Enter date")("filter",s.filter(t)),n.xp6(1),n.Q6J("key","value")("form",e)("isSubmitted",a.submitted),n.xp6(1),n.Q6J("ngIf",s.dates.length>1)}}var vt=function(o){return{disabled:o}};function xt(i,o){if(1&i){var e=n.EpF();n.ynx(0),n.TgZ(1,"div",27),n.TgZ(2,"div",28),n._UZ(3,"i",29),n.qZA(),n.TgZ(4,"div",30),n.YNc(5,ht,5,9,"div",31),n.qZA(),n.qZA(),n.TgZ(6,"span",32),n.TgZ(7,"span",33),n.NdJ("click",function(){return n.CHM(e),n.oxw(3).addDate()}),n._UZ(8,"i",34),n._uU(9," Add date"),n.qZA(),n.qZA(),n.BQk()}if(2&i){var t=n.oxw(3);n.xp6(5),n.Q6J("ngForOf",t.dates.controls),n.xp6(1),n.Q6J("ngClass",n.VKq(2,vt,t.dates.length>11))}}function Tt(i,o){if(1&i&&(n.ynx(0),n.TgZ(1,"span",42),n.TgZ(2,"nb-checkbox",43),n._uU(3),n.qZA(),n.qZA(),n.BQk()),2&i){var e=o.$implicit;n.xp6(1),n.Q6J("formGroup",e),n.xp6(1),n.Q6J("checked",e.value.checked),n.xp6(1),n.hij(" ",e.value.name," ")}}function kt(i,o){if(1&i&&(n.TgZ(0,"div",40),n.YNc(1,Tt,4,3,"ng-container",41),n.qZA()),2&i){var e=n.oxw(3);n.xp6(1),n.Q6J("ngForOf",e.days.controls)}}function Ct(i,o){if(1&i&&(n.ynx(0),n.TgZ(1,"div",8),n.TgZ(2,"div",17),n._UZ(3,"i",18),n.qZA(),n.TgZ(4,"div",11),n._UZ(5,"textarea",19),n._UZ(6,"app-error-message",20),n.qZA(),n.qZA(),n.TgZ(7,"div",8),n.TgZ(8,"div",21),n._UZ(9,"img",22),n.qZA(),n.TgZ(10,"div",23),n._UZ(11,"app-dropdown",24),n._UZ(12,"app-error-message",25),n.qZA(),n.qZA(),n.YNc(13,xt,10,4,"ng-container",7),n.TgZ(14,"div",8),n.YNc(15,kt,2,1,"div",26),n.qZA(),n.BQk()),2&i){n.oxw();var e=n.MAs(1),t=n.oxw();n.xp6(6),n.Q6J("key","description")("form",t.form)("isSubmitted",e.submitted),n.xp6(5),n.Q6J("optionClass","")("Data",t.repeatTypeData)("placeholder","Select an option")("controlName","repeatType")("form",t.form)("show",!1),n.xp6(1),n.Q6J("key","repeatType")("form",t.form)("isSubmitted",e.submitted),n.xp6(1),n.Q6J("ngIf",t.showDetails(1)),n.xp6(2),n.Q6J("ngIf",t.showDetails(2))}}function bt(i,o){if(1&i){var e=n.EpF();n.TgZ(0,"form",5,6),n.NdJ("ngSubmit",function(){n.CHM(e);var s=n.MAs(1);return n.oxw().submit(s)}),n.YNc(2,ft,2,0,"span",7),n.TgZ(3,"div",8),n.TgZ(4,"div",9),n._UZ(5,"i",10),n.qZA(),n.TgZ(6,"div",11),n._UZ(7,"app-dropdown-multi",12),n.qZA(),n.qZA(),n.YNc(8,Ct,16,14,"ng-container",7),n.TgZ(9,"span",13),n.TgZ(10,"span",14),n.TgZ(11,"app-button",15),n.NdJ("onClick",function(){return n.CHM(e),n.oxw().close(null)}),n._uU(12,"Cancel"),n.qZA(),n._UZ(13,"app-submit-button",16),n.qZA(),n.qZA(),n.qZA()}if(2&i){var t=n.oxw();n.Q6J("formGroup",t.form),n.xp6(2),n.Q6J("ngIf",t.isAddEditTagsOnly),n.xp6(5),n.Q6J("label","tags")("optionClass","dot-tag")("key","tag")("key2","color")("type","tag")("optionId","id")("Data",t.tags)("selected",t.tagsData)("placeholder","Select one or more labels")("controlName","tagName")("form",t.form)("show",!1),n.xp6(1),n.Q6J("ngIf",!t.isAddEditTagsOnly),n.xp6(5),n.Q6J("form",t.form)("label",t.buttonLabel)}}var wt=function(){var i=function(){function o(e,t,a,s,l,r){var p=this;(0,P.Z)(this,o),this.dataService=e,this.service=t,this.gs=a,this.fb=s,this.ref=l,this.changeDetectorRef=r,this.loading=!1,this.points=[{key:0,value:"0 points"},{key:10,value:"10 points"},{key:20,value:"20 points"},{key:50,value:"50 points"},{key:100,value:"100 points"}],this.repeatTypeData=[{key:0,value:"Everyday - Default"},{key:1,value:"Custom dates"},{key:2,value:"Custom days"}],this.weekDays=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],this.submit=function(c){c.valid&&p.close(!0)},this.addTask=function(){return(0,w.mG)(p,void 0,void 0,h().mark(function c(){var d,_;return h().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.createDataModal();case 2:return d=g.sent,g.prev=3,this.loading=!0,g.next=7,this.service.addNewTask(d);case 7:this.gs.showToastSuccess(null==(_=g.sent)?void 0:_.message),g.next=15;break;case 11:g.prev=11,g.t0=g.catch(3),this.gs.showToastError(g.t0.message),console.log(g.t0);case 15:return g.prev=15,this.loading=!1,g.finish(15);case 18:case"end":return g.stop()}},c,this,[[3,11,15,18]])}))},this.editTask=function(){return(0,w.mG)(p,void 0,void 0,h().mark(function c(){var d,_;return h().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.createDataModal();case 2:return d=g.sent,g.prev=3,this.loading=!0,g.next=7,this.service.editTask(d);case 7:this.gs.showToastSuccess(null==(_=g.sent)?void 0:_.message),g.next=15;break;case 11:g.prev=11,g.t0=g.catch(3),this.gs.showToastError(g.t0.message),console.log(g.t0);case 15:return g.prev=15,this.loading=!1,g.finish(15);case 18:case"end":return g.stop()}},c,this,[[3,11,15,18]])}))},this.filter=function(c){return function(d){return"Invalid Date"==d||!p.getSelectedDates(c).some(function(_){return _===d.toISOString()})}},this.addUpdateTaskTags=function(){return(0,w.mG)(p,void 0,void 0,h().mark(function c(){var d,_,u;return h().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,this.createDataModal();case 2:return _={task_id:this.taskId,tags:(d=T.sent).tags},T.prev=4,this.loading=!0,T.next=8,this.service.addUpdateTaskTags(_);case 8:this.gs.showToastSuccess(null==(u=T.sent)?void 0:u.message),this.ref.close(d),T.next=17;break;case 13:T.prev=13,T.t0=T.catch(4),this.gs.showToastError(T.t0.message),console.log(T.t0);case 17:return T.prev=17,this.loading=!1,T.finish(17);case 20:case"end":return T.stop()}},c,this,[[4,13,17,20]])}))},this.dataService.getTaskTags(!1).then(function(c){p.tags=c}).finally(function(){})}return(0,Z.Z)(o,[{key:"days",get:function(){return this.formc.daysArray}},{key:"dates",get:function(){return this.formc.datesArray}},{key:"formc",get:function(){return this.form.controls}},{key:"ngAfterViewChecked",value:function(){this.changeDetectorRef.detectChanges()}},{key:"ngOnInit",value:function(){this.gs.logEvents("task_advanced_options_popup_opened"),this.buttonLabel=this.isAddEditTagsOnly?"Save":"Ok",this.headerTitle=this.getHeaderTitle(),this.selectedData||this.tagsData?this.EditShiftFormValues():this.initForm()}},{key:"getHeaderTitle",value:function(){var t;return this.isAddEditTagsOnly?(null===(t=this.tagsData)||void 0===t?void 0:t.length)>0?"Edit Task Tags":"Add Task Tags":this.isEditMode?"Edit Task Advanced":"Add Task Advanced"}},{key:"initForm",value:function(){var t=this;this.shifts=this.shifts,this.form=this.fb.group({datesArray:new k.Oe([this.fb.group({value:[null]})]),daysArray:new k.Oe([]),repeatType:[0,[k.kI.required]],description:[""],tagName:[]}),this.weekDays.forEach(function(a){t.days.push(t.fb.group({name:[a],checked:[!1]}))})}},{key:"populateDates",value:function(){var t=this;null!=this.selectedData.dates?this.selectedData.dates.forEach(function(a){t.dates.push(t.fb.group({value:new Date(a)}))}):this.dates.push(this.fb.group({value:[null]}))}},{key:"populateDays",value:function(){var t=this;this.weekDays.forEach(function(a){var s;t.days.push(t.fb.group({name:[a],checked:[!!(null===(s=t.selectedData.days)||void 0===s?void 0:s.includes(a))]}))})}},{key:"showDetails",value:function(t){var a,s;return(null===(s=null===(a=this.formc)||void 0===a?void 0:a.repeatType)||void 0===s?void 0:s.value)==t}},{key:"addDate",value:function(){var t=this;this.dates.length>11||(this.dates.push(this.fb.group({value:[null]})),setTimeout(function(){t.scrollToBottom()},100))}},{key:"scrollToBottom",value:function(){var t=document.getElementById("dates-wrapper");t&&(t.scrollTop=t.scrollHeight)}},{key:"EditShiftFormValues",value:function(){var t;this.form=this.fb.group({description:[this.description],repeatType:[(null===(t=this.selectedData)||void 0===t?void 0:t.repeatType)?this.selectedData.repeatType:0],datesArray:new k.Oe([]),daysArray:new k.Oe([]),tagName:[this.tagsData]}),this.populateDates(),this.populateDays()}},{key:"checkedChange",value:function(t){this.isAllChecked=t,this.setValidators(t)}},{key:"setValidators",value:function(t){t?(this.form.controls.shift.setValidators([]),this.form.controls.shift.disable(),this.form.controls.shift.updateValueAndValidity()):(this.form.controls.shift.setValidators([k.kI.required]),this.form.controls.shift.enable(),this.form.controls.shift.updateValueAndValidity())}},{key:"getSelectedDates",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=this.dates.controls.map(function(s,l){var r;if(s.value.value&&l!==t)return null===(r=s.value.value)||void 0===r?void 0:r.toISOString()}).filter(function(s){return void 0!==s});return a}},{key:"getSelectedDays",value:function(){return this.days.controls.filter(function(a){if(a.value.checked)return a.value.name}).map(function(a){return a.value.name})}},{key:"removeRow",value:function(t){this.dates.removeAt(t)}},{key:"createDataModal",value:function(){var t,a,s={repeatType:this.form.get("repeatType").value,dates:1==this.form.get("repeatType").value?this.getSelectedDates():null,days:2==this.form.get("repeatType").value?this.getSelectedDays():null};return 2==s.repeatType&&(null===(t=s.days)||void 0===t?void 0:t.length)<1&&(this.form.controls.repeatType.setValue(0),s.days=null,s.repeatType=0),1==s.repeatType&&(null===(a=s.dates)||void 0===a?void 0:a.length)<1&&(this.form.controls.repeatType.setValue(0),s.dates=null,s.repeatType=0),{description:this.form.get("description").value,tags:this.form.get("tagName").value,custom:s}}},{key:"close",value:function(t){return(0,w.mG)(this,void 0,void 0,h().mark(function a(){var s;return h().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!t){r.next=6;break}return r.next=3,this.createDataModal();case 3:r.t0=r.sent,r.next=7;break;case 6:r.t0=null;case 7:s=r.t0,t&&this.isAddEditTagsOnly?this.addUpdateTaskTags():this.ref.close(s);case 9:case"end":return r.stop()}},a,this)}))}}]),o}();return i.\u0275fac=function(e){return new(e||i)(n.Y36(J.s),n.Y36(q),n.Y36(O.m),n.Y36(k.qu),n.Y36(x.X4l),n.Y36(n.sBO))},i.\u0275cmp=n.Xpm({type:i,selectors:[["app-add-task"]],inputs:{shifts:"shifts",regionId:"regionId",selectedData:"selectedData",tagsData:"tagsData",description:"description",isEditMode:"isEditMode",permissions:"permissions",isAddEditTagsOnly:"isAddEditTagsOnly",taskId:"taskId"},decls:8,vars:3,consts:[[1,"modal_wrapper","add_task_modal"],[1,"card_header"],[1,"title"],[3,"nbSpinner"],["id","form","autocomplete","off","class","form_parent",3,"formGroup","ngSubmit",4,"ngIf"],["id","form","autocomplete","off",1,"form_parent",3,"formGroup","ngSubmit"],["ngForm","ngForm"],[4,"ngIf"],[1,"flex","vertical_center","row-container","relative"],["bTooltipPlacement","top","nbTooltip","Task Tags",1,"sname-label"],[1,"fa-solid","fa-tag","icon-color","tag-icon"],[1,"task-name","pl-10"],[3,"label","optionClass","key","key2","type","optionId","Data","selected","placeholder","controlName","form","show"],[1,"flex","btns-row"],[1,"left-btns"],["nbTooltip","Any changes done will be discarded.",3,"onClick"],[3,"form","label"],["bTooltipPlacement","top","nbTooltip","Task Description",1,"sname-label"],[1,"fa","fa-comment","icon-color"],["maxlength","500","aria-label","question input","nbInput","","fullWidth","","name","ques","formControlName","description","placeholder","Add task description","autocomplete","off",1,"survey-txtarea"],[3,"key","form","isSubmitted"],["bTooltipPlacement","top","nbTooltip","Task repetition",1,"sname-label"],["src","assets/tasks-sch.png"],[1,"task-name","pl-04"],[3,"optionClass","Data","placeholder","controlName","form","show"],[1,"name_input_resp",2,"position","absolute","width","100%",3,"key","form","isSubmitted"],["class","daywise",4,"ngIf"],[1,"flex","task-custom"],["bTooltipPlacement","top","nbTooltip","Task custom dates",1,"sname-label"],[1,"fa","fa-clock","icon-color"],["id","dates-wrapper",1,"tasks-sch-container","relative"],["class","flex vertical_center row-container-date relative",4,"ngFor","ngForOf"],[1,"right-actions","pointer","add-date",3,"ngClass"],[3,"click"],[1,"fas","fa-calendar-plus"],[1,"flex","vertical_center","row-container-date","relative"],[3,"onlyDate","controlName","form","placeholder","filter"],["class","delete_icon",3,"click",4,"ngIf"],[1,"delete_icon",3,"click"],["nbTooltipPlacement","top","nbTooltip","Delete date.",1,"fa","fa-times-circle"],[1,"daywise"],[4,"ngFor","ngForOf"],[1,"week-days",3,"formGroup"],["status","primary","formControlName","checked",3,"checked"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"nb-card"),n.TgZ(2,"nb-card-header",1),n.TgZ(3,"label"),n.TgZ(4,"b",2),n._uU(5),n.qZA(),n.qZA(),n.qZA(),n.TgZ(6,"nb-card-body",3),n.YNc(7,bt,14,17,"form",4),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(5),n.Oqu(t.headerTitle),n.xp6(1),n.Q6J("nbSpinner",t.loading),n.xp6(1),n.Q6J("ngIf",t.form))},directives:[x.Asz,x.ndF,x.yKW,x.Q7R,b.O5,k._Y,k.JL,k.sg,A.w5,x.jNv,L.x,x.h8i,k.Fj,k.nD,k.JJ,k.u,A.x0,A.bf,ct.H,dt.J,b.sg,gt.T,b.mk,x.NTf,ut.r,_t.w],styles:[".btns-row[_ngcontent-%COMP%] {\n  justify-content: flex-end;\n  margin: 10px;\n  margin-top: 25px;\n  margin-right: 0px;\n}\n\n.add-task-option[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  margin-left: 10px;\n}\n\n.option-txt[_ngcontent-%COMP%] {\n  margin-right: 15px;\n}\n\n.left-btns[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n}\n\n.right-actions[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n}\n\n.add-date[_ngcontent-%COMP%] {\n  text-decoration: underline;\n  margin-right: 9px;\n  color: #7b68ee;\n  font-size: 13px;\n  display: flex;\n  align-items: center;\n}\n\n.add-date[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  color: #7b68ee;\n  margin-right: 7px;\n  text-decoration: none;\n  font-size: 14px;\n}\n\n.title[_ngcontent-%COMP%] {\n  display: contents;\n}\n\n.fields-wrapper[_ngcontent-%COMP%] {\n  display: flex !important;\n  width: 100% !important;\n  align-items: baseline;\n}\n\n.row-container[_ngcontent-%COMP%] {\n  margin-bottom: 10px;\n  padding-top: 17px;\n  width: 100%;\n  display: flex;\n  align-items: flex-start;\n  justify-content: center;\n}\n\n.row-container-date[_ngcontent-%COMP%] {\n  margin-bottom: 4px;\n  padding-top: 0px;\n  width: 100%;\n  display: flex;\n  align-items: flex-start;\n  justify-content: center;\n}\n\n.tasks-sch-container[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  padding-top: 10px;\n  max-height: 15vh;\n  overflow: auto;\n  width: 100%;\n}\n\n.sname-label[_ngcontent-%COMP%] {\n  padding-left: 5px;\n  padding-right: 5px;\n  display: inline-flex;\n  margin-top: 10px;\n}\n\n.task-name[_ngcontent-%COMP%] {\n  width: 100%;\n  padding-right: 5px;\n}\n\n.shift-details[_ngcontent-%COMP%] {\n  width: 100%;\n  padding-right: 5px;\n}\n\n.assign-task[_ngcontent-%COMP%] {\n  padding-top: 10px !important;\n}\n\n.option-items[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  width: 98%;\n}\n\n.add-task-option[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  margin-left: 10px;\n}\n\n.option-txt[_ngcontent-%COMP%] {\n  margin-right: 15px;\n  z-index: 40;\n}\n\n@media (max-width: 930px) {\n  .resp-container[_ngcontent-%COMP%] {\n    flex-direction: column;\n  }\n\n  .fields-wrapper[_ngcontent-%COMP%] {\n    display: flex !important;\n    width: 100% !important;\n    margin-bottom: 20px;\n  }\n\n  .shift-details[_ngcontent-%COMP%] {\n    width: 100% !important;\n  }\n\n  .next-icon[_ngcontent-%COMP%] {\n    width: 24px !important;\n  }\n}\n\n.pl-10[_ngcontent-%COMP%] {\n  padding-left: 9px;\n}\n\n.pl-04[_ngcontent-%COMP%] {\n  padding-left: 4px;\n}\n\n.daywise[_ngcontent-%COMP%] {\n  width: 100%;\n  display: flex;\n  justify-content: flex-end;\n}\n\n  .week-days {\n  margin-left: 15px;\n  margin-right: 9px;\n}\n\n  .week-days nb-checkbox .text:not(:empty) {\n  padding-left: 2px !important;\n  font-size: 12.6px;\n  font-weight: 500;\n}\n\n.delete_icon[_ngcontent-%COMP%] {\n  position: absolute;\n  top: -1px;\n  right: 4px;\n}\n\n.delete_icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  font-size: 13px;\n  color: #ff3d71;\n  cursor: pointer;\n  z-index: 1000;\n}\n\n.task-custom[_ngcontent-%COMP%] {\n  align-items: flex-start;\n}\n\n.task-custom[_ngcontent-%COMP%]   .sname-label[_ngcontent-%COMP%] {\n  margin-top: 20px;\n}\n\n.disabled[_ngcontent-%COMP%] {\n  color: #b3b3b3 !important;\n  cursor: auto !important;\n}\n\n.disabled[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  color: #b3b3b3 !important;\n}\n\n@media (max-width: 606px) and (min-width: 320px) {\n  .daywise[_ngcontent-%COMP%] {\n    display: block !important;\n    line-height: 2 !important;\n  }\n}\n\n.tag-icon[_ngcontent-%COMP%] {\n  transform: rotate(95deg);\n  font-size: 18px;\n}\n\n@media (max-width: 350px) {\n  .task-name[_ngcontent-%COMP%] {\n    width: 89%;\n  }\n}"]}),i}(),G=m(6253),yt=m(6664),K=m(2917),W=m(3383);function Zt(i,o){1&i&&n._UZ(0,"i",18)}function Pt(i,o){if(1&i){var e=n.EpF();n.TgZ(0,"span",19),n.NdJ("click",function(){n.CHM(e);var s=n.oxw();return s.showDescription=!s.showDescription}),n._uU(1),n._UZ(2,"i",20),n.qZA()}if(2&i){var t=n.oxw();n.xp6(1),n.hij(" ",t.showDescription?"Hide":"Show"," description "),n.xp6(1),n.Tol(t.showDescription?"fa fa-angle-up":"fa fa-angle-down")}}function Mt(i,o){if(1&i&&(n.TgZ(0,"div",21),n._uU(1),n.qZA()),2&i){var e=n.oxw();n.xp6(1),n.hij(" ",e.taskDescription," ")}}function Ot(i,o){if(1&i&&(n.TgZ(0,"span",24),n._UZ(1,"i",25),n.TgZ(2,"span",26),n._uU(3),n.qZA(),n.qZA()),2&i){var e=o.$implicit;n.xp6(1),n.Udp("color",e.color),n.xp6(2),n.Oqu(e.tag)}}function At(i,o){if(1&i&&(n.TgZ(0,"span",22),n.YNc(1,Ot,4,3,"span",23),n.qZA()),2&i){var e=n.oxw();n.xp6(1),n.Q6J("ngForOf",e.taskDetails.tags)}}function Dt(i,o){if(1&i&&(n.ynx(0),n.TgZ(1,"span",35),n.TgZ(2,"span",36),n._UZ(3,"i",37),n.TgZ(4,"span",38),n._uU(5),n.qZA(),n.qZA(),n.qZA(),n.BQk()),2&i){var e=o.$implicit;n.xp6(2),n.Q6J("nbTooltip",e.name),n.xp6(1),n.Tol(e.shift_icon),n.xp6(2),n.hij(" ",e.assigned_to_user_name?e.assigned_to_user_name:""," ")}}function qt(i,o){if(1&i&&(n.ynx(0),n.TgZ(1,"span",39),n.TgZ(2,"span",40),n._uU(3),n.qZA(),n.qZA(),n.BQk()),2&i){var e=n.oxw(2);n.xp6(3),n.hij(" Assigned to ",null==e.taskDetails?null:e.taskDetails.assigned_to_user_name," ")}}function Jt(i,o){1&i&&(n.TgZ(0,"span",41),n._UZ(1,"i",42),n._uU(2," Scheduled Task "),n.qZA())}function St(i,o){if(1&i&&(n.TgZ(0,"span",43),n._UZ(1,"img",44),n._uU(2),n.qZA()),2&i){var e=n.oxw(2);n.xp6(2),n.hij(" ",e.taskDetails.points," points ")}}function Nt(i,o){1&i&&(n.TgZ(0,"span",45),n._uU(1," All stores "),n.qZA())}function Ut(i,o){if(1&i&&(n.TgZ(0,"div",27),n.TgZ(1,"span",28),n.YNc(2,Dt,6,4,"ng-container",29),n.YNc(3,qt,4,1,"ng-container",30),n.qZA(),n.TgZ(4,"span",31),n.YNc(5,Jt,3,0,"span",32),n.YNc(6,St,3,1,"span",33),n.YNc(7,Nt,2,0,"span",34),n.qZA(),n.qZA()),2&i){var e=n.oxw();n.xp6(2),n.Q6J("ngForOf",e.taskDetails.shifts),n.xp6(1),n.Q6J("ngIf",!(null!=e.taskDetails&&e.taskDetails.shifts)&&null!==(null==e.taskDetails?null:e.taskDetails.assigned_to_user_name)),n.xp6(2),n.Q6J("ngIf",(null==e.taskDetails.custom?null:e.taskDetails.custom.repeatType)>0),n.xp6(1),n.Q6J("ngIf",(e.isAzalioPlay||e.isBoringPlay)&&null!==(null==e.taskDetails?null:e.taskDetails.points)),n.xp6(1),n.Q6J("ngIf",null==e.taskDetails?null:e.taskDetails.all_store)}}function It(i,o){1&i&&n._UZ(0,"div",49)}function Rt(i,o){1&i&&(n.TgZ(0,"div"),n.TgZ(1,"span",50),n._uU(2,"Loading . . ."),n.qZA(),n.qZA())}function Qt(i,o){1&i&&(n.TgZ(0,"span",63),n._uU(1," Marked done "),n.qZA())}function Et(i,o){1&i&&(n.TgZ(0,"span",64),n._uU(1," Marked undone "),n.qZA())}function zt(i,o){1&i&&(n.TgZ(0,"span",64),n._uU(1," Points revoked "),n.qZA())}function Ft(i,o){if(1&i){var e=n.EpF();n.TgZ(0,"span",69),n.TgZ(1,"i",70),n.NdJ("click",function(){return n.CHM(e),n.oxw(4).addImageAnalytics()}),n.qZA(),n.qZA()}}function Vt(i,o){if(1&i&&(n.TgZ(0,"span",65),n._UZ(1,"app-user-avatar",66),n.ALo(2,"async"),n.ALo(3,"imageAuth"),n.TgZ(4,"app-text-popup",67),n.YNc(5,Ft,2,0,"span",68),n.qZA(),n.qZA()),2&i){var e=n.oxw().$implicit,t=n.oxw(2);n.xp6(1),n.Q6J("picture",n.lcZ(2,6,n.lcZ(3,8,null==e?null:e.image_url)))("task",!0)("showInitials",!1),n.xp6(3),n.Q6J("imageClass",t.isAzalioPlay?"tasks-azalio-play":"")("image",null!=e&&e.image_url?e.image_url:"black"),n.xp6(1),n.Q6J("ngIf",!(null!=e.image_url&&e.image_url.includes("id=null")))}}var Yt=function(o,e){return{"task-done":o,"task-done undone":e}},Ht=function(o){return{"comment-pic":o}};function Bt(i,o){if(1&i&&(n.ynx(0),n.TgZ(1,"div",51),n.TgZ(2,"span",52),n.TgZ(3,"span",53),n._UZ(4,"app-user-avatar",54),n.qZA(),n.TgZ(5,"span",55),n.TgZ(6,"span",56),n.YNc(7,Qt,2,0,"span",57),n.YNc(8,Et,2,0,"span",58),n.YNc(9,zt,2,0,"span",58),n.qZA(),n.TgZ(10,"span",59),n._uU(11),n.ALo(12,"date"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(13,"span",60),n.TgZ(14,"span",61),n.TgZ(15,"span"),n._uU(16),n.qZA(),n.qZA(),n.YNc(17,Vt,6,10,"span",62),n.qZA(),n.qZA(),n.BQk()),2&i){var e=o.$implicit,t=n.oxw(2);n.xp6(1),n.Q6J("ngClass",n.WLB(15,Yt,e.is_done,e.is_undone)),n.xp6(3),n.Q6J("name",e.action_by)("color",e.user_color+t.opacity)("initialColor",e.user_color)("nbTooltip",e.action_by),n.xp6(3),n.Q6J("ngIf",e.is_done),n.xp6(1),n.Q6J("ngIf",e.is_undone),n.xp6(1),n.Q6J("ngIf",!e.is_undone&&e.is_revoked),n.xp6(2),n.hij(" ",n.xi3(12,12,e.action_on,"MM/dd/YYYY hh:mm aa")," "),n.xp6(3),n.Q6J("ngClass",n.VKq(18,Ht,e.image_url)),n.xp6(2),n.Oqu(e.comment),n.xp6(1),n.Q6J("ngIf",null==e?null:e.image_url)}}var jt=function(o){return{"azalio-container":o}};function $t(i,o){if(1&i){var e=n.EpF();n.TgZ(0,"div",46),n.NdJ("scrolled",function(){return n.CHM(e),n.oxw().onScrollDown()})("scrolledUp",function(){return n.CHM(e),n.oxw().onScrollUp()}),n.YNc(1,It,1,0,"div",47),n.YNc(2,Rt,3,0,"div",30),n.YNc(3,Bt,18,20,"ng-container",29),n._UZ(4,"app-no-records",48),n.qZA()}if(2&i){var t=n.oxw();n.Udp("background-color",t.yellow),n.Q6J("ngClass",n.VKq(13,jt,t.isAzalioPlay))("infiniteScrollDistance",t.scrollDistance)("scrollWindow",!1)("infiniteScrollUpDistance",t.scrollUpDistance)("infiniteScrollThrottle",t.throttle),n.xp6(1),n.Q6J("ngIf",t.isAzalioPlay),n.xp6(1),n.Q6J("ngIf",t.loadingNext),n.xp6(1),n.Q6J("ngForOf",t.taskHistory),n.xp6(1),n.Q6J("display",t.emptyResults)("animation","taskcomment")("textMessage","No task history.")}}var Lt=function(o,e){return{"unassigned-task":o,"azal-play":e}},Gt=function(o){return{"small-devices-txtfield":o}},Kt=function(){var i=function(){function o(e,t,a,s,l){var r=this;(0,P.Z)(this,o),this.dataService=e,this.gs=t,this.fb=a,this.analytics=s,this.service=l,this.sum=100,this.throttle=300,this.scrollDistance=1,this.scrollUpDistance=2,this.direction="",this.onCommentAdd=new n.vpe,this.form=this.fb.group({comment:["",[k.kI.required]]}),this.dataService.getConfigurations(!1).then(function(p){var c,d;r.isAzalioPlay=1===(null===(c=p.company)||void 0===c?void 0:c.is_azalio_play),r.isBoringPlay=1===(null===(d=p.company)||void 0===d?void 0:d.boring2Fun)}).finally(function(){})}return(0,Z.Z)(o,[{key:"ngOnInit",value:function(){this.opacity=M.ZF,this.paginator=M.$0,this.paginator.page_size=10}},{key:"ngOnChanges",value:function(t){t.selectedTask&&t.selectedTask.currentValue!==t.selectedTask.previousValue&&(this.taskDetails=t.selectedTask.currentValue,this.taskDetails&&this.taskDetails.id&&this.getData())}},{key:"isValidPage",value:function(){var t=this.paginator.page_size*this.paginator.page_no;return t<=this.paginator.total_records||t-this.paginator.total_records<=this.paginator.page_size&&t-this.paginator.total_records>=1}},{key:"loadNext",value:function(){var t=this;!this.loadingNext&&this.isValidPage()&&(this.loadingNext=!0,this.service.getTaskHistory(this.taskDetails.id,{pageIndex:this.paginator.page_no,pageSize:this.paginator.page_size}).then(function(s){var l;(l=t.taskHistory).unshift.apply(l,(0,$.Z)(s.history.reverse())),t.paginator.page_no=t.paginator.page_no+1;var r=document.getElementById("tasks-wrapper");setTimeout(function(){r.scrollTop=2})}).catch(function(s){console.log(s)}).finally(function(){t.loadingNext=!1,t.loading=!1}))}},{key:"getData",value:function(){var t=this;this.analytics.logEvents("view_task_details"),this.showDescription=!1,this.loading=!0,this.service.getTaskHistory(this.taskDetails.id).then(function(a){var s;t.taskDescription=a.description,t.taskHistory=a.history.reverse(),t.emptyResults=0===(null===(s=a.history)||void 0===s?void 0:s.length),t.paginator=a.pagination,setTimeout(function(){t.scrollToBottom()})}).catch(function(a){console.log(a)}).finally(function(){t.loading=!1})}},{key:"onfocus",value:function(){console.log("focus"),this.focus=!0}},{key:"onfocusout",value:function(){var t=this;setTimeout(function(){t.commentLoading||(t.focus=!1)},100),console.log("focus out")}},{key:"addComment",value:function(){var t;return(0,w.mG)(this,void 0,void 0,h().mark(function a(){var l,r,s=this;return h().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!this.commentLoading){c.next=2;break}return c.abrupt("return");case 2:if(this.analytics.logEvents("add_task_comment"),!this.form.valid){c.next=23;break}return this.commentLoading=!0,l={task_id:this.selectedTask.id,comment:this.form.controls.comment.value},c.prev=6,c.next=9,this.service.addTaskComment(l);case 9:this.gs.showToastSuccess(null==(r=c.sent)?void 0:r.message),this.focus=!1,this.form.controls.comment.setValue(""),(null==r?void 0:r.history)&&r.history[0]&&(this.taskHistory.push(null==r?void 0:r.history[0]),this.emptyResults=0===(null===(t=this.taskHistory)||void 0===t?void 0:t.length),this.onCommentAdd.emit(),setTimeout(function(){s.scrollToBottom()})),c.next=20;break;case 16:c.prev=16,c.t0=c.catch(6),this.gs.showToastError(c.t0.message),console.log(c.t0);case 20:return c.prev=20,this.commentLoading=!1,c.finish(20);case 23:case"end":return c.stop()}},a,this,[[6,16,20,23]])}))}},{key:"scrollToBottom",value:function(){var t=document.getElementById("tasks-wrapper");t&&(t.scrollTop=t.scrollHeight)}},{key:"onScrollDown",value:function(){}},{key:"onScrollUp",value:function(){this.loadNext()}},{key:"addImageAnalytics",value:function(){this.analytics.logEvents("preview_task_comment_photo")}}]),o}();return i.\u0275fac=function(e){return new(e||i)(n.Y36(J.s),n.Y36(O.m),n.Y36(k.qu),n.Y36(G.C),n.Y36(q))},i.\u0275cmp=n.Xpm({type:i,selectors:[["app-task-comments"]],inputs:{selectedTask:"selectedTask"},outputs:{onCommentAdd:"onCommentAdd"},features:[n.TTD],decls:21,vars:19,consts:[[3,"loading"],[1,"header-container"],[1,"header"],[1,"tasks",3,"ngClass"],[1,"task-name"],["class","fa fa-angle-double-up enable-priority",4,"ngIf"],[1,"tname"],["class","show-desc",3,"click",4,"ngIf"],["class","task-desc",4,"ngIf"],["class","second-row",4,"ngIf"],["class","details-row",4,"ngIf"],["id","tasks-wrapper","class","tasks-wrapper","infinite-scroll","",3,"ngClass","background-color","infiniteScrollDistance","scrollWindow","infiniteScrollUpDistance","infiniteScrollThrottle","scrolled","scrolledUp",4,"ngIf"],[1,"footer",3,"ngClass"],[1,"footer-row"],[1,"add-input"],[3,"maxlength","placeholder","controlName","form","focus","focusOut","keydown.enter"],["nbButton","","status","primary","type","submit",1,"mr_10","send-comment",3,"click"],["src","assets/send-icon.png",1,"send-icon"],[1,"fa","fa-angle-double-up","enable-priority"],[1,"show-desc",3,"click"],["aria-hidden","true"],[1,"task-desc"],[1,"second-row"],["class","categories",4,"ngFor","ngForOf"],[1,"categories"],[1,"fa-solid","fa-circle"],[1,"category-name"],[1,"details-row"],[1,"first-col"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"resp-right-elements"],["class","sch-task",4,"ngIf"],["class","points",4,"ngIf"],["class","tag",4,"ngIf"],[1,"assignment-details"],[2,"display","flex",3,"nbTooltip"],[2,"cursor","pointer"],[1,"assigned-username"],[1,"second-element"],[1,"assigned-user"],[1,"sch-task"],[1,"fa","fa-clock"],[1,"points"],["src","assets/coin.png"],[1,"tag"],["id","tasks-wrapper","infinite-scroll","",1,"tasks-wrapper",3,"ngClass","infiniteScrollDistance","scrollWindow","infiniteScrollUpDistance","infiniteScrollThrottle","scrolled","scrolledUp"],["class","mt-25",4,"ngIf"],[3,"display","animation","textMessage"],[1,"mt-25"],[1,"skeleton-loader"],[1,"task-details",3,"ngClass"],[1,"row1"],[1,"user-details"],["size","large","nbTooltipPlacement","top",1,"scheduler_user",3,"name","color","initialColor","nbTooltip"],[1,"right-info"],[1,"markdone-container"],["class","task-done",4,"ngIf"],["class","task-done task-undone",4,"ngIf"],[1,"datetime"],[1,"row2"],[1,"comment",3,"ngClass"],["class","picture showhim",4,"ngIf"],[1,"task-done"],[1,"task-done","task-undone"],[1,"picture","showhim"],["size","medium","onlyPicture","",3,"picture","task","showInitials"],[1,"relative",3,"imageClass","image"],["class","image-preview",4,"ngIf"],[1,"image-preview"],["alt","preview image","aria-hidden","true",1,"fa","fa-search-plus","showme","image",3,"click"]],template:function(e,t){1&e&&(n._UZ(0,"app-loader",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"span",3),n.TgZ(4,"span",4),n.TgZ(5,"span"),n.YNc(6,Zt,1,0,"i",5),n.qZA(),n.TgZ(7,"span",6),n._uU(8),n.YNc(9,Pt,3,3,"span",7),n.qZA(),n.qZA(),n.qZA(),n.YNc(10,Mt,2,1,"div",8),n.qZA(),n.YNc(11,At,2,1,"span",9),n.YNc(12,Ut,8,5,"div",10),n.qZA(),n.YNc(13,$t,5,15,"div",11),n.TgZ(14,"div",12),n.TgZ(15,"span",13),n.TgZ(16,"span",14),n.TgZ(17,"app-text-input",15),n.NdJ("focus",function(){return t.onfocus()})("focusOut",function(){return t.onfocusout()})("keydown.enter",function(){return t.addComment()}),n.qZA(),n.qZA(),n.TgZ(18,"span"),n.TgZ(19,"button",16),n.NdJ("click",function(){return t.addComment()}),n._UZ(20,"img",17),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.Q6J("loading",t.loading||t.commentLoading),n.xp6(3),n.Q6J("ngClass",n.WLB(14,Lt,!(null!=t.taskDetails&&t.taskDetails.assigned_to_user_name),t.isAzalioPlay||t.isBoringPlay)),n.xp6(3),n.Q6J("ngIf","HIGH"===(null==t.taskDetails?null:t.taskDetails.priority)),n.xp6(2),n.hij(" ",null==t.taskDetails?null:t.taskDetails.name," "),n.xp6(1),n.Q6J("ngIf",t.taskDescription),n.xp6(1),n.Q6J("ngIf",t.showDescription),n.xp6(1),n.Q6J("ngIf",null==t.taskDetails?null:t.taskDetails.tags),n.xp6(1),n.Q6J("ngIf",t.taskDetails),n.xp6(1),n.Q6J("ngIf",!t.loading&&t.taskHistory),n.xp6(1),n.Q6J("ngClass",n.VKq(17,Gt,t.focus&&(null==t.gs?null:t.gs.touchEnabledDevices))),n.xp6(3),n.Q6J("maxlength",500)("placeholder","Enter comment and press enter.")("controlName","comment")("form",t.form))},directives:[S.R,b.mk,b.O5,b.sg,x.jNv,K.Ry,N.k,F.J,U.k,W.t,x.DPz],pipes:[b.uU,b.Ov,V.z],styles:[".header-container[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  border-bottom: 1px solid #efefef;\n  padding-top: 10px;\n  background-color: #7f84ea;\n  border-top-left-radius: 10px;\n}\n.header-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%] {\n  min-height: 35px;\n  display: initial !important;\n}\n.header-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .tasks[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  margin: 0 auto;\n}\n.header-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .tasks[_ngcontent-%COMP%]   .task-name[_ngcontent-%COMP%] {\n  font-size: 17px;\n  color: white;\n  font-weight: 400;\n  display: inline-flex;\n  align-items: flex-start;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  padding-left: 10px;\n  padding-right: 10px;\n}\n.header-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .tasks[_ngcontent-%COMP%]   .task-priority[_ngcontent-%COMP%] {\n  font-size: 14px;\n  color: white;\n  font-weight: 400;\n  display: flex;\n  align-items: center;\n}\n.enable-priority[_ngcontent-%COMP%] {\n  color: #fb014c;\n  font-size: 14px;\n  background: white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 20px;\n  width: 20px;\n  border-radius: 20px;\n}\n.azalio-container[_ngcontent-%COMP%] {\n  margin-top: 0px !important;\n  padding-top: 0px !important;\n}\n.tasks-wrapper[_ngcontent-%COMP%] {\n  overflow: auto;\n  padding: 8px;\n  margin-top: 2px;\n  max-height: 70vh;\n  min-height: 70vh;\n  padding-left: 10px;\n  padding-right: 10px;\n  padding-bottom: 28px;\n}\n.tasks-wrapper[_ngcontent-%COMP%]   .task-details[_ngcontent-%COMP%] {\n  background: white;\n  padding: 5px;\n  border-radius: 10px;\n  margin-top: 9px;\n}\n.tasks-wrapper[_ngcontent-%COMP%]   .task-details[_ngcontent-%COMP%]   .row1[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  padding: 10px;\n  padding-left: 12px;\n  padding-right: 12px;\n  padding-bottom: 5px;\n  align-items: center;\n}\n.tasks-wrapper[_ngcontent-%COMP%]   .task-details[_ngcontent-%COMP%]   .row1[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%] {\n  font-size: 18px;\n  font-weight: 700;\n  display: inline-flex;\n  align-items: center;\n}\n.tasks-wrapper[_ngcontent-%COMP%]   .task-details[_ngcontent-%COMP%]   .row1[_ngcontent-%COMP%]   .datetime[_ngcontent-%COMP%] {\n  color: #0000007d;\n  font-size: 12px;\n  font-weight: 600;\n}\n.tasks-wrapper[_ngcontent-%COMP%]   .task-details[_ngcontent-%COMP%]   .row2[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  padding-left: 46px;\n  padding-right: 12px;\n  padding-bottom: 10px;\n  margin-top: -7px;\n}\n.tasks-wrapper[_ngcontent-%COMP%]   .task-details[_ngcontent-%COMP%]   .row2[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%] {\n  font-size: 14px;\n  color: #484848;\n  line-height: 1.3;\n  display: block;\n}\n.tasks-wrapper[_ngcontent-%COMP%]   .task-details[_ngcontent-%COMP%]   .row2[_ngcontent-%COMP%]   .picture[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n  width: 130px;\n  height: 130px;\n  border-radius: 5px;\n  max-width: 100%;\n  max-height: 100%;\n}\n.footer[_ngcontent-%COMP%] {\n  position: fixed;\n  width: 99%;\n  bottom: 11px;\n  background: #f9f7ff;\n  padding-top: 10px;\n  -webkit-transform: translateZ(0);\n  z-index: 1;\n}\n.footer[_ngcontent-%COMP%]   .footer-row[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-bottom: 7px;\n  padding-left: 10px;\n}\n.footer[_ngcontent-%COMP%]   .footer-row[_ngcontent-%COMP%]   .add-input[_ngcontent-%COMP%] {\n  width: 86%;\n}\n@media (max-width: 1080px) {\n  .footer[_ngcontent-%COMP%] {\n    z-index: 1;\n  }\n}\n.task-details[_ngcontent-%COMP%] {\n  position: relative;\n}\n.skeleton-loader[_ngcontent-%COMP%] {\n  width: 100%;\n  font-size: 16px;\n  height: 30px;\n  display: block;\n  background: linear-gradient(to right, rgba(255, 255, 255, 0), rgba(255, 255, 255, 0.5) 50%, rgba(255, 255, 255, 0) 80%), #e4e0ff;\n  background-repeat: repeat-y;\n  background-size: 50px 500px;\n  background-position: 0 0;\n  animation: shine 1s infinite;\n  color: #7b68ee;\n  font-weight: 600;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-top: 10px;\n  border-radius: 5px;\n}\n@keyframes shine {\n  to {\n    background-position: 100% 0, 0 0;\n  }\n}\n.skeleton-loader[_ngcontent-%COMP%]:empty {\n  width: 100%;\n  height: 15px;\n  display: block;\n  background: linear-gradient(to right, rgba(255, 255, 255, 0), rgba(255, 255, 255, 0.5) 50%, rgba(255, 255, 255, 0) 80%), lightgray;\n  background-repeat: repeat-y;\n  background-size: 50px 500px;\n  background-position: 0 0;\n  animation: shine 1s infinite;\n}\n.tname[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  text-align: center;\n  line-height: 1.3;\n  padding-left: 5px;\n  padding-right: 40px;\n  text-align: initial;\n}\n.points[_ngcontent-%COMP%] {\n  font-size: 13px;\n  font-weight: 500;\n  margin-right: 15px;\n  display: flex;\n  align-items: center;\n  color: white;\n}\n.points[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n  margin-right: 5px;\n}\n.task-done[_ngcontent-%COMP%] {\n  background: #7be5be;\n  color: white;\n  padding: 2px;\n  border-radius: 15px;\n  font-size: 11px;\n  padding-left: 7px;\n  padding-right: 7px;\n}\n.send-icon[_ngcontent-%COMP%] {\n  margin-right: 5px;\n  width: 30px;\n}\n.comment-pic[_ngcontent-%COMP%] {\n  width: 370px;\n}\n.right-info[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n}\n.markdone-container[_ngcontent-%COMP%] {\n  display: flex;\n  margin-right: 8px;\n  width: initial;\n}\n.image-preview[_ngcontent-%COMP%] {\n  position: absolute;\n  left: 65px;\n  bottom: 5px;\n  color: white;\n}\n.image[_ngcontent-%COMP%] {\n  font-size: 16px;\n  color: #000000;\n  background: #f0f0f05c;\n  border-radius: 10px;\n  padding: 2px;\n}\n@media (max-width: 930px) {\n  .footer[_ngcontent-%COMP%]   .footer-row[_ngcontent-%COMP%]   .add-input[_ngcontent-%COMP%] {\n    width: 92%;\n  }\n\n  .send-comment[_ngcontent-%COMP%] {\n    margin-right: 10px;\n    margin-left: 4px;\n  }\n\n  .comment-pic[_ngcontent-%COMP%] {\n    width: auto;\n    margin-right: 12px;\n  }\n\n  .tasks-wrapper[_ngcontent-%COMP%] {\n    padding-bottom: 30px;\n    max-height: 58vh;\n    min-height: 58vh;\n  }\n}\n@media (max-width: 500px) {\n  .tasks-wrapper[_ngcontent-%COMP%]   .task-details[_ngcontent-%COMP%]   .row2[_ngcontent-%COMP%] {\n    flex-direction: column;\n  }\n\n  .picture[_ngcontent-%COMP%] {\n    margin-top: 10px;\n  }\n\n  .task-name[_ngcontent-%COMP%] {\n    max-height: 120px;\n    overflow: auto;\n  }\n\n  .footer[_ngcontent-%COMP%] {\n    bottom: 8%;\n  }\n}\n@media (max-width: 1050px) and (min-width: 930px) {\n  .tasks-wrapper[_ngcontent-%COMP%] {\n    padding-bottom: 0px;\n    max-height: 70vh;\n    min-height: 70vh;\n    overflow: auto;\n  }\n\n  .footer[_ngcontent-%COMP%] {\n    bottom: 10%;\n  }\n\n  .footer-row[_ngcontent-%COMP%] {\n    padding-left: 10px;\n  }\n}\n.unassigned-task[_ngcontent-%COMP%] {\n  flex-direction: initial !important;\n}\n.assigned-user[_ngcontent-%COMP%] {\n  background: #dad4ff;\n  color: #262626;\n  padding: 1px;\n  border-radius: 15px;\n  font-size: 12px;\n  padding-left: 7px;\n  padding-right: 7px;\n}\n.details-row[_ngcontent-%COMP%] {\n  background: #ffffff;\n  padding: 0px;\n  z-index: 1;\n  display: flex;\n  justify-content: space-between;\n  margin-top: 10px;\n  padding-left: 5px;\n  padding-right: 10px;\n  align-items: center;\n}\n.tag[_ngcontent-%COMP%] {\n  background: #dcfef5 !important;\n  color: #00523ce0 !important;\n  border-radius: 4px;\n  padding: 3px;\n  display: inline-block;\n  text-align: center;\n  width: 80px;\n  padding-right: 10px;\n  padding-left: 10px;\n  margin-bottom: 5px;\n  margin-top: 5px;\n}\n.first-col[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  margin-left: 10px;\n  min-width: 100px;\n}\n.first-col[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  font-size: 12px;\n  color: #7f84ea;\n  margin-top: -2px;\n  display: flex;\n  align-items: center;\n  width: 14px;\n  margin-right: 7px;\n}\n.first-col[_ngcontent-%COMP%]   .shifts[_ngcontent-%COMP%] {\n  font-size: 14px;\n  margin-left: 6px;\n  border-right: 1px solid #ababab;\n  padding-right: 15px;\n}\n.mt-25[_ngcontent-%COMP%] {\n  margin-top: 25px;\n}\n.shift-img[_ngcontent-%COMP%] {\n  width: 26px;\n  height: 26px;\n}\n.assignment-details[_ngcontent-%COMP%] {\n  padding: 2px;\n  margin-right: 5px;\n  margin-top: 4px;\n  margin-bottom: 4px;\n}\n.assigned-username[_ngcontent-%COMP%] {\n  min-width: 15px;\n  margin-right: 10px;\n}\n.task-undone[_ngcontent-%COMP%] {\n  background-color: #ffcbcb !important;\n  color: black !important;\n}\n@media (max-width: 600px) {\n  .first-col[_ngcontent-%COMP%] {\n    flex-direction: column;\n    align-items: flex-start !important;\n    margin-top: 5px;\n    margin-bottom: 5px;\n  }\n\n  .tag[_ngcontent-%COMP%] {\n    height: -moz-fit-content !important;\n    height: fit-content !important;\n  }\n\n  .points[_ngcontent-%COMP%] {\n    align-items: flex-start !important;\n  }\n  .points[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n    height: -moz-fit-content;\n    height: fit-content;\n  }\n\n  .right-info[_ngcontent-%COMP%] {\n    flex-direction: column;\n  }\n\n  .assigned-username[_ngcontent-%COMP%] {\n    min-width: 150px !important;\n  }\n}\n.showhim[_ngcontent-%COMP%] {\n  position: relative;\n  width: 92px;\n  height: 100px;\n  border-radius: 5px;\n  max-width: 100%;\n  max-height: 100%;\n  background-color: #eeeeee;\n}\n.small-devices-txtfield[_ngcontent-%COMP%] {\n  width: 100% !important;\n  bottom: initial !important;\n  top: 60px !important;\n  z-index: 1 !important;\n}\n@media (max-width: 400px) {\n  .row1[_ngcontent-%COMP%] {\n    width: 80%;\n  }\n}\n@media (max-width: 1367px) and (min-width: 930px) {\n  .tasks-wrapper[_ngcontent-%COMP%] {\n    padding-bottom: 40px !important;\n    max-height: 61vh !important;\n    min-height: 61vh !important;\n  }\n}\n.task-desc[_ngcontent-%COMP%] {\n  font-size: 12px;\n  color: #eeeeee;\n  display: flex;\n  align-items: center;\n  padding-left: 19px !important;\n  margin-bottom: 5px;\n}\n.expand-collapse[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: center;\n  padding-left: 10px;\n  padding-right: 10px;\n}\n.expand-collapse[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  color: #6e689b;\n  font-size: 10px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.task-name[_ngcontent-%COMP%] {\n  padding-left: 15px !important;\n  padding-top: 5px !important;\n}\n.tname[_ngcontent-%COMP%] {\n  padding-right: 21px !important;\n  padding-left: 3px !important;\n  font-size: 15px !important;\n  display: block !important;\n}\n.enable-priority[_ngcontent-%COMP%] {\n  color: #fb014c;\n  font-size: 11px;\n  background: white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 16px;\n  width: 16px;\n  padding-left: 0px;\n  padding-right: 0px;\n}\n.show-desc[_ngcontent-%COMP%] {\n  background: white;\n  padding-left: 4px !important;\n  padding-right: 4px !important;\n  border-radius: 20px;\n  color: #686e9b;\n  font-size: 10px;\n  padding: 2px;\n  cursor: pointer;\n  white-space: nowrap;\n}\n.sch-task[_ngcontent-%COMP%] {\n  border-radius: 20px;\n  padding: 2px;\n  padding-left: 7px;\n  padding-right: 7px;\n  padding-bottom: 1px;\n  display: flex;\n  align-items: center;\n  background: #ffe0c1;\n  color: #000000;\n  font-size: 12px;\n  margin-right: 6px;\n  margin-top: 4px;\n  margin-bottom: 4px;\n}\n.sch-task[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  margin-right: 4px;\n  color: #ffae5e;\n}\n.resp-right-elements[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n}\n@media (max-width: 930px) {\n  .resp-right-elements[_ngcontent-%COMP%] {\n    flex-direction: column;\n  }\n}\n.categories[_ngcontent-%COMP%] {\n  border-radius: 20px;\n  padding: 1px;\n  padding-left: 10px;\n  padding-right: 10px;\n  background: white;\n  font-size: 12px;\n  margin-left: 5px;\n  \n  display: inline-flex;\n  align-items: baseline;\n  margin-bottom: 5px;\n}\n.categories[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  font-size: 10px;\n  margin-right: 5px;\n}\n.categories[_ngcontent-%COMP%]   .category-name[_ngcontent-%COMP%] {\n  color: #494949;\n}\n.second-row[_ngcontent-%COMP%] {\n  margin-left: 12px;\n  display: block;\n}\n.second-element[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  padding-right: 10px;\n  margin-top: 4px;\n  margin-bottom: 4px;\n}\n.second-element[_ngcontent-%COMP%]   .points[_ngcontent-%COMP%] {\n  margin-left: 5px;\n}\n.details-row[_ngcontent-%COMP%]   .points[_ngcontent-%COMP%] {\n  color: #222b45;\n}"]}),i}(),Wt=m(3863),Xt=m(7754);function ne(i,o){1&i&&(n.ynx(0),n._uU(1,"All shifts"),n.BQk())}function te(i,o){1&i&&(n.ynx(0),n._uU(1,"All day"),n.BQk())}function ee(i,o){if(1&i&&(n.ynx(0),n._uU(1),n.BQk()),2&i){var e=n.oxw(3);n.xp6(1),n.Oqu(e.getSelectedShiftCount())}}function ie(i,o){if(1&i){var e=n.EpF();n.TgZ(0,"span",30),n.NdJ("click",function(s){n.CHM(e);var l=n.oxw(3);return s.stopPropagation(),l.coinPopup=!l.coinPopup}),n._UZ(1,"img",31),n.TgZ(2,"span",32),n._uU(3),n.qZA(),n._UZ(4,"i",33),n.qZA()}if(2&i){var t=n.oxw(3);n.xp6(2),n.s9C("nbTooltip",t.selectedCoins+" points"),n.xp6(1),n.hij(" ",t.selectedCoins?t.selectedCoins:0," ")}}function ae(i,o){1&i&&n._UZ(0,"i",50)}function oe(i,o){1&i&&n._UZ(0,"i",50)}var X=function(o,e){return{"selected-shift-row":o,disabled:e}},Q=function(o){return{"highlighted-shift":o}},E=function(o){return{"disabled-field":o}};function se(i,o){if(1&i){var e=n.EpF();n.TgZ(0,"li",42),n.NdJ("click",function(s){n.CHM(e);var l=n.oxw(4);return s.stopPropagation(),l.selectAllShifts()}),n.TgZ(1,"span",43),n._UZ(2,"img",51),n._uU(3," All shifts "),n.qZA(),n.TgZ(4,"span",39),n.YNc(5,oe,1,0,"i",45),n.qZA(),n.TgZ(6,"span",46),n.NdJ("click",function(s){return s.stopPropagation()}),n._UZ(7,"input",52),n.qZA(),n.qZA()}if(2&i){var t=n.oxw(4);n.Q6J("ngClass",n.WLB(6,X,t.allShifts,t.allDay)),n.xp6(1),n.Q6J("ngClass",n.VKq(9,Q,t.allShifts)),n.xp6(4),n.Q6J("ngIf",t.allShifts),n.xp6(1),n.Q6J("formGroup",t.form),n.xp6(1),n.Q6J("readonly",!t.allShifts)("ngClass",n.VKq(11,E,!t.allShifts))}}function le(i,o){1&i&&n._UZ(0,"i",50)}var re=function(o,e){return{disabled:o,"selected-shift-row":e}};function pe(i,o){if(1&i){var e=n.EpF();n.TgZ(0,"li",42),n.NdJ("click",function(r){var c=n.CHM(e).$implicit,d=n.oxw(4);return r.stopPropagation(),d.selectShift(c)}),n.TgZ(1,"span",53),n._UZ(2,"i"),n.TgZ(3,"span",54),n._uU(4),n.qZA(),n.qZA(),n.TgZ(5,"span",39),n.YNc(6,le,1,0,"i",45),n.qZA(),n.TgZ(7,"span",46),n.NdJ("click",function(r){return r.stopPropagation()}),n.TgZ(8,"input",55),n.NdJ("focusout",function(){var p=n.CHM(e).index,c=n.oxw(4);return c.onFocusOut(c.taskRepeats.controls[p])}),n.qZA(),n.qZA(),n.qZA()}if(2&i){var t=o.$implicit,a=o.index,s=n.oxw(4);n.Q6J("ngClass",n.WLB(10,re,s.allShifts||s.allDay,!s.allShifts&&t.selected)),n.xp6(2),n.Tol(t.icon),n.xp6(1),n.Q6J("nbTooltip",t.shift_name)("ngClass",n.VKq(13,Q,t.selected)),n.xp6(1),n.hij(" ",t.shift_name," "),n.xp6(2),n.Q6J("ngIf",t.selected&&!s.allShifts),n.xp6(1),n.Q6J("formGroup",s.taskRepeats.controls[a]),n.xp6(1),n.Q6J("readonly",!(!s.allShifts&&t.selected))("ngClass",n.VKq(15,E,!(!s.allShifts&&t.selected)))}}function ce(i,o){if(1&i){var e=n.EpF();n.TgZ(0,"span",34),n.TgZ(1,"span",35),n.TgZ(2,"ul",36),n.TgZ(3,"li",37),n.TgZ(4,"span",38),n._uU(5," Shifts "),n.qZA(),n._UZ(6,"span",39),n.TgZ(7,"span",40),n._UZ(8,"i",41),n._uU(9," Repeats "),n.qZA(),n.qZA(),n.TgZ(10,"li",42),n.NdJ("click",function(s){n.CHM(e);var l=n.oxw(3);return s.stopPropagation(),l.selectAllDay()}),n.TgZ(11,"span",43),n._UZ(12,"img",44),n._uU(13," Default (All day) "),n.qZA(),n.TgZ(14,"span",39),n.YNc(15,ae,1,0,"i",45),n.qZA(),n.TgZ(16,"span",46),n.NdJ("click",function(s){return s.stopPropagation()}),n._UZ(17,"input",47),n.qZA(),n.qZA(),n.YNc(18,se,8,13,"li",48),n.YNc(19,pe,9,17,"li",49),n.qZA(),n.qZA(),n.qZA()}if(2&i){var t=n.oxw(3);n.xp6(10),n.Q6J("ngClass",n.WLB(8,X,t.allDay,t.allShifts)),n.xp6(1),n.Q6J("ngClass",n.VKq(11,Q,t.allDay)),n.xp6(4),n.Q6J("ngIf",t.allDay),n.xp6(1),n.Q6J("formGroup",t.form),n.xp6(1),n.Q6J("readonly",!t.allDay)("ngClass",n.VKq(13,E,!t.allDay)),n.xp6(1),n.Q6J("ngIf",(null==t.shiftsArr?null:t.shiftsArr.length)>0),n.xp6(1),n.Q6J("ngForOf",t.shiftsArr)}}var de=function(o){return{selected:o}};function ge(i,o){if(1&i){var e=n.EpF();n.TgZ(0,"li",42),n.NdJ("click",function(l){var p=n.CHM(e).$implicit;return n.oxw(4).selectCoins(l,p)}),n._UZ(1,"img",31),n._uU(2),n.qZA()}if(2&i){var t=o.$implicit,a=n.oxw(4);n.Q6J("ngClass",n.VKq(2,de,a.selectedCoins==t)),n.xp6(2),n.hij(" ",t," points ")}}function ue(i,o){if(1&i){var e=n.EpF();n.TgZ(0,"span",56),n.TgZ(1,"span",35),n.TgZ(2,"ul",57),n.YNc(3,ge,3,4,"li",49),n.TgZ(4,"li"),n.TgZ(5,"span",58),n.NdJ("click",function(s){return s.stopPropagation()}),n._UZ(6,"img",31),n.TgZ(7,"input",59),n.NdJ("keydown.enter",function(s){n.CHM(e);var l=n.oxw(3);return l.selectCoins(s,l.form.controls.points.value)}),n.qZA(),n.qZA(),n.TgZ(8,"i",60),n.NdJ("click",function(s){n.CHM(e);var l=n.oxw(3);return l.selectCoins(s,l.form.controls.points.value)}),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&i){var t=n.oxw(3);n.xp6(2),n.Q6J("formGroup",t.form),n.xp6(1),n.Q6J("ngForOf",t.coins)}}var _e=function(o,e){return{"azalio-play":o,default:e}},nn=function(o){return{"edit-task":o}},fe=function(o,e){return{"tasks-input-play":o,"tasks-input-boring":e}};function me(i,o){if(1&i){var e=n.EpF();n.TgZ(0,"div",16),n.TgZ(1,"span",17),n.TgZ(2,"app-text-input",18),n.NdJ("keydown.enter",function(){return n.CHM(e),n.oxw(2).addTask()}),n.TgZ(3,"span",19),n.TgZ(4,"span",20),n.NdJ("click",function(s){n.CHM(e);var l=n.oxw(2);return s.stopPropagation(),l.shiftPopup=!l.shiftPopup}),n.TgZ(5,"span",21),n.YNc(6,ne,2,0,"ng-container",5),n.YNc(7,te,2,0,"ng-container",5),n.YNc(8,ee,2,1,"ng-container",5),n.qZA(),n._UZ(9,"i",22),n.qZA(),n.YNc(10,ie,5,2,"span",23),n.qZA(),n.qZA(),n.qZA(),n.YNc(11,ce,20,15,"span",24),n.YNc(12,ue,9,2,"span",25),n.TgZ(13,"span",26),n.TgZ(14,"button",27),n.NdJ("click",function(){return n.CHM(e),n.oxw(2).addTask()}),n._uU(15),n.qZA(),n.qZA(),n.TgZ(16,"span",28),n.TgZ(17,"button",29),n.NdJ("click",function(){return n.CHM(e),n.oxw(2).cancelEdit()}),n._uU(18," Cancel "),n.qZA(),n.qZA(),n.qZA()}if(2&i){var t=n.oxw(2);n.Q6J("ngClass",n.WLB(19,_e,(null==t.shiftsFilterArr?null:t.shiftsFilterArr.length)>0,!t.shiftsFilterArr)),n.xp6(1),n.Q6J("ngClass",n.VKq(22,nn,null!==(null==t.selectedRowDataEdit?null:t.selectedRowDataEdit.id)&&!t.isAddEditTagsOnly)),n.xp6(1),n.Q6J("id","task-input")("maxlength",255)("ngClass",n.WLB(24,fe,t.isAzalioPlay||t.isBoringPlay,!t.isAzalioPlay&&!t.isBoringPlay))("placeholder","Add a task here for your store and press enter.")("controlName","taskName")("form",t.form),n.xp6(4),n.Q6J("ngIf",(null==t.shiftsFilterArr?null:t.shiftsFilterArr.length)>0&&t.allShifts),n.xp6(1),n.Q6J("ngIf",t.allDay),n.xp6(1),n.Q6J("ngIf",!t.allDay&&!t.allShifts),n.xp6(2),n.Q6J("ngIf",t.isAzalioPlay||t.isBoringPlay),n.xp6(1),n.Q6J("ngIf",t.shiftPopup),n.xp6(1),n.Q6J("ngIf",t.coinPopup),n.xp6(1),n.Q6J("hidden",!(null!=t.permissions&&null!=t.permissions.Tasks&&t.permissions.Tasks.add))("ngClass",n.VKq(27,nn,null!==(null==t.selectedRowDataEdit?null:t.selectedRowDataEdit.id)&&!t.isAddEditTagsOnly)),n.xp6(1),n.Q6J("status",t.selectedRowDataEdit&&!t.isAddEditTagsOnly?"danger":"primary"),n.xp6(1),n.hij(" ",t.selectedRowDataEdit&&!t.isAddEditTagsOnly?"Save":"Add Task"," "),n.xp6(1),n.Q6J("hidden",!(null!=t.permissions&&null!=t.permissions.Tasks&&t.permissions.Tasks.update&&t.selectedRowDataEdit))}}function he(i,o){if(1&i){var e=n.EpF();n.ynx(0),n._uU(1," Add task to: "),n.TgZ(2,"nb-radio-group",61),n.NdJ("ngModelChange",function(s){return n.CHM(e),n.oxw(2).isAllStores=s}),n.TgZ(3,"nb-radio",62),n._uU(4,"All stores"),n.qZA(),n.TgZ(5,"nb-radio",63),n._uU(6,"Current store"),n.qZA(),n.qZA(),n.BQk()}if(2&i){var t=n.oxw(2);n.xp6(2),n.Q6J("ngModel",t.isAllStores)}}function ve(i,o){if(1&i){var e=n.EpF();n.TgZ(0,"span",76),n.NdJ("click",function(a){n.CHM(e);var s=n.oxw(4);return a.stopPropagation(),s.setShiftFilter(null)}),n._UZ(1,"i",77),n.qZA()}}function xe(i,o){if(1&i&&(n.TgZ(0,"span",78),n._UZ(1,"img",31),n.TgZ(2,"span",74),n._uU(3),n.qZA(),n.qZA()),2&i){var e=n.oxw().$implicit;n.xp6(3),n.Oqu(e.points_count)}}var Te=function(o){return{"selected-shift":o}};function ke(i,o){if(1&i){var e=n.EpF();n.TgZ(0,"span",67),n.NdJ("click",function(){var r=n.CHM(e).$implicit;return n.oxw(3).setShiftFilter(r)}),n.TgZ(1,"div",68),n.TgZ(2,"span",69),n._UZ(3,"i"),n._uU(4),n.qZA(),n.YNc(5,ve,2,0,"span",70),n.qZA(),n.TgZ(6,"span",71),n.TgZ(7,"span",72),n._UZ(8,"i",73),n.TgZ(9,"span",74),n._uU(10),n.qZA(),n.qZA(),n.YNc(11,xe,4,1,"span",75),n.qZA(),n.qZA()}if(2&i){var t=o.$implicit,a=n.oxw(3);n.Q6J("ngClass",n.VKq(9,Te,(null==a.selectedShift?null:a.selectedShift.id)==t.id)),n.xp6(2),n.Q6J("nbTooltip",t.shift_name),n.xp6(1),n.Tol(t.icon),n.xp6(1),n.hij(" ",t.shift_name," "),n.xp6(1),n.Q6J("ngIf",(null==a.selectedShift?null:a.selectedShift.id)==t.id),n.xp6(5),n.Oqu(t.tasks_count),n.xp6(1),n.Q6J("ngIf",a.isBoringPlay||a.isAzalioPlay)}}function Ce(i,o){if(1&i){var e=n.EpF();n.TgZ(0,"i",79),n.NdJ("click",function(){return n.CHM(e),n.oxw(3).setSliceIndex()}),n.qZA()}}function be(i,o){if(1&i&&(n.TgZ(0,"span",64),n.YNc(1,ke,12,11,"span",65),n.ALo(2,"slice"),n.YNc(3,Ce,1,0,"i",66),n.qZA()),2&i){var e=n.oxw(2);n.xp6(1),n.Q6J("ngForOf",n.Dn7(2,2,e.shiftsFilterArr,e.startIndex,e.endIndex)),n.xp6(2),n.Q6J("ngIf",(null==e.shiftsFilterArr?null:e.shiftsFilterArr.length)>3)}}function we(i,o){if(1&i){var e=n.EpF();n.TgZ(0,"span",88),n.TgZ(1,"span",89),n.TgZ(2,"app-filter-popup",90),n.NdJ("onClose",function(){return n.CHM(e),n.oxw(3).closeFilter("tag")})("onApply",function(){return n.CHM(e),n.oxw(3).applyFilterMulti("tag")})("onClear",function(){return n.CHM(e),n.oxw(3).removeFilter("tag")})("onOpen",function(){n.CHM(e);var s=n.oxw(3);return s.defaultOpen=!s.defaultOpen}),n._UZ(3,"app-dropdown-multi",91),n.qZA(),n.qZA(),n.qZA()}if(2&i){var t=n.oxw(3);n.xp6(2),n.Q6J("label","Tags")("isFiltered",null==t.isFiltered?null:t.isFiltered.tag),n.xp6(1),n.Q6J("type","tag")("optionClass","dot-tag")("label","tags")("defaultOpen",t.defaultOpen)("selected",null==t.filter?null:t.filter.tag)("key","tag")("key2","color")("optionId","id")("Data",t.tags)("placeholder","Select one or more tags")("controlName","tag")("form",t.form)("show",!1)}}function ye(i,o){if(1&i){var e=n.EpF();n.TgZ(0,"li",94),n.NdJ("click",function(){var l=n.CHM(e).$implicit;return n.oxw(4).setFilter(l)}),n._uU(1),n.qZA()}if(2&i){var t=o.$implicit;n.xp6(1),n.hij(" ",t.display_title," ")}}function Ze(i,o){if(1&i&&(n.TgZ(0,"span",92),n.TgZ(1,"span",35),n.TgZ(2,"ul",36),n.YNc(3,ye,2,1,"li",93),n.qZA(),n.qZA(),n.qZA()),2&i){var e=n.oxw(3);n.xp6(3),n.Q6J("ngForOf",e.filters)}}function Pe(i,o){if(1&i){var e=n.EpF();n.TgZ(0,"mat-paginator",95),n.NdJ("page",function(s){n.CHM(e);var l=n.oxw(3);return l.pageEvent=s,l.getData()}),n.qZA()}if(2&i){var t=n.oxw(3);n.Q6J("length",t.paginator.total_records)("pageIndex",t.paginator.page_no-1)("pageSize",t.paginator.page_size)("pageSizeOptions",t.pageSizes)}}var Me=function(o){return{"no-shifts":o}};function Oe(i,o){if(1&i){var e=n.EpF();n.TgZ(0,"span",80),n.TgZ(1,"app-search-input",81),n.NdJ("searchEvent",function(s){return n.CHM(e),n.oxw(2).onSearch(s)})("searchAll",function(s){return n.CHM(e),n.oxw(2).onSearchAll(s)})("click",function(){return n.CHM(e),n.oxw(2).addSearchAnalytics()}),n.qZA(),n.TgZ(2,"span",82),n.YNc(3,we,4,15,"span",83),n.TgZ(4,"span",84),n.NdJ("click",function(s){n.CHM(e);var l=n.oxw(2);return s.stopPropagation(),l.sortPopup=!l.sortPopup}),n._uU(5),n._UZ(6,"i",85),n.qZA(),n.YNc(7,Ze,4,1,"span",86),n.qZA(),n.YNc(8,Pe,1,4,"mat-paginator",87),n.qZA()}if(2&i){var t=n.oxw(2);n.xp6(1),n.Q6J("placeholder","Search by task name")("showHelperButton",t.showHelperButton),n.xp6(1),n.Q6J("ngClass",n.VKq(7,Me,null==t.shiftsFilterArr)),n.xp6(1),n.Q6J("ngIf",null==t.gs?null:t.gs.isRespMode),n.xp6(2),n.hij(" ",null==t.selectedFilterItem?null:t.selectedFilterItem.display_title," "),n.xp6(2),n.Q6J("ngIf",t.sortPopup),n.xp6(1),n.Q6J("ngIf",t.paginator)}}var Ae=function(o,e,t){return{"assign-task-play":o,default:e,"play-edit":t}},De=function(o){return{disabled:o}},qe=function(o,e){return{"azalio-play":o,"default-row":e}};function Je(i,o){if(1&i){var e=n.EpF();n.ynx(0),n.YNc(1,me,19,29,"div",8),n.TgZ(2,"span",9),n.TgZ(3,"span",10),n.YNc(4,he,7,1,"ng-container",5),n.qZA(),n.TgZ(5,"span",11),n.NdJ("click",function(){return n.CHM(e),n.oxw().openAddTaskPopup()}),n._UZ(6,"img",12),n._uU(7),n.qZA(),n.qZA(),n.TgZ(8,"div",13),n.YNc(9,be,4,6,"span",14),n.YNc(10,Oe,9,9,"span",15),n.qZA(),n.BQk()}if(2&i){var t=n.oxw();n.xp6(1),n.Q6J("ngIf",null==t.permissions||null==t.permissions.Tasks?null:t.permissions.Tasks.add),n.xp6(1),n.Q6J("ngClass",n.kEZ(9,Ae,t.isAzalioPlay,!t.isAzalioPlay,t.selectedRowDataEdit&&!t.isAddEditTagsOnly)),n.xp6(2),n.Q6J("ngIf",t.isAzalioPlay||t.isBoringPlay&&!t.selectedRowDataEdit&&(null==t.permissions||null==t.permissions.Tasks?null:t.permissions.Tasks.add)&&(null==t.permissions||null==t.permissions.Tasks?null:t.permissions.Tasks.add_bulk)),n.xp6(1),n.Q6J("ngClass",n.VKq(13,De,!t.selectedRowDataEdit&&(null==t.form.controls.taskName.value?null:t.form.controls.taskName.value.length)<5)),n.xp6(1),n.Q6J("src",!t.selectedRowDataEdit&&(null==t.form.controls.taskName.value?null:t.form.controls.taskName.value.length)<5?"assets/grey-tasks.png":"assets/add-more-details.png",n.LSH),n.xp6(1),n.hij(" ",t.selectedRowDataEdit&&!t.isAddEditTagsOnly?"Edit Advanced Options":"Add Advanced Options"," "),n.xp6(1),n.Q6J("ngClass",n.WLB(15,qe,(null==t.shiftsFilterArr?null:t.shiftsFilterArr.length)>0,!t.shiftsFilterArr)),n.xp6(1),n.Q6J("ngIf",(null==t.shiftsFilterArr?null:t.shiftsFilterArr.length)>0),n.xp6(1),n.Q6J("ngIf",!t.pageLoading&&t.isStore&&!t.emptyResults)}}function Se(i,o){if(1&i){var e=n.EpF();n.TgZ(0,"div",96),n.NdJ("click",function(){return n.CHM(e),n.oxw().navigateToReports()}),n.TgZ(1,"a",97),n._uU(2,"View Report"),n.qZA(),n.qZA()}}function Ne(i,o){if(1&i){var e=n.EpF();n.TgZ(0,"app-filter-popup",90),n.NdJ("onClose",function(){return n.CHM(e),n.oxw(4).closeFilter("tag")})("onApply",function(){return n.CHM(e),n.oxw(4).applyFilterMulti("tag")})("onClear",function(){return n.CHM(e),n.oxw(4).removeFilter("tag")})("onOpen",function(){n.CHM(e);var s=n.oxw(4);return s.defaultOpen=!s.defaultOpen}),n._UZ(1,"app-dropdown-multi",128),n.qZA()}if(2&i){var t=n.oxw(4);n.Q6J("label","tags")("isFiltered",null==t.isFiltered?null:t.isFiltered.tag),n.xp6(1),n.Q6J("type","tag")("label","tags")("optionClass","dot-tag")("defaultOpen",t.defaultOpen)("selected",null==t.filter?null:t.filter.tag)("key","tag")("key2","color")("optionId","id")("Data",t.tags)("placeholder","Select one or more tags")("controlName","tag")("form",t.form)("show",!1)}}function Ue(i,o){if(1&i&&(n.TgZ(0,"th",126),n._uU(1,"Task "),n.YNc(2,Ne,2,15,"app-filter-popup",127),n.qZA()),2&i){var e=n.oxw(3);n.xp6(2),n.Q6J("ngIf",!(null!=e.gs&&e.gs.isRespMode))}}function Ie(i,o){1&i&&(n.TgZ(0,"span",140),n._UZ(1,"i",41),n._uU(2," Scheduled Task "),n.qZA())}function Re(i,o){1&i&&(n.TgZ(0,"span",141),n._uU(1," All stores "),n.qZA())}function Qe(i,o){if(1&i){var e=n.EpF();n.TgZ(0,"div",142),n.NdJ("click",function(a){n.CHM(e);var s=n.oxw().$implicit,l=n.oxw(3);return a.stopPropagation(),l.isAddEditTagsOnly=!0,l.toggleEditMode(s)}),n._UZ(1,"i",143),n._uU(2,"Add label"),n.qZA()}}function Ee(i,o){1&i&&(n.ynx(0),n._uU(1,", "),n.BQk())}function ze(i,o){if(1&i&&(n.TgZ(0,"span",144),n._UZ(1,"i",145),n.TgZ(2,"span",146),n._uU(3),n.YNc(4,Ee,2,0,"ng-container",5),n.qZA(),n.qZA()),2&i){var e=o.$implicit,t=o.index,a=n.oxw().$implicit;n.xp6(1),n.Udp("color",e.color),n.xp6(2),n.Oqu(e.tag),n.xp6(1),n.Q6J("ngIf",t!==a.tags.length-1)}}var Fe=function(o){return{"enable-priority":o}};function Ve(i,o){if(1&i){var e=n.EpF();n.TgZ(0,"td",129),n.TgZ(1,"span",130),n.TgZ(2,"label",131),n._uU(3,"Task name"),n.qZA(),n.TgZ(4,"i",132),n.NdJ("click",function(){var l=n.CHM(e).$implicit;return n.oxw(3).updatePriority(l)}),n.qZA(),n.TgZ(5,"span",133),n.TgZ(6,"span",134),n.NdJ("click",function(){var l=n.CHM(e).$implicit;return n.oxw(3).openTaskComments(l)}),n._uU(7),n.YNc(8,Ie,3,0,"span",135),n.qZA(),n.YNc(9,Re,2,0,"span",136),n.YNc(10,Qe,3,0,"div",137),n.TgZ(11,"span",138),n.NdJ("click",function(){var l=n.CHM(e).$implicit,r=n.oxw(3);return r.isAddEditTagsOnly=!0,r.toggleEditMode(l)}),n.YNc(12,ze,5,4,"span",139),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&i){var t=o.$implicit;n.xp6(4),n.Q6J("nbTooltip","NORMAL"===t.priority?"Mark as important":"Important task")("ngClass",n.VKq(9,Fe,"HIGH"===t.priority)),n.xp6(1),n.Q6J("nbTooltip",t.description)("nbTooltipDisabled",!t.description),n.xp6(2),n.hij("",t.name," "),n.xp6(1),n.Q6J("ngIf",(null==t.custom?null:t.custom.repeatType)>0),n.xp6(1),n.Q6J("ngIf",t.all_store),n.xp6(1),n.Q6J("ngIf",!t.tags||(null==t.tags?null:t.tags.length)<1),n.xp6(2),n.Q6J("ngForOf",t.tags)}}function Ye(i,o){1&i&&(n.TgZ(0,"th",147),n._uU(1,"Status"),n.qZA())}function He(i,o){if(1&i&&(n.ynx(0),n.TgZ(1,"span",149),n.TgZ(2,"label",150),n._uU(3,"Status"),n.qZA(),n._UZ(4,"app-user-avatar",151),n.TgZ(5,"span",152),n.TgZ(6,"span",153),n._uU(7),n.ALo(8,"date"),n.qZA(),n.qZA(),n.qZA(),n.BQk()),2&i){var e=n.oxw().$implicit,t=n.oxw(3);n.xp6(4),n.Tol(t.getStatusClass(e)),n.Q6J("name",e.modified_by)("color",e.user_color+t.opacity)("initialColor",e.user_color)("nbTooltip",e.modified_by),n.xp6(3),n.hij(" ",n.xi3(8,7,e.modified_on,"MMM d hh:mm aa"),"")}}function Be(i,o){if(1&i){var e=n.EpF();n.TgZ(0,"td",148),n.NdJ("click",function(){var l=n.CHM(e).$implicit;return n.oxw(3).openTaskComments(l)}),n.YNc(1,He,9,10,"ng-container",5),n.qZA()}if(2&i){var t=o.$implicit;n.xp6(1),n.Q6J("ngIf",!t.modification.includes("Created"))}}function je(i,o){1&i&&(n.TgZ(0,"th",154),n._uU(1,"Shifts"),n.qZA())}function $e(i,o){if(1&i&&(n.TgZ(0,"span",158),n._UZ(1,"img",159),n._uU(2),n.qZA()),2&i){var e=n.oxw().$implicit,t=n.oxw(3);n.s9C("nbTooltip",null==t.service?null:t.service.getShiftNames(e.shifts)),n.xp6(1),n.Udp("visibility",1==(null==t.service?null:t.service.isMultiTask(e.shifts))?"visible":"hidden"),n.xp6(1),n.hij(" ",e.shifts.length+" shifts"," ")}}function Le(i,o){if(1&i&&(n.TgZ(0,"span",158),n._UZ(1,"img",159),n._uU(2),n.qZA()),2&i){var e=n.oxw().$implicit,t=n.oxw(3);n.s9C("nbTooltip",null==t.service?null:t.service.getShiftNames(e.shifts)),n.xp6(1),n.Udp("visibility",1==(null==t.service?null:t.service.isMultiTask(e.shifts))?"visible":"hidden"),n.xp6(1),n.hij(" ",e.shifts[0].name," ")}}function Ge(i,o){if(1&i&&(n.TgZ(0,"span",158),n._UZ(1,"img",159),n._uU(2," All day "),n.qZA()),2&i){var e=n.oxw().$implicit;n.s9C("nbTooltip","All day ("+e.task_repetition+")"),n.xp6(1),n.Udp("visibility",e.task_repetition>1?"visible":"hidden")}}function Ke(i,o){if(1&i&&(n.TgZ(0,"td",155),n.TgZ(1,"label",156),n._uU(2,"Shifts"),n.qZA(),n.YNc(3,$e,3,4,"span",157),n.YNc(4,Le,3,4,"span",157),n.YNc(5,Ge,3,3,"span",157),n.qZA()),2&i){var e=o.$implicit;n.xp6(3),n.Q6J("ngIf",(null==e.shifts?null:e.shifts.length)>1),n.xp6(1),n.Q6J("ngIf",1===(null==e.shifts?null:e.shifts.length)),n.xp6(1),n.Q6J("ngIf",!e.shifts)}}function We(i,o){1&i&&(n.TgZ(0,"th",160),n._uU(1,"Points"),n.qZA())}function Xe(i,o){if(1&i&&(n.TgZ(0,"span",163),n._UZ(1,"img",31),n.TgZ(2,"span"),n._uU(3),n.qZA(),n.qZA()),2&i){var e=n.oxw().$implicit;n.xp6(3),n.hij(" ",e.points," ")}}function ni(i,o){if(1&i&&(n.TgZ(0,"td",161),n.TgZ(1,"label",156),n._uU(2,"Points"),n.qZA(),n.YNc(3,Xe,4,1,"span",162),n.qZA()),2&i){var e=o.$implicit;n.xp6(3),n.Q6J("ngIf",null!==e.points)}}function ti(i,o){1&i&&(n.TgZ(0,"th",164),n._uU(1,"Assignment"),n.qZA())}function ei(i,o){if(1&i){var e=n.EpF();n.TgZ(0,"span",173),n.TgZ(1,"span",174),n.NdJ("click",function(){n.CHM(e);var r=n.oxw().$implicit,p=n.oxw(3).$implicit;return n.oxw(3).openAssignUserModal(p,r)}),n._UZ(2,"i",175),n._uU(3),n.qZA(),n.qZA()}if(2&i){var t=n.oxw().$implicit;n.oxw(5);var a=n.MAs(4),s=n.oxw();n.xp6(1),n.Q6J("nbPopover",null!=s.gs&&s.gs.touchEnabledDevices?null:a),n.xp6(1),n.Tol(t.shift_icon),n.Q6J("nbTooltip",t.name),n.xp6(1),n.hij(" ",t.assigned_to_user_name," ")}}function ii(i,o){if(1&i&&(n.TgZ(0,"span"),n.YNc(1,ei,4,6,"span",172),n.qZA()),2&i){var e=o.$implicit;n.xp6(1),n.Q6J("ngIf",e.assigned_to_user_name)}}function ai(i,o){if(1&i&&(n.TgZ(0,"span"),n.YNc(1,ii,2,1,"span",171),n.qZA()),2&i){var e=n.oxw(2).$implicit;n.xp6(1),n.Q6J("ngForOf",null==e?null:e.shifts)}}function oi(i,o){if(1&i){var e=n.EpF();n.TgZ(0,"span",176),n.NdJ("click",function(){n.CHM(e);var l=n.oxw(2).$implicit;return n.oxw(3).openAssignUserModal(l)}),n._UZ(1,"i",177),n.qZA()}if(2&i){n.oxw(4);var t=n.MAs(4),a=n.oxw();n.xp6(1),n.Q6J("nbPopover",null!=a.gs&&a.gs.touchEnabledDevices?null:t)}}function si(i,o){if(1&i&&(n.TgZ(0,"span",169),n.YNc(1,ai,2,1,"span",5),n.YNc(2,oi,2,1,"span",170),n.qZA()),2&i){var e=n.oxw().$implicit,t=n.oxw(3);n.xp6(1),n.Q6J("ngIf",e.shifts),n.xp6(1),n.Q6J("ngIf",t.showButton(e.shifts))}}function li(i,o){if(1&i&&n._UZ(0,"i",184),2&i){n.oxw(4);var e=n.MAs(4),t=n.oxw();n.Q6J("nbPopover",null!=t.gs&&t.gs.touchEnabledDevices?null:e)}}var ri=function(o,e){return{"assigned-user":o,assignment:e}};function pi(i,o){if(1&i){var e=n.EpF();n.TgZ(0,"span",178),n.TgZ(1,"span",179),n.NdJ("click",function(){n.CHM(e);var r=n.oxw().$implicit;return n.oxw(3).openAssignUserModal(r)}),n.TgZ(2,"span",180),n.YNc(3,li,1,1,"i",181),n.qZA(),n.TgZ(4,"span",182),n.TgZ(5,"span",183),n._uU(6),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&i){var t=n.oxw().$implicit;n.oxw(2);var a=n.MAs(4),s=n.oxw();n.Q6J("ngClass",n.WLB(4,ri,null!==t.assigned_to_user_name,null==t.assigned_to_user_name)),n.xp6(3),n.Q6J("ngIf",null==t.assigned_to_user_name),n.xp6(2),n.Q6J("nbPopover",null!=s.gs&&s.gs.touchEnabledDevices?null:a),n.xp6(1),n.Oqu(t.assigned_to_user_name?null==t?null:t.assigned_to_user_name:"")}}function ci(i,o){if(1&i&&(n.TgZ(0,"td",165),n.TgZ(1,"label",166),n._uU(2,"Assignment"),n.qZA(),n.YNc(3,si,3,2,"span",167),n.YNc(4,pi,7,7,"span",168),n.qZA()),2&i){var e=o.$implicit;n.xp6(3),n.Q6J("ngIf",null==e?null:e.shifts),n.xp6(1),n.Q6J("ngIf",!e.shifts)}}function di(i,o){1&i&&(n.TgZ(0,"th",185),n._uU(1,"Actions"),n.qZA())}function gi(i,o){if(1&i){var e=n.EpF();n.TgZ(0,"td",186),n.TgZ(1,"label",156),n._uU(2,"Actions"),n.qZA(),n.TgZ(3,"span",187),n.TgZ(4,"i",188),n.NdJ("click",function(){var l=n.CHM(e).$implicit,r=n.oxw(3);return r.isAddEditTagsOnly=!1,r.toggleEditMode(l)}),n.qZA(),n.TgZ(5,"app-confirm-popup",189),n.NdJ("proceedDelete",function(){var l=n.CHM(e).$implicit;return n.oxw(3).deleteTask(l.id)}),n.TgZ(6,"i",190),n.NdJ("click",function(){return n.CHM(e),n.oxw(3).addDeleteAnalytics()}),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&i){var t=n.oxw(3);n.xp6(5),n.Q6J("title","Task")("textToDisplay",t.deleteText)}}function ui(i,o){1&i&&n._UZ(0,"tr",191)}var _i=function(o,e,t,a){return{assign_row:o,disable_row:e,edit_row:t,selected:a}};function fi(i,o){if(1&i&&n._UZ(0,"tr",192),2&i){var e=o.$implicit,t=n.oxw(3);n.Q6J("ngClass",n.l5B(1,_i,t.selectedForAssignment==e.id,e.is_empty,(null==t.selectedRowDataEdit?null:t.selectedRowDataEdit.id)==e.id&&!t.isAddEditTagsOnly,(null==t.selectedRowData?null:t.selectedRowData.id)==e.id))}}function mi(i,o){if(1&i&&(n.TgZ(0,"table",105),n.ynx(1,106),n.YNc(2,Ue,3,1,"th",107),n.YNc(3,Ve,13,11,"td",108),n.BQk(),n.ynx(4,109),n.YNc(5,Ye,2,0,"th",110),n.YNc(6,Be,2,1,"td",111),n.BQk(),n.ynx(7,112),n.YNc(8,je,2,0,"th",113),n.YNc(9,Ke,6,3,"td",114),n.BQk(),n.ynx(10,115),n.YNc(11,We,2,0,"th",116),n.YNc(12,ni,4,1,"td",117),n.BQk(),n.ynx(13,118),n.YNc(14,ti,2,0,"th",119),n.YNc(15,ci,5,2,"td",120),n.BQk(),n.ynx(16,121),n.YNc(17,di,2,0,"th",122),n.YNc(18,gi,7,2,"td",123),n.BQk(),n.YNc(19,ui,1,0,"tr",124),n.YNc(20,fi,1,6,"tr",125),n.qZA()),2&i){var e=n.oxw(2);n.Q6J("dataSource",e.dataSource.data),n.xp6(19),n.Q6J("matHeaderRowDef",e.displayedColumns),n.xp6(1),n.Q6J("matRowDefColumns",e.displayedColumns)}}function hi(i,o){1&i&&n._UZ(0,"i",50)}function vi(i,o){if(1&i){var e=n.EpF();n.TgZ(0,"li",200),n.NdJ("click",function(s){var r=n.CHM(e).$implicit,p=n.oxw(4);return s.stopPropagation(),p.selectShiftUser(r)}),n._UZ(1,"i"),n.TgZ(2,"span",201),n._uU(3),n.qZA(),n.YNc(4,hi,1,0,"i",45),n.qZA()}if(2&i){var t=o.$implicit;n.xp6(1),n.Tol(t.shift_icon),n.xp6(1),n.Q6J("nbTooltip",t.name),n.xp6(1),n.hij(" ",t.name," "),n.xp6(1),n.Q6J("ngIf",t.selected)}}function xi(i,o){if(1&i&&(n.TgZ(0,"span",198),n.TgZ(1,"span",35),n.TgZ(2,"ul",36),n.YNc(3,vi,5,5,"li",199),n.qZA(),n.qZA(),n.qZA()),2&i){var e=n.oxw(3);n.xp6(3),n.Q6J("ngForOf",null==e.selectedElem?null:e.selectedElem.shifts)}}function Ti(i,o){if(1&i){var e=n.EpF();n.TgZ(0,"i",202),n.NdJ("click",function(){return n.CHM(e),n.oxw(3).closePopup()}),n.qZA()}}function ki(i,o){1&i&&n._UZ(0,"img",207)}function Ci(i,o){if(1&i&&n._UZ(0,"i"),2&i){var e=n.oxw(4);n.Tol(e.selectedUser.shift_icon)}}function bi(i,o){1&i&&n._UZ(0,"i",208)}function wi(i,o){if(1&i){var e=n.EpF();n.TgZ(0,"span",20),n.NdJ("click",function(s){return n.CHM(e),n.oxw(3).openPopup(s)}),n.YNc(1,ki,1,0,"img",203),n.YNc(2,Ci,1,3,"i",204),n.TgZ(3,"span",205),n._uU(4),n.qZA(),n.YNc(5,bi,1,0,"i",206),n.qZA()}if(2&i){var t=n.oxw(3);n.xp6(1),n.Q6J("ngIf",!t.selectedUser),n.xp6(1),n.Q6J("ngIf",t.selectedUser),n.xp6(2),n.Oqu(t.selectedUser?t.selectedUser.name:t.getSelectedShiftUser(t.selectedElem)),n.xp6(1),n.Q6J("ngIf",!t.selectedUser)}}var yi=function(o){return{"assignment-small-devices":o}},Zi=function(o){return{name:o}},Pi=function(o){return[o]};function Mi(i,o){if(1&i){var e=n.EpF();n.TgZ(0,"nb-card",193),n.YNc(1,xi,4,1,"span",194),n.TgZ(2,"nb-card-body"),n.YNc(3,Ti,1,0,"i",195),n.YNc(4,wi,6,4,"span",196),n.TgZ(5,"app-user-autocomplete-input",197),n.NdJ("selectedUser",function(s){n.CHM(e);var l=n.oxw(2);return l.onSelectedUser(s,l.selectedElem)}),n.qZA(),n.qZA(),n.qZA()}if(2&i){var t=n.oxw(2);n.Q6J("ngClass",n.VKq(10,yi,null==t.gs?null:t.gs.touchEnabledDevices)),n.xp6(1),n.Q6J("ngIf",t.shiftPopupUser),n.xp6(2),n.Q6J("ngIf",null==t.gs?null:t.gs.touchEnabledDevices),n.xp6(1),n.Q6J("ngIf",null==t.selectedElem?null:t.selectedElem.shifts),n.xp6(1),n.Q6J("disableInput",t.disableInput(t.selectedElem))("autofocus",!0)("className","assign-user-options")("loaderClass",t.selectedElem.shifts?t.selectedUser?"assignment azalioplay-spinner":"assignment azalioplay-spinner-more":"assignment")("data",n.VKq(14,Pi,n.VKq(12,Zi,t.selectedElem.shifts?null==t.selectedUser?null:t.selectedUser.assigned_to_user_name:t.selectedElem.assigned_to_user_name)))("url","tasks/getAssignableUsers?task_id="+t.selectedElem.id)}}var Oi=function(o,e){return{"azalio-play-tasks":o,default:e}},Ai=function(o,e){return{"scroll-none":o,"select-store":e}},Di=function(o){return{display:o}};function qi(i,o){if(1&i&&(n.TgZ(0,"div",98),n._UZ(1,"div",99),n.YNc(2,mi,21,3,"table",100),n.YNc(3,Mi,6,16,"ng-template",null,101,n.W1O),n._UZ(5,"app-no-records",102),n._UZ(6,"app-no-records",103),n._UZ(7,"app-no-search-records",104),n.qZA()),2&i){var e=n.MAs(4),t=n.oxw();n.Q6J("ngClass",n.WLB(14,Oi,t.isAzalioPlay&&!t.pageLoading,!t.isAzalioPlay))("ngClass",n.WLB(17,Ai,null!=t.selectedForAssignment,0==t.sharedRegion)),n.xp6(1),n.Q6J("ngClass",n.VKq(20,Di,null==t.gs?null:t.gs.touchEnabledDevices))("nbPopover",e),n.xp6(1),n.Q6J("ngIf",!t.pageLoading&&t.isStore),n.xp6(3),n.Q6J("display",0==t.sharedRegion&&!t.singleRegion)("isScheduler",!0)("animation","selectStoreForTask")("animation2","arrowTop"),n.xp6(1),n.Q6J("display",t.emptyResults)("animation","tasks")("animation2",t.animation2)("textMessage",t.textMessage),n.xp6(1),n.Q6J("display",!t.emptyResults&&t.emptySearchResults)}}var Ji=function(){var i=function(){function o(e,t,a,s,l,r,p){var c=this;(0,P.Z)(this,o),this.gs=e,this.fb=t,this.service=a,this.dataService=s,this.dialogService=l,this.router=r,this.analytics=p,this.displayedColumns=["name","last_known_status","assignment","action"],this.dataSource=new v.by([]),this.selectedRowData=null,this.deleteText="You're about to <b>permanently delete</b> this task. Are you sure?",this.pageLoading=!1,this.selectedRowDataEdit=null,this.sortPopup=!1,this.coinPopup=!1,this.shiftPopup=!1,this.shiftPopupUser=!1,this.shiftsArr=null,this.coins=[0,10,20,50,100],this.selectedCoins=10,this.additionalDetails=null,this.custom=null,this.isAddEditTagsOnly=!1,this.deleteTask=function(d){return(0,w.mG)(c,void 0,void 0,h().mark(function _(){var u,g;return h().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return this.loading=!0,u={task_id:d},f.prev=2,f.next=5,this.service.deleteTask(u);case 5:this.gs.showToastSuccess(null==(g=f.sent)?void 0:g.message),this.getData(),f.next=14;break;case 10:f.prev=10,f.t0=f.catch(2),this.gs.showToastError(f.t0.message),console.log(f.t0);case 14:return f.prev=14,this.loading=!1,f.finish(14);case 17:case"end":return f.stop()}},_,this,[[2,10,14,17]])}))},this.assignUserToTask=function(d,_){return(0,w.mG)(c,void 0,void 0,h().mark(function u(){var g,T;return h().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return this.loading=!0,g={task_id:this.selectedForAssignment,assign_to:d},_&&Object.assign(g,{shifts:_}),C.prev=3,C.next=6,this.service.assignTaskToUser(g);case 6:this.gs.showToastSuccess(null==(T=C.sent)?void 0:T.message),this.selectedForAssignment=null,this.selectedElem=null,this.popover.hide(),this.getData(),C.next=18;break;case 14:C.prev=14,C.t0=C.catch(3),this.gs.showToastError(C.t0.message),console.log(C.t0);case 18:return C.prev=18,this.loading=!1,C.finish(18);case 21:case"end":return C.stop()}},u,this,[[3,14,18,21]])}))},this.pageLoading=!0,this.editForm=this.fb.group({taskName:["",[k.kI.required]]}),this.showHelperButton=!0,this.loading=!1,this.dataService.getConfigurations(!1).then(function(d){var _,u,g,T,f,C;(null===(u=null===(_=d.role.modules)||void 0===_?void 0:_.Tasks)||void 0===u?void 0:u.enabled)||c.router.navigate(["401"]),c.isTasksEnabled=null===(T=null===(g=d.role.modules)||void 0===g?void 0:g.Tasks)||void 0===T?void 0:T.enabled,c.isAzalioPlay=1===(null===(f=d.company)||void 0===f?void 0:f.is_azalio_play),c.isBoringPlay=1===(null===(C=d.company)||void 0===C?void 0:C.boring2Fun),c.permissions=d.permissions,c.gs.hideSplashScreen()}).finally(function(){c.isAllStores="0",c.isAzalioPlay&&(c.allShifts=!0),(c.isAzalioPlay||c.isBoringPlay)&&(c.displayedColumns=["name","points","shifts","last_known_status","assignment"],c.permissions.Tasks.update&&(c.displayedColumns=[].concat((0,$.Z)(c.displayedColumns),["action"]))),c.dataService.getTaskTags(!1).then(function(d){c.tags=d}).finally(function(){})}),this.subscriptioSingle=this.dataService.SingleRegionId.subscribe(function(d){c.sharedRegion=d,c.singleRegion=d,null!==d&&d>0&&(c.isStore=!0),c.resetShiftFilter(),c.selectedFilterItem&&c.getData(!0)}),this.singleRegion?this.isStore=!0:this.subscription=this.dataService.SharingRegionData.subscribe(function(d){c.sharedRegion=d,0!=c.sharedRegion&&(c.isStore=!0),c.resetShiftFilter(),c.selectedFilterItem&&c.getData(!0)})}return(0,Z.Z)(o,[{key:"getStatusClass",value:function(t){return t.modification.includes("undone")?"undone":t.modification.includes("done")?"done":"comment"}},{key:"resetShiftFilter",value:function(){this.allShifts=!0,this.selectedShift=null,this.startIndex=0,this.endIndex=3}},{key:"ngOnInit",value:function(){this.filter={tag:null},this.isFiltered={tag:!1},this.form=this.fb.group({taskName:["",[k.kI.required]],points:[""],taskRepeatsArr:new k.Oe([]),allShiftRepeats:[1],allDayRepeats:[1],tag:[]}),this.startIndex=0,this.endIndex=3,this.selectedRowDataEdit=null,this.opacity=M.ZF,this.showComments=!1,this.newest=!0,this.paginator=M.$0,this.gs.showBackDrop(!1),this.getFilters()}},{key:"closeFilter",value:function(t){var a;this.form.controls[t].setValue(null===(a=this.filter)||void 0===a?void 0:a[t])}},{key:"applyFilterMulti",value:function(t){this.gs.logEvents("tasks_filtered_by_"+t);var a=this.form.controls[t].value;a&&a.length>0?(this.isFiltered[t]=!0,this.filter[t]=a):(this.filter[t]=null,this.isFiltered[t]=!1),this.pageEvent&&(this.pageEvent.pageIndex=0),this.getData()}},{key:"removeFilter",value:function(t){this.filter[t]=null,this.isFiltered[t]=!1,this.getData()}},{key:"selectCoins",value:function(t,a){isNaN(a)?t.stopPropagation():(this.selectedCoins=a,this.coinPopup=!1)}},{key:"updatePriority",value:function(t){return(0,w.mG)(this,void 0,void 0,h().mark(function a(){var s,l;return h().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(this.analytics.logEvents("mark_task_priority"),!this.loading){p.next=3;break}return p.abrupt("return");case 3:return this.loading=!0,s={task_id:t.id,task_priority:"HIGH"===t.priority?1:2},p.prev=5,p.next=8,this.service.updateTaskPriority(s);case 8:this.gs.showToastSuccess(null==(l=p.sent)?void 0:l.message),this.getData(),p.next=17;break;case 13:p.prev=13,p.t0=p.catch(5),this.gs.showToastError(p.t0.message),console.log(p.t0);case 17:return p.prev=17,this.loading=!1,p.finish(17);case 20:case"end":return p.stop()}},a,this,[[5,13,17,20]])}))}},{key:"getFilters",value:function(){return(0,w.mG)(this,void 0,void 0,h().mark(function t(){return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,this.service.getFilters();case 3:this.filters=l.sent.filters,this.selectedFilterItem=this.filters[0],this.getData(!0),l.next=13;break;case 9:l.prev=9,l.t0=l.catch(0),this.gs.showToastError(l.t0.message),console.log(l.t0);case 13:return l.prev=13,l.finish(13);case 15:case"end":return l.stop()}},t,this,[[0,9,13,15]])}))}},{key:"setFilter",value:function(t){this.analytics.logEvents("filter_tasks"),this.selectedFilterItem=t,this.pageEvent&&(this.pageEvent.pageIndex=0),this.getData()}},{key:"setShiftFilter",value:function(t){this.analytics.logEvents("filter_tasks_shifts"),this.selectedShift=t,this.pageEvent&&(this.pageEvent.pageIndex=0),this.getData()}},{key:"addTask",value:function(){var t,a,s,l,r;return(0,w.mG)(this,void 0,void 0,h().mark(function p(){var d,_,u,g,c=this;return h().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!this.loading){f.next=2;break}return f.abrupt("return");case 2:if(!this.form.valid){f.next=40;break}if(d=null,this.sharedRegion=this.sharedRegion&&this.sharedRegion>0?this.sharedRegion:this.singleRegion,this.allShifts&&(d=Number(this.form.controls.allShiftRepeats.value)),this.allDay&&(d=Number(this.form.controls.allDayRepeats.value)),_=(null===(t=this.shiftsArr)||void 0===t?void 0:t.length)>0?null===(a=this.shiftsArr)||void 0===a?void 0:a.map(function(C,Qi){if(C.selected)return{shift_id:C.id,task_repeats:Number(c.taskRepeats.controls[Qi].value.count)}}).filter(function(C){return void 0!==C}):null,u=null!==this.selectedRowDataEdit?{task_id:this.selectedRowDataEdit.id}:{region_id:this.sharedRegion,task_priority:1},this.selectedRowDataEdit||(this.selectedFilterItem=this.filters[2]),(this.isBoringPlay||this.isAzalioPlay)&&Object.assign(u,{points:0===this.selectedCoins?null:this.selectedCoins}),Object.assign(u,{task_name:this.form.controls.taskName.value,description:this.additionalDetails?this.additionalDetails:null,tags:this.tagsData?this.tagsData:[],custom:this.custom?this.custom:{days:null,dates:null},task_repeats:d,shift_id:null==d?_:null,all_shifts:Boolean(this.allShifts),all_stores:!("0"==this.isAllStores||!(null===(l=null===(s=this.permissions)||void 0===s?void 0:s.Tasks)||void 0===l?void 0:l.add_bulk))}),0!=(null===(r=u.shift_id)||void 0===r?void 0:r.length)&&null!=u.shift_id||null!=d){f.next=15;break}return this.gs.showToastWarning("Please select a shift"),f.abrupt("return");case 15:if(f.prev=15,this.loading=!0,!this.selectedRowDataEdit){f.next=23;break}return f.next=20,this.service.editTask(u);case 20:f.t0=f.sent,f.next=26;break;case 23:return f.next=25,this.service.addNewTask(u);case 25:f.t0=f.sent;case 26:this.gs.showToastSuccess(null==(g=f.t0)?void 0:g.message),this.form.controls.taskName.setValue(""),this.resetEditAzalioPlay(),this.getData(),f.next=37;break;case 33:f.prev=33,f.t1=f.catch(15),this.gs.showToastError(f.t1.message),console.log(f.t1);case 37:return f.prev=37,this.loading=!1,f.finish(37);case 40:case"end":return f.stop()}},p,this,[[15,33,37,40]])}))}},{key:"resetEditAzalioPlay",value:function(){this.form.controls.taskName.setValue(""),this.selectedRowDataEdit=null,this.custom=null,this.tagsData=null,this.additionalDetails=null}},{key:"editTask",value:function(){var t;return(0,w.mG)(this,void 0,void 0,h().mark(function a(){var s,l;return h().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!this.editForm.valid||!(null===(t=this.selectedRowDataEdit)||void 0===t?void 0:t.id)){p.next=19;break}return this.loading=!0,s={task_id:this.selectedRowDataEdit.id,task_name:this.editForm.controls.taskName.value},p.prev=3,p.next=6,this.service.editTask(s);case 6:this.gs.showToastSuccess(null==(l=p.sent)?void 0:l.message),this.toggleEditMode(null),this.getData(),p.next=16;break;case 12:p.prev=12,p.t0=p.catch(3),this.gs.showToastError(p.t0.message),console.log(p.t0);case 16:return p.prev=16,this.loading=!1,p.finish(16);case 19:case"end":return p.stop()}},a,this,[[3,12,16,19]])}))}},{key:"addDeleteAnalytics",value:function(){this.analytics.logEvents("delete_task")}},{key:"updateTableHeader",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(t){if(this.allDay=!1,this.allShifts=!0,this.displayedColumns.includes("shifts"))return;this.displayedColumns.includes("points")?this.displayedColumns.splice(2,0,"shifts"):this.displayedColumns.splice(1,0,"shifts")}else{this.allDay=!0,this.allShifts=!1;var a=this.displayedColumns.indexOf("shifts");-1!==a&&this.displayedColumns.splice(a,1)}}},{key:"getData",value:function(){var s,t=this,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.filterInput={filter_id:this.selectedFilterItem?this.selectedFilterItem.id:3,region_id:this.sharedRegion?this.sharedRegion:null},(null===(s=this.shiftsFilterArr)||void 0===s?void 0:s.length)>0&&this.selectedShift&&Object.assign(this.filterInput,{shift_id:this.selectedShift?this.selectedShift.id:null}),null!==this.filterInput.region_id&&(this.loading=!0,this.service.getTasksTableData(this.searchText,this.pageEvent,this.filterInput,this.filter).then(function(l){var r,p,c,d,_,u,g;if(t.dataSource.data=l.tasks,t.paginator=l.pagination,(null===(r=l.shifts)||void 0===r?void 0:r.length)>0){t.updateTableHeader(!0),t.shiftsFilterArr=l.shifts;for(var T=0;T<l.shifts.length;T++)t.taskRepeats.push(t.fb.group({count:[1]}))}else t.shiftsFilterArr=null,t.updateTableHeader(!1);a&&(t.shiftsArr=l.shifts),t.emptySearchResults=!(0!==(null===(p=l.tasks)||void 0===p?void 0:p.length)||!t.searchText&&!(null===(c=t.filterInput)||void 0===c?void 0:c.shift_id)&&null===(null===(d=t.filter)||void 0===d?void 0:d.tag)),t.emptyResults=0===(null===(_=l.tasks)||void 0===_?void 0:_.length)&&!t.searchText&&!(null===(u=t.filterInput)||void 0===u?void 0:u.shift_id)&&!(null===(g=t.filter)||void 0===g?void 0:g.tag)}).catch(function(l){console.log(l)}).finally(function(){t.pageLoading=!1,t.loading=!1}))}},{key:"taskRepeats",get:function(){return this.form.controls.taskRepeatsArr}},{key:"setSliceIndex",value:function(){this.startIndex=0==this.startIndex?3:0,this.endIndex=3==this.endIndex?6:3}},{key:"addSearchAnalytics",value:function(){this.analytics.logEvents("search_task")}},{key:"selectAllShifts",value:function(){this.allShifts=!this.allShifts,this.allShifts&&(this.allDay=!1)}},{key:"selectAllDay",value:function(){this.allDay=!this.allDay,this.allDay&&(this.allShifts=!1)}},{key:"showButton",value:function(t){var a;return!!t&&(null===(a=null==t?void 0:t.filter(function(s){return null==s.assigned_to_user_name}))||void 0===a?void 0:a.length)>0}},{key:"getSelectedShiftCount",value:function(){var t,a;return this.shiftsArr?(null===(a=null===(t=this.shiftsArr)||void 0===t?void 0:t.filter(function(s){return s.selected}))||void 0===a?void 0:a.length)+" shifts":"Select"}},{key:"getSelectedShiftUser",value:function(t){var a,s=null===(a=t.shifts)||void 0===a?void 0:a.filter(function(r){return r.selected}),l="Select shift";return s&&s.length>0&&(l=1===(null==s?void 0:s.length)?s[0].name:(null==s?void 0:s.length)+" shifts"),l}},{key:"disableInput",value:function(t){return!(t.shifts&&this.selectedUser||!t.shifts||"Select shift"!==this.getSelectedShiftUser(t))}},{key:"onSearch",value:function(t){this.gs.logEvents("search_task"),this.searchOn=t.trim(),this.searchText=this.searchOn,this.pageEvent&&(this.pageEvent.pageIndex=0),this.getData()}},{key:"navigateToReports",value:function(){this.router.navigate(["tasks/report"])}},{key:"onSearchAll",value:function(t){this.searchOn=t.trim()}},{key:"openTaskComments",value:function(t){this.showComments=!0,this.selectedRowData=t}},{key:"closeDetails",value:function(){this.showComments=!1,this.selectedRowData=null,this.gs.showBackDrop(!1)}},{key:"cancelEdit",value:function(){this.selectedRowDataEdit&&this.resetEditAzalioPlay()}},{key:"mergeArrayObjects",value:function(t,a){var s=this;return t.map(function(l,r){var p=a.find(function(d){return d.id==l.id});return p?(l.selected=!0,s.taskRepeats.controls[r].controls.count.setValue(p.task_repetition),Object.assign({},l,{task_repetition:p.task_repetition})):Object.assign({},l)})}},{key:"setBasicFields",value:function(t){var s,a=this,l=t?t.name:"";setTimeout(function(){var r;a.shiftsArr=a.shiftsArr?a.mergeArrayObjects(a.shiftsArr,t.shifts?t.shifts:[]):null,a.allShifts&&(null===(r=a.shiftsArr)||void 0===r?void 0:r.length)>0&&a.form.controls.allShiftRepeats.setValue(a.shiftsArr[0].task_repetition)}),this.form.controls.taskName.setValue(l),setTimeout(function(){t&&document.getElementById("task-input").focus()}),(this.isBoringPlay||this.isAzalioPlay)&&(this.selectedCoins=t.points,this.coins.includes(t.points)||this.form.controls.points.setValue(t.points)),this.isAzalioPlay||(null===(s=this.shiftsFilterArr)||void 0===s?void 0:s.length)>0?this.shiftsArr=JSON.parse(JSON.stringify(this.shiftsFilterArr)):this.editForm.controls.taskName.setValue(l)}},{key:"toggleEditMode",value:function(t){var a,s;this.analytics.logEvents("edit_task_icon"),this.selectedRowDataEdit=t,this.additionalDetails=t.description?t.description:"",this.tagsData=(null===(a=t.tags)||void 0===a?void 0:a.length)>0?t.tags.map(function(l){return l.id}):null,this.custom=t.custom?t.custom:null,this.form.controls.allDayRepeats.setValue(t.task_repetition),this.isAddEditTagsOnly?(this.openAddTaskPopup(),this.cancelEdit()):(this.allShifts=(null===(s=this.shiftsFilterArr)||void 0===s?void 0:s.length)>0&&t.all_shifts,this.isAllStores=t.all_store?t.all_store.toString():"0",this.allDay=!!(!this.allShifts&&t.task_repetition&&t.task_repetition>0),this.setBasicFields(t))}},{key:"onSelectedUser",value:function(t,a){var s=t?t.id:null,l=a.shifts?a.shifts.filter(function(r){return r.selected}).map(function(r){return r.id}):null;this.assignUserToTask(s,l)}},{key:"selectShift",value:function(t){t.selected=!t.selected,this.allShifts=!1,this.allDay=!1}},{key:"selectShiftUser",value:function(t){t.selected=!t.selected}},{key:"ngOnDestroy",value:function(){var t,a;null===(t=this.subscription)||void 0===t||t.unsubscribe(),null===(a=this.subscriptioSingle)||void 0===a||a.unsubscribe()}},{key:"openAssignUserModal",value:function(t,a){var s,l;(null===(s=t.shifts)||void 0===s?void 0:s.length)>0&&(this.selectedUser=a||null,a&&t.shifts.forEach(function(r){r.selected=r.id===a.id})),this.selectedForAssignment=t.id,this.selectedElem=t,(null===(l=this.gs)||void 0===l?void 0:l.touchEnabledDevices)&&this.popover.show()}},{key:"openPopup",value:function(t){this.selectedUser||(t.stopPropagation(),this.shiftPopupUser=!this.shiftPopupUser)}},{key:"closePopup",value:function(){this.popover.hide()}},{key:"onFocusOut",value:function(t){var a=t.value.count;(isNaN(a)||a<1)&&t.controls.count.setValue(1)}},{key:"onClick",value:function(t){var a=this;this.sortPopup&&(this.sortPopup=!1),this.coinPopup&&(this.coinPopup=!1),this.shiftPopup&&(this.shiftPopup=!1),this.shiftPopupUser&&(this.shiftPopupUser=!1,this.selectedUser=null),setTimeout(function(){var s=document.getElementsByClassName("task-assignment-popup"),l=s&&s[0];!l&&a.selectedForAssignment&&(a.selectedForAssignment=null,a.selectedElem=null),l||a.popover.hide()})}},{key:"openAddTaskPopup",value:function(){var a,s,t=this;!this.selectedRowDataEdit&&(null===(a=this.form.get("taskName").value)||void 0===a?void 0:a.length)<5||this.dialogService.open(wt,{hasBackdrop:!0,closeOnBackdropClick:!1,context:{shifts:this.shiftsArr,selectedData:this.custom,tagsData:this.tagsData,description:this.additionalDetails,permissions:this.permissions,regionId:this.sharedRegion,taskId:null===(s=this.selectedRowDataEdit)||void 0===s?void 0:s.id,isAddEditTagsOnly:!!this.isAddEditTagsOnly,isEditMode:!!this.selectedRowDataEdit}}).onClose.subscribe(function(l){var r,p;if(t.isAddEditTagsOnly)return t.isAddEditTagsOnly=!1,void(l&&t.getData());l?(t.additionalDetails=l.description,t.custom=l.custom,t.tagsData=l.tags):t.selectedRowDataEdit?(t.custom=t.selectedRowDataEdit.custom,t.additionalDetails=t.selectedRowDataEdit.description,t.tagsData=(null===(r=t.selectedRowDataEdit.tags)||void 0===r?void 0:r.length)>0?null===(p=t.selectedRowDataEdit.tags)||void 0===p?void 0:p.map(function(c){return c.id}):null):(t.additionalDetails="",t.custom=null,t.tagsData=null)})}}]),o}();return i.\u0275fac=function(e){return new(e||i)(n.Y36(O.m),n.Y36(k.qu),n.Y36(q),n.Y36(J.s),n.Y36(x.Gln),n.Y36(D.F0),n.Y36(G.C))},i.\u0275cmp=n.Xpm({type:i,selectors:[["app-tasks-table-view"]],viewQuery:function(e,t){var a;1&e&&n.Gf(x.ydg,5),2&e&&n.iGM(a=n.CRH())&&(t.popover=a.first)},hostBindings:function(e,t){1&e&&n.NdJ("click",function(s){return t.onClick(s.target)},!1,n.evT)},decls:8,vars:6,consts:[[3,"loading"],[1,"comment-sidebar",3,"showSideBar","closeDetails"],[3,"selectedTask","onCommentAdd"],[1,"flex"],[1,"colored-column-info","timesheets_wrapper","tasks-module"],[4,"ngIf"],["class","float-container",3,"click",4,"ngIf"],["class","mat-elevation-z8 relative","class","tasks",3,"ngClass",4,"ngIf"],["class","wrapper_header",3,"ngClass",4,"ngIf"],[1,"assign-task",3,"ngClass"],[1,"left-items"],[1,"right-actions","pointer",3,"ngClass","click"],[2,"margin-right","3px",3,"src"],[1,"reports-row",3,"ngClass"],["style","display: flex;","class","shift-cards",4,"ngIf"],["class","flex input-row",4,"ngIf"],[1,"wrapper_header",3,"ngClass"],[1,"add-input",3,"ngClass"],[3,"id","maxlength","ngClass","placeholder","controlName","form","keydown.enter"],[1,"add-options"],[1,"shifts-options",3,"click"],["nbTooltipPlacement","top",1,"shifts-count"],[1,"fas","fa-angle-down",2,"margin-left","-3px","cursor","pointer"],["class","pts-options",3,"click",4,"ngIf"],["class","points-popup shift-task",4,"ngIf"],["class","points-popup",4,"ngIf"],[3,"hidden","ngClass"],["nbButton","","type","submit",1,"mr_10","update-task",3,"status","click"],[3,"hidden"],["nbButton","","outline","","status","primary","shape","round","type","submit",1,"mr_10","cancel-task",3,"click"],[1,"pts-options",3,"click"],["src","assets/coin.png"],[1,"assign-pts",3,"nbTooltip"],[1,"fas","fa-angle-down",2,"margin-left","0px","cursor","pointer"],[1,"points-popup","shift-task"],[1,"context-menu"],[1,"filter-options"],[1,"top-row-dropdown"],[1,"shift-info","heading-text"],[1,"select-shift"],[1,"occurences-input","heading-text"],[1,"fa","fa-clock"],[3,"ngClass","click"],[1,"shift-info",3,"ngClass"],["src","assets/all-day.png",1,"default-icon"],["class","fas fa-check add-point",4,"ngIf"],[1,"occurences-input",3,"formGroup","click"],["formControlName","allDayRepeats","type","text","value","1","maxlength","1","aria-label","text input field","nbInput","",1,"add-task-occurences",3,"readonly","ngClass"],[3,"ngClass","click",4,"ngIf"],[3,"ngClass","click",4,"ngFor","ngForOf"],[1,"fas","fa-check","add-point"],["src","assets/shifts-comment.png",1,"default-icon"],["formControlName","allShiftRepeats","type","text","value","1","maxlength","1","aria-label","text input field","nbInput","",1,"add-task-occurences",3,"readonly","ngClass"],[1,"shift-info"],[1,"trim-shiftname",3,"nbTooltip","ngClass"],["type","text","value","1","formControlName","count","maxlength","1","aria-label","text input field","nbInput","",1,"add-task-occurences",3,"readonly","ngClass","focusout"],[1,"points-popup"],[1,"filter-options",3,"formGroup"],[1,"custom-points",3,"click"],["type","text","maxlength","2","autocomplete","off","aria-label","text input field","nbInput","","formControlName","points","placeholder","Enter points",3,"keydown.enter"],[1,"fas","fa-check-circle","add-point",3,"click"],[1,"add-task-option",3,"ngModel","ngModelChange"],["value","1",1,"option-txt"],["value","0",1,"option-txt"],[1,"shift-cards",2,"display","flex"],["class","shift-details ",3,"ngClass","click",4,"ngFor","ngForOf"],["class","fa-solid fa-circle-chevron-right swipe-next","nbTooltipPlacement","right","nbTooltip","Click to view more shifts",3,"click",4,"ngIf"],[1,"shift-details",3,"ngClass","click"],[1,"container-cards"],[1,"shift-icon",3,"nbTooltip"],["class","clear-filter",3,"click",4,"ngIf"],[1,"tasks-info"],["nbTooltip","Total tasks",2,"display","flex","align-items","center"],["aria-hidden","true",1,"fas","fa-tasks"],[1,"desp-label"],["style","display:flex; align-items:center;","nbTooltip","Total points",4,"ngIf"],[1,"clear-filter",3,"click"],["nbTooltip","Clear filter",1,"fas","fa-times-circle"],["nbTooltip","Total points",2,"display","flex","align-items","center"],["nbTooltipPlacement","right","nbTooltip","Click to view more shifts",1,"fa-solid","fa-circle-chevron-right","swipe-next",3,"click"],[1,"flex","input-row"],[1,"search-task",3,"placeholder","showHelperButton","searchEvent","searchAll","click"],[1,"sort",2,"position","relative",3,"ngClass"],["class","filters-wrapper",4,"ngIf"],["nbTooltip","Click to change sort order",2,"cursor","pointer","width","132px",3,"click"],[1,"fas","fa-long-arrow-alt-up",2,"margin-left","4px","cursor","pointer"],["class","filter-popup",4,"ngIf"],["showFirstLastButtons","",3,"length","pageIndex","pageSize","pageSizeOptions","page",4,"ngIf"],[1,"filters-wrapper"],[1,"roles-filter"],[3,"label","isFiltered","onClose","onApply","onClear","onOpen"],[3,"type","optionClass","label","defaultOpen","selected","key","key2","optionId","Data","placeholder","controlName","form","show"],[1,"filter-popup"],["style","cursor:pointer;","class","options",3,"click",4,"ngFor","ngForOf"],[1,"options",2,"cursor","pointer",3,"click"],["showFirstLastButtons","",3,"length","pageIndex","pageSize","pageSizeOptions","page"],[1,"float-container",3,"click"],[1,"icon","one"],[1,"tasks",3,"ngClass"],["nbPopoverTrigger","noop","nbPopoverPlacement","left","id","divPopup",1,"small-devices-container",3,"ngClass","nbPopover"],["mat-table","","class","tasks-table azalioplay",3,"dataSource",4,"ngIf"],["templateRefAssign",""],[1,"selecttask",3,"display","isScheduler","animation","animation2"],[1,"tasksanimation",3,"display","animation","animation2","textMessage"],[3,"display"],["mat-table","",1,"tasks-table","azalioplay",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","style","width: 53%;",4,"matHeaderCellDef"],["mat-cell","","style","width: 53%;",4,"matCellDef"],["matColumnDef","last_known_status"],["mat-header-cell","","style","width: 15%;",4,"matHeaderCellDef"],["mat-cell","","style","width: 15%;","class","comment-field",3,"click",4,"matCellDef"],["matColumnDef","shifts"],["mat-header-cell","","style","width: 10%;padding-left: 31px !important;",4,"matHeaderCellDef"],["mat-cell","","style","width: 10%;",4,"matCellDef"],["matColumnDef","points"],["mat-header-cell","","style","width: 7%;",4,"matHeaderCellDef"],["mat-cell","","style","width: 7%;",4,"matCellDef"],["matColumnDef","assignment"],["mat-header-cell","","style","width: 10%;",4,"matHeaderCellDef"],["mat-cell","","class","user-assign","style","width: 17%;",4,"matCellDef"],["matColumnDef","action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","style","width: 5%;",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"ngClass",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",2,"width","53%"],[3,"label","isFiltered","onClose","onApply","onClear","onOpen",4,"ngIf"],[3,"type","label","optionClass","defaultOpen","selected","key","key2","optionId","Data","placeholder","controlName","form","show"],["mat-cell","",2,"width","53%"],[1,"taskname"],[1,"show_in_resp","task-txt"],[1,"fa","fa-angle-double-up","priority",3,"nbTooltip","ngClass","click"],[2,"display","grid",3,"nbTooltip","nbTooltipDisabled"],[1,"name-field",3,"click"],["class","sch-task",4,"ngIf"],["class","all-stores",4,"ngIf"],["class","task-label",3,"click",4,"ngIf"],[1,"categories",3,"click"],["class","mr_05 tag-container",4,"ngFor","ngForOf"],[1,"sch-task"],[1,"all-stores"],[1,"task-label",3,"click"],[1,"fa-solid","fa-user-tag","user-tag"],[1,"mr_05","tag-container"],[1,"fa-solid","fa-circle"],[1,"category-name"],["mat-header-cell","",2,"width","15%"],["mat-cell","",1,"comment-field",2,"width","15%",3,"click"],[1,"align-col"],[1,"show_in_resp","label-txt"],["onlyPicture","","size","small","nbTooltipPlacement","top",3,"name","color","initialColor","nbTooltip"],[1,"text","pointer",2,"margin-left","-5px"],[1,"ml-4",2,"font-weight","800"],["mat-header-cell","",2,"width","10%","padding-left","31px !important"],["mat-cell","",2,"width","10%"],[1,"show_in_resp"],["class","task-shift",3,"nbTooltip",4,"ngIf"],[1,"task-shift",3,"nbTooltip"],["src","assets/task-occurrence.png"],["mat-header-cell","",2,"width","7%"],["mat-cell","",2,"width","7%"],["class","points",4,"ngIf"],[1,"points"],["mat-header-cell","",2,"width","10%"],["mat-cell","",1,"user-assign",2,"width","17%"],[1,"show_in_resp","assignment-txt"],["class","assign-azalio-play",4,"ngIf"],[3,"ngClass",4,"ngIf"],[1,"assign-azalio-play"],["nbTooltip","Assign user","class","assignment",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["class","shift-assignment",4,"ngIf"],[1,"shift-assignment"],[1,"assignment-details",3,"nbPopover","click"],[3,"nbTooltip"],["nbTooltip","Assign user",1,"assignment",3,"click"],["nbPopoverPlacement","left","nbPopoverAdjustment","vertical",1,"fa","fa-user-plus","pointer","assign-user",3,"nbPopover"],[3,"ngClass"],[1,"user-assigned",3,"click"],["nbTooltip","Assign user"],["nbPopoverPlacement","left","class","fa fa-user-plus pointer assign-user",3,"nbPopover",4,"ngIf"],["nbTooltip","Change assignment"],["nbPopoverPlacement","left",2,"cursor","pointer",3,"nbPopover"],["nbPopoverPlacement","left",1,"fa","fa-user-plus","pointer","assign-user",3,"nbPopover"],["mat-header-cell",""],["mat-cell","",2,"width","5%"],[1,"action",2,"display","inline-flex"],["nbTooltip","Edit task",1,"fas","fa-pen","pointer","edit-task",3,"click"],[3,"title","textToDisplay","proceedDelete"],["nbTooltip","Delete task",1,"fas","fa-trash","pointer","delete-task",3,"click"],["mat-header-row",""],["mat-row","",3,"ngClass"],[1,"popover-card","task-assignment-popup",3,"ngClass"],["class","points-popup shift-resp",4,"ngIf"],["class","fas fa-times-circle close-popup",3,"click",4,"ngIf"],["class","shifts-options",3,"click",4,"ngIf"],[3,"disableInput","autofocus","className","loaderClass","data","url","selectedUser"],[1,"points-popup","shift-resp"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"trim-shiftname",3,"nbTooltip"],[1,"fas","fa-times-circle","close-popup",3,"click"],["src","assets/shifts-comment.png","class","shifts-icon",4,"ngIf"],[3,"class",4,"ngIf"],[1,"shift-name"],["class","fas fa-angle-down","style","margin-left:10px;cursor:pointer;",4,"ngIf"],["src","assets/shifts-comment.png",1,"shifts-icon"],[1,"fas","fa-angle-down",2,"margin-left","10px","cursor","pointer"]],template:function(e,t){1&e&&(n._UZ(0,"app-loader",0),n.TgZ(1,"app-sidebar",1),n.NdJ("closeDetails",function(){return t.closeDetails()}),n.TgZ(2,"app-task-comments",2),n.NdJ("onCommentAdd",function(){return t.getData()}),n.qZA(),n.qZA(),n.TgZ(3,"div",3),n.TgZ(4,"nb-layout-column",4),n.YNc(5,Je,11,18,"ng-container",5),n.YNc(6,Se,3,0,"div",6),n.YNc(7,qi,8,22,"div",7),n.qZA(),n.qZA()),2&e&&(n.Q6J("loading",t.loading),n.xp6(1),n.Q6J("showSideBar",t.showComments),n.xp6(1),n.Q6J("selectedTask",t.selectedRowData),n.xp6(3),n.Q6J("ngIf",!t.pageLoading&&t.isStore),n.xp6(1),n.Q6J("ngIf",t.isAzalioPlay||t.isBoringPlay),n.xp6(1),n.Q6J("ngIf",t.dataSource&&t.dataSource.data))},directives:[S.R,yt.k,Kt,x.dP_,b.O5,b.mk,W.t,x.jNv,k.JL,k.sg,A.w5,k.Fj,x.h8i,k.JJ,k.u,A.x0,A.bf,k.nD,b.sg,x.DPz,x.MFI,k.On,x.r3g,I.J,Wt.u,L.x,B.NW,x.ydg,v.BZ,v.w1,v.fO,v.ge,v.Dz,v.ev,N.k,j.D,v.as,v.XQ,v.nj,v.Gk,x.Asz,x.yKW,Xt.s,U.k,R.V],pipes:[b.OU,b.uU],styles:['.assign-azalio-play[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.timesheets_wrapper[_ngcontent-%COMP%]   .wrapper_header[_ngcontent-%COMP%] {\n  background: #f9faff;\n  align-items: center;\n  margin-bottom: 5px;\n  margin-top: 20px;\n  z-index: 3;\n}\n\n.default[_ngcontent-%COMP%] {\n  padding-bottom: 13px;\n  margin-bottom: 0px !important;\n  padding: 10px 0px;\n  margin-top: -12px;\n}\n\n.azalio-play[_ngcontent-%COMP%] {\n  padding-bottom: 0px !important;\n  padding: 10px 0px !important;\n}\n\n.azalio-play-tasks[_ngcontent-%COMP%] {\n  height: 62vh !important;\n}\n\n.assigned-user[_ngcontent-%COMP%] {\n  width: -moz-fit-content;\n  width: fit-content;\n  border-radius: 20px;\n  padding: 2px;\n  padding-left: 10px;\n  padding-right: 10px;\n  padding-bottom: 2px;\n  display: flex !important;\n  align-items: center;\n  background: #d7d2ff;\n  color: #000000;\n  font-size: 12px;\n  margin-left: 2px;\n  margin-top: 7px;\n}\n\n.input-row[_ngcontent-%COMP%]   .sort[_ngcontent-%COMP%] {\n  margin-right: 20px;\n  margin-left: 10px;\n  font-size: 14px;\n  font-weight: 600;\n  color: #6e689b;\n  display: flex;\n  align-items: center;\n}\n\n.pts-options[_ngcontent-%COMP%], .shifts-options[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n}\n\n.shifts-options[_ngcontent-%COMP%] {\n  margin-right: 15px;\n  position: relative;\n}\n\n.shifts-options[_ngcontent-%COMP%]   .shifts-icon[_ngcontent-%COMP%] {\n  width: 30px;\n  height: 30px;\n}\n\n.add-input[_ngcontent-%COMP%] {\n  width: 93%;\n}\n\n.add-input[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n  width: 20px;\n  height: 20px;\n  margin-right: 5px;\n  cursor: pointer;\n}\n\n.tasks-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%] {\n  cursor: auto !important;\n  background-color: white;\n}\n\n.tasks-table[_ngcontent-%COMP%]   .edit-task[_ngcontent-%COMP%] {\n  padding-right: 15px;\n  color: #ddd5d5;\n  border-right: 1px solid #c9c9c9;\n  margin: auto;\n  border-left: 1px solid #c9c9c9;\n  padding-left: 15px;\n}\n\n.tasks-table[_ngcontent-%COMP%]   .edit-task[_ngcontent-%COMP%]:hover {\n  color: #90e0c3;\n}\n\n.tasks-table[_ngcontent-%COMP%]   .delete-task[_ngcontent-%COMP%] {\n  color: #ddd5d5;\n  padding-right: 10px;\n  padding-left: 15px;\n}\n\n.tasks-table[_ngcontent-%COMP%]   .delete-task[_ngcontent-%COMP%]:hover {\n  color: #ffbfc6;\n}\n\n.tasks-table[_ngcontent-%COMP%]   .assign-user[_ngcontent-%COMP%] {\n  color: #ddd5d5;\n  margin-right: 10px;\n}\n\n.tasks-table[_ngcontent-%COMP%]   .assign-user[_ngcontent-%COMP%]:hover {\n  color: #7b68ee;\n}\n\n.tasks-table[_ngcontent-%COMP%]   .assignment[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n}\n\n.tasks-table[_ngcontent-%COMP%]   .priority[_ngcontent-%COMP%] {\n  color: #ddd5d5;\n  padding-right: 10px;\n  font-size: 13px;\n  cursor: pointer;\n}\n\n.tasks-table[_ngcontent-%COMP%]   .priority[_ngcontent-%COMP%]:hover {\n  color: #fb014c;\n}\n\n.tasks-table[_ngcontent-%COMP%]   .enable-priority[_ngcontent-%COMP%] {\n  color: #fb014c;\n}\n\n.right-items[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n}\n\n.taskname[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n}\n\n.tasks[_ngcontent-%COMP%] {\n  top: 3px;\n  overflow: scroll;\n  height: 70vh;\n  padding-bottom: 50px;\n  padding-right: 0px;\n  padding-top: 0px !important;\n}\n\n.timesheets_wrapper[_ngcontent-%COMP%] {\n  overflow: hidden !important;\n}\n\n.select-store[_ngcontent-%COMP%] {\n  display: grid;\n  align-items: center;\n}\n\n.points-popup[_ngcontent-%COMP%] {\n  position: absolute;\n  width: 195px;\n  right: 99px;\n  padding-top: 10px;\n  z-index: 3;\n  top: 30px;\n}\n\n.points-popup[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\n  font-size: 13px;\n  display: flex;\n  cursor: pointer;\n  color: black;\n}\n\n.points-popup[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  margin-right: 3px;\n  width: 20px;\n  display: flex;\n  justify-content: center;\n}\n\n.points-popup[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n  margin-right: 10px;\n  height: -moz-fit-content;\n  height: fit-content;\n}\n\n.filter-popup[_ngcontent-%COMP%] {\n  position: absolute;\n  width: 180px;\n  left: 80px;\n  padding-top: 10px;\n  z-index: 3;\n  top: 0px;\n}\n\n.context-menu[_ngcontent-%COMP%] {\n  position: relative;\n}\n\n.sort-list[_ngcontent-%COMP%] {\n  background-color: white;\n  margin-top: 20px;\n  border-radius: 5px !important;\n  box-shadow: 0 19px 38px rgba(0, 0, 0, 0.3), 0 15px 12px rgba(0, 0, 0, 0.22) !important;\n}\n\nli[_ngcontent-%COMP%] {\n  list-style: none;\n  padding: 7px;\n  background-color: white;\n  padding-left: 13px;\n}\n\n.filter-options[_ngcontent-%COMP%] {\n  padding-left: 0;\n  border-radius: 10px !important;\n  box-shadow: 0 19px 38px rgba(0, 0, 0, 0.3), 0 15px 12px rgba(0, 0, 0, 0.22) !important;\n  background: white;\n}\n\n.filter-options[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  width: 13px;\n  margin-right: 7px;\n}\n\n.options[_ngcontent-%COMP%] {\n  list-style: none;\n  font-size: 13px;\n  color: #6e689b;\n  display: flex;\n  border-radius: 5px;\n}\n\n.edit_row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] {\n  background-color: #ece8fb;\n}\n\n.edit_row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .edit-task[_ngcontent-%COMP%] {\n  color: #ff3384;\n}\n\n.edit_row[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%] {\n  background-color: #ece8fb !important;\n}\n\n.tasks-module[_ngcontent-%COMP%]   [nbButton].appearance-filled.status-primary[_ngcontent-%COMP%], .tasks-module[_ngcontent-%COMP%]   .appearance-filled.status-primary[nbButtonToggle][_ngcontent-%COMP%] {\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.02), 0 1px 3px rgba(0, 0, 0, 0.14) !important;\n  background: #7b68ee;\n  color: white;\n  margin-left: 10px;\n  font-weight: 600 !important;\n}\n\n.cancel-task[_ngcontent-%COMP%]   [nbButton].appearance-outline.status-primary[_ngcontent-%COMP%], .cancel-task[_ngcontent-%COMP%]   .appearance-outline.status-primary[nbButtonToggle][_ngcontent-%COMP%] {\n  text-transform: capitalize !important;\n  font-size: 13px !important;\n}\n\n.name-field[_ngcontent-%COMP%] {\n  font-size: 14px !important;\n}\n\n.comment-field[_ngcontent-%COMP%] {\n  color: #a5a5a5;\n}\n\nli[_ngcontent-%COMP%]:hover {\n  list-style: none;\n  padding: 7px;\n  background-color: #eae6ff;\n  color: #7b68ee;\n  padding-left: 13px;\n  font-weight: 600;\n  border-radius: 0px !important;\n}\n\n.align-col[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n}\n\n.ml-4[_ngcontent-%COMP%] {\n  margin-left: 4px;\n}\n\n.comment-txt[_ngcontent-%COMP%] {\n  padding-left: 3px;\n  padding-right: 3px;\n}\n\n.selected[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] {\n  background-color: #ece8fb !important;\n}\n\n.selected-shift-row[_ngcontent-%COMP%] {\n  background-color: #f6f4ff !important;\n  border-radius: 0px !important;\n}\n\n@media (max-width: 930px) and (min-width: 700px) {\n  .action[_ngcontent-%COMP%] {\n    margin-left: -6px;\n  }\n\n  .label-txt[_ngcontent-%COMP%] {\n    margin-right: -6px;\n  }\n\n  .assignment-txt[_ngcontent-%COMP%] {\n    margin-right: 2px;\n    margin-bottom: 10px;\n    margin-top: 10px;\n  }\n}\n\n@media (max-width: 700px) and (min-width: 350px) {\n  .action[_ngcontent-%COMP%] {\n    margin-left: -14px;\n  }\n\n  .task-txt[_ngcontent-%COMP%] {\n    margin-right: 12px;\n  }\n\n  .label-txt[_ngcontent-%COMP%] {\n    margin-right: -10px;\n  }\n}\n\n@media (max-width: 350px) {\n  .task-done[_ngcontent-%COMP%] {\n    width: 80px;\n  }\n\n  .text[_ngcontent-%COMP%] {\n    display: flex;\n    flex-direction: column;\n  }\n\n  .action[_ngcontent-%COMP%] {\n    margin-left: -25px;\n  }\n\n  .label-txt[_ngcontent-%COMP%] {\n    margin-right: -21px;\n  }\n}\n\n@media (max-width: 930px) and (min-width: 320px) {\n  .azalioplay[_ngcontent-%COMP%]   .user-assign[_ngcontent-%COMP%] {\n    display: flex !important;\n    align-items: baseline;\n  }\n  .azalioplay[_ngcontent-%COMP%]   .assign-azalio-play[_ngcontent-%COMP%] {\n    align-items: flex-start;\n    flex-direction: column;\n    justify-content: center;\n  }\n  .azalioplay[_ngcontent-%COMP%]   .assign-user[_ngcontent-%COMP%] {\n    margin-left: 8px;\n    margin-top: 10px;\n  }\n  .azalioplay[_ngcontent-%COMP%]   .label-txt[_ngcontent-%COMP%] {\n    margin-right: 8px;\n  }\n  .azalioplay[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%] {\n    margin-left: -9px;\n  }\n  .azalioplay[_ngcontent-%COMP%]   .edit-task[_ngcontent-%COMP%] {\n    border-left: 0px solid #c9c9c9;\n  }\n  .azalioplay[_ngcontent-%COMP%]   .assign-task[_ngcontent-%COMP%] {\n    margin-bottom: 10px;\n  }\n}\n\n@media (max-width: 400px) {\n  .tasks-module[_ngcontent-%COMP%]   [nbButton].appearance-filled.status-primary[_ngcontent-%COMP%], .tasks-module[_ngcontent-%COMP%]   .appearance-filled.status-primary[nbButtonToggle][_ngcontent-%COMP%] {\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.02), 0 1px 3px rgba(0, 0, 0, 0.14) !important;\n    background: #7b68ee;\n    color: white;\n    margin-left: 5px;\n    margin-right: 0px !important;\n    font-weight: 600 !important;\n  }\n}\n\n.assign_row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] {\n  background-color: #ece8fb;\n}\n\n.assign_row[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%] {\n  background-color: #ece8fb !important;\n}\n\n.assign_row[_ngcontent-%COMP%]   .assign-user[_ngcontent-%COMP%] {\n  color: #7b68ee;\n}\n\n.scroll-none[_ngcontent-%COMP%] {\n  touch-action: none;\n  -webkit-overflow-scrolling: none;\n  overflow: hidden;\n  overscroll-behavior: none;\n  scrollbar-gutter: stable;\n}\n\n@media (max-width: 930px) {\n  .tasks-table[_ngcontent-%COMP%]   .assignment[_ngcontent-%COMP%] {\n    display: inline-block;\n  }\n  .tasks-table[_ngcontent-%COMP%]   .assign-user[_ngcontent-%COMP%] {\n    border-right: 0px;\n  }\n}\n\n@media (max-width: 600px) {\n  .assign-task-play[_ngcontent-%COMP%] {\n    margin-top: 41px !important;\n  }\n\n  .default[_ngcontent-%COMP%] {\n    margin-bottom: 10px !important;\n  }\n\n  .assign-task[_ngcontent-%COMP%] {\n    margin-top: 5px;\n    margin-left: 0px !important;\n    flex-direction: column;\n    align-items: initial !important;\n    margin-bottom: 10px !important;\n  }\n\n  .input-row[_ngcontent-%COMP%]   .sort[_ngcontent-%COMP%] {\n    margin-right: 16px;\n    margin-left: 10px;\n    margin-bottom: 5px;\n  }\n\n  .points-popup[_ngcontent-%COMP%] {\n    top: 73px;\n    right: 50px !important;\n  }\n\n  .shifts-resp[_ngcontent-%COMP%] {\n    top: 19px;\n  }\n\n  .default[_ngcontent-%COMP%]   .points-popup[_ngcontent-%COMP%] {\n    top: 30px !important;\n  }\n}\n\n@media (max-width: 1200px) {\n  .assigned-user[_ngcontent-%COMP%] {\n    max-width: 145px;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    display: inline-block;\n  }\n}\n\n.all-stores[_ngcontent-%COMP%] {\n  background: #dcfef5 !important;\n  color: #00523ce0 !important;\n  border-radius: 4px;\n  padding: 3px;\n  display: inline-block;\n  text-align: center;\n  width: 80px;\n  padding-right: 10px;\n  padding-left: 10px;\n  margin-bottom: 5px;\n  margin-top: 5px;\n}\n\n.assign-task[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  margin-bottom: 10px;\n  margin-left: 7px;\n  justify-content: flex-end;\n  margin-top: 0px;\n  width: 91%;\n}\n\n.assign-task-play[_ngcontent-%COMP%], .default[_ngcontent-%COMP%] {\n  justify-content: space-between !important;\n}\n\n.name-field[_ngcontent-%COMP%] {\n  cursor: pointer;\n  width: 100%;\n  line-height: 1.3;\n  display: flex;\n  align-items: center;\n}\n\n.points[_ngcontent-%COMP%] {\n  display: inline-flex;\n}\n\n.points[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n  height: -moz-fit-content;\n  height: fit-content;\n  margin-right: 5px;\n}\n\n.custom-points[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n}\n\n.add-point[_ngcontent-%COMP%] {\n  color: #22be90;\n  font-size: 16px;\n  margin-left: 7px;\n  margin-right: 4px !important;\n  display: flex;\n  align-items: center;\n}\n\n.add-options[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n}\n\n.disabled[_ngcontent-%COMP%] {\n  color: #b3b3b3 !important;\n  cursor: auto !important;\n}\n\n.disabled[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  color: #b3b3b3 !important;\n}\n\n.disabled[_ngcontent-%COMP%]:hover {\n  font-weight: 400 !important;\n}\n\n.shifts-count[_ngcontent-%COMP%] {\n  color: #262626;\n  padding: 7px;\n  border-radius: 10px;\n  height: 20px;\n  width: 70px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: 500;\n  font-size: 13px;\n}\n\n.fs-icon[_ngcontent-%COMP%] {\n  margin-left: 4px;\n  cursor: pointer;\n  font-size: 11px;\n  position: relative;\n}\n\n.edit-task[_ngcontent-%COMP%]   [nbButton].appearance-filled.status-danger[_ngcontent-%COMP%], .edit-task[_ngcontent-%COMP%]   .appearance-filled.status-danger[nbButtonToggle][_ngcontent-%COMP%] {\n  background-color: #ff3384 !important;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.02), 0 1px 3px rgba(0, 0, 0, 0.14) !important;\n  color: white !important;\n  margin-left: 10px;\n  font-weight: 600 !important;\n  min-width: 75px !important;\n  height: 35px !important;\n}\n\n.cancel-task[_ngcontent-%COMP%] {\n  text-transform: capitalize !important;\n  font-size: 13px !important;\n  background: #f9faff !important;\n}\n\n.add-task-option[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  margin-left: 10px;\n}\n\n.option-txt[_ngcontent-%COMP%] {\n  margin-right: 15px;\n}\n\n.assign-pts[_ngcontent-%COMP%] {\n  width: 26px;\n  display: flex;\n  justify-content: center;\n}\n\n.task-assignment-popup[_ngcontent-%COMP%]   .shifts-options[_ngcontent-%COMP%] {\n  margin-bottom: 10px;\n}\n\n.task-assignment-popup[_ngcontent-%COMP%]   .shift-name[_ngcontent-%COMP%] {\n  margin-left: 10px;\n}\n\n.task-assignment-popup[_ngcontent-%COMP%]   .points-popup[_ngcontent-%COMP%] {\n  position: absolute;\n  width: 195px;\n  right: 9px;\n  padding-top: 10px;\n  z-index: 3;\n  top: 13px;\n}\n\n.task-assignment-popup[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  font-size: 14px;\n}\n\n.assignment-details[_ngcontent-%COMP%] {\n  margin-bottom: 3px;\n  cursor: pointer;\n  padding: 2px;\n  padding-left: 7px;\n  padding-right: 7px;\n  display: flex;\n}\n\n.assignment-details[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  margin-right: 7px;\n  width: 15px;\n}\n\n.shift-assignment[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: flex-start;\n  flex-direction: column;\n  width: 160px;\n  padding-right: 10px;\n}\n\n.assignment-details[_ngcontent-%COMP%]:hover {\n  background: #ece9ff;\n  border-radius: 15px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.02), 0 1px 3px rgba(0, 0, 0, 0.14) !important;\n}\n\n.azalio-play-asignment[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n}\n\n.reports-btn[_ngcontent-%COMP%] {\n  color: #7b68ee !important;\n  background-color: white !important;\n  margin-left: 0px !important;\n  border: 1px solid #7b68ee !important;\n  margin-right: 10px;\n  width: 100px;\n  height: 32px;\n  display: flex;\n  align-items: baseline;\n}\n\n.reports-row[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 15px;\n  align-items: center;\n}\n\n.selected[_ngcontent-%COMP%] {\n  background-color: #ece8fb !important;\n}\n\n.selected-shift[_ngcontent-%COMP%] {\n  background-color: #b5aaff !important;\n  color: black !important;\n  border: 1px solid #6e689b !important;\n  position: relative;\n}\n\n.left-items[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  z-index: 4;\n}\n\n.right-actions[_ngcontent-%COMP%] {\n  color: #7b68ee;\n  text-decoration: underline;\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n}\n\n.trim-shiftname[_ngcontent-%COMP%] {\n  min-width: 115px;\n  max-width: 145px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.shift-details[_ngcontent-%COMP%] {\n  width: 170px;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  background: #ffffff;\n  padding-left: 12px;\n  padding-right: 12px;\n  border-bottom-right-radius: 5px;\n  color: #6e689b;\n  border-top-right-radius: 5px;\n  \n  font-size: 13px;\n  font-weight: 600;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  margin-right: 10px;\n  border-radius: 3px;\n  box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;\n  border-left: 1.2px solid #6e689b;\n  cursor: pointer;\n}\n\n.desp-label[_ngcontent-%COMP%] {\n  margin-left: 5px;\n  margin-right: 5px;\n  color: black;\n}\n\n.tasks-info[_ngcontent-%COMP%] {\n  align-items: center;\n  display: flex;\n  justify-content: space-between;\n  margin-top: 6px;\n  width: 100%;\n}\n\n.tasks-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  color: #4838b3;\n}\n\n.tasks-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n  height: -moz-fit-content;\n  height: fit-content;\n  margin-left: 55px;\n}\n\n.swipe-next[_ngcontent-%COMP%] {\n  font-size: 15px !important;\n  display: flex;\n  align-items: center;\n  color: #ddd5d5 !important;\n  cursor: pointer;\n  margin-left: -3px;\n}\n\n.swipe-next[_ngcontent-%COMP%]:hover {\n  color: #7b68ee !important;\n}\n\n.float-container[_ngcontent-%COMP%] {\n  position: fixed;\n  top: 130px;\n  right: 0;\n  display: flex;\n  flex-direction: column;\n  width: auto;\n  align-items: flex-end;\n  z-index: 10;\n}\n\n.float-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\n  z-index: 10;\n  display: flex;\n  width: 145px;\n  height: 40px;\n  margin-right: -100px;\n  margin-bottom: 10px;\n  padding: 5px 15px;\n  transition: all 0.3s ease-in-out;\n  text-decoration: none;\n  color: white;\n  border-color: #2adecf;\n  border-radius: 5px 0 0 5px;\n  background-color: #ff7373;\n  box-shadow: 0 2px 4px #7d7d7d;\n  align-items: center;\n  justify-content: flex-start;\n  font-size: 14px;\n  font-weight: 600;\n}\n\n.float-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover {\n  margin-right: 0;\n  background-color: #ff7373;\n  box-shadow: 0 2px 4px #7d7d7d;\n}\n\n.float-container[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:before {\n  font-family: "Font Awesome 5 Free";\n  margin-right: 15px;\n  transition: all 0.25s ease-in-out;\n}\n\n.icon.one[_ngcontent-%COMP%]:before {\n  content: "\\f15c";\n  font-size: 22px !important;\n}\n\n.shift-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  margin-right: 5px;\n  width: 12px;\n}\n\n@media (max-width: 930px) {\n  .input-row[_ngcontent-%COMP%] {\n    flex-direction: column;\n    align-items: flex-end;\n  }\n\n  .shift-cards[_ngcontent-%COMP%] {\n    overflow: auto;\n    padding-bottom: 10px;\n    margin-top: 0px;\n    margin-bottom: 10px;\n    padding-top: 10px;\n  }\n\n  .right-items[_ngcontent-%COMP%] {\n    flex-direction: column;\n    justify-content: flex-end;\n    width: 100%;\n    align-items: flex-end;\n  }\n\n  .search-task[_ngcontent-%COMP%] {\n    margin-bottom: 12px;\n    margin-right: 10px;\n  }\n\n  .reports-row[_ngcontent-%COMP%] {\n    margin-top: 10px;\n    flex-direction: column;\n    align-items: inherit !important;\n  }\n\n  .filter-popup[_ngcontent-%COMP%] {\n    left: -42px !important;\n  }\n\n  .task-assignment-popup[_ngcontent-%COMP%]   .points-popup[_ngcontent-%COMP%] {\n    width: 195px;\n    right: 9px;\n  }\n}\n\n.container-cards[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n}\n\n.container-cards[_ngcontent-%COMP%]   .shift-icon[_ngcontent-%COMP%] {\n  width: 130px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.container-cards[_ngcontent-%COMP%]   .clear-filter[_ngcontent-%COMP%] {\n  color: #e91e63;\n  font-weight: 500;\n  position: absolute;\n  right: -5px;\n  top: -5px;\n  font-size: 16px;\n}\n\n.no-shifts[_ngcontent-%COMP%] {\n  position: absolute !important;\n  left: 0px;\n  bottom: 0px;\n}\n\n.default-row[_ngcontent-%COMP%] {\n  margin-top: 10px !important;\n  justify-content: flex-end !important;\n  position: relative;\n  margin-bottom: 25px;\n}\n\n@media (max-width: 1200px) and (min-width: 930px) {\n  .shift-details[_ngcontent-%COMP%] {\n    width: 157px !important;\n  }\n\n  .input-row[_ngcontent-%COMP%] {\n    flex-direction: column;\n    justify-content: flex-end;\n    align-items: flex-end;\n  }\n  .input-row[_ngcontent-%COMP%]   .sort[_ngcontent-%COMP%] {\n    margin-top: 13px;\n    margin-bottom: 5px;\n  }\n\n  .search-task[_ngcontent-%COMP%] {\n    margin-top: -17px;\n    margin-right: 15px;\n  }\n}\n\n@media (max-width: 1200px) {\n  .filter-popup[_ngcontent-%COMP%] {\n    left: initial !important;\n    right: 0px !important;\n  }\n}\n\n@media (max-width: 1200px) and (orientation: landscape) {\n  .azalio-play-tasks[_ngcontent-%COMP%] {\n    height: 40vh !important;\n    padding-bottom: 20px !important;\n    overflow: scroll;\n  }\n}\n\n.small-devices-container[_ngcontent-%COMP%] {\n  display: none;\n}\n\n.display[_ngcontent-%COMP%] {\n  display: block !important;\n  z-index: 100;\n  position: fixed !important;\n  left: 67% !important;\n  top: 30% !important;\n  transform: translate(-50%, 0%) !important;\n}\n\n.task-assignment-popup[_ngcontent-%COMP%]   .filter-options[_ngcontent-%COMP%] {\n  max-height: 135px;\n  overflow: auto;\n}\n\n.task-assignment-popup[_ngcontent-%COMP%]   .shift-name[_ngcontent-%COMP%] {\n  max-width: 120px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.close-popup[_ngcontent-%COMP%] {\n  position: absolute;\n  right: 7px;\n  color: #e91e63;\n  font-size: 16px !important;\n}\n\n.task-occurences[_ngcontent-%COMP%] {\n  align-items: center;\n  margin-bottom: 3px;\n  display: flex;\n}\n\n.task-occurences[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  margin-right: 7px;\n  width: 15px;\n}\n\n.shift-task[_ngcontent-%COMP%] {\n  width: 250px !important;\n  right: 120px;\n}\n\n.shift-task[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\n  padding: 3px;\n  padding-left: 12px;\n  padding-right: 10px;\n  border-radius: 5px;\n}\n\n.add-occurences[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: flex-end;\n  width: 40%;\n}\n\n.shift-info[_ngcontent-%COMP%] {\n  display: flex;\n  width: 60%;\n  align-items: center;\n  margin-top: 5px;\n  margin-bottom: 5px;\n}\n\n.occurences-input[_ngcontent-%COMP%] {\n  width: 25%;\n  display: flex;\n  justify-content: flex-end;\n  position: relative;\n}\n\n.heading-text[_ngcontent-%COMP%] {\n  font-size: 14px;\n  font-weight: 600;\n  color: #6e689b;\n  margin-top: 7px;\n}\n\n.select-shift[_ngcontent-%COMP%] {\n  width: 15%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.highlighted-shift[_ngcontent-%COMP%] {\n  font-weight: 600;\n}\n\n.occurrence-icon[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 6px;\n  right: -4px;\n  color: #c8c4ec;\n}\n\n.default-icon[_ngcontent-%COMP%] {\n  width: 20px;\n  height: 20px !important;\n  display: flex;\n  justify-content: center;\n  margin-right: 8px !important;\n}\n\n.top-row-dropdown[_ngcontent-%COMP%] {\n  background: #ebe8ff;\n  border-bottom-left-radius: 0px !important;\n  padding-bottom: 5px !important;\n  border-bottom-right-radius: 0px !important;\n}\n\n.disabled-field[_ngcontent-%COMP%], .disbaled-field[_ngcontent-%COMP%]:focus {\n  color: #8f9bb37a;\n  background-color: #f7f9fc;\n  border-color: #e4e9f2 !important;\n}\n\n.disabled-field[_ngcontent-%COMP%]:hover {\n  border-color: #e4e9f2 !important;\n}\n\n.play-edit[_ngcontent-%COMP%] {\n  width: 85%;\n}\n\n.sch-task[_ngcontent-%COMP%] {\n  border-radius: 20px;\n  padding: 2px;\n  padding-left: 10px;\n  padding-right: 10px;\n  padding-bottom: 0px;\n  display: flex;\n  align-items: baseline;\n  background: #d7d2ff;\n  color: #000000;\n  font-size: 12px;\n  margin-left: 12px;\n  min-width: 121px;\n}\n\n.sch-task[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  margin-right: 4px;\n  color: #988de7;\n}\n\n@media (max-width: 930px) {\n  .name-field[_ngcontent-%COMP%] {\n    flex-direction: column;\n    align-items: flex-start !important;\n  }\n\n  .sch-task[_ngcontent-%COMP%] {\n    margin-left: 0px !important;\n  }\n}\n\n.task-shift[_ngcontent-%COMP%] {\n  cursor: pointer;\n  display: inline-flex;\n  align-items: center;\n}\n\n.task-shift[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n  margin-right: 5px;\n  width: 16px;\n}\n\n.categories[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n  font-size: 10px;\n  margin-right: 5px;\n}\n\n.categories[_ngcontent-%COMP%]   .category-name[_ngcontent-%COMP%] {\n  color: #737373;\n}\n\n.categories[_ngcontent-%COMP%]   .mr_05[_ngcontent-%COMP%] {\n  margin-right: 5px;\n}\n\n.categories[_ngcontent-%COMP%]   .tag-container[_ngcontent-%COMP%] {\n  display: inline-block;\n}\n\n@media (min-width: 931px) {\n  .filters-wrapper[_ngcontent-%COMP%] {\n    display: none;\n  }\n}\n\n@media (max-width: 930px) {\n  .filters-wrapper[_ngcontent-%COMP%] {\n    display: flex;\n    color: #6e689b;\n    background: #f9faff;\n    padding: px 4px !important;\n  }\n}\n\n@media (max-width: 750px) {\n  .left-items[_ngcontent-%COMP%] {\n    z-index: 2;\n  }\n}\n\n@media (max-width: 500px) {\n  .no-shifts[_ngcontent-%COMP%] {\n    position: initial !important;\n  }\n}\n\n.task-label[_ngcontent-%COMP%] {\n  display: flex;\n  font-size: 12px;\n  display: none;\n}\n\n@media (max-width: 930px) {\n  .task-label[_ngcontent-%COMP%] {\n    left: 147px;\n    top: 33px;\n  }\n}\n\n.user-tag[_ngcontent-%COMP%] {\n  color: #B0C4DE;\n  font-size: 11px;\n  margin-right: 3px;\n}\n\n.task-label[_ngcontent-%COMP%]:hover {\n  text-decoration: underline;\n  cursor: pointer;\n}\n\n.categories[_ngcontent-%COMP%]:hover {\n  font-weight: 600;\n  font-weight: bold;\n  cursor: pointer;\n}']}),i}(),Ni=[{path:"",component:function(){var i=function(){function o(e){(0,P.Z)(this,o),this.gs=e}return(0,Z.Z)(o,[{key:"ngOnInit",value:function(){this.gs.hideSplashScreen()}}]),o}();return i.\u0275fac=function(e){return new(e||i)(n.Y36(O.m))},i.\u0275cmp=n.Xpm({type:i,selectors:[["app-tasks-page"]],decls:1,vars:0,template:function(e,t){1&e&&n._UZ(0,"app-tasks-table-view")},directives:[Ji],styles:[""]}),i}()},{path:"report",component:pt},{path:"dailyReport",component:Sn}],Ui=function(){var i=(0,Z.Z)(function o(){(0,P.Z)(this,o)});return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=n.oAB({type:i}),i.\u0275inj=n.cJS({imports:[[D.Bz.forChild(Ni)],D.Bz]}),i}(),Ii=m(5032),Ri=function(){var i=(0,Z.Z)(function o(){(0,P.Z)(this,o)});return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=n.oAB({type:i}),i.\u0275inj=n.cJS({imports:[[b.ez,Ui,Ii.m,K.Rq]]}),i}()}}]);